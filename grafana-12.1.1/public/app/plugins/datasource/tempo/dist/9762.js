"use strict";(globalThis.webpackChunktempo=globalThis.webpackChunktempo||[]).push([[9762],{3887:(e,t,r)=>{r.r(t),r.d(t,{default:()=>jt});var n=r(9728),a=r(6089),o=r(5959),i=r(7781),s=r(8531),l=r(2007),c=r(9605),u=r(8146),p=r.n(u);function d({query:e,lang:t,className:r}){const o=(0,l.useTheme2)(),i=g(o),s=p().highlight(e,t.grammar,t.name);return(0,n.jsx)("div",{className:(0,a.cx)(i.editorField,"prism-syntax-highlight",r),"aria-label":"selector",dangerouslySetInnerHTML:{__html:s}})}const g=e=>({editorField:(0,a.css)({fontFamily:e.typography.fontFamilyMonospace,fontSize:e.typography.bodySmall.fontSize})});var f=r(3292),m=r(2381),y=r(6490),h=r(4326);function v({title:e,children:t,collapsedInfo:r,queryStats:a,onToggle:o,isOpen:i}){const[c,u]=(0,m.A)(!1),p=(0,l.useStyles2)(b);return(0,n.jsxs)("div",{className:p.wrapper,children:[(0,n.jsx)(l.Collapse,{className:p.collapse,collapsible:!0,isOpen:null!=i?i:c,onToggle:null!=o?o:u,label:(0,n.jsxs)(l.Stack,{gap:0,children:[(0,n.jsx)("h6",{className:p.title,children:e}),!c&&(0,n.jsx)("div",{className:p.description,children:r.map(((e,t)=>(0,n.jsx)("span",{children:e},t)))})]}),children:(0,n.jsx)("div",{className:p.body,children:t})}),a&&s.config.featureToggles.lokiQuerySplitting&&(0,n.jsx)(l.Tooltip,{content:"Note: the query will be split into multiple parts and executed in sequence. Query limits will only apply each individual part.",children:(0,n.jsx)(l.Icon,{tabIndex:0,name:"info-circle",className:p.tooltip,size:"sm"})}),a&&(0,n.jsx)("p",{className:p.stats,children:j(a)})]})}const b=e=>({collapse:(0,a.css)({backgroundColor:"unset",border:"unset",marginBottom:0,"> button":{padding:e.spacing(0,1)}}),wrapper:(0,a.css)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"baseline"}),title:(0,a.css)({flexGrow:1,overflow:"hidden",fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.fontWeightMedium,margin:0}),description:(0,a.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.bodySmall.fontWeight,paddingLeft:e.spacing(2),gap:e.spacing(2),display:"flex"}),body:(0,a.css)({display:"flex",gap:e.spacing(2),flexWrap:"wrap"}),stats:(0,a.css)({margin:"0px",color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize}),tooltip:(0,a.css)({marginRight:e.spacing(.25)})}),j=e=>e.message?e.message:`This query will process approximately ${M(e)}.`,M=e=>{const{text:t,suffix:r}=(0,i.getValueFormat)("bytes")(e.bytes,1);return t+r};var O=r(9638);function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){T(e,t,r[t])}))}return e}function x(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const S=(e,t)=>{const r=parseInt(e,10);return isNaN(r)?t:r},w=o.memo((({onChange:e,query:t,searchStreaming:r,metricsStreaming:a,app:o})=>{const s=(0,l.useStyles2)(I),[c,u]=(0,m.A)(!1),p=o===i.CoreApp.UnifiedAlerting;t.hasOwnProperty("limit")||(t.limit=O.eH),t.hasOwnProperty("tableType")||(t.tableType=f.Jv.Traces),t.hasOwnProperty("metricsQueryType")||(t.metricsQueryType=f.Ag.Range),p&&t.metricsQueryType===f.Ag.Range&&e(x(A({},t),{metricsQueryType:f.Ag.Instant}));const d=[`Limit: ${t.limit||O.eH}`,`Spans Limit: ${t.spss||O.m9}`,"Table Format: "+(t.tableType===f.Jv.Traces?"Traces":"Spans"),"|","Streaming: "+(r?"Enabled":"Disabled")],g=[`Step: ${t.step||"auto"}`,"Type: "+(t.metricsQueryType===f.Ag.Range?"Range":"Instant"),"|","Streaming: "+(a?"Enabled":"Disabled")];return(0,n.jsx)(y.U,{children:(0,n.jsxs)("div",{className:s.options,children:[!p&&(0,n.jsxs)(v,{title:"Search Options",collapsedInfo:d,isOpen:c,onToggle:u,children:[(0,n.jsx)(h.c,{label:"Limit",tooltip:"Maximum number of traces to return.",children:(0,n.jsx)(l.AutoSizeInput,{className:"width-4",placeholder:"auto",type:"number",min:1,defaultValue:t.limit||O.eH,onCommitChange:r=>{e(x(A({},t),{limit:S(r.currentTarget.value,O.eH)}))},value:t.limit})}),(0,n.jsx)(h.c,{label:"Span Limit",tooltip:"Maximum number of spans to return for each span set.",children:(0,n.jsx)(l.AutoSizeInput,{className:"width-4",placeholder:"auto",type:"number",min:1,defaultValue:t.spss||O.m9,onCommitChange:r=>{e(x(A({},t),{spss:S(r.currentTarget.value,O.m9)}))},value:t.spss})}),(0,n.jsx)(h.c,{label:"Table Format",tooltip:"How the query data should be displayed in the results table",children:(0,n.jsx)(l.RadioButtonGroup,{options:[{label:"Traces",value:f.Jv.Traces},{label:"Spans",value:f.Jv.Spans}],value:t.tableType,onChange:r=>{e(x(A({},t),{tableType:r}))}})}),(0,n.jsx)(h.c,{label:"Streaming",tooltip:(0,n.jsx)(C,{}),tooltipInteractive:!0,children:(0,n.jsx)("div",{children:r?"Enabled":"Disabled"})})]}),(0,n.jsxs)(v,{title:"Metrics Options",collapsedInfo:g,isOpen:c,onToggle:u,children:[!p&&(0,n.jsx)(h.c,{label:"Step",tooltip:"Defines the step for metric queries. Use duration notation, for example 30s or 1m",children:(0,n.jsx)(l.AutoSizeInput,{className:"width-4",placeholder:"auto",type:"string",defaultValue:t.step,onCommitChange:r=>{e(x(A({},t),{step:r.currentTarget.value}))},value:t.step})}),(0,n.jsx)(h.c,{label:"Type",tooltip:"Type of metrics query to run",children:(0,n.jsx)(l.RadioButtonGroup,{options:[{label:"Range",value:f.Ag.Range},{label:"Instant",value:f.Ag.Instant}],value:t.metricsQueryType,onChange:r=>{e(x(A({},t),{metricsQueryType:r}))},disabled:p})}),(0,n.jsx)(h.c,{label:"Streaming",tooltip:(0,n.jsx)(C,{}),tooltipInteractive:!0,children:(0,n.jsx)("div",{children:a?"Enabled":"Disabled"})})]})]})})})),C=()=>(0,n.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,n.jsx)("span",{children:"Indicates if streaming is currently enabled. Streaming allows you to view partial query results before the entire query completes."}),(0,n.jsx)("a",{href:"https://grafana.com/docs/tempo/latest/traceql/#stream-query-results","aria-label":"Learn more about streaming query results",target:"_blank",rel:"noreferrer",style:{textDecoration:"underline"},children:"Learn more"})]});w.displayName="TempoQueryBuilderOptions";const I=e=>({options:(0,a.css)({display:"flex",width:"-webkit-fill-available",gap:e.spacing(1),"> div":{width:"auto"}})});var N=r(103);function D({query:e,onChange:t}){return e.groupBy?(0,n.jsxs)(l.Alert,{title:"",severity:"info",children:["The aggregate by feature has been removed. We recommend using Traces Drilldown app instead.  ",(0,n.jsx)(l.Button,{onClick:t,children:"Remove aggregate by from this query"})]}):null}var P=r(9183);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){E(e,t,r[t])}))}return e}function L(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const z=/^(\$\w+)|(\d+(?:\.\d)?\d*(?:us|µs|ns|ms|s|m|h))$/,R=()=>({noBoxShadow:(0,a.css)({boxShadow:"none","*:focus":{boxShadow:"none"}})}),k=({filter:e,operators:t,updateFilter:r})=>{const a=(0,l.useStyles2)(R);let o=!1;return"string"==typeof e.value&&(o=!!e.value&&!z.test(e.value.concat(""))),(0,n.jsxs)(l.Stack,{gap:0,children:[(0,n.jsx)(l.Select,{className:a.noBoxShadow,inputId:`${e.id}-operator`,options:t.map(P.wu),value:e.operator,onChange:t=>{r(L(_({},e),{operator:null==t?void 0:t.value}))},isClearable:!1,"aria-label":`select ${e.id} operator`,allowCustomValue:!0,width:8}),(0,n.jsx)(l.Input,{className:a.noBoxShadow,value:e.value,onChange:t=>{r(L(_({},e),{value:t.currentTarget.value}))},placeholder:"e.g. 100ms, 1.2s","aria-label":`select ${e.id} value`,invalid:o,width:18})]})},F=({label:e,tooltip:t,children:r})=>(0,n.jsx)(l.InlineFieldRow,{children:(0,n.jsx)(l.InlineField,{label:e,labelWidth:28,grow:!0,tooltip:t,children:r})});var q=r(318),Q=r(5876);function V(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Y(e,t,r[t])}))}return e}function B(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const U=["min-duration","max-duration","status"],$=({datasource:e,query:t,onChange:r,onClearResults:a,app:i,addVariablesToOptions:u=!0})=>{var p,g,m,y,h,v;const b=(0,l.useStyles2)(G),[j,M]=(0,o.useState)(),[O,T]=(0,o.useState)(null),[A,x]=(0,o.useState)(!0),[S,C]=(0,o.useState)(""),I=(0,s.getTemplateSrv)(),E=(0,o.useCallback)((e=>{var n;const a=W({},t);(n=a).filters||(n.filters=[]);const o=a.filters.findIndex((t=>t.id===e.id));o>=0?a.filters=(0,P._D)(a.filters,o,e):a.filters.push(e),r(a)}),[r,t]),_=(0,s.getTemplateSrv)().getVariables();(0,o.useEffect)((()=>{C(e.languageProvider.generateQueryFromFilters({traceqlFilters:(0,P.tH)(t.filters||[])}))}),[e.languageProvider,t,_]);const L=(0,o.useCallback)((e=>{var r;return null===(r=t.filters)||void 0===r?void 0:r.find((t=>t.id===e))}),[t.filters]);(0,o.useEffect)((()=>{const t=function(){var t,r=(t=function*(){try{yield e.languageProvider.start(),x(!1),M(void 0)}catch(e){e instanceof Error&&M(`Error: ${e.message}`)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){V(o,n,a,i,s,"next",e)}function s(e){V(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();t()}),[e,M]),(0,o.useEffect)((()=>{var t,r;null===(r=e.search)||void 0===r||null===(t=r.filters)||void 0===t||t.filter((e=>e.value)).forEach((e=>{L(e.id)||E(e)}))}),[null===(p=e.search)||void 0===p?void 0:p.filters,L,E]);const z=(null===(m=e.search)||void 0===m||null===(g=m.filters)||void 0===g?void 0:g.map((e=>e.tag)))||[];z.push("duration"),z.push("traceDuration"),z.push("span:duration"),z.push("trace:duration"),z.push("status"),z.push("span:status");const R=(t.filters||[]).filter((t=>{var r,n;return!U.includes(t.id)&&-1===((null===(n=e.search)||void 0===n||null===(r=n.filters)||void 0===r?void 0:r.findIndex((e=>e.id===t.id)))||0)&&"duration-type"!==t.id})),Y=r=>{var n;if(!r)return S;const a=(null===(n=t.filters)||void 0===n?void 0:n.filter((e=>e.id!==r.id)))||[];return e.languageProvider.generateQueryFromFilters({traceqlFilters:(0,P.tH)(a||[])})};var $,Z,K;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:b.container,children:[(0,n.jsxs)("div",{children:[null===(h=e.search)||void 0===h||null===(y=h.filters)||void 0===y?void 0:y.map((t=>t.tag&&(0,n.jsx)(F,{label:(0,P.hr)(t,e.languageProvider),tooltip:`Filter your search by ${(0,P.pE)(t,e.languageProvider)}. To modify the default filters shown for search visit the Tempo datasource configuration page.`,children:(0,n.jsx)(q.A,{filter:L(t.id)||t,datasource:e,setError:T,updateFilter:E,tags:[],hideScope:!0,hideTag:!0,query:Y(L(t.id)),addVariablesToOptions:u})},t.id))),(0,n.jsx)(F,{label:"Status",children:(0,n.jsx)(q.A,{filter:L("status")||{id:"status",tag:"status",scope:f.d.Intrinsic,operator:"="},datasource:e,setError:T,updateFilter:E,tags:[],hideScope:!0,hideTag:!0,query:Y(L("status")),isMulti:!1,allowCustomValue:!1,addVariablesToOptions:u})}),(0,n.jsx)(F,{label:"Duration",tooltip:"The trace or span duration, i.e. end - start time of the trace/span. Accepted units are ns, ms, s, m, h",children:(0,n.jsxs)(l.Stack,{gap:0,children:[(0,n.jsx)(l.Select,{width:"auto",options:[{label:"span",value:"span"},{label:"trace",value:"trace"}],value:null!==($=null===(v=L("duration-type"))||void 0===v?void 0:v.value)&&void 0!==$?$:"span",onChange:e=>{const t=L("duration-type")||{id:"duration-type",value:"span"};E(B(W({},t),{value:null==e?void 0:e.value}))},"aria-label":"duration type"}),(0,n.jsx)(k,{filter:L("min-duration")||{id:"min-duration",tag:"duration",operator:">",valueType:"duration"},operators:[">",">="],updateFilter:E}),(0,n.jsx)(k,{filter:L("max-duration")||{id:"max-duration",tag:"duration",operator:"<",valueType:"duration"},operators:["<","<="],updateFilter:E})]})}),(0,n.jsx)(F,{label:"Tags",children:(0,n.jsx)(Q.A,{filters:R,datasource:e,setError:T,updateFilter:E,deleteFilter:e=>{r(B(W({},t),{filters:t.filters.filter((t=>t.id!==e.id))}))},staticTags:z,isTagsLoading:A,generateQueryWithoutFilter:Y,requireTagAndValue:!0,addVariablesToOptions:u})}),(0,n.jsx)(D,{query:t,onChange:()=>{delete t.groupBy,r(W({},t))}})]}),(0,n.jsxs)("div",{className:b.rawQueryContainer,children:[(0,n.jsx)(d,{query:I.replace(S),lang:{grammar:N.UD,name:"traceql"}}),(0,n.jsx)(l.Button,{variant:"secondary",size:"sm",onClick:()=>{(0,s.reportInteraction)("grafana_traces_copy_to_traceql_clicked",{app:null!=i?i:"",grafana_version:s.config.buildInfo.version,location:"search_tab"}),a();const n=e.languageProvider.generateQueryFromFilters({traceqlFilters:t.filters||[]});r(B(W({},t),{query:n,queryType:"traceql"}))},children:"Edit in TraceQL"})]}),(0,n.jsx)(w,{onChange:r,query:t,searchStreaming:null!==(Z=e.isStreamingSearchEnabled())&&void 0!==Z&&Z,metricsStreaming:null!==(K=e.isStreamingMetricsEnabled())&&void 0!==K&&K,app:i})]}),O?(0,n.jsxs)(l.Alert,{title:"Unable to connect to Tempo search",severity:"info",className:b.alert,children:["Please ensure that Tempo is configured with search enabled. If you would like to hide this tab, you can configure it in the ",(0,n.jsx)("a",{href:`/datasources/edit/${e.uid}`,children:"datasource settings"}),"."]}):null,j&&(0,n.jsx)(c.C,{severity:"error",text:j})]})},G=e=>({alert:(0,a.css)({maxWidth:"75ch",marginTop:e.spacing(2)}),container:(0,a.css)({display:"flex",gap:"4px",flexWrap:"wrap",flexDirection:"column"}),rawQueryContainer:(0,a.css)({alignItems:"center",backgroundColor:e.colors.background.secondary,display:"flex",justifyContent:"space-between",padding:e.spacing(1)})});var Z=r(1777),K=r(3437);function J(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function H(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){J(o,n,a,i,s,"next",e)}function s(e){J(o,n,a,i,s,"throw",e)}i(void 0)}))}}const X=({datasource:e,onChange:t,disabled:r,filterKey:a,allFilters:o})=>{const i=()=>ne(e,a,o);return null===a?(0,n.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper",children:(0,n.jsx)(l.SegmentAsync,{disabled:r,className:"query-segment-key",Component:re,value:a,onChange:t,loadOptions:i,inputMinWidth:90})}):(0,n.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper",children:(0,n.jsx)(l.SegmentAsync,{disabled:r,className:"query-segment-key",value:a,onChange:t,loadOptions:()=>ae(e,a,o),inputMinWidth:90})})},ee="-- remove filter --",te={label:ee,value:ee},re=(0,n.jsx)("span",{className:"gf-form-label query-part","aria-label":"Add Filter",children:(0,n.jsx)(l.Icon,{name:"plus"})}),ne=function(){var e=H((function*(e,t,r){const n=yield(0,s.getDataSourceSrv)().get(e);if(!n||!n.getTagKeys)return[];const a=r.filter((e=>e.key!==t)),o=yield n.getTagKeys({filters:a});return(Array.isArray(o)?o:o.data).map((e=>({label:e.text,value:e.text})))}));return function(t,r,n){return e.apply(this,arguments)}}(),ae=function(){var e=H((function*(e,t,r){const n=yield ne(e,t,r);return[te,...n]}));return function(t,r,n){return e.apply(this,arguments)}}();function oe(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}const ie=({datasource:e,disabled:t,onChange:r,filterKey:a,filterValue:o,placeHolder:i,allFilters:s})=>(0,n.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper",children:(0,n.jsx)(l.SegmentAsync,{className:"query-segment-value",disabled:t,placeholder:i,value:o,onChange:r,loadOptions:()=>se(e,a,s)})}),se=function(){var e,t=(e=function*(e,t,r){const n=yield(0,s.getDataSourceSrv)().get(e);if(!n||!n.getTagValues)return[];const a=(0,i.getDefaultTimeRange)(),o=r.filter((e=>e.key!==t)),l=yield n.getTagValues({key:t,filters:o,timeRange:a});return(Array.isArray(l)?l:l.data).map((e=>({label:e.text,value:e.text})))},function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){oe(o,n,a,i,s,"next",e)}function s(e){oe(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}(),le=["=","!=","<",">","=~","!~"].map((e=>({label:e,value:e}))),ce=({value:e,disabled:t,onChange:r})=>(0,n.jsx)(l.Segment,{className:"query-segment-operator",value:e,disabled:t,options:le,onChange:r}),ue=({datasource:e,filter:{key:t,operator:r,value:a},onKeyChange:o,onOperatorChange:i,onValueChange:s,placeHolder:l,allFilters:c,disabled:u})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X,{disabled:u,datasource:e,filterKey:t,onChange:o,allFilters:c}),(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)(ce,{disabled:u,value:r,onChange:i})}),(0,n.jsx)(ie,{disabled:u,datasource:e,filterKey:t,filterValue:a,allFilters:c,onChange:s,placeHolder:l})]}),pe=K.Ay.t,de=({datasource:e,appendBefore:t,onCompleted:r,allFilters:a})=>{const[i,s]=(0,o.useState)(null),[l,c]=(0,o.useState)("="),u=(0,o.useCallback)((e=>{var t;e.value===ee?s(null):s(null!==(t=e.value)&&void 0!==t?t:"")}),[s]),p=(0,o.useCallback)((e=>{var t;return c(null!==(t=e.value)&&void 0!==t?t:"")}),[c]),d=(0,o.useCallback)((e=>{var t;r({value:null!==(t=e.value)&&void 0!==t?t:"",operator:l,key:i}),s(null),c("=")}),[r,l,i]);return null===i?(0,n.jsx)(X,{datasource:e,filterKey:i,onChange:u,allFilters:a}):(0,n.jsxs)(o.Fragment,{children:[t,(0,n.jsx)(ue,{datasource:e,filter:{key:i,value:"",operator:l},placeHolder:(g="variable.adhoc.placeholder",f="Select value",pe(g,f,m)),onKeyChange:u,onOperatorChange:p,onValueChange:d,allFilters:a})]},"filter-builder");var g,f,m},ge=({label:e})=>(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)("span",{className:"gf-form-label query-keyword",children:e})});function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class ye extends o.PureComponent{render(){const{filters:e,disabled:t}=this.props;return(0,n.jsxs)("div",{className:"gf-form-inline",children:[this.renderFilters(e,t),!t&&(0,n.jsx)(de,{datasource:this.props.datasource,appendBefore:e.length>0?(0,n.jsx)(ge,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()})]})}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(e,t){return 0===e.length&&t?(0,n.jsx)(l.Segment,{disabled:t,value:"No filters",options:[],onChange:()=>{}}):e.reduce(((e,r,a)=>(e.length>0&&e.push((0,n.jsx)(ge,{label:"AND"},`condition-${a}`)),e.push(this.renderFilterSegments(r,a,t)),e)),[])}renderFilterSegments(e,t,r){return(0,n.jsx)(o.Fragment,{children:(0,n.jsx)(ue,{disabled:r,datasource:this.props.datasource,filter:e,onKeyChange:this.onChange(t,"key"),onOperatorChange:this.onChange(t,"operator"),onValueChange:this.onChange(t,"value"),allFilters:this.getAllFilters()})},`filter-${t}`)}constructor(...e){super(...e),fe(this,"onChange",((e,t)=>r=>{const{filters:n}=this.props,{value:a}=r;return r.value===ee?this.props.removeFilter(e):this.props.changeFilter(e,me(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){fe(e,t,r[t])}))}return e}({},n[e]),{[t]:a}))})),fe(this,"appendFilterToVariable",(e=>{this.props.addFilter(e)}))}}var he=r(5645);function ve(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){be(e,t,r[t])}))}return e}function Me(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Oe({graphDatasourceUid:e,query:t,onChange:r}){const a=(0,l.useStyles2)(xe),i=(0,Z.A)((()=>(0,he.q$)(e)),[e]),[s,c]=(0,o.useState)(void 0);if((0,o.useEffect)((()=>{function e(){return e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ve(o,n,a,i,s,"next",e)}function s(e){ve(o,n,a,i,s,"throw",e)}i(void 0)}))}}((function*(e){const t=yield e.getTagKeys({filters:[{key:"__name__",operator:"=~",value:"traces_service_graph_request_server_seconds_sum|traces_service_graph_request_total|traces_service_graph_request_failed_total",condition:""}]});c(Boolean(t.length))})),e.apply(this,arguments)}!i.loading&&i.value&&function(t){e.apply(this,arguments)}(i.value)}),[i]),i.loading)return null;const u=i.value;if(!e)return Te("No service graph datasource selected","Please set up a service graph datasource in the datasource settings",a);if(e&&!u)return Te("No service graph data found","Service graph datasource is configured but the data source no longer exists. Please configure existing data source to use the service graph functionality",a);const p=function(e){let t,r=[];const n=/([\w_]+)(=|!=|<|>|=~|!~)"(.*?)"/g;for(;null!==(t=n.exec(e));)r.push({key:t[1],operator:t[2],value:t[3],condition:""});return r}((Array.isArray(t.serviceMapQuery)?t.serviceMapQuery[0]:t.serviceMapQuery)||"");return(0,n.jsxs)("div",{children:[(0,n.jsx)(l.InlineFieldRow,{children:(0,n.jsx)(l.InlineField,{label:"Filter",labelWidth:14,grow:!0,children:(0,n.jsx)(ye,{datasource:{uid:e},filters:p,baseFilters:[{key:"__name__",operator:"=~",value:"traces_service_graph_request_total|traces_spanmetrics_calls_total",condition:""}],addFilter:e=>{r(Me(je({},t),{serviceMapQuery:Ae([...p,e])}))},removeFilter:e=>{const n=[...p];n.splice(e,1),r(Me(je({},t),{serviceMapQuery:Ae(n)}))},changeFilter:(e,n)=>{const a=[...p];a.splice(e,1,n),r(Me(je({},t),{serviceMapQuery:Ae(a)}))}})})}),!1===s?Te("No service graph data found","Please ensure that service graph metrics are set up correctly",a):null]})}function Te(e,t,r){return(0,n.jsxs)(l.Alert,{title:e,severity:"info",className:r.alert,children:[t," according to the"," ",(0,n.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://grafana.com/docs/grafana/latest/datasources/tempo/service-graph/",className:r.link,children:"Tempo documentation"}),"."]})}function Ae(e){return`{${e.map((e=>`${e.key}${e.operator}"${e.value}"`)).join(",")}}`}const xe=e=>({alert:(0,a.css)({maxWidth:"75ch",marginTop:e.spacing(2)}),link:(0,a.css)({color:e.colors.text.link,textDecoration:"underline"})});var Se=r(3241);const we={};var Ce=r(6417),Ie=r(3731);function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){const r=e.cursorAt(t);do{if(r.from===t||r.to===t){const{node:e}=r;if(e.type.isError)return e}}while(r.next());return null}function Pe(e,t){return e[t]}function Ee(e,t){let r=e;for(const[e,n]of t){if(r=Pe(r,e),null===r)return null;if(void 0===n.find((e=>e===(null==r?void 0:r.type.id))))return null}return r}function _e(e,t){return t.slice(e.from===e.to?e.from-1:e.from,e.to)}function Le(e,t){return e.every(((e,r)=>e===t[r]))}function ze(e,t){if(""===e)return{query:e,type:"EMPTY"};const r=Ie.K3.parse(e);let n=t;for(;n-1>=0&&" "===e[n-1];)n-=1;let a=De(r,n);a||(a=De(r,n-1)),a||(a=De(r,n+1));const o=null!=a?a.cursor():r.cursorAt(n),i=o.node,s=[o.type.id];for(;o.parent();)s.push(o.type.id);let l;for(let r of Re)Le(r.path,s)&&(l=r.fun(i,e,n,t));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ne(e,t,r[t])}))}return e}({query:e},null!=l?l:{type:"UNKNOWN"})}const Re=[{path:[0,Ie.d4],fun:function(e,t){const r=Ee(e,[["parent",[Ie.d4]]]),n=r?_e(r,t):"";if("."===n)return{type:"SPANSET_ONLY_DOT"};const a=n.indexOf("."),o=n.slice(0,a);if(["event","instrumentation","link","resource","span","parent"].find((e=>e===o)))return{type:"SPANSET_IN_NAME_SCOPE",scope:o};return{type:"SPANSET_IN_NAME"}}},{path:[0,Ie.v5],fun:qe},{path:[0,Ie.NA],fun:function(e,t,r){const n=ke(e,t,r);if(n)return n;return{type:"SPANSET_EXPRESSION_OPERATORS_WITH_MISSING_CLOSED_BRACE"}}},{path:[0,Ie.S6],fun:Ve},{path:[0,Ie.sd],fun:Ve},{path:[0,Ie.vp],fun:Ve},{path:[0,Ie.yl],fun:Ve},{path:[0,Ie.zs],fun:function(e,t,r){var n;if((null===(n=e.prevSibling)||void 0===n?void 0:n.type.id)===Ie.nT)return{type:"SPANSET_PIPELINE_AFTER_OPERATOR"};return{type:"NEW_SPANSET"}}},{path:[0,Ie.T,Ie.$f],fun:function(e,t,r){var n;if((null===(n=e.prevSibling)||void 0===n?void 0:n.type.id)!==Ie.LU)return{type:"SPANSET_COMPARISON_OPERATORS"}}},{path:[Ie.v5],fun:Fe},{path:[Ie.NA],fun:Fe},{path:[Ie.zs],fun:Qe},{path:[Ie.z],fun:Qe},{path:[Ie.Qf,Ie.jC],fun:qe}],ke=(e,t,r)=>{const n=e=>{const r=Ee(e,[["firstChild",[Ie.d4]]]),n=r?_e(r,t):"",a=n.indexOf(".");return n.slice(0,a)};if(" "===t[r-1])return;const a=Ee(e,[["firstChild",[Ie.v5]]]);if(a)return{type:"SPANSET_IN_NAME_SCOPE",scope:n(a)};const o=Ee(e,[["parent",[Ie.NA]],["firstChild",[Ie.v5]]]);return o&&" "!==t[r]?{type:"SPANSET_IN_NAME_SCOPE",scope:n(o)}:void 0};function Fe(e,t,r,n){const a=ke(e,t,n);if(a)return a;let o=Ee(e,[["firstChild",[Ie.v5]],["firstChild",[Ie.d4]]]);return o?{type:"SPANSET_EXPRESSION_OPERATORS"}:(o=Ee(e,[["lastChild",[Ie.v5]],["lastChild",[Ie.v5]],["lastChild",[Ie.jC]]]),o?{type:"SPANFIELD_COMBINING_OPERATORS"}:(o=Ee(e,[["lastChild",[Ie.v5]]]),o?{type:"SPANSET_EXPRESSION_OPERATORS"}:{type:"SPANSET_EMPTY"}))}function qe(e,t,r,n){var a,o,i;const s=ke(e,t,n);if(s)return s;if(Ee(e,[["parent",[Ie.jC]],["parent",[Ie.v5]],["prevSibling",[Ie.Ib]]])){var l,c,u;let r=null===(u=e.parent)||void 0===u||null===(c=u.parent)||void 0===c||null===(l=c.prevSibling)||void 0===l?void 0:l.prevSibling;if(r)return{type:"SPANSET_IN_VALUE",tagName:_e(r,t),betweenQuotes:!0}}if((null===(a=e.prevSibling)||void 0===a?void 0:a.type.id)===Ie.Ib){var p;let r=null===(p=e.prevSibling)||void 0===p?void 0:p.prevSibling;if(r)return{type:"SPANSET_IN_VALUE",tagName:_e(r,t),betweenQuotes:!1}}return"And"===(null===(o=e.prevSibling)||void 0===o?void 0:o.type.name)||"Or"===(null===(i=e.prevSibling)||void 0===i?void 0:i.type.name)?{type:"SPANSET_EMPTY"}:{type:"SPANSET_IN_THE_MIDDLE"}}function Qe(e,t,r){let n=e.firstChild;try{for(n=e.firstChild;n.to<r;)n=n.nextSibling}catch(e){console.error("Unexpected error while searching for previous node",e)}return(null==n?void 0:n.type.id)===Ie.KD||(null==n?void 0:n.type.id)===Ie.Or?{type:"NEW_SPANSET"}:{type:"SPANSET_COMBINING_OPERATORS"}}function Ve(e,t,r){const n=null==e?void 0:e.parent;if(n&&[Ie.sd,Ie.S6,Ie.vp,Ie.yl,Ie.oL].includes(n.type.id))return{type:"ATTRIBUTE_FOR_FUNCTION"}}function Ye(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function We(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ye(o,n,a,i,s,"next",e)}function s(e){Ye(o,n,a,i,s,"throw",e)}i(void 0)}))}}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Be(e,t,r[t])}))}return e}function $e(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class Ge{provideCompletionItems(e,t){var r;if(!this.monaco||!this.editor)throw new Error("provideCompletionItems called before CompletionProvider was initialized");if((null===(r=this.editor.getModel())||void 0===r?void 0:r.id)!==e.id)return{suggestions:[]};const{range:n,offset:a}=function(e,t,r){const n=t.getWordAtPosition(r),a=null!=n?e.Range.lift({startLineNumber:r.lineNumber,endLineNumber:r.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn}):e.Range.fromPositions(r),o={column:r.column,lineNumber:r.lineNumber},i=t.getOffsetAt(o);return{offset:i,range:a}}(this.monaco,e,t),o=ze(e.getValue(),a);return(null!=o?this.getCompletions(o,this.setAlertText):Promise.resolve([])).then((t=>{var r;const o=function(e,t,r="noOp",n,a){var o;const[i,s,l]=null!==(o=n.substring(0,a).match(Ke))&&void 0!==o?o:[],c=e.length.toString().length,u=e.map(((e,n)=>{const o={kind:Ze(e.type),label:e.label,insertText:e.insertText,insertTextRules:e.insertTextRules,detail:e.detail,documentation:e.documentation,sortText:n.toString().padStart(c,"0"),range:t,command:{id:r,title:"Report Interaction",arguments:[e.label,e.type]}};return l&&"TAG_NAME"===e.type&&function(e,t,r,n){null==n&&"."!==e.insertText[0]&&(e.insertText="."+e.insertText);e.range=$e(Ue({},e.range),{startColumn:t-r.length+1})}(o,a,l,s),o}));return u}(t,n,null!==(r=this.registerInteractionCommandId)&&void 0!==r?r:void 0,e.getValue(),a);return{suggestions:o}}))}setRegisterInteractionCommandId(e){this.registerInteractionCommandId=e}getTagValues(e,t){var r=this;return We((function*(){let n;const a=`${e}:${t}`;return r.cachedValues.hasOwnProperty(a)?n=r.cachedValues[a]:(n=yield r.languageProvider.getOptionsV2(e,t),r.cachedValues[a]=n),n}))()}getCompletions(e,t){var r=this;return We((function*(){switch(e.type){case"UNKNOWN":return[];case"EMPTY":return r.getScopesCompletions("{ ","$0 }").concat(r.getIntrinsicsCompletions("{ ","$0 }")).concat(r.getTagsCompletions("{ ."));case"SPANSET_EMPTY":case"ATTRIBUTE_FOR_FUNCTION":return r.getScopesCompletions().concat(r.getIntrinsicsCompletions()).concat(r.getTagsCompletions("."));case"SPANSET_ONLY_DOT":return r.getTagsCompletions();case"SPANSET_IN_THE_MIDDLE":case"SPANSET_EXPRESSION_OPERATORS_WITH_MISSING_CLOSED_BRACE":return r.getOperatorsCompletions([...Ge.comparisonOps,...Ge.logicalOps]);case"SPANSET_IN_NAME":return r.getScopesCompletions().concat(r.getIntrinsicsCompletions()).concat(r.getTagsCompletions());case"SPANSET_IN_NAME_SCOPE":return r.getTagsCompletions(void 0,e.scope);case"SPANSET_EXPRESSION_OPERATORS":return r.getOperatorsCompletions([...Ge.comparisonOps,...Ge.logicalOps,...Ge.arithmeticOps]);case"SPANFIELD_COMBINING_OPERATORS":return r.getOperatorsCompletions([...Ge.logicalOps,...Ge.arithmeticOps,...Ge.comparisonOps]);case"SPANSET_COMBINING_OPERATORS":return r.getOperatorsCompletions(Ge.spansetOps);case"SPANSET_PIPELINE_AFTER_OPERATOR":return[...Ge.functions.map((e=>$e(Ue({},e),{insertTextRules:Ce.eo.CompletionItemInsertTextRule.InsertAsSnippet,type:"FUNCTION"}))),...r.getScopesCompletions().concat(r.getIntrinsicsCompletions()).concat(r.getTagsCompletions("."))];case"SPANSET_COMPARISON_OPERATORS":return r.getOperatorsCompletions(Ge.comparisonOps);case"SPANSET_IN_VALUE":let n;try{n=yield r.getTagValues(e.tagName,e.query),t(void 0)}catch(e){(0,s.isFetchError)(e)?t(e.data.error):e instanceof Error&&t(`Error: ${e.message}`)}const a=t=>e.betweenQuotes?t.label:"string"===t.type?`"${t.label}"`:t.label,o=[];return null==n||n.forEach((e=>{(null==e?void 0:e.label)&&o.push({label:e.label,insertText:a(e),type:"TAG_VALUE"})})),o;case"SPANSET_AFTER_VALUE":return Ge.logicalOps.map((e=>({label:e.label,insertText:e.insertText+"}",type:"OPERATOR"})));case"NEW_SPANSET":return r.getScopesCompletions("{ ","$0 }").concat(r.getIntrinsicsCompletions("{ ","$0 }")).concat(r.getTagsCompletions("."));default:throw new Error(`Unexpected situation ${e}`)}}))()}getTagsCompletions(e,t){return function(e,t=""){return e.sort(Je.compare).map((e=>({label:e,insertText:`${t}${e}`,type:"TAG_NAME"})))}(this.languageProvider.getTraceqlAutocompleteTags(t),e)}getIntrinsicsCompletions(e,t){return this.languageProvider.getIntrinsics().map((r=>{var n;return{label:r,insertText:(e||"")+r+(t||""),type:"KEYWORD",insertTextRules:null===(n=Ce.eo.CompletionItemInsertTextRule)||void 0===n?void 0:n.InsertAsSnippet}}))}getScopesCompletions(e,t){return N.Wu.map((r=>{var n;return{label:r,insertText:(e||"")+r+(t||""),type:"SCOPE",insertTextRules:null===(n=Ce.eo.CompletionItemInsertTextRule)||void 0===n?void 0:n.InsertAsSnippet}}))}getOperatorsCompletions(e){return e.map((e=>$e(Ue({},e),{type:"OPERATOR"})))}constructor(e){Be(this,"languageProvider",void 0),Be(this,"registerInteractionCommandId",void 0),Be(this,"setAlertText",void 0),Be(this,"triggerCharacters",["{",".","[","(","=","~"," ",'"']),Be(this,"monaco",void 0),Be(this,"editor",void 0),Be(this,"cachedValues",{}),this.languageProvider=e.languageProvider,this.setAlertText=e.setAlertText,this.registerInteractionCommandId=null}}function Ze(e){switch(e){case"TAG_NAME":return Ce.eo.CompletionItemKind.Enum;case"KEYWORD":return Ce.eo.CompletionItemKind.Keyword;case"OPERATOR":return Ce.eo.CompletionItemKind.Operator;case"TAG_VALUE":return Ce.eo.CompletionItemKind.EnumMember;case"SCOPE":return Ce.eo.CompletionItemKind.Class;case"FUNCTION":return Ce.eo.CompletionItemKind.Function;default:throw new Error(`Unexpected CompletionItemType: ${e}`)}}Be(Ge,"arithmeticOps",[{label:"+",insertText:"+",detail:"Plus"},{label:"-",insertText:"-",detail:"Minus"},{label:"*",insertText:"*",detail:"Times"},{label:"/",insertText:"/",detail:"Over"}]),Be(Ge,"logicalOps",[{label:"&&",insertText:"&&",detail:"And",documentation:"And (intersection) operator. Checks that both conditions found matches."},{label:"||",insertText:"||",detail:"Or",documentation:"Or (union) operator. Checks that either condition found matches."}]),Be(Ge,"comparisonOps",[{label:"=",insertText:"=",detail:"Equality"},{label:"!=",insertText:"!=",detail:"Inequality"},{label:">",insertText:">",detail:"Greater than"},{label:">=",insertText:">=",detail:"Greater than or equal to"},{label:"<",insertText:"<",detail:"Less than"},{label:"<=",insertText:"<=",detail:"Less than or equal to"},{label:"=~",insertText:"=~",detail:"Regular expression"},{label:"!~",insertText:"!~",detail:"Negated regular expression"}]),Be(Ge,"structuralOps",[{label:">>",insertText:">>",detail:"Descendant",documentation:"Descendant operator. Looks for spans matching {condB} that are descendants of a span matching {condA}"},{label:">",insertText:">",detail:"Child",documentation:"Child operator. Looks for spans matching {condB} that are direct child spans of a parent matching {condA}"},{label:"<<",insertText:"<<",detail:"Ancestor",documentation:"Ancestor operator. Looks for spans matching {condB} that are ancestors of a span matching {condA}"},{label:"<",insertText:"<",detail:"Parent",documentation:"Parent operator. Looks for spans matching {condB} that are direct parent spans of a child matching {condA}"},{label:"~",insertText:"~",detail:"Sibling",documentation:"Sibling operator. Checks that spans matching {condA} and {condB} are siblings of the same parent span."},{label:"&>>",insertText:"&>>",detail:"Union Descendant",documentation:"The descendant operator (>>) looks for spans matching {condB} that are descendants of a span matching {condA}"},{label:"&>",insertText:"&>",detail:"Union Child",documentation:"The child operator (>) looks for spans matching {condB} that are direct child spans of a parent matching {condA}"},{label:"&<<",insertText:"&<<",detail:"Union Ancestor",documentation:"The ancestor operator (<<) looks for spans matching {condB} that are ancestor of a span matching {condA}"},{label:"&<",insertText:"&<",detail:"Union Parent",documentation:"The parent operator (<) looks for spans matching {condB} that are direct parent spans of a child matching {condA}"},{label:"&~",insertText:"&~",detail:"Union Sibling",documentation:"The sibling operator (~) looks at spans matching {condB} that have at least one sibling matching {condA}"},{label:"!>>",insertText:"!>>",detail:"Not Descendant",documentation:"The not-descendant operator (!>>) looks for spans matching {condB} that are not descendant spans of a parent matching {condA}"},{label:"!>",insertText:"!>",detail:"Not Child",documentation:"The not-child operator (!>) looks for spans matching {condB} that are not direct child spans of a parent matching {condA}"},{label:"!<<",insertText:"!<<",detail:"Not Ancestor",documentation:"The not-ancestor operator (!<<) looks for spans matching {condB} that are not ancestor spans of a child matching {condA}"},{label:"!<",insertText:"!<",detail:"Not Parent",documentation:"The not-parent operator (!<) looks for spans matching {condB} that are not direct parent spans of a child matching {condA}"},{label:"!~",insertText:"!~",detail:"Not Sibling",documentation:"The not-sibling operator (!~) looks for spans matching {condB} that do not have at least one sibling matching {condA}"}]),Be(Ge,"spansetOps",[{label:"|",insertText:"|",detail:"Pipe"},...Ge.logicalOps,...Ge.structuralOps]),Be(Ge,"aggregatorFunctions",[{label:"avg",insertText:"avg($0)",detail:"Average of attribute",documentation:"Computes the average of a given numeric attribute or intrinsic for a spanset."},{label:"count",insertText:"count()$0",detail:"Number of spans",documentation:"Counts the number of spans in a spanset."},{label:"max",insertText:"max($0)",detail:"Max value of attribute",documentation:"Computes the maximum value of a given numeric attribute or intrinsic for a spanset."},{label:"min",insertText:"min($0)",detail:"Min value of attribute",documentation:"Computes the minimum value of a given numeric attribute or intrinsic for a spanset."},{label:"sum",insertText:"sum($0)",detail:"Sum value of attribute",documentation:"Computes the sum value of a given numeric attribute or intrinsic for a spanset."}]),Be(Ge,"functions",[...Ge.aggregatorFunctions,{label:"by",insertText:"by($0)",detail:"Grouping of attributes",documentation:"Groups by arbitrary attributes."},{label:"count_over_time",insertText:"count_over_time()$0",detail:"Number of spans over time",documentation:"Counts the number of spans over time."},{label:"min_over_time",insertText:"min_over_time()$0",detail:"Minimum value of attribute over time",documentation:"Minimum value for the specified attribute across all matching spans over time."},{label:"max_over_time",insertText:"max_over_time()$0",detail:"Maximum value of attribute over time",documentation:"Maximum value for the specified attribute across all matching spans over time."},{label:"avg_over_time",insertText:"avg_over_time()$0",detail:"Average value of attribute over time",documentation:"Average value for the specified attribute across all matching spans over time."},{label:"sum_over_time",insertText:"sum_over_time()$0",detail:"Summation value of attribute over time",documentation:"Sum of the values for the specified attribute across all matching spans over time."},{label:"histogram_over_time",insertText:"histogram_over_time($0)",detail:"Histogram of attribute over time",documentation:"Retrieves a histogram of an attributes values over time which are sorted into buckets."},{label:"quantile_over_time",insertText:"quantile_over_time($0)",detail:"Quantile of attribute over time",documentation:"Retrieves one or more quantiles of an attributes numeric values over time."},{label:"rate",insertText:"rate()$0",detail:"Rate of spans",documentation:"Counts the rate of spans per second."},{label:"select",insertText:"select($0)",detail:"Selection of fields",documentation:"Selects arbitrary fields from spans."}]);const Ke=/(event\.|instrumentation\.|link\.|resource\.|span\.|\.)?([\w./-]*)$/;const Je=new Intl.Collator("en",{sensitivity:"accent"});const He=e=>{if(""===e.trim())return[];if(e.trim().match(/^[0-9A-Fa-f]*$/))return[];const t=Ie.K3.parse(e),r=[];return t.iterate({enter:e=>{0===e.type.id&&r.push(e.node)}}),r},Xe=(e,t,r)=>{const n=[...et(e.MarkerSeverity.Error,t,r),...tt(e.MarkerSeverity.Warning,t)];e.editor.setModelMarkers(t,"owner",n)},et=(e,t,r)=>r.map((r=>{const n=(e=>{var t;switch(null===(t=e.parent)||void 0===t?void 0:t.type.id){case Ie.v5:var r;switch(null===(r=e.prevSibling)||void 0===r?void 0:r.type.id){case Ie.KD:case Ie.Or:return"Invalid value after logical operator.";case Ie.Ib:return"Invalid value after comparison or arithmetic operator.";default:return"Invalid operator after field expression."}case Ie.NA:var n;return(null===(n=e.prevSibling)||void 0===n?void 0:n.type.id)===Ie.v5?"Invalid comparison operator after field expression.":"Invalid expression for spanset.";case Ie.zs:var a;switch(null===(a=e.prevSibling)||void 0===a?void 0:a.type.id){case Ie.zs:return"Invalid spanset combining operator after spanset expression.";case Ie.nT:return"Invalid aggregation operator after pipeline operator.";default:return"Invalid spanset expression after spanset combining operator."}case Ie.sd:case Ie.S6:var o,i,s,l,c,u,p;return(null===(s=e.parent)||void 0===s||null===(i=s.parent)||void 0===i||null===(o=i.parent)||void 0===o?void 0:o.type.id)===Ie.vp?"Invalid expression for by operator.":(null===(p=e.parent)||void 0===p||null===(u=p.parent)||void 0===u||null===(c=u.parent)||void 0===c||null===(l=c.parent)||void 0===l?void 0:l.type.id)===Ie.yl?"Invalid expression for select operator.":"Invalid expression for aggregator operator.";case Ie.d4:return"Invalid expression for spanset.";case Ie.T:var d;switch(null===(d=e.prevSibling)||void 0===d?void 0:d.type.id){case Ie.LU:return"Invalid value after comparison operator.";case Ie.JP:var g,f;if((null===(f=e.prevSibling)||void 0===f||null===(g=f.firstChild)||void 0===g?void 0:g.type.id)===Ie.S6)return"Invalid comparison operator after aggregator operator.";default:return"Invalid value after comparison operator."}default:return"Invalid query."}})(r);return rt(e,n,t,r.from,r.to)})),tt=(e,t)=>{let r=[];const n=t.getValue(),a=Ie.K3.parse(n);if(n.indexOf(".")>-1){const n=a.cursorAt(0);do{const{node:a}=n;var o,i,s,l,c,u;if(a.type.id===Ie.gw)if((null===(o=a.prevSibling)||void 0===o?void 0:o.type.id)!==Ie.n$&&(null===(i=a.prevSibling)||void 0===i?void 0:i.type.id)!==Ie.Jh&&(null===(s=a.prevSibling)||void 0===s?void 0:s.type.id)!==Ie.r5&&(null===(l=a.prevSibling)||void 0===l?void 0:l.type.id)!==Ie.N_&&(null===(c=a.prevSibling)||void 0===c?void 0:c.type.id)!==Ie.FW&&(null===(u=a.prevSibling)||void 0===u?void 0:u.type.id)!==Ie.L9){const n=a.prevSibling?a.prevSibling.from:a.from-1,o=a.prevSibling?a.prevSibling.to:a.from-1,i="Add resource or span scope to attribute to improve query performance.";r.push(rt(e,i,t,n,o))}}while(n.next())}return r},rt=(e,t,r,n,a)=>{let o=0,i=0,s=n,l=a;for(;s>0;)o++,s-=r.getLineLength(o)+1;for(;l>0;)i++,l-=r.getLineLength(i)+1;return{message:t,severity:e,startLineNumber:o,endLineNumber:i,startColumn:s+r.getLineLength(o)+2,endColumn:l+r.getLineLength(i)+2}};function nt(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function at(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function it(e){const[t,r]=(0,o.useState)(),{query:a,onChange:i,onRunQuery:u,placeholder:p}=e,d=function(e,t){const r=(0,o.useRef)(new Ge({languageProvider:e.languageProvider,setAlertText:t}));(0,o.useEffect)((()=>{const r=function(){var r,n=(r=function*(){try{yield e.languageProvider.start(),t(void 0)}catch(e){e instanceof Error&&t(`Error: ${e.message}`)}},function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function i(e){nt(o,n,a,i,s,"next",e)}function s(e){nt(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();r()}),[e,t]);const n=(0,o.useRef)(null);return(0,o.useEffect)((()=>()=>{var e;null===(e=n.current)||void 0===e||e.call(n)}),[]),(e,t,a)=>{r.current.editor=e,r.current.monaco=t,r.current.setRegisterInteractionCommandId(a);const{dispose:o}=t.languages.registerCompletionItemProvider(lt,r.current);n.current=o}}(e.datasource,r),g=(0,l.useTheme2)(),f=ut(g,p),m=(0,o.useRef)(a);m.current=a;const y=e=>{i(ot(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){at(e,t,r[t])}))}return e}({},m.current),{query:e}))},h=(0,o.useRef)(u);h.current=u;const v=(0,o.useRef)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.CodeEditor,{value:a.query||"",language:lt,onBlur:y,onChange:y,containerStyles:f.queryField,readOnly:e.readOnly,monacoOptions:{folding:!1,fontSize:14,lineNumbers:"off",overviewRulerLanes:0,renderLineHighlight:"none",scrollbar:{vertical:"hidden",verticalScrollbarSize:8,horizontal:"hidden",horizontalScrollbarSize:0},scrollBeyondLastLine:!1,wordWrap:"on"},onBeforeEditorMount:ct,onEditorDidMount:(t,r)=>{e.readOnly||(d(t,r,function(e){return e.addCommand(0,(function(e,t,r){const n={datasourceType:"tempo",type:r};"TAG_VALUE"!==r&&(n.label=t),(0,s.reportInteraction)("grafana_traces_traceql_completion",n)}))}(t)),function(e,t,r){e.addAction({id:"run-query",label:"Run Query",keybindings:[t.KeyMod.Shift|t.KeyCode.Enter],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(){r()}})}(t,r,(()=>h.current())),function(e,t,r){const n=[{range:new t.Range(1,1,1,1),options:{className:r.placeholder,isWholeLine:!0}}];let a=[];const o=()=>{const t=e.getModel();if(!t)return;const r=0===t.getValueLength()?n:[];a=t.deltaDecorations(a,r)};o(),e.onDidChangeModelContent(o)}(t,r,f)),function(e){const t=e.getDomNode(),r=()=>{if(t){const r=Math.min(1e3,e.getContentHeight()),n=parseInt(t.style.width,10);t.style.width=`${n}px`,t.style.height=`${r}px`,e.layout({width:n,height:r})}};e.onDidContentSizeChange(r),r()}(t);const n=t.getModel();if(n){const e=He(n.getValue());Xe(r,n,e)}t.onDidChangeModelContent((e=>{const n=t.getModel();if(!n)return;window.clearTimeout(v.current);const a=He(n.getValue()),o=e.changes[0].rangeOffset;Xe(r,n,a.filter((e=>!(e.from<=o&&o<=e.to)))),v.current=window.setTimeout((()=>{Xe(r,n,a)}),500)}))}}),t&&(0,n.jsx)(c.C,{severity:"error",text:t})]})}let st=!1;const lt="traceql";function ct(e){if(!st){st=!0;const{aliases:t,extensions:r,mimetypes:n,def:a}=N.YG;e.languages.register({id:lt,aliases:t,extensions:r,mimetypes:n}),e.languages.setMonarchTokensProvider(lt,a.language),e.languages.setLanguageConfiguration(lt,a.languageConfiguration)}}const ut=(e,t)=>({queryField:(0,a.css)({borderRadius:e.shape.radius.default,border:`1px solid ${e.components.input.borderColor}`,flex:1}),placeholder:(0,a.css)({"::after":{content:`'${t}'`,fontFamily:e.typography.fontFamilyMonospace,opacity:.3}})});function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function gt(e){const t=(0,l.useStyles2)(ft),r=(0,Se.defaults)(e.query,we),[c,u]=(0,o.useState)((()=>{const t=e.datasource.languageProvider.generateQueryFromFilters({traceqlFilters:r.filters||[]});return t===r.query||"{}"===t})),p=(0,n.jsxs)(l.Alert,{title:"Tempo metrics is an experimental feature",severity:"warning",children:["Please note that TraceQL metrics is an experimental feature and should not be used in production. Read more about it in"," ",(0,n.jsxs)("a",{className:(0,a.css)({textDecoration:"underline"}),href:"https://grafana.com/docs/tempo/latest/operations/traceql-metrics/",target:"_blank",children:["documentation",(0,n.jsx)(l.Icon,{name:"external-link-alt"})]}),"."]}),d=e.app===i.CoreApp.UnifiedAlerting||e.app===i.CoreApp.CloudAlerting;var g,f;return(0,n.jsxs)(n.Fragment,{children:[d&&p,(0,n.jsxs)(l.InlineLabel,{children:["Build complex queries using TraceQL to select a list of traces."," ",(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://grafana.com/docs/tempo/latest/traceql/",children:"Documentation"})]}),!c&&(0,n.jsxs)("div",{className:t.copyContainer,children:[(0,n.jsx)("span",{children:"Continue editing the query from the Search tab?"}),(0,n.jsx)(l.Button,{variant:"secondary",size:"sm",onClick:()=>{var t;(0,s.reportInteraction)("grafana_traces_copy_to_traceql_clicked",{app:null!==(t=e.app)&&void 0!==t?t:"",grafana_version:s.config.buildInfo.version,location:"traceql_tab"}),e.onClearResults(),e.onChange(dt(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){pt(e,t,r[t])}))}return e}({},r),{query:e.datasource.languageProvider.generateQueryFromFilters({traceqlFilters:r.filters||[]})})),u(!0)},style:{marginLeft:"10px"},children:"Copy query from Search"})]}),(0,n.jsx)(it,{placeholder:"Enter a TraceQL query or trace ID (run with Shift+Enter)",query:r,onChange:e.onChange,datasource:e.datasource,onRunQuery:e.onRunQuery}),(0,n.jsx)("div",{className:t.optionsContainer,children:(0,n.jsx)(w,{query:r,onChange:e.onChange,searchStreaming:null!==(g=e.datasource.isStreamingSearchEnabled())&&void 0!==g&&g,metricsStreaming:null!==(f=e.datasource.isStreamingMetricsEnabled())&&void 0!==f&&f,app:e.app})})]})}const ft=e=>({optionsContainer:(0,a.css)({marginTop:"10px"}),copyContainer:(0,a.css)({backgroundColor:e.colors.background.secondary,padding:e.spacing(.5,1),fontSize:e.typography.body.fontSize})});function mt(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){yt(e,t,r[t])}))}return e}function vt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class bt extends o.PureComponent{componentDidMount(){var e,t=this;return(e=function*(){t.props.query.queryType&&"clear"!==t.props.query.queryType||t.props.onChange(vt(ht({},t.props.query),{queryType:"traceql"}))},function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){mt(o,n,a,i,s,"next",e)}function s(e){mt(o,n,a,i,s,"throw",e)}i(void 0)}))})()}render(){var e;const{query:t,onChange:r,datasource:o,app:c}=this.props,u=c===i.CoreApp.UnifiedAlerting,p=null===(e=o.serviceMap)||void 0===e?void 0:e.datasourceUid;return(t.spanName||t.serviceName||t.search||t.maxDuration||t.minDuration||"nativeSearch"===t.queryType)&&r((0,he.d6)(t)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Modal,{title:"Upload trace",isOpen:this.state.uploadModalOpen,onDismiss:()=>this.setState({uploadModalOpen:!1}),children:(0,n.jsx)("div",{className:(0,a.css)({padding:this.props.theme.spacing(2)}),children:(0,n.jsx)(l.FileDropzone,{options:{multiple:!1},onLoad:e=>{if("string"!=typeof e&&null!==e)throw Error("Unexpected result type: "+typeof e);this.props.datasource.uploadedJson=e,r(vt(ht({},t),{queryType:"upload"})),this.setState({uploadModalOpen:!1}),this.props.onRunQuery()}})})}),!u&&(0,n.jsx)(l.InlineFieldRow,{children:(0,n.jsx)(l.InlineField,{label:"Query type",grow:!0,children:(0,n.jsxs)(l.Stack,{gap:1,alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)(l.RadioButtonGroup,{options:[{value:"traceqlSearch",label:"Search"},{value:"traceql",label:"TraceQL"},{value:"serviceMap",label:"Service Graph"}],value:t.queryType,onChange:e=>{var n;(0,s.reportInteraction)("grafana_traces_query_type_changed",{datasourceType:"tempo",app:null!=c?c:"",grafana_version:s.config.buildInfo.version,newQueryType:e,previousQueryType:null!==(n=t.queryType)&&void 0!==n?n:""}),this.onClearResults(),r(vt(ht({},t),{queryType:e}))},size:"md"}),(0,n.jsx)(l.Button,{variant:"secondary",size:"sm",onClick:()=>{this.setState({uploadModalOpen:!0})},children:"Import trace"})]})})}),"traceqlSearch"===t.queryType&&(0,n.jsx)($,{datasource:this.props.datasource,query:t,onChange:r,onBlur:this.props.onBlur,app:c,onClearResults:this.onClearResults,addVariablesToOptions:this.props.addVariablesToOptions}),"serviceMap"===t.queryType&&(0,n.jsx)(Oe,{graphDatasourceUid:p,query:t,onChange:r}),"traceql"===t.queryType&&(0,n.jsx)(gt,{datasource:this.props.datasource,query:t,onRunQuery:this.props.onRunQuery,onChange:r,app:c,onClearResults:this.onClearResults})]})}constructor(e){super(e),yt(this,"onClearResults",(()=>{const{onChange:e,query:t,onRunQuery:r}=this.props;e(vt(ht({},t),{queryType:"clear"})),r()})),this.state={uploadModalOpen:!1}}}const jt=(0,l.withTheme2)(bt)},8968:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},7584:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},6060:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="}}]);
//# sourceMappingURL=9762.js.map