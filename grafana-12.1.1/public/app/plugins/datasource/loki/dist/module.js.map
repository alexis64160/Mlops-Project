{"version":3,"file":"module.js","mappings":"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AAC,0BAA2B,OAC5B,CAAC,+BAAgC,QACjC,CAAC,sBAAuB,QACxB,CAAC,oBAAqB,UACtB,CAAC,eAAgB,MACjB,CAAC,YAAa,MACd,CAAC,QAAS,QACVgC,SAAQ,SAAUhC,GAClB,OAAOmB,EAAUS,gBAAgB5B,EAAK,GAAIA,EAAK,GACjD,IAKA,CAEE,YACA,SACA,SACA,MACA,WACA,UACA,OACA,YACA,QACA,YACA,QACA,QACA,QACA,QACA,UACA,SACA,OACA,OACA,UACA,QACA,WACA,MACA,WACA,cACA,QACA,SACA,WACA,YACA,MACA,SACA,YACA,YACA,YACA,WACA,WACA,MACA,UACA,UACA,WACA,WACA,eACA,SACA,SACA,YACA,WACA,YACA,cACA,QACA,UACA,QACA,SACA,aACA,YACA,WACA,OACA,QACA,OACA,QACA,QACA,MACA,QACA,OACA,OACA,YACA,OACA,WACA,SACA,SACA,YACA,WACA,OACA,WACA,OACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,UACA,QACA,QACA,SACA,UACA,iBACA,QACA,OACA,SACA,UACA,UACA,aACA,WACA,MACA,eAEA,gBACA,SACA,SACA,YACA,WACA,QACA,WACAgC,QAAQb,EAAUU,oBAEbV,CACT,CAhfqBA,aCJrB,IAAIc,EAAoC,oBAAZC,QACxBC,EAAwB,mBAARnN,IAChBoN,EAAwB,mBAARlN,IAChBmN,EAAwC,mBAAhBlH,eAAgCA,YAAYmH,OAIxE,SAASC,EAAMC,EAAGC,GAEhB,GAAID,IAAMC,EAAG,OAAO,EAEpB,GAAID,GAAKC,GAAiB,iBAALD,GAA6B,iBAALC,EAAe,CAC1D,GAAID,EAAElH,cAAgBmH,EAAEnH,YAAa,OAAO,EAE5C,IAAIhF,EAAQoM,EAAG3G,EA6BX4G,EA5BJ,GAAI7L,MAAMvB,QAAQiN,GAAI,CAEpB,IADAlM,EAASkM,EAAElM,SACGmM,EAAEnM,OAAQ,OAAO,EAC/B,IAAKoM,EAAIpM,EAAgB,GAARoM,KACf,IAAKH,EAAMC,EAAEE,GAAID,EAAEC,IAAK,OAAO,EACjC,OAAO,CACT,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","sources":["webpack://loki/webpack/runtime/load script","webpack://loki/../../../../../node_modules/lodash/_DataView.js","webpack://loki/../../../../../node_modules/lodash/_Map.js","webpack://loki/../../../../../node_modules/lodash/_Promise.js","webpack://loki/../../../../../node_modules/lodash/_Set.js","webpack://loki/../../../../../node_modules/lodash/_Symbol.js","webpack://loki/../../../../../node_modules/lodash/_WeakMap.js","webpack://loki/../../../../../node_modules/lodash/_arrayLikeKeys.js","webpack://loki/../../../../../node_modules/lodash/_arrayMap.js","webpack://loki/../../../../../node_modules/lodash/_baseFindIndex.js","webpack://loki/../../../../../node_modules/lodash/_baseGetTag.js","webpack://loki/../../../../../node_modules/lodash/_baseIndexOf.js","webpack://loki/../../../../../node_modules/lodash/_baseIsArguments.js","webpack://loki/../../../../../node_modules/lodash/_baseIsNaN.js","webpack://loki/../../../../../node_modules/lodash/_baseIsNative.js","webpack://loki/../../../../../node_modules/lodash/_baseIsTypedArray.js","webpack://loki/../../../../../node_modules/lodash/_baseKeys.js","webpack://loki/../../../../../node_modules/lodash/_baseRepeat.js","webpack://loki/../../../../../node_modules/lodash/_baseTimes.js","webpack://loki/../../../../../node_modules/lodash/_baseToString.js","webpack://loki/../../../../../node_modules/lodash/_baseTrim.js","webpack://loki/../../../../../node_modules/lodash/_baseUnary.js","webpack://loki/../../../../../node_modules/lodash/_baseValues.js","webpack://loki/../../../../../node_modules/lodash/_coreJsData.js","webpack://loki/../../../../../node_modules/lodash/_freeGlobal.js","webpack://loki/../../../../../node_modules/lodash/_getNative.js","webpack://loki/../../../../../node_modules/lodash/_getRawTag.js","webpack://loki/../../../../../node_modules/lodash/_getTag.js","webpack://loki/../../../../../node_modules/lodash/_getValue.js","webpack://loki/../../../../../node_modules/lodash/_isIndex.js","webpack://loki/../../../../../node_modules/lodash/_isIterateeCall.js","webpack://loki/../../../../../node_modules/lodash/_isMasked.js","webpack://loki/../../../../../node_modules/lodash/_isPrototype.js","webpack://loki/../../../../../node_modules/lodash/_nativeKeys.js","webpack://loki/../../../../../node_modules/lodash/_nodeUtil.js","webpack://loki/../../../../../node_modules/lodash/_objectToString.js","webpack://loki/../../../../../node_modules/lodash/_overArg.js","webpack://loki/../../../../../node_modules/lodash/_root.js","webpack://loki/../../../../../node_modules/lodash/_strictIndexOf.js","webpack://loki/../../../../../node_modules/lodash/_toSource.js","webpack://loki/../../../../../node_modules/lodash/_trimmedEndIndex.js","webpack://loki/../../../../../node_modules/lodash/eq.js","webpack://loki/../../../../../node_modules/lodash/escapeRegExp.js","webpack://loki/../../../../../node_modules/lodash/includes.js","webpack://loki/../../../../../node_modules/lodash/isArguments.js","webpack://loki/../../../../../node_modules/lodash/isArray.js","webpack://loki/../../../../../node_modules/lodash/isArrayLike.js","webpack://loki/../../../../../node_modules/lodash/isBuffer.js","webpack://loki/../../../../../node_modules/lodash/isEmpty.js","webpack://loki/../../../../../node_modules/lodash/isFunction.js","webpack://loki/../../../../../node_modules/lodash/isLength.js","webpack://loki/../../../../../node_modules/lodash/isObject.js","webpack://loki/../../../../../node_modules/lodash/isObjectLike.js","webpack://loki/../../../../../node_modules/lodash/isString.js","webpack://loki/../../../../../node_modules/lodash/isSymbol.js","webpack://loki/../../../../../node_modules/lodash/isTypedArray.js","webpack://loki/../../../../../node_modules/lodash/keys.js","webpack://loki/../../../../../node_modules/lodash/last.js","webpack://loki/../../../../../node_modules/lodash/repeat.js","webpack://loki/../../../../../node_modules/lodash/stubFalse.js","webpack://loki/../../../../../node_modules/lodash/toFinite.js","webpack://loki/../../../../../node_modules/lodash/toInteger.js","webpack://loki/../../../../../node_modules/lodash/toNumber.js","webpack://loki/../../../../../node_modules/lodash/toString.js","webpack://loki/../../../../../node_modules/lodash/values.js","webpack://loki/../../../../../node_modules/pluralize/pluralize.js","webpack://loki/../../../../../node_modules/react-fast-compare/index.js","webpack://loki/../../../../../node_modules/react-use/esm/useMountedState.js","webpack://loki/../../../../../node_modules/react-use/esm/usePrevious.js","webpack://loki/../../../../../node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://loki/../../../../../node_modules/react/jsx-runtime.js","webpack://loki/../../../../../node_modules/semver/classes/comparator.js","webpack://loki/../../../../../node_modules/semver/classes/range.js","webpack://loki/../../../../../node_modules/semver/classes/semver.js","webpack://loki/../../../../../node_modules/semver/functions/clean.js","webpack://loki/../../../../../node_modules/semver/functions/cmp.js","webpack://loki/../../../../../node_modules/semver/functions/coerce.js","webpack://loki/../../../../../node_modules/semver/functions/compare-build.js","webpack://loki/../../../../../node_modules/semver/functions/compare-loose.js","webpack://loki/../../../../../node_modules/semver/functions/compare.js","webpack://loki/../../../../../node_modules/semver/functions/diff.js","webpack://loki/../../../../../node_modules/semver/functions/eq.js","webpack://loki/../../../../../node_modules/semver/functions/gt.js","webpack://loki/../../../../../node_modules/semver/functions/gte.js","webpack://loki/../../../../../node_modules/semver/functions/inc.js","webpack://loki/../../../../../node_modules/semver/functions/lt.js","webpack://loki/../../../../../node_modules/semver/functions/lte.js","webpack://loki/../../../../../node_modules/semver/functions/major.js","webpack://loki/../../../../../node_modules/semver/functions/minor.js","webpack://loki/../../../../../node_modules/semver/functions/neq.js","webpack://loki/../../../../../node_modules/semver/functions/parse.js","webpack://loki/../../../../../node_modules/semver/functions/patch.js","webpack://loki/../../../../../node_modules/semver/functions/prerelease.js","webpack://loki/../../../../../node_modules/semver/functions/rcompare.js","webpack://loki/../../../../../node_modules/semver/functions/rsort.js","webpack://loki/../../../../../node_modules/semver/functions/satisfies.js","webpack://loki/../../../../../node_modules/semver/functions/sort.js","webpack://loki/../../../../../node_modules/semver/functions/valid.js","webpack://loki/../../../../../node_modules/semver/index.js","webpack://loki/../../../../../node_modules/semver/internal/constants.js","webpack://loki/../../../../../node_modules/semver/internal/debug.js","webpack://loki/../../../../../node_modules/semver/internal/identifiers.js","webpack://loki/../../../../../node_modules/semver/internal/lrucache.js","webpack://loki/../../../../../node_modules/semver/internal/parse-options.js","webpack://loki/../../../../../node_modules/semver/internal/re.js","webpack://loki/../../../../../node_modules/semver/ranges/gtr.js","webpack://loki/../../../../../node_modules/semver/ranges/intersects.js","webpack://loki/../../../../../node_modules/semver/ranges/ltr.js","webpack://loki/../../../../../node_modules/semver/ranges/max-satisfying.js","webpack://loki/../../../../../node_modules/semver/ranges/min-satisfying.js","webpack://loki/../../../../../node_modules/semver/ranges/min-version.js","webpack://loki/../../../../../node_modules/semver/ranges/outside.js","webpack://loki/../../../../../node_modules/semver/ranges/simplify.js","webpack://loki/../../../../../node_modules/semver/ranges/subset.js","webpack://loki/../../../../../node_modules/semver/ranges/to-comparators.js","webpack://loki/../../../../../node_modules/semver/ranges/valid.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/core/Formatter.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/core/Indentation.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/core/InlineBlock.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/core/Params.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/core/Tokenizer.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/core/tokenTypes.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/languages/Db2Formatter.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/languages/N1qlFormatter.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/languages/PlSqlFormatter.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/languages/StandardSqlFormatter.js","webpack://loki/../../../../../node_modules/sql-formatter-plus/lib/sqlFormatter.js","webpack://loki/../../../../../packages/grafana-e2e-selectors/src/resolver.ts","webpack://loki/../../../../../packages/grafana-e2e-selectors/src/selectors/constants.ts","webpack://loki/../../../../../packages/grafana-e2e-selectors/src/selectors/components.ts","webpack://loki/../../../../../packages/grafana-e2e-selectors/src/selectors/index.ts","webpack://loki/../../../../../packages/grafana-e2e-selectors/src/selectors/pages.ts","webpack://loki/./components/LokiOptionFields.tsx","webpack://loki/./components/monaco-query-field/MonacoQueryFieldLazy.tsx","webpack://loki/./components/monaco-query-field/MonacoQueryFieldWrapper.tsx","webpack://loki/./components/LokiQueryField.tsx","webpack://loki/./components/monaco-query-field/monaco-completion-provider/validation.ts","webpack://loki/../../../../../node_modules/lru-cache/dist/esm/index.js","webpack://loki/./LanguageProvider.ts","webpack://loki/../../../../../node_modules/tslib/tslib.es6.mjs","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/config.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/Observable.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/Subject.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/observable/dom/WebSocketSubject.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/sha1.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/regex.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/validate.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/parse.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/v35.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/v5.js","webpack://loki/./liveStreamsResultTransformer.ts","webpack://loki/./LiveStreams.ts","webpack://loki/../../../../../node_modules/rxjs/dist/esm5/internal/observable/dom/webSocket.js","webpack://loki/../../../../../node_modules/react-use/esm/useAsync.js","webpack://loki/../../../../../node_modules/react-use/esm/useAsyncFn.js","webpack://loki/./components/LokiContextUi.tsx","webpack://loki/./sortDataFrame.ts","webpack://loki/./LogContextProvider.ts","webpack://loki/./migrations/variableQueryMigrations.ts","webpack://loki/./components/VariableQueryEditor.tsx","webpack://loki/./LokiVariableSupport.ts","webpack://loki/./getDerivedFields.ts","webpack://loki/./makeTableFrames.ts","webpack://loki/./backendResultTransformer.ts","webpack://loki/./components/AnnotationsQueryEditor.tsx","webpack://loki/./mergeResponses.ts","webpack://loki/./querySplitting.ts","webpack://loki/./logsTimeSplitting.ts","webpack://loki/./metricTimeSplitting.ts","webpack://loki/./shardQuerySplitting.ts","webpack://loki/./streaming.ts","webpack://loki/./datasource.ts","webpack://loki/./queryHints.ts","webpack://loki/./languageUtils.ts","webpack://loki/./modifyQuery.ts","webpack://loki/./queryUtils.ts","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/QueryModellerBase.js","webpack://loki/./querybuilder/LokiQueryModeller.ts","webpack://loki/./querybuilder/binaryScalarOperations.ts","webpack://loki/./querybuilder/components/LabelParamEditor.tsx","webpack://loki/./querybuilder/operationUtils.ts","webpack://loki/./querybuilder/components/UnwrapParamEditor.tsx","webpack://loki/./querybuilder/operations.ts","webpack://loki/./querybuilder/parsing.ts","webpack://loki/./querybuilder/parsingUtils.ts","webpack://loki/./querybuilder/types.ts","webpack://loki/./lineParser.ts","webpack://loki/./responseUtils.ts","webpack://loki/./syntax.ts","webpack://loki/./tracking.ts","webpack://loki/./dataquery.gen.ts","webpack://loki/./types.ts","webpack://loki/external amd \"@emotion/css\"","webpack://loki/external amd \"@grafana/data\"","webpack://loki/external amd \"@grafana/runtime\"","webpack://loki/external amd \"@grafana/ui\"","webpack://loki/external amd \"lodash\"","webpack://loki/external amd \"module\"","webpack://loki/external amd \"prismjs\"","webpack://loki/external amd \"react\"","webpack://loki/external amd \"react-dom\"","webpack://loki/external amd \"react-redux\"","webpack://loki/external amd \"redux\"","webpack://loki/external amd \"rxjs\"","webpack://loki/external amd \"rxjs/operators\"","webpack://loki/../../../../../node_modules/@lezer/common/dist/index.js","webpack://loki/../../../../../node_modules/@lezer/lr/dist/index.js","webpack://loki/../../../../../node_modules/@grafana/lezer-logql/index.es.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorField.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorRow.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorStack.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/RawQuery.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/types.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/stringify.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/native.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/rng.js","webpack://loki/../../../../../node_modules/uuid/dist/esm-browser/v4.js","webpack://loki/webpack/bootstrap","webpack://loki/webpack/runtime/compat get default export","webpack://loki/webpack/runtime/define property getters","webpack://loki/webpack/runtime/ensure chunk","webpack://loki/webpack/runtime/get javascript chunk filename","webpack://loki/webpack/runtime/global","webpack://loki/webpack/runtime/hasOwnProperty shorthand","webpack://loki/webpack/runtime/make namespace object","webpack://loki/webpack/runtime/node module decorator","webpack://loki/webpack/runtime/publicPath","webpack://loki/webpack/runtime/jsonp chunk loading","webpack://loki/./node_modules/grafana-public-path.js","webpack://loki/./components/LokiCheatSheet.tsx","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorHeader.js","webpack://loki/../../../../../node_modules/react-virtualized-auto-sizer/dist/react-virtualized-auto-sizer.esm.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/QueryHeaderSwitch.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/FlexItem.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/QueryEditorModeToggle.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorRows.js","webpack://loki/../../../../../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/extends.js","webpack://loki/../../../../../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://loki/../../../../../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://loki/../../../../../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://loki/../../../../../node_modules/react-window/node_modules/memoize-one/dist/memoize-one.esm.js","webpack://loki/../../../../../node_modules/react-window/dist/index.esm.js","webpack://loki/./components/LokiLabelBrowser.tsx","webpack://loki/./querybuilder/components/LabelBrowserModal.tsx","webpack://loki/../../../../../node_modules/immer/dist/immer.mjs","webpack://loki/../../../../../node_modules/@reduxjs/toolkit/dist/redux-toolkit.modern.mjs","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorFieldGroup.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/EditorList.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/InputGroup.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/QueryEditor/AccessoryButton.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/LabelFilterItem.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/LabelFilters.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationExplainedBox.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationsEditorRow.js","webpack://loki/../../../../../node_modules/use-memo-one/dist/use-memo-one.esm.js","webpack://loki/../../../../../node_modules/tiny-invariant/dist/esm/tiny-invariant.js","webpack://loki/../../../../../node_modules/css-box-model/dist/css-box-model.esm.js","webpack://loki/../../../../../node_modules/memoize-one/dist/memoize-one.esm.js","webpack://loki/../../../../../node_modules/raf-schd/dist/raf-schd.esm.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/node_modules/@babel/runtime/helpers/esm/extends.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/node_modules/@hello-pangea/dnd/dist/dnd.esm.js","webpack://loki/../../../../../node_modules/react-popper-tooltip/node_modules/@babel/runtime/helpers/esm/extends.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getWindow.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/math.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/userAgent.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/enums.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/orderModifiers.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/createPopper.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/debounce.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/mergeByName.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/eventListeners.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/getBasePlacement.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/getVariation.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/computeOffsets.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/computeStyles.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/applyStyles.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/offset.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/contains.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/rectToClientRect.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/expandToHashMap.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/detectOverflow.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/within.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/getAltAxis.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/arrow.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/hide.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/popper.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/modifiers/flip.js","webpack://loki/../../../../../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","webpack://loki/../../../../../node_modules/react-popper/lib/esm/utils.js","webpack://loki/../../../../../node_modules/react-popper/lib/esm/usePopper.js","webpack://loki/../../../../../node_modules/react-popper-tooltip/dist/esm/react-popper-tooltip.js","webpack://loki/../../../../../node_modules/react-popper-tooltip/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationInfoButton.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationHeader.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationParamEditor.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationEditorBody.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationEditor.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationList.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/QueryBuilderHints.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/OperationListExplained.js","webpack://loki/./querybuilder/components/LokiQueryBuilderExplained.tsx","webpack://loki/./querybuilder/components/NestedQuery.tsx","webpack://loki/./querybuilder/components/NestedQueryList.tsx","webpack://loki/./querybuilder/components/LokiQueryBuilder.tsx","webpack://loki/./querybuilder/components/QueryPreview.tsx","webpack://loki/./querybuilder/components/LokiQueryBuilderContainer.tsx","webpack://loki/../../../../../node_modules/react-use/esm/useToggle.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/VisualQueryBuilder/components/QueryOptionGroup.js","webpack://loki/./querybuilder/components/LokiQueryBuilderOptions.tsx","webpack://loki/./querybuilder/components/LokiQueryCodeEditor.tsx","webpack://loki/./querybuilder/components/QueryPattern.tsx","webpack://loki/./querybuilder/components/QueryPatternsModal.tsx","webpack://loki/./querybuilder/state.ts","webpack://loki/./components/stats.ts","webpack://loki/./components/LokiQueryEditor.tsx","webpack://loki/./components/LokiQueryEditorForAlerting.tsx","webpack://loki/./components/LokiQueryEditorByApp.tsx","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/DataSourceDescription.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/ConfigSection/GenericConfigSection.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/ConfigSection/ConfigSection.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Connection/ConnectionSettings.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/styles.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/auth-method/BasicAuth.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/ConfigSection/ConfigSubSection.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/types.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/auth-method/AuthMethodSettings.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/tls/TLSSettingsSection.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/tls/SelfSignedCertificate.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/tls/TLSClientAuth.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/tls/SkipTLSVerification.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/tls/TLSSettings.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/custom-headers/CustomHeader.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/custom-headers/CustomHeaders.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/Auth.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/Auth/utils.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/AdvancedSettings/AdvancedHttpSettings.js","webpack://loki/../../../../../node_modules/@grafana/plugin-ui/dist/esm/components/ConfigEditor/ConfigSection/ConfigDescriptionLink.js","webpack://loki/./configuration/AlertingSettings.tsx","webpack://loki/./configuration/DebugSection.tsx","webpack://loki/./configuration/DerivedField.tsx","webpack://loki/./configuration/DerivedFields.tsx","webpack://loki/./configuration/QuerySettings.tsx","webpack://loki/./configuration/ConfigEditor.tsx","webpack://loki/./module.ts"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"loki:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor;\n\n/**\n * The base implementation of `_.repeat` which doesn't coerce arguments.\n *\n * @private\n * @param {string} string The string to repeat.\n * @param {number} n The number of times to repeat the string.\n * @returns {string} Returns the repeated string.\n */\nfunction baseRepeat(string, n) {\n  var result = '';\n  if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n    return result;\n  }\n  // Leverage the exponentiation by squaring algorithm for a faster repeat.\n  // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n  do {\n    if (n % 2) {\n      result += string;\n    }\n    n = nativeFloor(n / 2);\n    if (n) {\n      string += string;\n    }\n  } while (n);\n\n  return result;\n}\n\nmodule.exports = baseRepeat;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var toString = require('./toString');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n    reHasRegExpChar = RegExp(reRegExpChar.source);\n\n/**\n * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n */\nfunction escapeRegExp(string) {\n  string = toString(string);\n  return (string && reHasRegExpChar.test(string))\n    ? string.replace(reRegExpChar, '\\\\$&')\n    : string;\n}\n\nmodule.exports = escapeRegExp;\n","var baseIndexOf = require('./_baseIndexOf'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    toInteger = require('./toInteger'),\n    values = require('./values');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\nmodule.exports = includes;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var baseRepeat = require('./_baseRepeat'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toInteger = require('./toInteger'),\n    toString = require('./toString');\n\n/**\n * Repeats the given string `n` times.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to repeat.\n * @param {number} [n=1] The number of times to repeat the string.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the repeated string.\n * @example\n *\n * _.repeat('*', 3);\n * // => '***'\n *\n * _.repeat('abc', 2);\n * // => 'abcabc'\n *\n * _.repeat('abc', 0);\n * // => ''\n */\nfunction repeat(string, n, guard) {\n  if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n    n = 1;\n  } else {\n    n = toInteger(n);\n  }\n  return baseRepeat(toString(string), n);\n}\n\nmodule.exports = repeat;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","/* global define */\n\n(function (root, pluralize) {\n  /* istanbul ignore else */\n  if (typeof require === 'function' && typeof exports === 'object' && typeof module === 'object') {\n    // Node.\n    module.exports = pluralize();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD, registers as an anonymous module.\n    define(function () {\n      return pluralize();\n    });\n  } else {\n    // Browser global.\n    root.pluralize = pluralize();\n  }\n})(this, function () {\n  // Rule storage - pluralize and singularize need to be run sequentially,\n  // while other rules can be optimized using an object for instant lookups.\n  var pluralRules = [];\n  var singularRules = [];\n  var uncountables = {};\n  var irregularPlurals = {};\n  var irregularSingles = {};\n\n  /**\n   * Sanitize a pluralization rule to a usable regular expression.\n   *\n   * @param  {(RegExp|string)} rule\n   * @return {RegExp}\n   */\n  function sanitizeRule (rule) {\n    if (typeof rule === 'string') {\n      return new RegExp('^' + rule + '$', 'i');\n    }\n\n    return rule;\n  }\n\n  /**\n   * Pass in a word token to produce a function that can replicate the case on\n   * another word.\n   *\n   * @param  {string}   word\n   * @param  {string}   token\n   * @return {Function}\n   */\n  function restoreCase (word, token) {\n    // Tokens are an exact match.\n    if (word === token) return token;\n\n    // Lower cased words. E.g. \"hello\".\n    if (word === word.toLowerCase()) return token.toLowerCase();\n\n    // Upper cased words. E.g. \"WHISKY\".\n    if (word === word.toUpperCase()) return token.toUpperCase();\n\n    // Title cased words. E.g. \"Title\".\n    if (word[0] === word[0].toUpperCase()) {\n      return token.charAt(0).toUpperCase() + token.substr(1).toLowerCase();\n    }\n\n    // Lower cased words. E.g. \"test\".\n    return token.toLowerCase();\n  }\n\n  /**\n   * Interpolate a regexp string.\n   *\n   * @param  {string} str\n   * @param  {Array}  args\n   * @return {string}\n   */\n  function interpolate (str, args) {\n    return str.replace(/\\$(\\d{1,2})/g, function (match, index) {\n      return args[index] || '';\n    });\n  }\n\n  /**\n   * Replace a word using a rule.\n   *\n   * @param  {string} word\n   * @param  {Array}  rule\n   * @return {string}\n   */\n  function replace (word, rule) {\n    return word.replace(rule[0], function (match, index) {\n      var result = interpolate(rule[1], arguments);\n\n      if (match === '') {\n        return restoreCase(word[index - 1], result);\n      }\n\n      return restoreCase(match, result);\n    });\n  }\n\n  /**\n   * Sanitize a word by passing in the word and sanitization rules.\n   *\n   * @param  {string}   token\n   * @param  {string}   word\n   * @param  {Array}    rules\n   * @return {string}\n   */\n  function sanitizeWord (token, word, rules) {\n    // Empty string or doesn't need fixing.\n    if (!token.length || uncountables.hasOwnProperty(token)) {\n      return word;\n    }\n\n    var len = rules.length;\n\n    // Iterate over the sanitization rules and use the first one to match.\n    while (len--) {\n      var rule = rules[len];\n\n      if (rule[0].test(word)) return replace(word, rule);\n    }\n\n    return word;\n  }\n\n  /**\n   * Replace a word with the updated word.\n   *\n   * @param  {Object}   replaceMap\n   * @param  {Object}   keepMap\n   * @param  {Array}    rules\n   * @return {Function}\n   */\n  function replaceWord (replaceMap, keepMap, rules) {\n    return function (word) {\n      // Get the correct token and case restoration functions.\n      var token = word.toLowerCase();\n\n      // Check against the keep object map.\n      if (keepMap.hasOwnProperty(token)) {\n        return restoreCase(word, token);\n      }\n\n      // Check against the replacement map for a direct word replacement.\n      if (replaceMap.hasOwnProperty(token)) {\n        return restoreCase(word, replaceMap[token]);\n      }\n\n      // Run all the rules against the word.\n      return sanitizeWord(token, word, rules);\n    };\n  }\n\n  /**\n   * Check if a word is part of the map.\n   */\n  function checkWord (replaceMap, keepMap, rules, bool) {\n    return function (word) {\n      var token = word.toLowerCase();\n\n      if (keepMap.hasOwnProperty(token)) return true;\n      if (replaceMap.hasOwnProperty(token)) return false;\n\n      return sanitizeWord(token, token, rules) === token;\n    };\n  }\n\n  /**\n   * Pluralize or singularize a word based on the passed in count.\n   *\n   * @param  {string}  word      The word to pluralize\n   * @param  {number}  count     How many of the word exist\n   * @param  {boolean} inclusive Whether to prefix with the number (e.g. 3 ducks)\n   * @return {string}\n   */\n  function pluralize (word, count, inclusive) {\n    var pluralized = count === 1\n      ? pluralize.singular(word) : pluralize.plural(word);\n\n    return (inclusive ? count + ' ' : '') + pluralized;\n  }\n\n  /**\n   * Pluralize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.plural = replaceWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Check if a word is plural.\n   *\n   * @type {Function}\n   */\n  pluralize.isPlural = checkWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Singularize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.singular = replaceWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Check if a word is singular.\n   *\n   * @type {Function}\n   */\n  pluralize.isSingular = checkWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Add a pluralization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addPluralRule = function (rule, replacement) {\n    pluralRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add a singularization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addSingularRule = function (rule, replacement) {\n    singularRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add an uncountable word rule.\n   *\n   * @param {(string|RegExp)} word\n   */\n  pluralize.addUncountableRule = function (word) {\n    if (typeof word === 'string') {\n      uncountables[word.toLowerCase()] = true;\n      return;\n    }\n\n    // Set singular and plural references for the word.\n    pluralize.addPluralRule(word, '$0');\n    pluralize.addSingularRule(word, '$0');\n  };\n\n  /**\n   * Add an irregular word definition.\n   *\n   * @param {string} single\n   * @param {string} plural\n   */\n  pluralize.addIrregularRule = function (single, plural) {\n    plural = plural.toLowerCase();\n    single = single.toLowerCase();\n\n    irregularSingles[single] = plural;\n    irregularPlurals[plural] = single;\n  };\n\n  /**\n   * Irregular rules.\n   */\n  [\n    // Pronouns.\n    ['I', 'we'],\n    ['me', 'us'],\n    ['he', 'they'],\n    ['she', 'they'],\n    ['them', 'them'],\n    ['myself', 'ourselves'],\n    ['yourself', 'yourselves'],\n    ['itself', 'themselves'],\n    ['herself', 'themselves'],\n    ['himself', 'themselves'],\n    ['themself', 'themselves'],\n    ['is', 'are'],\n    ['was', 'were'],\n    ['has', 'have'],\n    ['this', 'these'],\n    ['that', 'those'],\n    // Words ending in with a consonant and `o`.\n    ['echo', 'echoes'],\n    ['dingo', 'dingoes'],\n    ['volcano', 'volcanoes'],\n    ['tornado', 'tornadoes'],\n    ['torpedo', 'torpedoes'],\n    // Ends with `us`.\n    ['genus', 'genera'],\n    ['viscus', 'viscera'],\n    // Ends with `ma`.\n    ['stigma', 'stigmata'],\n    ['stoma', 'stomata'],\n    ['dogma', 'dogmata'],\n    ['lemma', 'lemmata'],\n    ['schema', 'schemata'],\n    ['anathema', 'anathemata'],\n    // Other irregular rules.\n    ['ox', 'oxen'],\n    ['axe', 'axes'],\n    ['die', 'dice'],\n    ['yes', 'yeses'],\n    ['foot', 'feet'],\n    ['eave', 'eaves'],\n    ['goose', 'geese'],\n    ['tooth', 'teeth'],\n    ['quiz', 'quizzes'],\n    ['human', 'humans'],\n    ['proof', 'proofs'],\n    ['carve', 'carves'],\n    ['valve', 'valves'],\n    ['looey', 'looies'],\n    ['thief', 'thieves'],\n    ['groove', 'grooves'],\n    ['pickaxe', 'pickaxes'],\n    ['passerby', 'passersby']\n  ].forEach(function (rule) {\n    return pluralize.addIrregularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Pluralization rules.\n   */\n  [\n    [/s?$/i, 's'],\n    [/[^\\u0000-\\u007F]$/i, '$0'],\n    [/([^aeiou]ese)$/i, '$1'],\n    [/(ax|test)is$/i, '$1es'],\n    [/(alias|[^aou]us|t[lm]as|gas|ris)$/i, '$1es'],\n    [/(e[mn]u)s?$/i, '$1s'],\n    [/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i, '$1'],\n    [/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1i'],\n    [/(alumn|alg|vertebr)(?:a|ae)$/i, '$1ae'],\n    [/(seraph|cherub)(?:im)?$/i, '$1im'],\n    [/(her|at|gr)o$/i, '$1oes'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i, '$1a'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i, '$1a'],\n    [/sis$/i, 'ses'],\n    [/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i, '$1$2ves'],\n    [/([^aeiouy]|qu)y$/i, '$1ies'],\n    [/([^ch][ieo][ln])ey$/i, '$1ies'],\n    [/(x|ch|ss|sh|zz)$/i, '$1es'],\n    [/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i, '$1ices'],\n    [/\\b((?:tit)?m|l)(?:ice|ouse)$/i, '$1ice'],\n    [/(pe)(?:rson|ople)$/i, '$1ople'],\n    [/(child)(?:ren)?$/i, '$1ren'],\n    [/eaux$/i, '$0'],\n    [/m[ae]n$/i, 'men'],\n    ['thou', 'you']\n  ].forEach(function (rule) {\n    return pluralize.addPluralRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Singularization rules.\n   */\n  [\n    [/s$/i, ''],\n    [/(ss)$/i, '$1'],\n    [/(wi|kni|(?:after|half|high|low|mid|non|night|[^\\w]|^)li)ves$/i, '$1fe'],\n    [/(ar|(?:wo|[ae])l|[eo][ao])ves$/i, '$1f'],\n    [/ies$/i, 'y'],\n    [/\\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i, '$1ie'],\n    [/\\b(mon|smil)ies$/i, '$1ey'],\n    [/\\b((?:tit)?m|l)ice$/i, '$1ouse'],\n    [/(seraph|cherub)im$/i, '$1'],\n    [/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i, '$1'],\n    [/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i, '$1sis'],\n    [/(movie|twelve|abuse|e[mn]u)s$/i, '$1'],\n    [/(test)(?:is|es)$/i, '$1is'],\n    [/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1us'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i, '$1um'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i, '$1on'],\n    [/(alumn|alg|vertebr)ae$/i, '$1a'],\n    [/(cod|mur|sil|vert|ind)ices$/i, '$1ex'],\n    [/(matr|append)ices$/i, '$1ix'],\n    [/(pe)(rson|ople)$/i, '$1rson'],\n    [/(child)ren$/i, '$1'],\n    [/(eau)x?$/i, '$1'],\n    [/men$/i, 'man']\n  ].forEach(function (rule) {\n    return pluralize.addSingularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Uncountable rules.\n   */\n  [\n    // Singular words with no plurals.\n    'adulthood',\n    'advice',\n    'agenda',\n    'aid',\n    'aircraft',\n    'alcohol',\n    'ammo',\n    'analytics',\n    'anime',\n    'athletics',\n    'audio',\n    'bison',\n    'blood',\n    'bream',\n    'buffalo',\n    'butter',\n    'carp',\n    'cash',\n    'chassis',\n    'chess',\n    'clothing',\n    'cod',\n    'commerce',\n    'cooperation',\n    'corps',\n    'debris',\n    'diabetes',\n    'digestion',\n    'elk',\n    'energy',\n    'equipment',\n    'excretion',\n    'expertise',\n    'firmware',\n    'flounder',\n    'fun',\n    'gallows',\n    'garbage',\n    'graffiti',\n    'hardware',\n    'headquarters',\n    'health',\n    'herpes',\n    'highjinks',\n    'homework',\n    'housework',\n    'information',\n    'jeans',\n    'justice',\n    'kudos',\n    'labour',\n    'literature',\n    'machinery',\n    'mackerel',\n    'mail',\n    'media',\n    'mews',\n    'moose',\n    'music',\n    'mud',\n    'manga',\n    'news',\n    'only',\n    'personnel',\n    'pike',\n    'plankton',\n    'pliers',\n    'police',\n    'pollution',\n    'premises',\n    'rain',\n    'research',\n    'rice',\n    'salmon',\n    'scissors',\n    'series',\n    'sewage',\n    'shambles',\n    'shrimp',\n    'software',\n    'species',\n    'staff',\n    'swine',\n    'tennis',\n    'traffic',\n    'transportation',\n    'trout',\n    'tuna',\n    'wealth',\n    'welfare',\n    'whiting',\n    'wildebeest',\n    'wildlife',\n    'you',\n    /pok[e]mon$/i,\n    // Regexes.\n    /[^aeiou]ese$/i, // \"chinese\", \"japanese\"\n    /deer$/i, // \"deer\", \"reindeer\"\n    /fish$/i, // \"fish\", \"blowfish\", \"angelfish\"\n    /measles$/i,\n    /o[iu]s$/i, // \"carnivorous\"\n    /pox$/i, // \"chickpox\", \"smallpox\"\n    /sheep$/i\n  ].forEach(pluralize.addUncountableRule);\n\n  return pluralize;\n});\n","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.1\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","import { useCallback, useEffect, useRef } from 'react';\nexport default function useMountedState() {\n    var mountedRef = useRef(false);\n    var get = useCallback(function () { return mountedRef.current; }, []);\n    useEffect(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return get;\n}\n","import { useEffect, useRef } from 'react';\nexport default function usePrevious(state) {\n    var ref = useRef();\n    useEffect(function () {\n        ref.current = state;\n    });\n    return ref.current;\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","'use strict'\n\nconst parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","'use strict'\n\nconst compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","'use strict'\n\nconst parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // If the main part has no difference\n    if (lowVersion.compareMain(highVersion) === 0) {\n      if (lowVersion.minor && !lowVersion.patch) {\n        return 'minor'\n      }\n      return 'patch'\n    }\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","'use strict'\n\nconst SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","'use strict'\n\nconst parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","'use strict'\n\nconst compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","'use strict'\n\nconst compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","'use strict'\n\nconst compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","'use strict'\n\nconst parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","'use strict'\n\n// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numberic identifiers include numberic identifiers but can be longer.\n// Therefore non-numberic identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","'use strict'\n\n// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","'use strict'\n\nconst Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","'use strict'\n\nconst outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","'use strict'\n\n// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","'use strict'\n\nconst Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","'use strict'\n\nconst Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","'use strict'\n\nconst Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _includes = _interopRequireDefault(require(\"lodash/includes\"));\n\nvar _tokenTypes = _interopRequireDefault(require(\"./tokenTypes\"));\n\nvar _Indentation = _interopRequireDefault(require(\"./Indentation\"));\n\nvar _InlineBlock = _interopRequireDefault(require(\"./InlineBlock\"));\n\nvar _Params = _interopRequireDefault(require(\"./Params\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar trimSpacesEnd = function trimSpacesEnd(str) {\n  return str.replace(/[\\t ]+$/, '');\n};\n\nvar Formatter =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @param {Object} cfg\r\n   *  @param {String} cfg.language\r\n   *  @param {String} cfg.indent\r\n   *  @param {Bool} cfg.uppercase\r\n   *  @param {Integer} cfg.linesBetweenQueries\r\n   *  @param {Object} cfg.params\r\n   * @param {Tokenizer} tokenizer\r\n   */\n  function Formatter(cfg, tokenizer, tokenOverride) {\n    _classCallCheck(this, Formatter);\n\n    this.cfg = cfg || {};\n    this.indentation = new _Indentation[\"default\"](this.cfg.indent);\n    this.inlineBlock = new _InlineBlock[\"default\"]();\n    this.params = new _Params[\"default\"](this.cfg.params);\n    this.tokenizer = tokenizer;\n    this.tokenOverride = tokenOverride;\n    this.previousReservedWord = {};\n    this.tokens = [];\n    this.index = 0;\n  }\n  /**\r\n   * Formats whitespace in a SQL string to make it easier to read.\r\n   *\r\n   * @param {String} query The SQL query string\r\n   * @return {String} formatted query\r\n   */\n\n\n  _createClass(Formatter, [{\n    key: \"format\",\n    value: function format(query) {\n      this.tokens = this.tokenizer.tokenize(query);\n      var formattedQuery = this.getFormattedQueryFromTokens();\n      return formattedQuery.trim();\n    }\n  }, {\n    key: \"getFormattedQueryFromTokens\",\n    value: function getFormattedQueryFromTokens() {\n      var _this = this;\n\n      var formattedQuery = '';\n      this.tokens.forEach(function (token, index) {\n        _this.index = index;\n        if (_this.tokenOverride) token = _this.tokenOverride(token, _this.previousReservedWord) || token;\n\n        if (token.type === _tokenTypes[\"default\"].WHITESPACE) {// ignore (we do our own whitespace formatting)\n        } else if (token.type === _tokenTypes[\"default\"].LINE_COMMENT) {\n          formattedQuery = _this.formatLineComment(token, formattedQuery);\n        } else if (token.type === _tokenTypes[\"default\"].BLOCK_COMMENT) {\n          formattedQuery = _this.formatBlockComment(token, formattedQuery);\n        } else if (token.type === _tokenTypes[\"default\"].RESERVED_TOP_LEVEL) {\n          formattedQuery = _this.formatTopLevelReservedWord(token, formattedQuery);\n          _this.previousReservedWord = token;\n        } else if (token.type === _tokenTypes[\"default\"].RESERVED_TOP_LEVEL_NO_INDENT) {\n          formattedQuery = _this.formatTopLevelReservedWordNoIndent(token, formattedQuery);\n          _this.previousReservedWord = token;\n        } else if (token.type === _tokenTypes[\"default\"].RESERVED_NEWLINE) {\n          formattedQuery = _this.formatNewlineReservedWord(token, formattedQuery);\n          _this.previousReservedWord = token;\n        } else if (token.type === _tokenTypes[\"default\"].RESERVED) {\n          formattedQuery = _this.formatWithSpaces(token, formattedQuery);\n          _this.previousReservedWord = token;\n        } else if (token.type === _tokenTypes[\"default\"].OPEN_PAREN) {\n          formattedQuery = _this.formatOpeningParentheses(token, formattedQuery);\n        } else if (token.type === _tokenTypes[\"default\"].CLOSE_PAREN) {\n          formattedQuery = _this.formatClosingParentheses(token, formattedQuery);\n        } else if (token.type === _tokenTypes[\"default\"].PLACEHOLDER) {\n          formattedQuery = _this.formatPlaceholder(token, formattedQuery);\n        } else if (token.value === ',') {\n          formattedQuery = _this.formatComma(token, formattedQuery);\n        } else if (token.value === ':') {\n          formattedQuery = _this.formatWithSpaceAfter(token, formattedQuery);\n        } else if (token.value === '.') {\n          formattedQuery = _this.formatWithoutSpaces(token, formattedQuery);\n        } else if (token.value === ';') {\n          formattedQuery = _this.formatQuerySeparator(token, formattedQuery);\n        } else {\n          formattedQuery = _this.formatWithSpaces(token, formattedQuery);\n        }\n      });\n      return formattedQuery;\n    }\n  }, {\n    key: \"formatLineComment\",\n    value: function formatLineComment(token, query) {\n      return this.addNewline(query + token.value);\n    }\n  }, {\n    key: \"formatBlockComment\",\n    value: function formatBlockComment(token, query) {\n      return this.addNewline(this.addNewline(query) + this.indentComment(token.value));\n    }\n  }, {\n    key: \"indentComment\",\n    value: function indentComment(comment) {\n      return comment.replace(/\\n[\\t ]*/g, '\\n' + this.indentation.getIndent() + ' ');\n    }\n  }, {\n    key: \"formatTopLevelReservedWordNoIndent\",\n    value: function formatTopLevelReservedWordNoIndent(token, query) {\n      this.indentation.decreaseTopLevel();\n      query = this.addNewline(query) + this.equalizeWhitespace(this.formatReservedWord(token.value));\n      return this.addNewline(query);\n    }\n  }, {\n    key: \"formatTopLevelReservedWord\",\n    value: function formatTopLevelReservedWord(token, query) {\n      this.indentation.decreaseTopLevel();\n      query = this.addNewline(query);\n      this.indentation.increaseTopLevel();\n      query += this.equalizeWhitespace(this.formatReservedWord(token.value));\n      return this.addNewline(query);\n    }\n  }, {\n    key: \"formatNewlineReservedWord\",\n    value: function formatNewlineReservedWord(token, query) {\n      return this.addNewline(query) + this.equalizeWhitespace(this.formatReservedWord(token.value)) + ' ';\n    } // Replace any sequence of whitespace characters with single space\n\n  }, {\n    key: \"equalizeWhitespace\",\n    value: function equalizeWhitespace(string) {\n      return string.replace(/[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+/g, ' ');\n    } // Opening parentheses increase the block indent level and start a new line\n\n  }, {\n    key: \"formatOpeningParentheses\",\n    value: function formatOpeningParentheses(token, query) {\n      // Take out the preceding space unless there was whitespace there in the original query\n      // or another opening parens or line comment\n      var preserveWhitespaceFor = [_tokenTypes[\"default\"].WHITESPACE, _tokenTypes[\"default\"].OPEN_PAREN, _tokenTypes[\"default\"].LINE_COMMENT];\n\n      if (!(0, _includes[\"default\"])(preserveWhitespaceFor, this.previousToken().type)) {\n        query = trimSpacesEnd(query);\n      }\n\n      query += this.cfg.uppercase ? token.value.toUpperCase() : token.value;\n      this.inlineBlock.beginIfPossible(this.tokens, this.index);\n\n      if (!this.inlineBlock.isActive()) {\n        this.indentation.increaseBlockLevel();\n        query = this.addNewline(query);\n      }\n\n      return query;\n    } // Closing parentheses decrease the block indent level\n\n  }, {\n    key: \"formatClosingParentheses\",\n    value: function formatClosingParentheses(token, query) {\n      token.value = this.cfg.uppercase ? token.value.toUpperCase() : token.value;\n\n      if (this.inlineBlock.isActive()) {\n        this.inlineBlock.end();\n        return this.formatWithSpaceAfter(token, query);\n      } else {\n        this.indentation.decreaseBlockLevel();\n        return this.formatWithSpaces(token, this.addNewline(query));\n      }\n    }\n  }, {\n    key: \"formatPlaceholder\",\n    value: function formatPlaceholder(token, query) {\n      return query + this.params.get(token) + ' ';\n    } // Commas start a new line (unless within inline parentheses or SQL \"LIMIT\" clause)\n\n  }, {\n    key: \"formatComma\",\n    value: function formatComma(token, query) {\n      query = trimSpacesEnd(query) + token.value + ' ';\n\n      if (this.inlineBlock.isActive()) {\n        return query;\n      } else if (/^LIMIT$/i.test(this.previousReservedWord.value)) {\n        return query;\n      } else {\n        return this.addNewline(query);\n      }\n    }\n  }, {\n    key: \"formatWithSpaceAfter\",\n    value: function formatWithSpaceAfter(token, query) {\n      return trimSpacesEnd(query) + token.value + ' ';\n    }\n  }, {\n    key: \"formatWithoutSpaces\",\n    value: function formatWithoutSpaces(token, query) {\n      return trimSpacesEnd(query) + token.value;\n    }\n  }, {\n    key: \"formatWithSpaces\",\n    value: function formatWithSpaces(token, query) {\n      var value = token.type === 'reserved' ? this.formatReservedWord(token.value) : token.value;\n      return query + value + ' ';\n    }\n  }, {\n    key: \"formatReservedWord\",\n    value: function formatReservedWord(value) {\n      return this.cfg.uppercase ? value.toUpperCase() : value;\n    }\n  }, {\n    key: \"formatQuerySeparator\",\n    value: function formatQuerySeparator(token, query) {\n      this.indentation.resetIndentation();\n      return trimSpacesEnd(query) + token.value + '\\n'.repeat(this.cfg.linesBetweenQueries || 1);\n    }\n  }, {\n    key: \"addNewline\",\n    value: function addNewline(query) {\n      query = trimSpacesEnd(query);\n      if (!query.endsWith('\\n')) query += '\\n';\n      return query + this.indentation.getIndent();\n    }\n  }, {\n    key: \"previousToken\",\n    value: function previousToken() {\n      var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      return this.tokens[this.index - offset] || {};\n    }\n  }]);\n\n  return Formatter;\n}();\n\nexports[\"default\"] = Formatter;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _repeat = _interopRequireDefault(require(\"lodash/repeat\"));\n\nvar _last = _interopRequireDefault(require(\"lodash/last\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar INDENT_TYPE_TOP_LEVEL = 'top-level';\nvar INDENT_TYPE_BLOCK_LEVEL = 'block-level';\n/**\r\n * Manages indentation levels.\r\n *\r\n * There are two types of indentation levels:\r\n *\r\n * - BLOCK_LEVEL : increased by open-parenthesis\r\n * - TOP_LEVEL : increased by RESERVED_TOP_LEVEL words\r\n */\n\nvar Indentation =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @param {String} indent Indent value, default is \"  \" (2 spaces)\r\n   */\n  function Indentation(indent) {\n    _classCallCheck(this, Indentation);\n\n    this.indent = indent || '  ';\n    this.indentTypes = [];\n  }\n  /**\r\n   * Returns current indentation string.\r\n   * @return {String}\r\n   */\n\n\n  _createClass(Indentation, [{\n    key: \"getIndent\",\n    value: function getIndent() {\n      return (0, _repeat[\"default\"])(this.indent, this.indentTypes.length);\n    }\n    /**\r\n     * Increases indentation by one top-level indent.\r\n     */\n\n  }, {\n    key: \"increaseTopLevel\",\n    value: function increaseTopLevel() {\n      this.indentTypes.push(INDENT_TYPE_TOP_LEVEL);\n    }\n    /**\r\n     * Increases indentation by one block-level indent.\r\n     */\n\n  }, {\n    key: \"increaseBlockLevel\",\n    value: function increaseBlockLevel() {\n      this.indentTypes.push(INDENT_TYPE_BLOCK_LEVEL);\n    }\n    /**\r\n     * Decreases indentation by one top-level indent.\r\n     * Does nothing when the previous indent is not top-level.\r\n     */\n\n  }, {\n    key: \"decreaseTopLevel\",\n    value: function decreaseTopLevel() {\n      if ((0, _last[\"default\"])(this.indentTypes) === INDENT_TYPE_TOP_LEVEL) {\n        this.indentTypes.pop();\n      }\n    }\n    /**\r\n     * Decreases indentation by one block-level indent.\r\n     * If there are top-level indents within the block-level indent,\r\n     * throws away these as well.\r\n     */\n\n  }, {\n    key: \"decreaseBlockLevel\",\n    value: function decreaseBlockLevel() {\n      while (this.indentTypes.length > 0) {\n        var type = this.indentTypes.pop();\n\n        if (type !== INDENT_TYPE_TOP_LEVEL) {\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"resetIndentation\",\n    value: function resetIndentation() {\n      this.indentTypes = [];\n    }\n  }]);\n\n  return Indentation;\n}();\n\nexports[\"default\"] = Indentation;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _tokenTypes = _interopRequireDefault(require(\"./tokenTypes\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar INLINE_MAX_LENGTH = 50;\n/**\r\n * Bookkeeper for inline blocks.\r\n *\r\n * Inline blocks are parenthesized expressions that are shorter than INLINE_MAX_LENGTH.\r\n * These blocks are formatted on a single line, unlike longer parenthesized\r\n * expressions where open-parenthesis causes newline and increase of indentation.\r\n */\n\nvar InlineBlock =\n/*#__PURE__*/\nfunction () {\n  function InlineBlock() {\n    _classCallCheck(this, InlineBlock);\n\n    this.level = 0;\n  }\n  /**\r\n   * Begins inline block when lookahead through upcoming tokens determines\r\n   * that the block would be smaller than INLINE_MAX_LENGTH.\r\n   * @param  {Object[]} tokens Array of all tokens\r\n   * @param  {Number} index Current token position\r\n   */\n\n\n  _createClass(InlineBlock, [{\n    key: \"beginIfPossible\",\n    value: function beginIfPossible(tokens, index) {\n      if (this.level === 0 && this.isInlineBlock(tokens, index)) {\n        this.level = 1;\n      } else if (this.level > 0) {\n        this.level++;\n      } else {\n        this.level = 0;\n      }\n    }\n    /**\r\n     * Finishes current inline block.\r\n     * There might be several nested ones.\r\n     */\n\n  }, {\n    key: \"end\",\n    value: function end() {\n      this.level--;\n    }\n    /**\r\n     * True when inside an inline block\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return this.level > 0;\n    } // Check if this should be an inline parentheses block\n    // Examples are \"NOW()\", \"COUNT(*)\", \"int(10)\", key(`some_column`), DECIMAL(7,2)\n\n  }, {\n    key: \"isInlineBlock\",\n    value: function isInlineBlock(tokens, index) {\n      var length = 0;\n      var level = 0;\n\n      for (var i = index; i < tokens.length; i++) {\n        var token = tokens[i];\n        length += token.value.length; // Overran max length\n\n        if (length > INLINE_MAX_LENGTH) {\n          return false;\n        }\n\n        if (token.type === _tokenTypes[\"default\"].OPEN_PAREN) {\n          level++;\n        } else if (token.type === _tokenTypes[\"default\"].CLOSE_PAREN) {\n          level--;\n\n          if (level === 0) {\n            return true;\n          }\n        }\n\n        if (this.isForbiddenToken(token)) {\n          return false;\n        }\n      }\n\n      return false;\n    } // Reserved words that cause newlines, comments and semicolons\n    // are not allowed inside inline parentheses block\n\n  }, {\n    key: \"isForbiddenToken\",\n    value: function isForbiddenToken(_ref) {\n      var type = _ref.type,\n          value = _ref.value;\n      return type === _tokenTypes[\"default\"].RESERVED_TOP_LEVEL || type === _tokenTypes[\"default\"].RESERVED_NEWLINE || type === _tokenTypes[\"default\"].COMMENT || type === _tokenTypes[\"default\"].BLOCK_COMMENT || value === ';';\n    }\n  }]);\n\n  return InlineBlock;\n}();\n\nexports[\"default\"] = InlineBlock;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\r\n * Handles placeholder replacement with given params.\r\n */\nvar Params =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @param {Object} params\r\n   */\n  function Params(params) {\n    _classCallCheck(this, Params);\n\n    this.params = params;\n    this.index = 0;\n  }\n  /**\r\n   * Returns param value that matches given placeholder with param key.\r\n   * @param {Object} token\r\n   *   @param {String} token.key Placeholder key\r\n   *   @param {String} token.value Placeholder value\r\n   * @return {String} param or token.value when params are missing\r\n   */\n\n\n  _createClass(Params, [{\n    key: \"get\",\n    value: function get(_ref) {\n      var key = _ref.key,\n          value = _ref.value;\n\n      if (!this.params) {\n        return value;\n      }\n\n      if (key) {\n        return this.params[key];\n      }\n\n      return this.params[this.index++];\n    }\n  }]);\n\n  return Params;\n}();\n\nexports[\"default\"] = Params;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _isEmpty = _interopRequireDefault(require(\"lodash/isEmpty\"));\n\nvar _escapeRegExp = _interopRequireDefault(require(\"lodash/escapeRegExp\"));\n\nvar _tokenTypes = _interopRequireDefault(require(\"./tokenTypes\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Tokenizer =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @param {Object} cfg\r\n   *  @param {String[]} cfg.reservedWords Reserved words in SQL\r\n   *  @param {String[]} cfg.reservedTopLevelWords Words that are set to new line separately\r\n   *  @param {String[]} cfg.reservedNewlineWords Words that are set to newline\r\n   *  @param {String[]} cfg.reservedTopLevelWordsNoIndent Words that are top level but have no indentation\r\n   *  @param {String[]} cfg.stringTypes String types to enable: \"\", '', ``, [], N''\r\n   *  @param {String[]} cfg.openParens Opening parentheses to enable, like (, [\r\n   *  @param {String[]} cfg.closeParens Closing parentheses to enable, like ), ]\r\n   *  @param {String[]} cfg.indexedPlaceholderTypes Prefixes for indexed placeholders, like ?\r\n   *  @param {String[]} cfg.namedPlaceholderTypes Prefixes for named placeholders, like @ and :\r\n   *  @param {String[]} cfg.lineCommentTypes Line comments to enable, like # and --\r\n   *  @param {String[]} cfg.specialWordChars Special chars that can be found inside of words, like @ and #\r\n   */\n  function Tokenizer(cfg) {\n    _classCallCheck(this, Tokenizer);\n\n    this.WHITESPACE_REGEX = /^([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+)/;\n    this.NUMBER_REGEX = /^((\\x2D[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*)?[0-9]+(\\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\\b/;\n    this.OPERATOR_REGEX = /^(!=|<>|==|<=|>=|!<|!>|\\|\\||::|\\x2D>>|\\x2D>|~~\\*|~~|!~~\\*|!~~|~\\*|!~\\*|!~|:=|(?:[\\0-\\t\\x0B\\f\\x0E-\\u2027\\u202A-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]))/;\n    this.BLOCK_COMMENT_REGEX = /^(\\/\\*(?:[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*?(?:\\*\\/|$))/;\n    this.LINE_COMMENT_REGEX = this.createLineCommentRegex(cfg.lineCommentTypes);\n    this.RESERVED_TOP_LEVEL_REGEX = this.createReservedWordRegex(cfg.reservedTopLevelWords);\n    this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX = this.createReservedWordRegex(cfg.reservedTopLevelWordsNoIndent);\n    this.RESERVED_NEWLINE_REGEX = this.createReservedWordRegex(cfg.reservedNewlineWords);\n    this.RESERVED_PLAIN_REGEX = this.createReservedWordRegex(cfg.reservedWords);\n    this.WORD_REGEX = this.createWordRegex(cfg.specialWordChars);\n    this.STRING_REGEX = this.createStringRegex(cfg.stringTypes);\n    this.OPEN_PAREN_REGEX = this.createParenRegex(cfg.openParens);\n    this.CLOSE_PAREN_REGEX = this.createParenRegex(cfg.closeParens);\n    this.INDEXED_PLACEHOLDER_REGEX = this.createPlaceholderRegex(cfg.indexedPlaceholderTypes, '[0-9]*');\n    this.IDENT_NAMED_PLACEHOLDER_REGEX = this.createPlaceholderRegex(cfg.namedPlaceholderTypes, '[a-zA-Z0-9._$]+');\n    this.STRING_NAMED_PLACEHOLDER_REGEX = this.createPlaceholderRegex(cfg.namedPlaceholderTypes, this.createStringPattern(cfg.stringTypes));\n  }\n\n  _createClass(Tokenizer, [{\n    key: \"createLineCommentRegex\",\n    value: function createLineCommentRegex(lineCommentTypes) {\n      return new RegExp(\"^((?:\".concat(lineCommentTypes.map(function (c) {\n        return (0, _escapeRegExp[\"default\"])(c);\n      }).join('|'), \").*?(?:\\r\\n|\\r|\\n|$))\"), 'u');\n    }\n  }, {\n    key: \"createReservedWordRegex\",\n    value: function createReservedWordRegex(reservedWords) {\n      var reservedWordsPattern = reservedWords.join('|').replace(/ /g, '\\\\s+');\n      return new RegExp(\"^(\".concat(reservedWordsPattern, \")\\\\b\"), 'iu');\n    }\n  }, {\n    key: \"createWordRegex\",\n    value: function createWordRegex() {\n      var specialChars = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      return new RegExp(\"^([\\\\p{Alphabetic}\\\\p{Mark}\\\\p{Decimal_Number}\\\\p{Connector_Punctuation}\\\\p{Join_Control}\".concat(specialChars.join(''), \"]+)\"), 'u');\n    }\n  }, {\n    key: \"createStringRegex\",\n    value: function createStringRegex(stringTypes) {\n      return new RegExp('^(' + this.createStringPattern(stringTypes) + ')', 'u');\n    } // This enables the following string patterns:\n    // 1. backtick quoted string using `` to escape\n    // 2. square bracket quoted string (SQL Server) using ]] to escape\n    // 3. double quoted string using \"\" or \\\" to escape\n    // 4. single quoted string using '' or \\' to escape\n    // 5. national character quoted string using N'' or N\\' to escape\n\n  }, {\n    key: \"createStringPattern\",\n    value: function createStringPattern(stringTypes) {\n      var patterns = {\n        '``': '((`[^`]*($|`))+)',\n        '[]': '((\\\\[[^\\\\]]*($|\\\\]))(\\\\][^\\\\]]*($|\\\\]))*)',\n        '\"\"': '((\"[^\"\\\\\\\\]*(?:\\\\\\\\.[^\"\\\\\\\\]*)*(\"|$))+)',\n        \"''\": \"(('[^'\\\\\\\\]*(?:\\\\\\\\.[^'\\\\\\\\]*)*('|$))+)\",\n        \"N''\": \"((N'[^N'\\\\\\\\]*(?:\\\\\\\\.[^N'\\\\\\\\]*)*('|$))+)\"\n      };\n      return stringTypes.map(function (t) {\n        return patterns[t];\n      }).join('|');\n    }\n  }, {\n    key: \"createParenRegex\",\n    value: function createParenRegex(parens) {\n      var _this = this;\n\n      return new RegExp('^(' + parens.map(function (p) {\n        return _this.escapeParen(p);\n      }).join('|') + ')', 'iu');\n    }\n  }, {\n    key: \"escapeParen\",\n    value: function escapeParen(paren) {\n      if (paren.length === 1) {\n        // A single punctuation character\n        return (0, _escapeRegExp[\"default\"])(paren);\n      } else {\n        // longer word\n        return '\\\\b' + paren + '\\\\b';\n      }\n    }\n  }, {\n    key: \"createPlaceholderRegex\",\n    value: function createPlaceholderRegex(types, pattern) {\n      if ((0, _isEmpty[\"default\"])(types)) {\n        return false;\n      }\n\n      var typesRegex = types.map(_escapeRegExp[\"default\"]).join('|');\n      return new RegExp(\"^((?:\".concat(typesRegex, \")(?:\").concat(pattern, \"))\"), 'u');\n    }\n    /**\r\n     * Takes a SQL string and breaks it into tokens.\r\n     * Each token is an object with type and value.\r\n     *\r\n     * @param {String} input The SQL string\r\n     * @return {Object[]} tokens An array of tokens.\r\n     *  @return {String} token.type\r\n     *  @return {String} token.value\r\n     */\n\n  }, {\n    key: \"tokenize\",\n    value: function tokenize(input) {\n      if (!input) return [];\n      var tokens = [];\n      var token; // Keep processing the string until it is empty\n\n      while (input.length) {\n        // Get the next token and the token type\n        token = this.getNextToken(input, token); // Advance the string\n\n        input = input.substring(token.value.length);\n        tokens.push(token);\n      }\n\n      return tokens;\n    }\n  }, {\n    key: \"getNextToken\",\n    value: function getNextToken(input, previousToken) {\n      return this.getWhitespaceToken(input) || this.getCommentToken(input) || this.getStringToken(input) || this.getOpenParenToken(input) || this.getCloseParenToken(input) || this.getPlaceholderToken(input) || this.getNumberToken(input) || this.getReservedWordToken(input, previousToken) || this.getWordToken(input) || this.getOperatorToken(input);\n    }\n  }, {\n    key: \"getWhitespaceToken\",\n    value: function getWhitespaceToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].WHITESPACE,\n        regex: this.WHITESPACE_REGEX\n      });\n    }\n  }, {\n    key: \"getCommentToken\",\n    value: function getCommentToken(input) {\n      return this.getLineCommentToken(input) || this.getBlockCommentToken(input);\n    }\n  }, {\n    key: \"getLineCommentToken\",\n    value: function getLineCommentToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].LINE_COMMENT,\n        regex: this.LINE_COMMENT_REGEX\n      });\n    }\n  }, {\n    key: \"getBlockCommentToken\",\n    value: function getBlockCommentToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].BLOCK_COMMENT,\n        regex: this.BLOCK_COMMENT_REGEX\n      });\n    }\n  }, {\n    key: \"getStringToken\",\n    value: function getStringToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].STRING,\n        regex: this.STRING_REGEX\n      });\n    }\n  }, {\n    key: \"getOpenParenToken\",\n    value: function getOpenParenToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].OPEN_PAREN,\n        regex: this.OPEN_PAREN_REGEX\n      });\n    }\n  }, {\n    key: \"getCloseParenToken\",\n    value: function getCloseParenToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].CLOSE_PAREN,\n        regex: this.CLOSE_PAREN_REGEX\n      });\n    }\n  }, {\n    key: \"getPlaceholderToken\",\n    value: function getPlaceholderToken(input) {\n      return this.getIdentNamedPlaceholderToken(input) || this.getStringNamedPlaceholderToken(input) || this.getIndexedPlaceholderToken(input);\n    }\n  }, {\n    key: \"getIdentNamedPlaceholderToken\",\n    value: function getIdentNamedPlaceholderToken(input) {\n      return this.getPlaceholderTokenWithKey({\n        input: input,\n        regex: this.IDENT_NAMED_PLACEHOLDER_REGEX,\n        parseKey: function parseKey(v) {\n          return v.slice(1);\n        }\n      });\n    }\n  }, {\n    key: \"getStringNamedPlaceholderToken\",\n    value: function getStringNamedPlaceholderToken(input) {\n      var _this2 = this;\n\n      return this.getPlaceholderTokenWithKey({\n        input: input,\n        regex: this.STRING_NAMED_PLACEHOLDER_REGEX,\n        parseKey: function parseKey(v) {\n          return _this2.getEscapedPlaceholderKey({\n            key: v.slice(2, -1),\n            quoteChar: v.slice(-1)\n          });\n        }\n      });\n    }\n  }, {\n    key: \"getIndexedPlaceholderToken\",\n    value: function getIndexedPlaceholderToken(input) {\n      return this.getPlaceholderTokenWithKey({\n        input: input,\n        regex: this.INDEXED_PLACEHOLDER_REGEX,\n        parseKey: function parseKey(v) {\n          return v.slice(1);\n        }\n      });\n    }\n  }, {\n    key: \"getPlaceholderTokenWithKey\",\n    value: function getPlaceholderTokenWithKey(_ref) {\n      var input = _ref.input,\n          regex = _ref.regex,\n          parseKey = _ref.parseKey;\n      var token = this.getTokenOnFirstMatch({\n        input: input,\n        regex: regex,\n        type: _tokenTypes[\"default\"].PLACEHOLDER\n      });\n\n      if (token) {\n        token.key = parseKey(token.value);\n      }\n\n      return token;\n    }\n  }, {\n    key: \"getEscapedPlaceholderKey\",\n    value: function getEscapedPlaceholderKey(_ref2) {\n      var key = _ref2.key,\n          quoteChar = _ref2.quoteChar;\n      return key.replace(new RegExp((0, _escapeRegExp[\"default\"])('\\\\' + quoteChar), 'gu'), quoteChar);\n    } // Decimal, binary, or hex numbers\n\n  }, {\n    key: \"getNumberToken\",\n    value: function getNumberToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].NUMBER,\n        regex: this.NUMBER_REGEX\n      });\n    } // Punctuation and symbols\n\n  }, {\n    key: \"getOperatorToken\",\n    value: function getOperatorToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].OPERATOR,\n        regex: this.OPERATOR_REGEX\n      });\n    }\n  }, {\n    key: \"getReservedWordToken\",\n    value: function getReservedWordToken(input, previousToken) {\n      // A reserved word cannot be preceded by a \".\"\n      // this makes it so in \"my_table.from\", \"from\" is not considered a reserved word\n      if (previousToken && previousToken.value && previousToken.value === '.') {\n        return;\n      }\n\n      return this.getTopLevelReservedToken(input) || this.getNewlineReservedToken(input) || this.getTopLevelReservedTokenNoIndent(input) || this.getPlainReservedToken(input);\n    }\n  }, {\n    key: \"getTopLevelReservedToken\",\n    value: function getTopLevelReservedToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].RESERVED_TOP_LEVEL,\n        regex: this.RESERVED_TOP_LEVEL_REGEX\n      });\n    }\n  }, {\n    key: \"getNewlineReservedToken\",\n    value: function getNewlineReservedToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].RESERVED_NEWLINE,\n        regex: this.RESERVED_NEWLINE_REGEX\n      });\n    }\n  }, {\n    key: \"getTopLevelReservedTokenNoIndent\",\n    value: function getTopLevelReservedTokenNoIndent(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].RESERVED_TOP_LEVEL_NO_INDENT,\n        regex: this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX\n      });\n    }\n  }, {\n    key: \"getPlainReservedToken\",\n    value: function getPlainReservedToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].RESERVED,\n        regex: this.RESERVED_PLAIN_REGEX\n      });\n    }\n  }, {\n    key: \"getWordToken\",\n    value: function getWordToken(input) {\n      return this.getTokenOnFirstMatch({\n        input: input,\n        type: _tokenTypes[\"default\"].WORD,\n        regex: this.WORD_REGEX\n      });\n    }\n  }, {\n    key: \"getTokenOnFirstMatch\",\n    value: function getTokenOnFirstMatch(_ref3) {\n      var input = _ref3.input,\n          type = _ref3.type,\n          regex = _ref3.regex;\n      var matches = input.match(regex);\n\n      if (matches) {\n        return {\n          type: type,\n          value: matches[1]\n        };\n      }\n    }\n  }]);\n\n  return Tokenizer;\n}();\n\nexports[\"default\"] = Tokenizer;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\n/**\r\n * Constants for token types\r\n */\nvar _default = {\n  WHITESPACE: 'whitespace',\n  WORD: 'word',\n  STRING: 'string',\n  RESERVED: 'reserved',\n  RESERVED_TOP_LEVEL: 'reserved-top-level',\n  RESERVED_TOP_LEVEL_NO_INDENT: 'reserved-top-level-no-indent',\n  RESERVED_NEWLINE: 'reserved-newline',\n  OPERATOR: 'operator',\n  OPEN_PAREN: 'open-paren',\n  CLOSE_PAREN: 'close-paren',\n  LINE_COMMENT: 'line-comment',\n  BLOCK_COMMENT: 'block-comment',\n  NUMBER: 'number',\n  PLACEHOLDER: 'placeholder'\n};\nexports[\"default\"] = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _Formatter = _interopRequireDefault(require(\"../core/Formatter\"));\n\nvar _Tokenizer = _interopRequireDefault(require(\"../core/Tokenizer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar reservedWords = ['ABS', 'ACTIVATE', 'ALIAS', 'ALL', 'ALLOCATE', 'ALLOW', 'ALTER', 'ANY', 'ARE', 'ARRAY', 'AS', 'ASC', 'ASENSITIVE', 'ASSOCIATE', 'ASUTIME', 'ASYMMETRIC', 'AT', 'ATOMIC', 'ATTRIBUTES', 'AUDIT', 'AUTHORIZATION', 'AUX', 'AUXILIARY', 'AVG', 'BEFORE', 'BEGIN', 'BETWEEN', 'BIGINT', 'BINARY', 'BLOB', 'BOOLEAN', 'BOTH', 'BUFFERPOOL', 'BY', 'CACHE', 'CALL', 'CALLED', 'CAPTURE', 'CARDINALITY', 'CASCADED', 'CASE', 'CAST', 'CCSID', 'CEIL', 'CEILING', 'CHAR', 'CHARACTER', 'CHARACTER_LENGTH', 'CHAR_LENGTH', 'CHECK', 'CLOB', 'CLONE', 'CLOSE', 'CLUSTER', 'COALESCE', 'COLLATE', 'COLLECT', 'COLLECTION', 'COLLID', 'COLUMN', 'COMMENT', 'COMMIT', 'CONCAT', 'CONDITION', 'CONNECT', 'CONNECTION', 'CONSTRAINT', 'CONTAINS', 'CONTINUE', 'CONVERT', 'CORR', 'CORRESPONDING', 'COUNT', 'COUNT_BIG', 'COVAR_POP', 'COVAR_SAMP', 'CREATE', 'CROSS', 'CUBE', 'CUME_DIST', 'CURRENT', 'CURRENT_DATE', 'CURRENT_DEFAULT_TRANSFORM_GROUP', 'CURRENT_LC_CTYPE', 'CURRENT_PATH', 'CURRENT_ROLE', 'CURRENT_SCHEMA', 'CURRENT_SERVER', 'CURRENT_TIME', 'CURRENT_TIMESTAMP', 'CURRENT_TIMEZONE', 'CURRENT_TRANSFORM_GROUP_FOR_TYPE', 'CURRENT_USER', 'CURSOR', 'CYCLE', 'DATA', 'DATABASE', 'DATAPARTITIONNAME', 'DATAPARTITIONNUM', 'DATE', 'DAY', 'DAYS', 'DB2GENERAL', 'DB2GENRL', 'DB2SQL', 'DBINFO', 'DBPARTITIONNAME', 'DBPARTITIONNUM', 'DEALLOCATE', 'DEC', 'DECIMAL', 'DECLARE', 'DEFAULT', 'DEFAULTS', 'DEFINITION', 'DELETE', 'DENSERANK', 'DENSE_RANK', 'DEREF', 'DESCRIBE', 'DESCRIPTOR', 'DETERMINISTIC', 'DIAGNOSTICS', 'DISABLE', 'DISALLOW', 'DISCONNECT', 'DISTINCT', 'DO', 'DOCUMENT', 'DOUBLE', 'DROP', 'DSSIZE', 'DYNAMIC', 'EACH', 'EDITPROC', 'ELEMENT', 'ELSE', 'ELSEIF', 'ENABLE', 'ENCODING', 'ENCRYPTION', 'END', 'END-EXEC', 'ENDING', 'ERASE', 'ESCAPE', 'EVERY', 'EXCEPTION', 'EXCLUDING', 'EXCLUSIVE', 'EXEC', 'EXECUTE', 'EXISTS', 'EXIT', 'EXP', 'EXPLAIN', 'EXTENDED', 'EXTERNAL', 'EXTRACT', 'FALSE', 'FENCED', 'FETCH', 'FIELDPROC', 'FILE', 'FILTER', 'FINAL', 'FIRST', 'FLOAT', 'FLOOR', 'FOR', 'FOREIGN', 'FREE', 'FULL', 'FUNCTION', 'FUSION', 'GENERAL', 'GENERATED', 'GET', 'GLOBAL', 'GOTO', 'GRANT', 'GRAPHIC', 'GROUP', 'GROUPING', 'HANDLER', 'HASH', 'HASHED_VALUE', 'HINT', 'HOLD', 'HOUR', 'HOURS', 'IDENTITY', 'IF', 'IMMEDIATE', 'IN', 'INCLUDING', 'INCLUSIVE', 'INCREMENT', 'INDEX', 'INDICATOR', 'INDICATORS', 'INF', 'INFINITY', 'INHERIT', 'INNER', 'INOUT', 'INSENSITIVE', 'INSERT', 'INT', 'INTEGER', 'INTEGRITY', 'INTERSECTION', 'INTERVAL', 'INTO', 'IS', 'ISOBID', 'ISOLATION', 'ITERATE', 'JAR', 'JAVA', 'KEEP', 'KEY', 'LABEL', 'LANGUAGE', 'LARGE', 'LATERAL', 'LC_CTYPE', 'LEADING', 'LEAVE', 'LEFT', 'LIKE', 'LINKTYPE', 'LN', 'LOCAL', 'LOCALDATE', 'LOCALE', 'LOCALTIME', 'LOCALTIMESTAMP', 'LOCATOR', 'LOCATORS', 'LOCK', 'LOCKMAX', 'LOCKSIZE', 'LONG', 'LOOP', 'LOWER', 'MAINTAINED', 'MATCH', 'MATERIALIZED', 'MAX', 'MAXVALUE', 'MEMBER', 'MERGE', 'METHOD', 'MICROSECOND', 'MICROSECONDS', 'MIN', 'MINUTE', 'MINUTES', 'MINVALUE', 'MOD', 'MODE', 'MODIFIES', 'MODULE', 'MONTH', 'MONTHS', 'MULTISET', 'NAN', 'NATIONAL', 'NATURAL', 'NCHAR', 'NCLOB', 'NEW', 'NEW_TABLE', 'NEXTVAL', 'NO', 'NOCACHE', 'NOCYCLE', 'NODENAME', 'NODENUMBER', 'NOMAXVALUE', 'NOMINVALUE', 'NONE', 'NOORDER', 'NORMALIZE', 'NORMALIZED', 'NOT', 'NULL', 'NULLIF', 'NULLS', 'NUMERIC', 'NUMPARTS', 'OBID', 'OCTET_LENGTH', 'OF', 'OFFSET', 'OLD', 'OLD_TABLE', 'ON', 'ONLY', 'OPEN', 'OPTIMIZATION', 'OPTIMIZE', 'OPTION', 'ORDER', 'OUT', 'OUTER', 'OVER', 'OVERLAPS', 'OVERLAY', 'OVERRIDING', 'PACKAGE', 'PADDED', 'PAGESIZE', 'PARAMETER', 'PART', 'PARTITION', 'PARTITIONED', 'PARTITIONING', 'PARTITIONS', 'PASSWORD', 'PATH', 'PERCENTILE_CONT', 'PERCENTILE_DISC', 'PERCENT_RANK', 'PIECESIZE', 'PLAN', 'POSITION', 'POWER', 'PRECISION', 'PREPARE', 'PREVVAL', 'PRIMARY', 'PRIQTY', 'PRIVILEGES', 'PROCEDURE', 'PROGRAM', 'PSID', 'PUBLIC', 'QUERY', 'QUERYNO', 'RANGE', 'RANK', 'READ', 'READS', 'REAL', 'RECOVERY', 'RECURSIVE', 'REF', 'REFERENCES', 'REFERENCING', 'REFRESH', 'REGR_AVGX', 'REGR_AVGY', 'REGR_COUNT', 'REGR_INTERCEPT', 'REGR_R2', 'REGR_SLOPE', 'REGR_SXX', 'REGR_SXY', 'REGR_SYY', 'RELEASE', 'RENAME', 'REPEAT', 'RESET', 'RESIGNAL', 'RESTART', 'RESTRICT', 'RESULT', 'RESULT_SET_LOCATOR', 'RETURN', 'RETURNS', 'REVOKE', 'RIGHT', 'ROLE', 'ROLLBACK', 'ROLLUP', 'ROUND_CEILING', 'ROUND_DOWN', 'ROUND_FLOOR', 'ROUND_HALF_DOWN', 'ROUND_HALF_EVEN', 'ROUND_HALF_UP', 'ROUND_UP', 'ROUTINE', 'ROW', 'ROWNUMBER', 'ROWS', 'ROWSET', 'ROW_NUMBER', 'RRN', 'RUN', 'SAVEPOINT', 'SCHEMA', 'SCOPE', 'SCRATCHPAD', 'SCROLL', 'SEARCH', 'SECOND', 'SECONDS', 'SECQTY', 'SECURITY', 'SENSITIVE', 'SEQUENCE', 'SESSION', 'SESSION_USER', 'SIGNAL', 'SIMILAR', 'SIMPLE', 'SMALLINT', 'SNAN', 'SOME', 'SOURCE', 'SPECIFIC', 'SPECIFICTYPE', 'SQL', 'SQLEXCEPTION', 'SQLID', 'SQLSTATE', 'SQLWARNING', 'SQRT', 'STACKED', 'STANDARD', 'START', 'STARTING', 'STATEMENT', 'STATIC', 'STATMENT', 'STAY', 'STDDEV_POP', 'STDDEV_SAMP', 'STOGROUP', 'STORES', 'STYLE', 'SUBMULTISET', 'SUBSTRING', 'SUM', 'SUMMARY', 'SYMMETRIC', 'SYNONYM', 'SYSFUN', 'SYSIBM', 'SYSPROC', 'SYSTEM', 'SYSTEM_USER', 'TABLE', 'TABLESAMPLE', 'TABLESPACE', 'THEN', 'TIME', 'TIMESTAMP', 'TIMEZONE_HOUR', 'TIMEZONE_MINUTE', 'TO', 'TRAILING', 'TRANSACTION', 'TRANSLATE', 'TRANSLATION', 'TREAT', 'TRIGGER', 'TRIM', 'TRUE', 'TRUNCATE', 'TYPE', 'UESCAPE', 'UNDO', 'UNIQUE', 'UNKNOWN', 'UNNEST', 'UNTIL', 'UPPER', 'USAGE', 'USER', 'USING', 'VALIDPROC', 'VALUE', 'VARCHAR', 'VARIABLE', 'VARIANT', 'VARYING', 'VAR_POP', 'VAR_SAMP', 'VCAT', 'VERSION', 'VIEW', 'VOLATILE', 'VOLUMES', 'WHEN', 'WHENEVER', 'WHILE', 'WIDTH_BUCKET', 'WINDOW', 'WITH', 'WITHIN', 'WITHOUT', 'WLM', 'WRITE', 'XMLELEMENT', 'XMLEXISTS', 'XMLNAMESPACES', 'YEAR', 'YEARS'];\nvar reservedTopLevelWords = ['ADD', 'AFTER', 'ALTER COLUMN', 'ALTER TABLE', 'DELETE FROM', 'EXCEPT', 'FETCH FIRST', 'FROM', 'GROUP BY', 'GO', 'HAVING', 'INSERT INTO', 'INTERSECT', 'LIMIT', 'ORDER BY', 'SELECT', 'SET CURRENT SCHEMA', 'SET SCHEMA', 'SET', 'UPDATE', 'VALUES', 'WHERE'];\nvar reservedTopLevelWordsNoIndent = ['INTERSECT', 'INTERSECT ALL', 'MINUS', 'UNION', 'UNION ALL'];\nvar reservedNewlineWords = ['AND', 'CROSS JOIN', 'INNER JOIN', 'JOIN', 'LEFT JOIN', 'LEFT OUTER JOIN', 'OR', 'OUTER JOIN', 'RIGHT JOIN', 'RIGHT OUTER JOIN'];\nvar tokenizer;\n\nvar Db2Formatter =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @param {Object} cfg Different set of configurations\r\n   */\n  function Db2Formatter(cfg) {\n    _classCallCheck(this, Db2Formatter);\n\n    this.cfg = cfg;\n  }\n  /**\r\n   * Formats DB2 query to make it easier to read\r\n   *\r\n   * @param {String} query The DB2 query string\r\n   * @return {String} formatted string\r\n   */\n\n\n  _createClass(Db2Formatter, [{\n    key: \"format\",\n    value: function format(query) {\n      if (!tokenizer) {\n        tokenizer = new _Tokenizer[\"default\"]({\n          reservedWords: reservedWords,\n          reservedTopLevelWords: reservedTopLevelWords,\n          reservedNewlineWords: reservedNewlineWords,\n          reservedTopLevelWordsNoIndent: reservedTopLevelWordsNoIndent,\n          stringTypes: [\"\\\"\\\"\", \"''\", '``', '[]'],\n          openParens: ['('],\n          closeParens: [')'],\n          indexedPlaceholderTypes: ['?'],\n          namedPlaceholderTypes: [':'],\n          lineCommentTypes: ['--'],\n          specialWordChars: ['#', '@']\n        });\n      }\n\n      return new _Formatter[\"default\"](this.cfg, tokenizer).format(query);\n    }\n  }]);\n\n  return Db2Formatter;\n}();\n\nexports[\"default\"] = Db2Formatter;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _Formatter = _interopRequireDefault(require(\"../core/Formatter\"));\n\nvar _Tokenizer = _interopRequireDefault(require(\"../core/Tokenizer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar reservedWords = ['ALL', 'ALTER', 'ANALYZE', 'AND', 'ANY', 'ARRAY', 'AS', 'ASC', 'BEGIN', 'BETWEEN', 'BINARY', 'BOOLEAN', 'BREAK', 'BUCKET', 'BUILD', 'BY', 'CALL', 'CASE', 'CAST', 'CLUSTER', 'COLLATE', 'COLLECTION', 'COMMIT', 'CONNECT', 'CONTINUE', 'CORRELATE', 'COVER', 'CREATE', 'DATABASE', 'DATASET', 'DATASTORE', 'DECLARE', 'DECREMENT', 'DELETE', 'DERIVED', 'DESC', 'DESCRIBE', 'DISTINCT', 'DO', 'DROP', 'EACH', 'ELEMENT', 'ELSE', 'END', 'EVERY', 'EXCEPT', 'EXCLUDE', 'EXECUTE', 'EXISTS', 'EXPLAIN', 'FALSE', 'FETCH', 'FIRST', 'FLATTEN', 'FOR', 'FORCE', 'FROM', 'FUNCTION', 'GRANT', 'GROUP', 'GSI', 'HAVING', 'IF', 'IGNORE', 'ILIKE', 'IN', 'INCLUDE', 'INCREMENT', 'INDEX', 'INFER', 'INLINE', 'INNER', 'INSERT', 'INTERSECT', 'INTO', 'IS', 'JOIN', 'KEY', 'KEYS', 'KEYSPACE', 'KNOWN', 'LAST', 'LEFT', 'LET', 'LETTING', 'LIKE', 'LIMIT', 'LSM', 'MAP', 'MAPPING', 'MATCHED', 'MATERIALIZED', 'MERGE', 'MISSING', 'NAMESPACE', 'NEST', 'NOT', 'NULL', 'NUMBER', 'OBJECT', 'OFFSET', 'ON', 'OPTION', 'OR', 'ORDER', 'OUTER', 'OVER', 'PARSE', 'PARTITION', 'PASSWORD', 'PATH', 'POOL', 'PREPARE', 'PRIMARY', 'PRIVATE', 'PRIVILEGE', 'PROCEDURE', 'PUBLIC', 'RAW', 'REALM', 'REDUCE', 'RENAME', 'RETURN', 'RETURNING', 'REVOKE', 'RIGHT', 'ROLE', 'ROLLBACK', 'SATISFIES', 'SCHEMA', 'SELECT', 'SELF', 'SEMI', 'SET', 'SHOW', 'SOME', 'START', 'STATISTICS', 'STRING', 'SYSTEM', 'THEN', 'TO', 'TRANSACTION', 'TRIGGER', 'TRUE', 'TRUNCATE', 'UNDER', 'UNION', 'UNIQUE', 'UNKNOWN', 'UNNEST', 'UNSET', 'UPDATE', 'UPSERT', 'USE', 'USER', 'USING', 'VALIDATE', 'VALUE', 'VALUED', 'VALUES', 'VIA', 'VIEW', 'WHEN', 'WHERE', 'WHILE', 'WITH', 'WITHIN', 'WORK', 'XOR'];\nvar reservedTopLevelWords = ['DELETE FROM', 'EXCEPT ALL', 'EXCEPT', 'EXPLAIN DELETE FROM', 'EXPLAIN UPDATE', 'EXPLAIN UPSERT', 'FROM', 'GROUP BY', 'HAVING', 'INFER', 'INSERT INTO', 'LET', 'LIMIT', 'MERGE', 'NEST', 'ORDER BY', 'PREPARE', 'SELECT', 'SET CURRENT SCHEMA', 'SET SCHEMA', 'SET', 'UNNEST', 'UPDATE', 'UPSERT', 'USE KEYS', 'VALUES', 'WHERE'];\nvar reservedTopLevelWordsNoIndent = ['INTERSECT', 'INTERSECT ALL', 'MINUS', 'UNION', 'UNION ALL'];\nvar reservedNewlineWords = ['AND', 'INNER JOIN', 'JOIN', 'LEFT JOIN', 'LEFT OUTER JOIN', 'OR', 'OUTER JOIN', 'RIGHT JOIN', 'RIGHT OUTER JOIN', 'XOR'];\nvar tokenizer;\n\nvar N1qlFormatter =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @param {Object} cfg Different set of configurations\r\n   */\n  function N1qlFormatter(cfg) {\n    _classCallCheck(this, N1qlFormatter);\n\n    this.cfg = cfg;\n  }\n  /**\r\n   * Format the whitespace in a N1QL string to make it easier to read\r\n   *\r\n   * @param {String} query The N1QL string\r\n   * @return {String} formatted string\r\n   */\n\n\n  _createClass(N1qlFormatter, [{\n    key: \"format\",\n    value: function format(query) {\n      if (!tokenizer) {\n        tokenizer = new _Tokenizer[\"default\"]({\n          reservedWords: reservedWords,\n          reservedTopLevelWords: reservedTopLevelWords,\n          reservedNewlineWords: reservedNewlineWords,\n          reservedTopLevelWordsNoIndent: reservedTopLevelWordsNoIndent,\n          stringTypes: [\"\\\"\\\"\", \"''\", '``'],\n          openParens: ['(', '[', '{'],\n          closeParens: [')', ']', '}'],\n          namedPlaceholderTypes: ['$'],\n          lineCommentTypes: ['#', '--']\n        });\n      }\n\n      return new _Formatter[\"default\"](this.cfg, tokenizer).format(query);\n    }\n  }]);\n\n  return N1qlFormatter;\n}();\n\nexports[\"default\"] = N1qlFormatter;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _Formatter = _interopRequireDefault(require(\"../core/Formatter\"));\n\nvar _Tokenizer = _interopRequireDefault(require(\"../core/Tokenizer\"));\n\nvar _tokenTypes = _interopRequireDefault(require(\"../core/tokenTypes\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar reservedWords = ['A', 'ACCESSIBLE', 'AGENT', 'AGGREGATE', 'ALL', 'ALTER', 'ANY', 'ARRAY', 'AS', 'ASC', 'AT', 'ATTRIBUTE', 'AUTHID', 'AVG', 'BETWEEN', 'BFILE_BASE', 'BINARY_INTEGER', 'BINARY', 'BLOB_BASE', 'BLOCK', 'BODY', 'BOOLEAN', 'BOTH', 'BOUND', 'BREADTH', 'BULK', 'BY', 'BYTE', 'C', 'CALL', 'CALLING', 'CASCADE', 'CASE', 'CHAR_BASE', 'CHAR', 'CHARACTER', 'CHARSET', 'CHARSETFORM', 'CHARSETID', 'CHECK', 'CLOB_BASE', 'CLONE', 'CLOSE', 'CLUSTER', 'CLUSTERS', 'COALESCE', 'COLAUTH', 'COLLECT', 'COLUMNS', 'COMMENT', 'COMMIT', 'COMMITTED', 'COMPILED', 'COMPRESS', 'CONNECT', 'CONSTANT', 'CONSTRUCTOR', 'CONTEXT', 'CONTINUE', 'CONVERT', 'COUNT', 'CRASH', 'CREATE', 'CREDENTIAL', 'CURRENT', 'CURRVAL', 'CURSOR', 'CUSTOMDATUM', 'DANGLING', 'DATA', 'DATE_BASE', 'DATE', 'DAY', 'DECIMAL', 'DEFAULT', 'DEFINE', 'DELETE', 'DEPTH', 'DESC', 'DETERMINISTIC', 'DIRECTORY', 'DISTINCT', 'DO', 'DOUBLE', 'DROP', 'DURATION', 'ELEMENT', 'ELSIF', 'EMPTY', 'END', 'ESCAPE', 'EXCEPTIONS', 'EXCLUSIVE', 'EXECUTE', 'EXISTS', 'EXIT', 'EXTENDS', 'EXTERNAL', 'EXTRACT', 'FALSE', 'FETCH', 'FINAL', 'FIRST', 'FIXED', 'FLOAT', 'FOR', 'FORALL', 'FORCE', 'FROM', 'FUNCTION', 'GENERAL', 'GOTO', 'GRANT', 'GROUP', 'HASH', 'HEAP', 'HIDDEN', 'HOUR', 'IDENTIFIED', 'IF', 'IMMEDIATE', 'IN', 'INCLUDING', 'INDEX', 'INDEXES', 'INDICATOR', 'INDICES', 'INFINITE', 'INSTANTIABLE', 'INT', 'INTEGER', 'INTERFACE', 'INTERVAL', 'INTO', 'INVALIDATE', 'IS', 'ISOLATION', 'JAVA', 'LANGUAGE', 'LARGE', 'LEADING', 'LENGTH', 'LEVEL', 'LIBRARY', 'LIKE', 'LIKE2', 'LIKE4', 'LIKEC', 'LIMITED', 'LOCAL', 'LOCK', 'LONG', 'MAP', 'MAX', 'MAXLEN', 'MEMBER', 'MERGE', 'MIN', 'MINUTE', 'MLSLABEL', 'MOD', 'MODE', 'MONTH', 'MULTISET', 'NAME', 'NAN', 'NATIONAL', 'NATIVE', 'NATURAL', 'NATURALN', 'NCHAR', 'NEW', 'NEXTVAL', 'NOCOMPRESS', 'NOCOPY', 'NOT', 'NOWAIT', 'NULL', 'NULLIF', 'NUMBER_BASE', 'NUMBER', 'OBJECT', 'OCICOLL', 'OCIDATE', 'OCIDATETIME', 'OCIDURATION', 'OCIINTERVAL', 'OCILOBLOCATOR', 'OCINUMBER', 'OCIRAW', 'OCIREF', 'OCIREFCURSOR', 'OCIROWID', 'OCISTRING', 'OCITYPE', 'OF', 'OLD', 'ON', 'ONLY', 'OPAQUE', 'OPEN', 'OPERATOR', 'OPTION', 'ORACLE', 'ORADATA', 'ORDER', 'ORGANIZATION', 'ORLANY', 'ORLVARY', 'OTHERS', 'OUT', 'OVERLAPS', 'OVERRIDING', 'PACKAGE', 'PARALLEL_ENABLE', 'PARAMETER', 'PARAMETERS', 'PARENT', 'PARTITION', 'PASCAL', 'PCTFREE', 'PIPE', 'PIPELINED', 'PLS_INTEGER', 'PLUGGABLE', 'POSITIVE', 'POSITIVEN', 'PRAGMA', 'PRECISION', 'PRIOR', 'PRIVATE', 'PROCEDURE', 'PUBLIC', 'RAISE', 'RANGE', 'RAW', 'READ', 'REAL', 'RECORD', 'REF', 'REFERENCE', 'RELEASE', 'RELIES_ON', 'REM', 'REMAINDER', 'RENAME', 'RESOURCE', 'RESULT_CACHE', 'RESULT', 'RETURN', 'RETURNING', 'REVERSE', 'REVOKE', 'ROLLBACK', 'ROW', 'ROWID', 'ROWNUM', 'ROWTYPE', 'SAMPLE', 'SAVE', 'SAVEPOINT', 'SB1', 'SB2', 'SB4', 'SEARCH', 'SECOND', 'SEGMENT', 'SELF', 'SEPARATE', 'SEQUENCE', 'SERIALIZABLE', 'SHARE', 'SHORT', 'SIZE_T', 'SIZE', 'SMALLINT', 'SOME', 'SPACE', 'SPARSE', 'SQL', 'SQLCODE', 'SQLDATA', 'SQLERRM', 'SQLNAME', 'SQLSTATE', 'STANDARD', 'START', 'STATIC', 'STDDEV', 'STORED', 'STRING', 'STRUCT', 'STYLE', 'SUBMULTISET', 'SUBPARTITION', 'SUBSTITUTABLE', 'SUBTYPE', 'SUCCESSFUL', 'SUM', 'SYNONYM', 'SYSDATE', 'TABAUTH', 'TABLE', 'TDO', 'THE', 'THEN', 'TIME', 'TIMESTAMP', 'TIMEZONE_ABBR', 'TIMEZONE_HOUR', 'TIMEZONE_MINUTE', 'TIMEZONE_REGION', 'TO', 'TRAILING', 'TRANSACTION', 'TRANSACTIONAL', 'TRIGGER', 'TRUE', 'TRUSTED', 'TYPE', 'UB1', 'UB2', 'UB4', 'UID', 'UNDER', 'UNIQUE', 'UNPLUG', 'UNSIGNED', 'UNTRUSTED', 'USE', 'USER', 'USING', 'VALIDATE', 'VALIST', 'VALUE', 'VARCHAR', 'VARCHAR2', 'VARIABLE', 'VARIANCE', 'VARRAY', 'VARYING', 'VIEW', 'VIEWS', 'VOID', 'WHENEVER', 'WHILE', 'WITH', 'WORK', 'WRAPPED', 'WRITE', 'YEAR', 'ZONE'];\nvar reservedTopLevelWords = ['ADD', 'ALTER COLUMN', 'ALTER TABLE', 'BEGIN', 'CONNECT BY', 'DECLARE', 'DELETE FROM', 'DELETE', 'END', 'EXCEPT', 'EXCEPTION', 'FETCH FIRST', 'FROM', 'GROUP BY', 'HAVING', 'INSERT INTO', 'INSERT', 'LIMIT', 'LOOP', 'MODIFY', 'ORDER BY', 'SELECT', 'SET CURRENT SCHEMA', 'SET SCHEMA', 'SET', 'START WITH', 'UPDATE', 'VALUES', 'WHERE'];\nvar reservedTopLevelWordsNoIndent = ['INTERSECT', 'INTERSECT ALL', 'MINUS', 'UNION', 'UNION ALL'];\nvar reservedNewlineWords = ['AND', 'CROSS APPLY', 'CROSS JOIN', 'ELSE', 'END', 'INNER JOIN', 'JOIN', 'LEFT JOIN', 'LEFT OUTER JOIN', 'OR', 'OUTER APPLY', 'OUTER JOIN', 'RIGHT JOIN', 'RIGHT OUTER JOIN', 'WHEN', 'XOR'];\n\nvar tokenOverride = function tokenOverride(token, previousReservedToken) {\n  if (token.type === _tokenTypes[\"default\"].RESERVED_TOP_LEVEL && token.value === 'SET' && previousReservedToken.value === 'BY') {\n    token.type = _tokenTypes[\"default\"].RESERVED;\n    return token;\n  }\n};\n\nvar tokenizer;\n\nvar PlSqlFormatter =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @param {Object} cfg Different set of configurations\r\n   */\n  function PlSqlFormatter(cfg) {\n    _classCallCheck(this, PlSqlFormatter);\n\n    this.cfg = cfg;\n  }\n  /**\r\n   * Format the whitespace in a PL/SQL string to make it easier to read\r\n   *\r\n   * @param {String} query The PL/SQL string\r\n   * @return {String} formatted string\r\n   */\n\n\n  _createClass(PlSqlFormatter, [{\n    key: \"format\",\n    value: function format(query) {\n      if (!tokenizer) {\n        tokenizer = new _Tokenizer[\"default\"]({\n          reservedWords: reservedWords,\n          reservedTopLevelWords: reservedTopLevelWords,\n          reservedNewlineWords: reservedNewlineWords,\n          reservedTopLevelWordsNoIndent: reservedTopLevelWordsNoIndent,\n          stringTypes: [\"\\\"\\\"\", \"N''\", \"''\", '``'],\n          openParens: ['(', 'CASE', 'BEGIN'],\n          closeParens: [')', 'END'],\n          indexedPlaceholderTypes: ['?'],\n          namedPlaceholderTypes: [':'],\n          lineCommentTypes: ['--'],\n          specialWordChars: ['_', '$', '#', '.', '@']\n        });\n      }\n\n      return new _Formatter[\"default\"](this.cfg, tokenizer, tokenOverride).format(query);\n    }\n  }]);\n\n  return PlSqlFormatter;\n}();\n\nexports[\"default\"] = PlSqlFormatter;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _Formatter = _interopRequireDefault(require(\"../core/Formatter\"));\n\nvar _Tokenizer = _interopRequireDefault(require(\"../core/Tokenizer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar reservedWords = ['ACCESSIBLE', 'ACTION', 'AGAINST', 'AGGREGATE', 'ALGORITHM', 'ALL', 'ALTER', 'ANALYSE', 'ANALYZE', 'AS', 'ASC', 'AUTOCOMMIT', 'AUTO_INCREMENT', 'BACKUP', 'BEGIN', 'BETWEEN', 'BINLOG', 'BOTH', 'CASCADE', 'CASE', 'CHANGE', 'CHANGED', 'CHARACTER SET', 'CHARSET', 'CHECK', 'CHECKSUM', 'COLLATE', 'COLLATION', 'COLUMN', 'COLUMNS', 'COMMENT', 'COMMIT', 'COMMITTED', 'COMPRESSED', 'CONCURRENT', 'CONSTRAINT', 'CONTAINS', 'CONVERT', 'CREATE', 'CROSS', 'CURRENT_TIMESTAMP', 'DATABASE', 'DATABASES', 'DAY', 'DAY_HOUR', 'DAY_MINUTE', 'DAY_SECOND', 'DEFAULT', 'DEFINER', 'DELAYED', 'DELETE', 'DESC', 'DESCRIBE', 'DETERMINISTIC', 'DISTINCT', 'DISTINCTROW', 'DIV', 'DO', 'DROP', 'DUMPFILE', 'DUPLICATE', 'DYNAMIC', 'ELSE', 'ENCLOSED', 'END', 'ENGINE', 'ENGINES', 'ENGINE_TYPE', 'ESCAPE', 'ESCAPED', 'EVENTS', 'EXEC', 'EXECUTE', 'EXISTS', 'EXPLAIN', 'EXTENDED', 'FAST', 'FETCH', 'FIELDS', 'FILE', 'FIRST', 'FIXED', 'FLUSH', 'FOR', 'FORCE', 'FOREIGN', 'FULL', 'FULLTEXT', 'FUNCTION', 'GLOBAL', 'GRANT', 'GRANTS', 'GROUP_CONCAT', 'HEAP', 'HIGH_PRIORITY', 'HOSTS', 'HOUR', 'HOUR_MINUTE', 'HOUR_SECOND', 'IDENTIFIED', 'IF', 'IFNULL', 'IGNORE', 'IN', 'INDEX', 'INDEXES', 'INFILE', 'INSERT', 'INSERT_ID', 'INSERT_METHOD', 'INTERVAL', 'INTO', 'INVOKER', 'IS', 'ISOLATION', 'KEY', 'KEYS', 'KILL', 'LAST_INSERT_ID', 'LEADING', 'LEVEL', 'LIKE', 'LINEAR', 'LINES', 'LOAD', 'LOCAL', 'LOCK', 'LOCKS', 'LOGS', 'LOW_PRIORITY', 'MARIA', 'MASTER', 'MASTER_CONNECT_RETRY', 'MASTER_HOST', 'MASTER_LOG_FILE', 'MATCH', 'MAX_CONNECTIONS_PER_HOUR', 'MAX_QUERIES_PER_HOUR', 'MAX_ROWS', 'MAX_UPDATES_PER_HOUR', 'MAX_USER_CONNECTIONS', 'MEDIUM', 'MERGE', 'MINUTE', 'MINUTE_SECOND', 'MIN_ROWS', 'MODE', 'MODIFY', 'MONTH', 'MRG_MYISAM', 'MYISAM', 'NAMES', 'NATURAL', 'NOT', 'NOW()', 'NULL', 'OFFSET', 'ON DELETE', 'ON UPDATE', 'ON', 'ONLY', 'OPEN', 'OPTIMIZE', 'OPTION', 'OPTIONALLY', 'OUTFILE', 'PACK_KEYS', 'PAGE', 'PARTIAL', 'PARTITION', 'PARTITIONS', 'PASSWORD', 'PRIMARY', 'PRIVILEGES', 'PROCEDURE', 'PROCESS', 'PROCESSLIST', 'PURGE', 'QUICK', 'RAID0', 'RAID_CHUNKS', 'RAID_CHUNKSIZE', 'RAID_TYPE', 'RANGE', 'READ', 'READ_ONLY', 'READ_WRITE', 'REFERENCES', 'REGEXP', 'RELOAD', 'RENAME', 'REPAIR', 'REPEATABLE', 'REPLACE', 'REPLICATION', 'RESET', 'RESTORE', 'RESTRICT', 'RETURN', 'RETURNS', 'REVOKE', 'RLIKE', 'ROLLBACK', 'ROW', 'ROWS', 'ROW_FORMAT', 'SECOND', 'SECURITY', 'SEPARATOR', 'SERIALIZABLE', 'SESSION', 'SHARE', 'SHOW', 'SHUTDOWN', 'SLAVE', 'SONAME', 'SOUNDS', 'SQL', 'SQL_AUTO_IS_NULL', 'SQL_BIG_RESULT', 'SQL_BIG_SELECTS', 'SQL_BIG_TABLES', 'SQL_BUFFER_RESULT', 'SQL_CACHE', 'SQL_CALC_FOUND_ROWS', 'SQL_LOG_BIN', 'SQL_LOG_OFF', 'SQL_LOG_UPDATE', 'SQL_LOW_PRIORITY_UPDATES', 'SQL_MAX_JOIN_SIZE', 'SQL_NO_CACHE', 'SQL_QUOTE_SHOW_CREATE', 'SQL_SAFE_UPDATES', 'SQL_SELECT_LIMIT', 'SQL_SLAVE_SKIP_COUNTER', 'SQL_SMALL_RESULT', 'SQL_WARNINGS', 'START', 'STARTING', 'STATUS', 'STOP', 'STORAGE', 'STRAIGHT_JOIN', 'STRING', 'STRIPED', 'SUPER', 'TABLE', 'TABLES', 'TEMPORARY', 'TERMINATED', 'THEN', 'TO', 'TRAILING', 'TRANSACTIONAL', 'TRUE', 'TRUNCATE', 'TYPE', 'TYPES', 'UNCOMMITTED', 'UNIQUE', 'UNLOCK', 'UNSIGNED', 'USAGE', 'USE', 'USING', 'VARIABLES', 'VIEW', 'WHEN', 'WITH', 'WORK', 'WRITE', 'YEAR_MONTH'];\nvar reservedTopLevelWords = ['ADD', 'AFTER', 'ALTER COLUMN', 'ALTER TABLE', 'DELETE FROM', 'EXCEPT', 'FETCH FIRST', 'FROM', 'GROUP BY', 'GO', 'HAVING', 'INSERT INTO', 'INSERT', 'LIMIT', 'MODIFY', 'ORDER BY', 'SELECT', 'SET CURRENT SCHEMA', 'SET SCHEMA', 'SET', 'UPDATE', 'VALUES', 'WHERE'];\nvar reservedTopLevelWordsNoIndent = ['INTERSECT', 'INTERSECT ALL', 'MINUS', 'UNION', 'UNION ALL'];\nvar reservedNewlineWords = ['AND', 'CROSS APPLY', 'CROSS JOIN', 'ELSE', 'INNER JOIN', 'JOIN', 'LEFT JOIN', 'LEFT OUTER JOIN', 'OR', 'OUTER APPLY', 'OUTER JOIN', 'RIGHT JOIN', 'RIGHT OUTER JOIN', 'WHEN', 'XOR'];\nvar tokenizer;\n\nvar StandardSqlFormatter =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * @param {Object} cfg Different set of configurations\r\n   */\n  function StandardSqlFormatter(cfg) {\n    _classCallCheck(this, StandardSqlFormatter);\n\n    this.cfg = cfg;\n  }\n  /**\r\n   * Format the whitespace in a Standard SQL string to make it easier to read\r\n   *\r\n   * @param {String} query The Standard SQL string\r\n   * @return {String} formatted string\r\n   */\n\n\n  _createClass(StandardSqlFormatter, [{\n    key: \"format\",\n    value: function format(query) {\n      if (!tokenizer) {\n        tokenizer = new _Tokenizer[\"default\"]({\n          reservedWords: reservedWords,\n          reservedTopLevelWords: reservedTopLevelWords,\n          reservedNewlineWords: reservedNewlineWords,\n          reservedTopLevelWordsNoIndent: reservedTopLevelWordsNoIndent,\n          stringTypes: [\"\\\"\\\"\", \"N''\", \"''\", '``', '[]'],\n          openParens: ['(', 'CASE'],\n          closeParens: [')', 'END'],\n          indexedPlaceholderTypes: ['?'],\n          namedPlaceholderTypes: ['@', ':'],\n          lineCommentTypes: ['#', '--']\n        });\n      }\n\n      return new _Formatter[\"default\"](this.cfg, tokenizer).format(query);\n    }\n  }]);\n\n  return StandardSqlFormatter;\n}();\n\nexports[\"default\"] = StandardSqlFormatter;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.format = void 0;\n\nvar _Db2Formatter = _interopRequireDefault(require(\"./languages/Db2Formatter\"));\n\nvar _N1qlFormatter = _interopRequireDefault(require(\"./languages/N1qlFormatter\"));\n\nvar _PlSqlFormatter = _interopRequireDefault(require(\"./languages/PlSqlFormatter\"));\n\nvar _StandardSqlFormatter = _interopRequireDefault(require(\"./languages/StandardSqlFormatter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\r\n * Format whitespace in a query to make it easier to read.\r\n *\r\n * @param {String} query\r\n * @param {Object} cfg\r\n *  @param {String} cfg.language Query language, default is Standard SQL\r\n *  @param {String} cfg.indent Characters used for indentation, default is \"  \" (2 spaces)\r\n *  @param {Bool} cfg.uppercase Converts keywords to uppercase\r\n *  @param {Integer} cfg.linesBetweenQueries How many line breaks between queries\r\n *  @param {Object} cfg.params Collection of params for placeholder replacement\r\n * @return {String}\r\n */\nvar format = function format(query) {\n  var cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (cfg.language) {\n    case 'db2':\n      return new _Db2Formatter[\"default\"](cfg).format(query);\n\n    case 'n1ql':\n      return new _N1qlFormatter[\"default\"](cfg).format(query);\n\n    case 'pl/sql':\n      return new _PlSqlFormatter[\"default\"](cfg).format(query);\n\n    case 'sql':\n    case undefined:\n      return new _StandardSqlFormatter[\"default\"](cfg).format(query);\n\n    default:\n      throw Error(\"Unsupported SQL dialect: \".concat(cfg.language));\n  }\n};\n\nexports.format = format;\nvar _default = {\n  format: format\n};\nexports[\"default\"] = _default;","import { gte, compare, valid } from 'semver';\n\nimport {\n  FunctionSelector,\n  Selectors,\n  SelectorsOf,\n  StringSelector,\n  VersionedSelectorGroup,\n  VersionedSelectors,\n  CssSelector,\n  UrlSelector,\n  FunctionSelectorTwoArgs,\n} from './types';\n\n/**\n * Resolves selectors based on the Grafana version\n */\nexport function resolveSelectors<T extends VersionedSelectorGroup>(\n  versionedSelectors: T,\n  grafanaVersion = 'latest'\n): SelectorsOf<T> {\n  const version = grafanaVersion.replace(/\\-.*/, '');\n\n  return resolveSelectorGroup(versionedSelectors, version);\n}\n\nfunction resolveSelectorGroup<T extends VersionedSelectorGroup>(group: T, grafanaVersion: string): SelectorsOf<T> {\n  const result: Selectors = {};\n\n  for (const [key, value] of Object.entries(group)) {\n    if (isVersionedSelectorGroup(value)) {\n      result[key] = resolveSelectorGroup(value, grafanaVersion);\n    } else {\n      assertIsSemverValid(value, key);\n      result[key] = resolveSelector(value, grafanaVersion);\n    }\n  }\n\n  return result as SelectorsOf<T>;\n}\n\nfunction isVersionedSelectorGroup(\n  target: VersionedSelectors | VersionedSelectorGroup\n): target is VersionedSelectorGroup {\n  if (typeof target === 'object') {\n    const [first] = Object.keys(target);\n    return !valid(first);\n  }\n\n  return false;\n}\n\nfunction resolveSelector(\n  versionedSelector: VersionedSelectors,\n  grafanaVersion: string\n): StringSelector | FunctionSelector | FunctionSelectorTwoArgs | CssSelector | UrlSelector {\n  let versionToUse;\n  let versions = Object.keys(versionedSelector).sort(compare);\n\n  if (grafanaVersion === 'latest') {\n    return versionedSelector[versions[versions.length - 1]];\n  }\n\n  for (const version of versions) {\n    if (gte(grafanaVersion, version)) {\n      versionToUse = version;\n    }\n  }\n\n  if (!versionToUse) {\n    versionToUse = versions[versions.length - 1];\n  }\n\n  return versionedSelector[versionToUse];\n}\n\nfunction assertIsSemverValid(versionedSelector: VersionedSelectors, selectorName: string) {\n  if (!Object.keys(versionedSelector).every((version) => valid(version))) {\n    throw new Error(`Invalid semver version: '${selectorName}'`);\n  }\n}\n","export const MIN_GRAFANA_VERSION = '8.5.0';\n","// NOTE: by default Component string selectors are set up to be aria-labels,\n// however there are many cases where your component may not need an aria-label\n// (a <button> with clear text, for example, does not need an aria-label as it's already labeled)\n// but you still might need to select it for testing,\n// in that case please add the attribute data-testid={selector} in the component and\n// prefix your selector string with 'data-testid' so that when create the selectors we know to search for it on the right attribute\n\nimport { VersionedSelectorGroup } from '../types';\n\nimport { MIN_GRAFANA_VERSION } from './constants';\n\n/**\n * Selectors grouped/defined in Components\n */\nexport const versionedComponents = {\n  RadioButton: {\n    container: {\n      '10.2.3': 'data-testid radio-button',\n    },\n  },\n  Breadcrumbs: {\n    breadcrumb: {\n      '9.4.0': (title: string) => `data-testid ${title} breadcrumb`,\n    },\n  },\n  CanvasGridAddActions: {\n    addPanel: {\n      '12.1.0': 'data-testid CanvasGridAddActions add-panel',\n    },\n    groupPanels: {\n      '12.1.0': 'data-testid CanvasGridAddActions group-panels',\n    },\n    ungroup: {\n      '12.1.0': 'data-testid CanvasGridAddActions ungroup',\n    },\n    addRow: {\n      '12.1.0': 'data-testid CanvasGridAddActions add-row',\n    },\n    pasteRow: {\n      '12.1.0': 'data-testid CanvasGridAddActions paste-row',\n    },\n    addTab: {\n      '12.1.0': 'data-testid CanvasGridAddActions add-tab',\n    },\n    pasteTab: {\n      '12.1.0': 'data-testid CanvasGridAddActions paste-tab',\n    },\n  },\n  DashboardEditPaneSplitter: {\n    primaryBody: {\n      '12.1.0': 'data-testid DashboardEditPaneSplitter primary body',\n    },\n  },\n  EditPaneHeader: {\n    deleteButton: {\n      '12.1.0': 'data-testid EditPaneHeader delete panel',\n    },\n    copyDropdown: {\n      '12.1.0': 'data-testid EditPaneHeader copy dropdown',\n    },\n    copy: {\n      '12.1.0': 'data-testid EditPaneHeader copy',\n    },\n    duplicate: {\n      '12.1.0': 'data-testid EditPaneHeader duplicate',\n    },\n    backButton: {\n      '12.1.0': 'data-testid EditPaneHeader back',\n    },\n  },\n  TimePicker: {\n    openButton: {\n      [MIN_GRAFANA_VERSION]: 'data-testid TimePicker Open Button',\n    },\n    overlayContent: {\n      '10.2.3': 'data-testid TimePicker Overlay Content',\n    },\n    fromField: {\n      '10.2.3': 'data-testid Time Range from field',\n      [MIN_GRAFANA_VERSION]: 'Time Range from field',\n    },\n    toField: {\n      '10.2.3': 'data-testid Time Range to field',\n      [MIN_GRAFANA_VERSION]: 'Time Range to field',\n    },\n    applyTimeRange: {\n      [MIN_GRAFANA_VERSION]: 'data-testid TimePicker submit button',\n    },\n    copyTimeRange: {\n      '10.4.0': 'data-testid TimePicker copy button',\n    },\n    pasteTimeRange: {\n      '10.4.0': 'data-testid TimePicker paste button',\n    },\n    calendar: {\n      label: {\n        '10.2.3': 'data-testid Time Range calendar',\n        [MIN_GRAFANA_VERSION]: 'Time Range calendar',\n      },\n      openButton: {\n        '10.2.3': 'data-testid Open time range calendar',\n        [MIN_GRAFANA_VERSION]: 'Open time range calendar',\n      },\n      closeButton: {\n        '10.2.3': 'data-testid Close time range Calendar',\n        [MIN_GRAFANA_VERSION]: 'Close time range Calendar',\n      },\n    },\n    absoluteTimeRangeTitle: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-absolute-time-range-narrow',\n    },\n  },\n  DataSourcePermissions: {\n    form: { '9.5.0': () => 'form[name=\"addPermission\"]' },\n    roleType: {\n      '9.5.0': 'Role to add new permission to',\n    },\n    rolePicker: {\n      '9.5.0': 'Built-in role picker',\n    },\n    permissionLevel: {\n      '12.0.0': 'Permission level',\n      '9.5.0': 'Permission Level',\n    },\n  },\n  DateTimePicker: {\n    input: {\n      '10.2.3': 'data-testid date-time-input',\n    },\n  },\n  DataSource: {\n    TestData: {\n      QueryTab: {\n        scenarioSelectContainer: {\n          [MIN_GRAFANA_VERSION]: 'Test Data Query scenario select container',\n        },\n        scenarioSelect: {\n          [MIN_GRAFANA_VERSION]: 'Test Data Query scenario select',\n        },\n        max: {\n          [MIN_GRAFANA_VERSION]: 'TestData max',\n        },\n        min: {\n          [MIN_GRAFANA_VERSION]: 'TestData min',\n        },\n        noise: {\n          [MIN_GRAFANA_VERSION]: 'TestData noise',\n        },\n        seriesCount: {\n          [MIN_GRAFANA_VERSION]: 'TestData series count',\n        },\n        spread: {\n          [MIN_GRAFANA_VERSION]: 'TestData spread',\n        },\n        startValue: {\n          [MIN_GRAFANA_VERSION]: 'TestData start value',\n        },\n        drop: {\n          [MIN_GRAFANA_VERSION]: 'TestData drop values',\n        },\n      },\n    },\n    DataSourceHttpSettings: {\n      urlInput: {\n        '10.4.0': 'data-testid Datasource HTTP settings url',\n        [MIN_GRAFANA_VERSION]: 'Datasource HTTP settings url',\n      },\n    },\n    Jaeger: {\n      traceIDInput: {\n        [MIN_GRAFANA_VERSION]: 'Trace ID',\n      },\n    },\n    Prometheus: {\n      configPage: {\n        connectionSettings: {\n          [MIN_GRAFANA_VERSION]: 'Data source connection URL', // aria-label in grafana experimental\n        },\n        manageAlerts: {\n          '10.4.0': 'prometheus-alerts-manager', // id for switch component\n        },\n        allowAsRecordingRulesTarget: {\n          '12.1.0': 'prometheus-recording-rules-target',\n        },\n        scrapeInterval: {\n          '10.4.0': 'data-testid scrape interval',\n        },\n        queryTimeout: {\n          '10.4.0': 'data-testid query timeout',\n        },\n        defaultEditor: {\n          '10.4.0': 'data-testid default editor',\n        },\n        disableMetricLookup: {\n          '10.4.0': 'disable-metric-lookup', // id for switch component\n        },\n        prometheusType: {\n          '10.4.0': 'data-testid prometheus type',\n        },\n        prometheusVersion: {\n          '10.4.0': 'data-testid prometheus version',\n        },\n        cacheLevel: {\n          '10.4.0': 'data-testid cache level',\n        },\n        incrementalQuerying: {\n          '10.4.0': 'prometheus-incremental-querying', // id for switch component\n        },\n        queryOverlapWindow: {\n          '10.4.0': 'data-testid query overlap window',\n        },\n        disableRecordingRules: {\n          '10.4.0': 'disable-recording-rules', // id for switch component\n        },\n        customQueryParameters: {\n          '10.4.0': 'data-testid custom query parameters',\n        },\n        httpMethod: {\n          '10.4.0': 'data-testid http method',\n        },\n        exemplarsAddButton: {\n          '10.3.0': 'data-testid Add exemplar config button',\n          [MIN_GRAFANA_VERSION]: 'Add exemplar config button',\n        },\n        internalLinkSwitch: {\n          '10.3.0': 'data-testid Internal link switch',\n          [MIN_GRAFANA_VERSION]: 'Internal link switch',\n        },\n        codeModeMetricNamesSuggestionLimit: {\n          '11.1.0': 'data-testid code mode metric names suggestion limit',\n        },\n        seriesLimit: {\n          '12.0.2': 'data-testid maximum series limit',\n        },\n      },\n      queryEditor: {\n        explain: {\n          '10.4.0': 'data-testid prometheus explain switch wrapper',\n        },\n        editorToggle: {\n          '10.4.0': 'data-testid QueryEditorModeToggle', // wrapper for toggle\n        },\n        options: {\n          '10.4.0': 'data-testid prometheus options', // wrapper for options group\n        },\n        legend: {\n          '10.4.0': 'data-testid prometheus legend wrapper', // wrapper for multiple compomnents\n        },\n        format: {\n          '10.4.0': 'data-testid prometheus format',\n        },\n        step: {\n          '10.4.0': 'data-testid prometheus-step', // id for autosize component\n        },\n        type: {\n          '10.4.0': 'data-testid prometheus type', //wrapper for radio button group\n        },\n        exemplars: {\n          '10.4.0': 'data-testid prometheus-exemplars', // id for editor switch component\n        },\n        builder: {\n          // see QueryBuilder below for commented selectors\n          metricSelect: {\n            '10.4.0': 'data-testid metric select',\n          },\n          hints: {\n            '10.4.0': 'data-testid prometheus hints', // wrapper for hints component\n          },\n          metricsExplorer: {\n            '10.4.0': 'data-testid metrics explorer',\n          },\n          queryAdvisor: {\n            '10.4.0': 'data-testid query advisor',\n          },\n        },\n        code: {\n          queryField: {\n            '10.4.0': 'data-testid prometheus query field',\n          },\n          metricsCountInfo: {\n            '11.1.0': 'data-testid metrics count disclaimer',\n          },\n          metricsBrowser: {\n            openButton: {\n              '10.4.0': 'data-testid open metrics browser',\n            },\n            selectMetric: {\n              '10.4.0': 'data-testid select a metric',\n            },\n            seriesLimit: {\n              '10.3.1': 'data-testid series limit',\n            },\n            metricList: {\n              '10.4.0': 'data-testid metric list',\n            },\n            labelNamesFilter: {\n              '10.4.0': 'data-testid label names filter',\n            },\n            labelValuesFilter: {\n              '10.4.0': 'data-testid label values filter',\n            },\n            useQuery: {\n              '10.4.0': 'data-testid use query',\n            },\n            useAsRateQuery: {\n              '10.4.0': 'data-testid use as rate query',\n            },\n            validateSelector: {\n              '10.4.0': 'data-testid validate selector',\n            },\n            clear: {\n              '10.4.0': 'data-testid clear',\n            },\n          },\n        },\n      },\n      exemplarMarker: {\n        '10.3.0': 'data-testid Exemplar marker',\n        [MIN_GRAFANA_VERSION]: 'Exemplar marker',\n      },\n      variableQueryEditor: {\n        queryType: {\n          '10.4.0': 'data-testid query type',\n        },\n        labelnames: {\n          metricRegex: {\n            '10.4.0': 'data-testid label names metric regex',\n          },\n        },\n        labelValues: {\n          labelSelect: {\n            '10.4.0': 'data-testid label values label select',\n          },\n        },\n        metricNames: {\n          metricRegex: {\n            '10.4.0': 'data-testid metric names metric regex',\n          },\n        },\n        varQueryResult: {\n          '10.4.0': 'data-testid variable query result',\n        },\n        seriesQuery: {\n          '10.4.0': 'data-testid prometheus series query',\n        },\n        classicQuery: {\n          '10.4.0': 'data-testid prometheus classic query',\n        },\n      },\n      annotations: {\n        minStep: {\n          '10.4.0': 'data-testid prometheus-annotation-min-step', // id for autosize input\n        },\n        title: {\n          '10.4.0': 'data-testid prometheus annotation title',\n        },\n        tags: {\n          '10.4.0': 'data-testid prometheus annotation tags',\n        },\n        text: {\n          '10.4.0': 'data-testid prometheus annotation text',\n        },\n        seriesValueAsTimestamp: {\n          '10.4.0': 'data-testid prometheus annotation series value as timestamp',\n        },\n      },\n    },\n  },\n  Menu: {\n    MenuComponent: {\n      [MIN_GRAFANA_VERSION]: (title: string) => `${title} menu`,\n    },\n    MenuGroup: {\n      [MIN_GRAFANA_VERSION]: (title: string) => `${title} menu group`,\n    },\n    MenuItem: {\n      [MIN_GRAFANA_VERSION]: (title: string) => `${title} menu item`,\n    },\n    SubMenu: {\n      container: {\n        '10.3.0': 'data-testid SubMenu container',\n        [MIN_GRAFANA_VERSION]: 'SubMenu container',\n      },\n      icon: {\n        '10.3.0': 'data-testid SubMenu icon',\n        [MIN_GRAFANA_VERSION]: 'SubMenu icon',\n      },\n    },\n  },\n  Panels: {\n    Panel: {\n      title: {\n        [MIN_GRAFANA_VERSION]: (title: string) => `data-testid Panel header ${title}`,\n      },\n      content: {\n        '11.1.0': 'data-testid panel content',\n      },\n      headerContainer: {\n        '9.5.0': 'data-testid header-container',\n      },\n      headerItems: {\n        '10.2.0': (item: string) => `data-testid Panel header item ${item}`,\n      },\n      menuItems: {\n        '9.5.0': (item: string) => `data-testid Panel menu item ${item}`,\n      },\n      menu: {\n        '9.5.0': (title: string) => `data-testid Panel menu ${title}`,\n      },\n      containerByTitle: {\n        [MIN_GRAFANA_VERSION]: (title: string) => `${title} panel`,\n      },\n      headerCornerInfo: {\n        [MIN_GRAFANA_VERSION]: (mode: string) => `Panel header ${mode}`,\n      },\n      status: {\n        '10.2.0': (status: string) => `data-testid Panel status ${status}`,\n        [MIN_GRAFANA_VERSION]: (_: string) => 'Panel status',\n      },\n      loadingBar: {\n        '10.0.0': () => `Panel loading bar`,\n      },\n      HoverWidget: {\n        container: {\n          '10.1.0': 'data-testid hover-header-container',\n          [MIN_GRAFANA_VERSION]: 'hover-header-container',\n        },\n        dragIcon: {\n          '10.0.0': 'data-testid drag-icon',\n        },\n      },\n      PanelDataErrorMessage: {\n        '10.4.0': 'data-testid Panel data error message',\n      },\n    },\n    Visualization: {\n      Graph: {\n        container: {\n          '9.5.0': 'Graph container',\n        },\n        VisualizationTab: {\n          legendSection: {\n            [MIN_GRAFANA_VERSION]: 'Legend section',\n          },\n        },\n        Legend: {\n          legendItemAlias: {\n            [MIN_GRAFANA_VERSION]: (name: string) => `gpl alias ${name}`,\n          },\n          showLegendSwitch: {\n            [MIN_GRAFANA_VERSION]: 'gpl show legend',\n          },\n        },\n        xAxis: {\n          labels: {\n            [MIN_GRAFANA_VERSION]: () => 'div.flot-x-axis > div.flot-tick-label',\n          },\n        },\n      },\n      BarGauge: {\n        valueV2: {\n          [MIN_GRAFANA_VERSION]: 'data-testid Bar gauge value',\n        },\n      },\n      PieChart: {\n        svgSlice: {\n          '10.3.0': 'data testid Pie Chart Slice',\n        },\n      },\n      Text: {\n        container: { [MIN_GRAFANA_VERSION]: () => '.markdown-html' },\n      },\n      Table: {\n        header: {\n          [MIN_GRAFANA_VERSION]: 'table header',\n        },\n        footer: {\n          [MIN_GRAFANA_VERSION]: 'table-footer',\n        },\n        body: {\n          '10.2.0': 'data-testid table body',\n        },\n      },\n    },\n  },\n  VizLegend: {\n    seriesName: {\n      '10.3.0': (name: string) => `data-testid VizLegend series ${name}`,\n    },\n  },\n  Drawer: {\n    General: {\n      title: {\n        [MIN_GRAFANA_VERSION]: (title: string) => `Drawer title ${title}`,\n      },\n      expand: {\n        [MIN_GRAFANA_VERSION]: 'Drawer expand',\n      },\n      contract: {\n        [MIN_GRAFANA_VERSION]: 'Drawer contract',\n      },\n      close: {\n        '10.3.0': 'data-testid Drawer close',\n        [MIN_GRAFANA_VERSION]: 'Drawer close',\n      },\n      rcContentWrapper: { '9.4.0': () => '.rc-drawer-content-wrapper' },\n      subtitle: {\n        '10.4.0': 'data-testid drawer subtitle',\n      },\n    },\n    DashboardSaveDrawer: {\n      saveButton: {\n        '11.1.0': 'data-testid Save dashboard drawer button',\n      },\n      saveAsButton: {\n        '11.1.0': 'data-testid Save as dashboard drawer button',\n      },\n      saveAsTitleInput: {\n        '11.1.0': 'Save dashboard title field',\n      },\n    },\n  },\n  PanelEditor: {\n    General: {\n      content: {\n        '11.1.0': 'data-testid Panel editor content',\n        '8.0.0': 'Panel editor content',\n      },\n    },\n    OptionsPane: {\n      content: {\n        '11.1.0': 'data-testid Panel editor option pane content',\n        [MIN_GRAFANA_VERSION]: 'Panel editor option pane content',\n      },\n      select: {\n        [MIN_GRAFANA_VERSION]: 'Panel editor option pane select',\n      },\n      fieldLabel: {\n        [MIN_GRAFANA_VERSION]: (type: string) => `${type} field property editor`,\n      },\n      fieldInput: {\n        '11.0.0': (title: string) => `data-testid Panel editor option pane field input ${title}`,\n      },\n    },\n    DataPane: {\n      content: {\n        '11.1.0': 'data-testid Panel editor data pane content',\n        [MIN_GRAFANA_VERSION]: 'Panel editor data pane content',\n      },\n    },\n    applyButton: {\n      '9.2.0': 'data-testid Apply changes and go back to dashboard',\n      '9.1.0': 'Apply changes and go back to dashboard',\n      '8.0.0': 'panel editor apply',\n    },\n    toggleVizPicker: {\n      '10.0.0': 'data-testid toggle-viz-picker',\n      '8.0.0': 'toggle-viz-picker',\n    },\n    toggleVizOptions: {\n      '10.1.0': 'data-testid toggle-viz-options',\n      [MIN_GRAFANA_VERSION]: 'toggle-viz-options',\n    },\n    toggleTableView: {\n      '11.1.0': 'data-testid toggle-table-view',\n      [MIN_GRAFANA_VERSION]: 'toggle-table-view',\n    },\n\n    // [Geomap] Map controls\n    showZoomField: {\n      '10.2.0': 'Map controls Show zoom control field property editor',\n    },\n    showAttributionField: {\n      '10.2.0': 'Map controls Show attribution field property editor',\n    },\n    showScaleField: {\n      '10.2.0': 'Map controls Show scale field property editor',\n    },\n    showMeasureField: {\n      '10.2.0': 'Map controls Show measure tools field property editor',\n    },\n    showDebugField: {\n      '10.2.0': 'Map controls Show debug field property editor',\n    },\n\n    measureButton: {\n      '12.1.0': 'data-testid panel-editor-measure-button',\n      '9.2.0': 'show measure tools',\n    },\n\n    Outline: {\n      section: {\n        '12.0.0': 'data-testid Outline section',\n      },\n      node: {\n        '12.0.0': (type: string) => `data-testid outline node ${type}`,\n      },\n      item: {\n        '12.0.0': (type: string) => `data-testid outline item ${type}`,\n      },\n    },\n    ElementEditPane: {\n      variableType: {\n        '12.0.0': (type?: string) => `data-testid variable type ${type}`,\n      },\n      addVariableButton: {\n        '12.0.0': 'data-testid add variable button',\n      },\n      variableNameInput: {\n        '12.0.0': 'data-testid variable name input',\n      },\n      variableLabelInput: {\n        '12.0.0': 'data-testid variable label input',\n      },\n      AutoGridLayout: {\n        minColumnWidth: {\n          '12.1.0': 'data-testid min column width selector',\n        },\n        customMinColumnWidth: {\n          '12.1.0': 'data-testid custom min column width input',\n        },\n        clearCustomMinColumnWidth: {\n          '12.1.0': 'data-testid clear custom min column width input',\n        },\n        maxColumns: {\n          '12.1.0': 'data-testid max columns selector',\n        },\n        rowHeight: {\n          '12.1.0': 'data-testid row height selector',\n        },\n        customRowHeight: {\n          '12.1.0': 'data-testid custom row height input',\n        },\n        clearCustomRowHeight: {\n          '12.1.0': 'data-testid clear custom row height input',\n        },\n        fillScreen: {\n          '12.1.0': 'data-testid fill screen switch',\n        },\n      },\n    },\n  },\n  PanelInspector: {\n    Data: {\n      content: {\n        [MIN_GRAFANA_VERSION]: 'Panel inspector Data content',\n      },\n    },\n    Stats: {\n      content: {\n        [MIN_GRAFANA_VERSION]: 'Panel inspector Stats content',\n      },\n    },\n    Json: {\n      content: {\n        '11.1.0': 'data-testid Panel inspector Json content',\n        [MIN_GRAFANA_VERSION]: 'Panel inspector Json content',\n      },\n    },\n    Query: {\n      content: {\n        [MIN_GRAFANA_VERSION]: 'Panel inspector Query content',\n      },\n      refreshButton: {\n        [MIN_GRAFANA_VERSION]: 'Panel inspector Query refresh button',\n      },\n      jsonObjectKeys: {\n        [MIN_GRAFANA_VERSION]: () => '.json-formatter-key',\n      },\n    },\n  },\n  Tab: {\n    title: {\n      '11.2.0': (title: string) => `data-testid Tab ${title}`,\n    },\n    active: { [MIN_GRAFANA_VERSION]: () => '[class*=\"-activeTabStyle\"]' },\n  },\n  RefreshPicker: {\n    runButtonV2: {\n      [MIN_GRAFANA_VERSION]: 'data-testid RefreshPicker run button',\n    },\n    intervalButtonV2: {\n      [MIN_GRAFANA_VERSION]: 'data-testid RefreshPicker interval button',\n    },\n  },\n  QueryTab: {\n    content: {\n      [MIN_GRAFANA_VERSION]: 'Query editor tab content',\n    },\n    queryInspectorButton: {\n      [MIN_GRAFANA_VERSION]: 'Query inspector button',\n    },\n    queryHistoryButton: {\n      '10.2.0': 'data-testid query-history-button',\n      [MIN_GRAFANA_VERSION]: 'query-history-button',\n    },\n    addQuery: {\n      '10.2.0': 'data-testid query-tab-add-query',\n      [MIN_GRAFANA_VERSION]: 'Query editor add query button',\n    },\n    addQueryFromLibrary: {\n      '11.5.0': 'data-testid query-tab-add-query-from-library',\n    },\n    queryGroupTopSection: {\n      '11.2.0': 'data-testid query group top section',\n    },\n    addExpression: {\n      '11.2.0': 'data-testid query-tab-add-expression',\n    },\n  },\n  QueryHistory: {\n    queryText: {\n      '9.0.0': 'Query text',\n    },\n  },\n  QueryEditorRows: {\n    rows: {\n      [MIN_GRAFANA_VERSION]: 'Query editor row',\n    },\n  },\n  QueryEditorRow: {\n    actionButton: {\n      '10.4.0': (title: string) => `data-testid ${title}`,\n    },\n    title: {\n      [MIN_GRAFANA_VERSION]: (refId: string) => `Query editor row title ${refId}`,\n    },\n    container: {\n      [MIN_GRAFANA_VERSION]: (refId: string) => `Query editor row ${refId}`,\n    },\n  },\n  AlertTab: {\n    content: {\n      '10.2.3': 'data-testid Alert editor tab content',\n      [MIN_GRAFANA_VERSION]: 'Alert editor tab content',\n    },\n  },\n  AlertRules: {\n    groupToggle: {\n      '11.0.0': 'data-testid group-collapse-toggle',\n    },\n    toggle: {\n      '11.0.0': 'data-testid collapse-toggle',\n    },\n    expandedContent: {\n      '11.0.0': 'data-testid expanded-content',\n    },\n    previewButton: {\n      '11.1.0': 'data-testid alert-rule preview-button',\n    },\n    ruleNameField: {\n      '11.1.0': 'data-testid alert-rule name-field',\n    },\n    newFolderButton: {\n      '11.1.0': 'data-testid alert-rule new-folder-button',\n    },\n    newFolderNameField: {\n      '11.1.0': 'data-testid alert-rule name-folder-name-field',\n    },\n    newFolderNameCreateButton: {\n      '11.1.0': 'data-testid alert-rule name-folder-name-create-button',\n    },\n    newEvaluationGroupButton: {\n      '11.1.0': 'data-testid alert-rule new-evaluation-group-button',\n    },\n    newEvaluationGroupName: {\n      '11.1.0': 'data-testid alert-rule new-evaluation-group-name',\n    },\n    newEvaluationGroupInterval: {\n      '11.1.0': 'data-testid alert-rule new-evaluation-group-interval',\n    },\n    newEvaluationGroupCreate: {\n      '11.1.0': 'data-testid alert-rule new-evaluation-group-create-button',\n    },\n    step: {\n      '11.5.0': (stepNo: string) => `data-testid alert-rule step-${stepNo}`,\n    },\n    stepAdvancedModeSwitch: {\n      '11.5.0': (stepNo: string) => `data-testid advanced-mode-switch step-${stepNo}`,\n    },\n  },\n  Alert: {\n    alertV2: {\n      [MIN_GRAFANA_VERSION]: (severity: string) => `data-testid Alert ${severity}`,\n    },\n  },\n  TransformTab: {\n    content: {\n      '10.1.0': 'data-testid Transform editor tab content',\n      [MIN_GRAFANA_VERSION]: 'Transform editor tab content',\n    },\n    newTransform: {\n      '10.1.0': (name: string) => `data-testid New transform ${name}`,\n    },\n    transformationEditor: {\n      '10.1.0': (name: string) => `data-testid Transformation editor ${name}`,\n    },\n    transformationEditorDebugger: {\n      '10.1.0': (name: string) => `data-testid Transformation editor debugger ${name}`,\n    },\n  },\n  Transforms: {\n    card: {\n      '10.1.0': (name: string) => `data-testid New transform ${name}`,\n    },\n    disableTransformationButton: {\n      '10.4.0': 'data-testid Disable transformation button',\n    },\n    Reduce: {\n      modeLabel: {\n        '10.2.3': 'data-testid Transform mode label',\n        [MIN_GRAFANA_VERSION]: 'Transform mode label',\n      },\n      calculationsLabel: {\n        '10.2.3': 'data-testid Transform calculations label',\n        [MIN_GRAFANA_VERSION]: 'Transform calculations label',\n      },\n    },\n    SpatialOperations: {\n      actionLabel: {\n        '9.1.2': 'root Action field property editor',\n      },\n      locationLabel: {\n        '10.2.0': 'root Location Mode field property editor',\n      },\n      location: {\n        autoOption: {\n          '9.1.2': 'Auto location option',\n        },\n        coords: {\n          option: {\n            '9.1.2': 'Coords location option',\n          },\n          latitudeFieldLabel: {\n            '9.1.2': 'root Latitude field field property editor',\n          },\n          longitudeFieldLabel: {\n            '9.1.2': 'root Longitude field field property editor',\n          },\n        },\n        geohash: {\n          option: {\n            '9.1.2': 'Geohash location option',\n          },\n          geohashFieldLabel: {\n            '9.1.2': 'root Geohash field field property editor',\n          },\n        },\n        lookup: {\n          option: {\n            '9.1.2': 'Lookup location option',\n          },\n          lookupFieldLabel: {\n            '9.1.2': 'root Lookup field field property editor',\n          },\n          gazetteerFieldLabel: {\n            '9.1.2': 'root Gazetteer field property editor',\n          },\n        },\n      },\n    },\n    searchInput: {\n      '10.2.3': 'data-testid search transformations',\n      [MIN_GRAFANA_VERSION]: 'search transformations',\n    },\n    noTransformationsMessage: {\n      '10.2.3': 'data-testid no transformations message',\n    },\n    addTransformationButton: {\n      '10.1.0': 'data-testid add transformation button',\n      [MIN_GRAFANA_VERSION]: 'add transformation button',\n    },\n    removeAllTransformationsButton: {\n      '10.4.0': 'data-testid remove all transformations button',\n    },\n  },\n  NavBar: {\n    Configuration: {\n      button: {\n        '9.5.0': 'Configuration',\n      },\n    },\n    Toggle: {\n      button: {\n        '10.2.3': 'data-testid Toggle menu',\n        [MIN_GRAFANA_VERSION]: 'Toggle menu',\n      },\n    },\n    Reporting: {\n      button: {\n        '9.5.0': 'Reporting',\n      },\n    },\n  },\n  NavMenu: {\n    Menu: {\n      '10.2.3': 'data-testid navigation mega-menu',\n    },\n    item: {\n      '9.5.0': 'data-testid Nav menu item',\n    },\n  },\n  NavToolbar: {\n    container: {\n      '9.4.0': 'data-testid Nav toolbar',\n    },\n    commandPaletteTrigger: {\n      '11.5.0': 'data-testid Command palette trigger',\n    },\n    shareDashboard: {\n      '11.1.0': 'data-testid Share dashboard',\n    },\n    markAsFavorite: {\n      '11.1.0': 'data-testid Mark as favorite',\n    },\n    editDashboard: {\n      editButton: {\n        '11.1.0': 'data-testid Edit dashboard button',\n      },\n      saveButton: {\n        '11.1.0': 'data-testid Save dashboard button',\n      },\n      exitButton: {\n        '11.1.0': 'data-testid Exit edit mode button',\n      },\n      settingsButton: {\n        '11.1.0': 'data-testid Dashboard settings',\n      },\n      addRowButton: {\n        '11.1.0': 'data-testid Add row button',\n      },\n      addLibraryPanelButton: {\n        '11.1.0': 'data-testid Add a panel from the panel library button',\n      },\n      addVisualizationButton: {\n        '11.1.0': 'data-testid Add new visualization menu item',\n      },\n      pastePanelButton: {\n        '11.1.0': 'data-testid Paste panel button',\n      },\n      discardChangesButton: {\n        '11.1.0': 'data-testid Discard changes button',\n      },\n      discardLibraryPanelButton: {\n        '11.1.0': 'data-testid Discard library panel button',\n      },\n      unlinkLibraryPanelButton: {\n        '11.1.0': 'data-testid Unlink library panel button',\n      },\n      saveLibraryPanelButton: {\n        '11.1.0': 'data-testid Save library panel button',\n      },\n      backToDashboardButton: {\n        '11.1.0': 'data-testid Back to dashboard button',\n      },\n    },\n  },\n\n  PageToolbar: {\n    container: { [MIN_GRAFANA_VERSION]: () => '.page-toolbar' },\n    item: {\n      [MIN_GRAFANA_VERSION]: (tooltip: string) => `${tooltip}`,\n    },\n    itemButton: {\n      '9.5.0': (title: string) => `data-testid ${title}`,\n    },\n  },\n  QueryEditorToolbarItem: {\n    button: {\n      [MIN_GRAFANA_VERSION]: (title: string) => `QueryEditor toolbar item button ${title}`,\n    },\n  },\n  BackButton: {\n    backArrow: {\n      '10.3.0': 'data-testid Go Back',\n      [MIN_GRAFANA_VERSION]: 'Go Back',\n    },\n  },\n  OptionsGroup: {\n    group: {\n      '11.1.0': (title?: string) => (title ? `data-testid Options group ${title}` : 'data-testid Options group'),\n      [MIN_GRAFANA_VERSION]: (title?: string) => (title ? `Options group ${title}` : 'Options group'),\n    },\n    toggle: {\n      '11.1.0': (title?: string) =>\n        title ? `data-testid Options group ${title} toggle` : 'data-testid Options group toggle',\n      [MIN_GRAFANA_VERSION]: (title?: string) => (title ? `Options group ${title} toggle` : 'Options group toggle'),\n    },\n  },\n  PluginVisualization: {\n    item: {\n      [MIN_GRAFANA_VERSION]: (title: string) => `Plugin visualization item ${title}`,\n    },\n    current: {\n      [MIN_GRAFANA_VERSION]: () => '[class*=\"-currentVisualizationItem\"]',\n    },\n  },\n  Select: {\n    menu: {\n      '11.5.0': 'data-testid Select menu',\n      [MIN_GRAFANA_VERSION]: 'Select options menu',\n    },\n    option: {\n      '11.1.0': 'data-testid Select option',\n      [MIN_GRAFANA_VERSION]: 'Select option',\n    },\n    toggleAllOptions: {\n      '11.3.0': 'data-testid toggle all options',\n    },\n    input: {\n      [MIN_GRAFANA_VERSION]: () => 'input[id*=\"time-options-input\"]',\n    },\n    singleValue: {\n      [MIN_GRAFANA_VERSION]: () => 'div[class*=\"-singleValue\"]',\n    },\n  },\n  FieldConfigEditor: {\n    content: {\n      [MIN_GRAFANA_VERSION]: 'Field config editor content',\n    },\n  },\n  OverridesConfigEditor: {\n    content: {\n      [MIN_GRAFANA_VERSION]: 'Field overrides editor content',\n    },\n  },\n  FolderPicker: {\n    containerV2: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Folder picker select container',\n    },\n    input: {\n      '10.4.0': 'data-testid folder-picker-input',\n    },\n  },\n  ReadonlyFolderPicker: {\n    container: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Readonly folder picker select container',\n    },\n  },\n  DataSourcePicker: {\n    container: {\n      '10.0.0': 'data-testid Data source picker select container',\n      '8.0.0': 'Data source picker select container',\n    },\n    inputV2: {\n      '10.1.0': 'data-testid Select a data source',\n      [MIN_GRAFANA_VERSION]: 'Select a data source',\n    },\n    dataSourceList: {\n      '10.4.0': 'data-testid Data source list dropdown',\n    },\n    advancedModal: {\n      dataSourceList: {\n        '10.4.0': 'data-testid Data source list',\n      },\n      builtInDataSourceList: {\n        '10.4.0': 'data-testid Built in data source list',\n      },\n    },\n  },\n  TimeZonePicker: {\n    containerV2: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Time zone picker select container',\n    },\n    changeTimeSettingsButton: {\n      '11.0.0': 'data-testid Time zone picker Change time settings button',\n    },\n  },\n  WeekStartPicker: {\n    containerV2: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Choose starting day of the week',\n    },\n    placeholder: {\n      [MIN_GRAFANA_VERSION]: 'Choose starting day of the week',\n    },\n  },\n  TraceViewer: {\n    spanBar: {\n      '9.0.0': 'data-testid SpanBar--wrapper',\n    },\n  },\n  QueryField: {\n    container: {\n      '10.3.0': 'data-testid Query field',\n      [MIN_GRAFANA_VERSION]: 'Query field',\n    },\n  },\n  QueryBuilder: {\n    queryPatterns: {\n      '10.3.0': 'data-testid Query patterns',\n      [MIN_GRAFANA_VERSION]: 'Query patterns',\n    },\n    labelSelect: {\n      '10.3.0': 'data-testid Select label',\n      [MIN_GRAFANA_VERSION]: 'Select label',\n    },\n    inputSelect: {\n      '11.1.0': 'data-testid Select label-input',\n    },\n    valueSelect: {\n      '10.3.0': 'data-testid Select value',\n      [MIN_GRAFANA_VERSION]: 'Select value',\n    },\n    matchOperatorSelect: {\n      '10.3.0': 'data-testid Select match operator',\n      [MIN_GRAFANA_VERSION]: 'Select match operator',\n    },\n  },\n  ValuePicker: {\n    button: {\n      '10.3.0': (name: string) => `data-testid Value picker button ${name}`,\n    },\n    select: {\n      '10.3.0': (name: string) => `data-testid Value picker select ${name}`,\n    },\n  },\n  Search: {\n    sectionV2: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Search section',\n    },\n    itemsV2: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Search items',\n    },\n    cards: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Search cards',\n    },\n    collapseFolder: {\n      [MIN_GRAFANA_VERSION]: (sectionId: string) => `data-testid Collapse folder ${sectionId}`,\n    },\n    expandFolder: {\n      [MIN_GRAFANA_VERSION]: (sectionId: string) => `data-testid Expand folder ${sectionId}`,\n    },\n    dashboardItem: {\n      [MIN_GRAFANA_VERSION]: (item: string) => `data-testid Dashboard search item ${item}`,\n    },\n    dashboardCard: {\n      [MIN_GRAFANA_VERSION]: (item: string) => `data-testid Search card ${item}`,\n    },\n    folderHeader: {\n      '9.3.0': (folderName: string) => `data-testid Folder header ${folderName}`,\n    },\n    folderContent: {\n      '9.3.0': (folderName: string) => `data-testid Folder content ${folderName}`,\n    },\n    dashboardItems: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Dashboard search item',\n    },\n  },\n  DashboardLinks: {\n    container: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Dashboard link container',\n    },\n    dropDown: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Dashboard link dropdown',\n    },\n    link: {\n      [MIN_GRAFANA_VERSION]: 'data-testid Dashboard link',\n    },\n  },\n  LoadingIndicator: {\n    icon: {\n      '10.4.0': 'data-testid Loading indicator',\n      [MIN_GRAFANA_VERSION]: 'Loading indicator',\n    },\n  },\n  CallToActionCard: {\n    buttonV2: {\n      [MIN_GRAFANA_VERSION]: (name: string) => `data-testid Call to action button ${name}`,\n    },\n  },\n  DataLinksContextMenu: {\n    singleLink: {\n      '10.3.0': 'data-testid Data link',\n      [MIN_GRAFANA_VERSION]: 'Data link',\n    },\n  },\n  DataLinksActionsTooltip: {\n    tooltipWrapper: {\n      '12.1.0': 'data-testid Data links actions tooltip wrapper',\n    },\n  },\n  CodeEditor: {\n    container: {\n      '10.2.3': 'data-testid Code editor container',\n      [MIN_GRAFANA_VERSION]: 'Code editor container',\n    },\n  },\n  ReactMonacoEditor: {\n    editorLazy: {\n      '11.1.0': 'data-testid ReactMonacoEditor editorLazy',\n    },\n  },\n  DashboardImportPage: {\n    textarea: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-import-dashboard-textarea',\n    },\n    submit: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-load-dashboard',\n    },\n  },\n  ImportDashboardForm: {\n    name: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-import-dashboard-title',\n    },\n    submit: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-import-dashboard-submit',\n    },\n  },\n  PanelAlertTabContent: {\n    content: {\n      '10.2.3': 'data-testid Unified alert editor tab content',\n      [MIN_GRAFANA_VERSION]: 'Unified alert editor tab content',\n    },\n  },\n  VisualizationPreview: {\n    card: {\n      [MIN_GRAFANA_VERSION]: (name: string) => `data-testid suggestion-${name}`,\n    },\n  },\n  ColorSwatch: {\n    name: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-colorswatch',\n    },\n  },\n  DashboardRow: {\n    title: {\n      [MIN_GRAFANA_VERSION]: (title: string) => `data-testid dashboard-row-title-${title}`,\n    },\n  },\n  UserProfile: {\n    profileSaveButton: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-user-profile-save',\n    },\n    preferencesSaveButton: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-shared-prefs-save',\n    },\n    orgsTable: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-user-orgs-table',\n    },\n    sessionsTable: {\n      [MIN_GRAFANA_VERSION]: 'data-testid-user-sessions-table',\n    },\n    extensionPointTabs: {\n      '10.2.3': 'data-testid-extension-point-tabs',\n    },\n    extensionPointTab: {\n      '10.2.3': (tabId: string) => `data-testid-extension-point-tab-${tabId}`,\n    },\n  },\n  FileUpload: {\n    inputField: {\n      '9.0.0': 'data-testid-file-upload-input-field',\n    },\n    fileNameSpan: {\n      '9.0.0': 'data-testid-file-upload-file-name',\n    },\n  },\n  DebugOverlay: {\n    wrapper: {\n      '9.2.0': 'debug-overlay',\n    },\n  },\n  OrgRolePicker: {\n    input: {\n      '9.5.0': 'Role',\n    },\n  },\n  AnalyticsToolbarButton: {\n    button: {\n      '9.5.0': 'Dashboard insights',\n    },\n  },\n  Variables: {\n    variableOption: {\n      '9.5.0': 'data-testid variable-option',\n    },\n    variableLinkWrapper: {\n      '11.1.1': 'data-testid variable-link-wrapper',\n    },\n  },\n  Annotations: {\n    annotationsTypeInput: {\n      '11.1.0': 'data-testid annotations-type-input',\n      [MIN_GRAFANA_VERSION]: 'annotations-type-input',\n    },\n    annotationsChoosePanelInput: {\n      '11.1.0': 'data-testid choose-panels-input',\n      [MIN_GRAFANA_VERSION]: 'choose-panels-input',\n    },\n    editor: {\n      testButton: {\n        '11.0.0': 'data-testid annotations-test-button',\n      },\n      resultContainer: {\n        '11.0.0': 'data-testid annotations-query-result-container',\n      },\n    },\n  },\n  Tooltip: {\n    container: {\n      '10.2.0': 'data-testid tooltip',\n    },\n  },\n  ReturnToPrevious: {\n    buttonGroup: {\n      '11.0.0': 'data-testid dismissable button group',\n    },\n    backButton: {\n      '11.0.0': 'data-testid back',\n    },\n    dismissButton: {\n      '11.0.0': 'data-testid dismiss',\n    },\n  },\n  SQLQueryEditor: {\n    selectColumn: {\n      '11.0.0': 'data-testid select-column',\n    },\n    selectColumnInput: { '11.0.0': 'data-testid select-column-input' },\n    selectFunctionParameter: { '11.0.0': (name: string) => `data-testid select-function-parameter-${name}` },\n    selectAggregation: {\n      '11.0.0': 'data-testid select-aggregation',\n    },\n    selectAggregationInput: { '11.0.0': 'data-testid select-aggregation-input' },\n    selectAlias: {\n      '11.0.0': 'data-testid select-alias',\n    },\n    selectAliasInput: { '11.0.0': 'data-testid select-alias-input' },\n    selectInputParameter: { '11.0.0': 'data-testid select-input-parameter' },\n    filterConjunction: {\n      '11.0.0': 'data-testid filter-conjunction',\n    },\n    filterField: {\n      '11.0.0': 'data-testid filter-field',\n    },\n    filterOperator: {\n      '11.0.0': 'data-testid filter-operator',\n    },\n    headerTableSelector: {\n      '11.0.0': 'data-testid header-table-selector',\n    },\n    headerFilterSwitch: {\n      '11.0.0': 'data-testid header-filter-switch',\n    },\n    headerGroupSwitch: {\n      '11.0.0': 'data-testid header-group-switch',\n    },\n    headerOrderSwitch: {\n      '11.0.0': 'data-testid header-order-switch',\n    },\n    headerPreviewSwitch: {\n      '11.0.0': 'data-testid header-preview-switch',\n    },\n  },\n  EntityNotFound: {\n    container: {\n      '11.2.0': 'data-testid entity-not-found',\n    },\n  },\n  Portal: {\n    container: {\n      '11.5.0': 'data-testid portal-container',\n    },\n  },\n} satisfies VersionedSelectorGroup;\n\nexport type VersionedComponents = typeof versionedComponents;\n","import { resolveSelectors } from '../resolver';\nimport { E2ESelectors } from '../types';\n\nimport { versionedComponents, VersionedComponents } from './components';\nimport { versionedPages, VersionedPages } from './pages';\n\nconst Pages = resolveSelectors(versionedPages);\nconst Components = resolveSelectors(versionedComponents);\nconst selectors = { pages: Pages, components: Components };\n\n/**\n * Exposes Pages, Component selectors and E2ESelectors type in package for easy use in e2e tests and in production code\n */\nexport {\n  Pages,\n  Components,\n  selectors,\n  versionedComponents,\n  versionedPages,\n  resolveSelectors,\n  type VersionedPages,\n  type VersionedComponents,\n  type E2ESelectors,\n};\n","import { VersionedSelectorGroup } from '../types';\n\nimport { MIN_GRAFANA_VERSION } from './constants';\n\n/**\n * Selectors grouped/defined in Pages\n */\nexport const versionedPages = {\n  Alerting: {\n    AddAlertRule: {\n      url: {\n        '10.1.0': '/alerting/new/alerting',\n        [MIN_GRAFANA_VERSION]: '/alerting/new',\n      },\n    },\n    EditAlertRule: {\n      url: {\n        [MIN_GRAFANA_VERSION]: (alertRuleUid: string) => `alerting/${alertRuleUid}/edit`,\n      },\n    },\n  },\n  Login: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/login',\n    },\n    username: {\n      '10.2.3': 'data-testid Username input field',\n      [MIN_GRAFANA_VERSION]: 'Username input field',\n    },\n    password: {\n      '10.2.3': 'data-testid Password input field',\n      [MIN_GRAFANA_VERSION]: 'Password input field',\n    },\n    submit: {\n      '10.2.3': 'data-testid Login button',\n      [MIN_GRAFANA_VERSION]: 'Login button',\n    },\n    skip: {\n      '10.2.3': 'data-testid Skip change password button',\n    },\n  },\n  PasswordlessLogin: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/login/passwordless/authenticate',\n    },\n    email: {\n      '10.2.3': 'data-testid Email input field',\n      [MIN_GRAFANA_VERSION]: 'Email input field',\n    },\n    submit: {\n      '10.2.3': 'data-testid PasswordlessLogin button',\n      [MIN_GRAFANA_VERSION]: 'PasswordlessLogin button',\n    },\n  },\n  Home: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/',\n    },\n  },\n  DataSource: {\n    name: {\n      '10.3.0': 'data-testid Data source settings page name input field',\n      [MIN_GRAFANA_VERSION]: 'Data source settings page name input field',\n    },\n    delete: {\n      [MIN_GRAFANA_VERSION]: 'Data source settings page Delete button',\n    },\n    readOnly: {\n      '10.3.0': 'data-testid Data source settings page read only message',\n      [MIN_GRAFANA_VERSION]: 'Data source settings page read only message',\n    },\n    saveAndTest: {\n      '10.0.0': 'data-testid Data source settings page Save and Test button',\n      [MIN_GRAFANA_VERSION]: 'Data source settings page Save and Test button',\n    },\n    alert: {\n      '10.3.0': 'data-testid Data source settings page Alert',\n      [MIN_GRAFANA_VERSION]: 'Data source settings page Alert',\n    },\n  },\n  DataSources: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/datasources',\n    },\n    dataSources: {\n      [MIN_GRAFANA_VERSION]: (dataSourceName: string) => `Data source list item ${dataSourceName}`,\n    },\n  },\n  EditDataSource: {\n    url: {\n      '9.5.0': (dataSourceUid: string) => `/datasources/edit/${dataSourceUid}`,\n    },\n    settings: {\n      '9.5.0': 'Datasource settings page basic settings',\n    },\n  },\n  AddDataSource: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/datasources/new',\n    },\n    dataSourcePluginsV2: {\n      '9.3.1': (pluginName: string) => `Add new data source ${pluginName}`,\n      [MIN_GRAFANA_VERSION]: (pluginName: string) => `Data source plugin item ${pluginName}`,\n    },\n  },\n  ConfirmModal: {\n    delete: {\n      '10.0.0': 'data-testid Confirm Modal Danger Button',\n      [MIN_GRAFANA_VERSION]: 'Confirm Modal Danger Button',\n    },\n  },\n  AddDashboard: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/dashboard/new',\n    },\n    itemButton: {\n      '9.5.0': (title: string) => `data-testid ${title}`,\n    },\n    addNewPanel: {\n      '11.1.0': 'data-testid Add new panel',\n      '8.0.0': 'Add new panel',\n      [MIN_GRAFANA_VERSION]: 'Add new panel',\n    },\n    itemButtonAddViz: {\n      [MIN_GRAFANA_VERSION]: 'Add new visualization menu item',\n    },\n    addNewRow: {\n      '11.1.0': 'data-testid Add new row',\n      [MIN_GRAFANA_VERSION]: 'Add new row',\n    },\n    addNewPanelLibrary: {\n      '11.1.0': 'data-testid Add new panel from panel library',\n      [MIN_GRAFANA_VERSION]: 'Add new panel from panel library',\n    },\n    Settings: {\n      Annotations: {\n        List: {\n          url: {\n            [MIN_GRAFANA_VERSION]: '/dashboard/new?orgId=1&editview=annotations',\n          },\n        },\n        Edit: {\n          url: {\n            [MIN_GRAFANA_VERSION]: (annotationIndex: string) =>\n              `/dashboard/new?editview=annotations&editIndex=${annotationIndex}`,\n          },\n        },\n      },\n      Variables: {\n        List: {\n          url: {\n            '11.3.0': '/dashboard/new?orgId=1&editview=variables',\n            [MIN_GRAFANA_VERSION]: '/dashboard/new?orgId=1&editview=templating',\n          },\n        },\n        Edit: {\n          url: {\n            '11.3.0': (editIndex: string) => `/dashboard/new?orgId=1&editview=variables&editIndex=${editIndex}`,\n            [MIN_GRAFANA_VERSION]: (editIndex: string) =>\n              `/dashboard/new?orgId=1&editview=templating&editIndex=${editIndex}`,\n          },\n        },\n      },\n    },\n  },\n  ImportDashboard: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/dashboard/import',\n    },\n  },\n  Dashboard: {\n    url: {\n      [MIN_GRAFANA_VERSION]: (uid: string) => `/d/${uid}`,\n    },\n    DashNav: {\n      nav: {\n        [MIN_GRAFANA_VERSION]: 'Dashboard navigation',\n      },\n      navV2: {\n        [MIN_GRAFANA_VERSION]: 'data-testid Dashboard navigation',\n      },\n      publicDashboardTag: {\n        '9.1.0': 'data-testid public dashboard tag',\n      },\n      shareButton: {\n        '10.4.0': 'data-testid share-button',\n      },\n      scrollContainer: {\n        '11.1.0': 'data-testid Dashboard canvas scroll container',\n      },\n      newShareButton: {\n        container: {\n          '11.1.0': 'data-testid new share button',\n        },\n        shareLink: {\n          '11.1.0': 'data-testid new share link-button',\n        },\n        arrowMenu: {\n          '11.1.0': 'data-testid new share button arrow menu',\n        },\n        menu: {\n          container: {\n            '11.1.0': 'data-testid new share button menu',\n          },\n          shareInternally: {\n            '11.1.0': 'data-testid new share button share internally',\n          },\n          shareExternally: {\n            '11.1.1': 'data-testid new share button share externally',\n          },\n          shareSnapshot: {\n            '11.2.0': 'data-testid new share button share snapshot',\n          },\n        },\n      },\n      NewExportButton: {\n        container: {\n          '11.2.0': 'data-testid new export button',\n        },\n        arrowMenu: {\n          '11.2.0': 'data-testid new export button arrow menu',\n        },\n        Menu: {\n          container: {\n            '11.2.0': 'data-testid new export button menu',\n          },\n          exportAsJson: {\n            '11.2.0': 'data-testid new export button export as json',\n          },\n        },\n      },\n      playlistControls: {\n        prev: {\n          '11.0.0': 'data-testid playlist previous dashboard button',\n        },\n        stop: {\n          '11.0.0': 'data-testid playlist stop dashboard button',\n        },\n        next: {\n          '11.0.0': 'data-testid playlist next dashboard button',\n        },\n      },\n    },\n    Controls: {\n      '11.1.0': 'data-testid dashboard controls',\n    },\n    SubMenu: {\n      submenu: {\n        [MIN_GRAFANA_VERSION]: 'Dashboard submenu',\n      },\n      submenuItem: {\n        [MIN_GRAFANA_VERSION]: 'data-testid template variable',\n      },\n      submenuItemLabels: {\n        [MIN_GRAFANA_VERSION]: (item: string) => `data-testid Dashboard template variables submenu Label ${item}`,\n      },\n      submenuItemValueDropDownValueLinkTexts: {\n        [MIN_GRAFANA_VERSION]: (item: string) =>\n          `data-testid Dashboard template variables Variable Value DropDown value link text ${item}`,\n      },\n      submenuItemValueDropDownDropDown: {\n        [MIN_GRAFANA_VERSION]: 'Variable options',\n      },\n      submenuItemValueDropDownOptionTexts: {\n        [MIN_GRAFANA_VERSION]: (item: string) =>\n          `data-testid Dashboard template variables Variable Value DropDown option text ${item}`,\n      },\n      Annotations: {\n        annotationsWrapper: {\n          '10.0.0': 'data-testid annotation-wrapper',\n        },\n        annotationLabel: {\n          '10.0.0': (label: string) => `data-testid Dashboard annotations submenu Label ${label}`,\n        },\n        annotationToggle: {\n          '10.0.0': (label: string) => `data-testid Dashboard annotations submenu Toggle ${label}`,\n        },\n      },\n    },\n    Settings: {\n      Actions: {\n        close: {\n          '9.5.0': 'data-testid dashboard-settings-close',\n        },\n      },\n      General: {\n        deleteDashBoard: {\n          '11.1.0': 'data-testid Dashboard settings page delete dashboard button',\n        },\n        sectionItems: {\n          [MIN_GRAFANA_VERSION]: (item: string) => `Dashboard settings section item ${item}`,\n        },\n        saveDashBoard: {\n          [MIN_GRAFANA_VERSION]: 'Dashboard settings aside actions Save button',\n        },\n        saveAsDashBoard: {\n          [MIN_GRAFANA_VERSION]: 'Dashboard settings aside actions Save As button',\n        },\n        title: {\n          '11.2.0': 'General',\n        },\n      },\n      Annotations: {\n        Edit: {\n          urlParams: {\n            [MIN_GRAFANA_VERSION]: (annotationIndex: string) => `editview=annotations&editIndex=${annotationIndex}`,\n          },\n        },\n        List: {\n          url: {\n            [MIN_GRAFANA_VERSION]: (dashboardUid: string) => `/d/${dashboardUid}?editview=annotations`,\n          },\n          addAnnotationCTAV2: {\n            [MIN_GRAFANA_VERSION]: 'data-testid Call to action button Add annotation query',\n          },\n          annotations: {\n            '10.4.0': 'data-testid list-annotations',\n          },\n        },\n        Settings: {\n          name: {\n            '11.1.0': 'data-testid Annotations settings name input',\n            [MIN_GRAFANA_VERSION]: 'Annotations settings name input',\n          },\n        },\n        NewAnnotation: {\n          panelFilterSelect: {\n            '10.0.0': 'data-testid annotations-panel-filter',\n          },\n          showInLabel: {\n            '11.1.0': 'data-testid show-in-label',\n          },\n          previewInDashboard: {\n            '10.0.0': 'data-testid annotations-preview',\n          },\n          delete: {\n            '10.4.0': 'data-testid annotations-delete',\n          },\n          apply: {\n            '10.4.0': 'data-testid annotations-apply',\n          },\n          enable: {\n            '10.4.0': 'data-testid annotation-enable',\n          },\n          hide: {\n            '10.4.0': 'data-testid annotation-hide',\n          },\n        },\n      },\n      Variables: {\n        List: {\n          url: {\n            '11.3.0': (dashboardUid: string) => `/d/${dashboardUid}?editview=variables`,\n            [MIN_GRAFANA_VERSION]: (dashboardUid: string) => `/d/${dashboardUid}?editview=templating`,\n          },\n          addVariableCTAV2: {\n            [MIN_GRAFANA_VERSION]: 'data-testid Call to action button Add variable',\n          },\n          newButton: {\n            [MIN_GRAFANA_VERSION]: 'Variable editor New variable button',\n          },\n          table: {\n            [MIN_GRAFANA_VERSION]: 'Variable editor Table',\n          },\n          tableRowNameFields: {\n            [MIN_GRAFANA_VERSION]: (variableName: string) => `Variable editor Table Name field ${variableName}`,\n          },\n          tableRowDefinitionFields: {\n            '10.1.0': (variableName: string) => `Variable editor Table Definition field ${variableName}`,\n          },\n          tableRowArrowUpButtons: {\n            [MIN_GRAFANA_VERSION]: (variableName: string) => `Variable editor Table ArrowUp button ${variableName}`,\n          },\n          tableRowArrowDownButtons: {\n            [MIN_GRAFANA_VERSION]: (variableName: string) => `Variable editor Table ArrowDown button ${variableName}`,\n          },\n          tableRowDuplicateButtons: {\n            [MIN_GRAFANA_VERSION]: (variableName: string) => `Variable editor Table Duplicate button ${variableName}`,\n          },\n          tableRowRemoveButtons: {\n            [MIN_GRAFANA_VERSION]: (variableName: string) => `Variable editor Table Remove button ${variableName}`,\n          },\n        },\n        Edit: {\n          urlParams: {\n            '11.3.0': (editIndex: string) => `editview=variables&editIndex=${editIndex}`,\n            [MIN_GRAFANA_VERSION]: (editIndex: string) => `editview=templating&editIndex=${editIndex}`,\n          },\n          General: {\n            headerLink: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Header link',\n            },\n            modeLabelNew: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Header mode New',\n            },\n            /**\n             * @deprecated\n             */\n            modeLabelEdit: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Header mode Edit',\n            },\n            generalNameInput: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Name field',\n            },\n            generalNameInputV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Name field',\n            },\n            generalTypeSelect: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Type select',\n            },\n            generalTypeSelectV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Type select',\n            },\n            generalLabelInput: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Label field',\n            },\n            generalLabelInputV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Label field',\n            },\n            generalHideSelect: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Hide select',\n            },\n            generalHideSelectV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Hide select',\n            },\n            selectionOptionsAllowCustomValueSwitch: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Allow Custom Value switch',\n            },\n            selectionOptionsMultiSwitch: {\n              '10.4.0': 'data-testid Variable editor Form Multi switch',\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Multi switch',\n            },\n            selectionOptionsIncludeAllSwitch: {\n              '10.4.0': 'data-testid Variable editor Form IncludeAll switch',\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form IncludeAll switch',\n            },\n            selectionOptionsCustomAllInput: {\n              '10.4.0': 'data-testid Variable editor Form IncludeAll field',\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form IncludeAll field',\n            },\n            previewOfValuesOption: {\n              '10.4.0': 'data-testid Variable editor Preview of Values option',\n              [MIN_GRAFANA_VERSION]: 'Variable editor Preview of Values option',\n            },\n            submitButton: {\n              '10.4.0': 'data-testid Variable editor Run Query button',\n              [MIN_GRAFANA_VERSION]: 'Variable editor Submit button',\n            },\n            applyButton: {\n              '9.3.0': 'data-testid Variable editor Apply button',\n            },\n          },\n          QueryVariable: {\n            closeButton: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Query Variable editor close button',\n            },\n            editor: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Query Variable editor',\n            },\n            previewButton: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Query Variable editor preview button',\n            },\n            queryOptionsDataSourceSelect: {\n              '10.4.0': 'data-testid Select a data source',\n              '10.0.0': 'data-testid Data source picker select container',\n              [MIN_GRAFANA_VERSION]: 'Data source picker select container',\n            },\n            queryOptionsOpenButton: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Query Variable editor open button',\n            },\n            queryOptionsRefreshSelect: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Query Refresh select',\n            },\n            queryOptionsRefreshSelectV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Query Refresh select',\n            },\n            queryOptionsRegExInput: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Query RegEx field',\n            },\n            queryOptionsRegExInputV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Query RegEx field',\n            },\n            queryOptionsSortSelect: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Query Sort select',\n            },\n            queryOptionsSortSelectV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Query Sort select',\n            },\n            queryOptionsQueryInput: {\n              '10.4.0': 'data-testid Variable editor Form Default Variable Query Editor textarea',\n            },\n            valueGroupsTagsEnabledSwitch: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Query UseTags switch',\n            },\n            valueGroupsTagsTagsQueryInput: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Query TagsQuery field',\n            },\n            valueGroupsTagsTagsValuesQueryInput: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Query TagsValuesQuery field',\n            },\n          },\n          ConstantVariable: {\n            constantOptionsQueryInput: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form Constant Query field',\n            },\n            constantOptionsQueryInputV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form Constant Query field',\n            },\n          },\n          DatasourceVariable: {\n            datasourceSelect: {\n              [MIN_GRAFANA_VERSION]: 'data-testid datasource variable datasource type',\n            },\n            nameFilter: {\n              [MIN_GRAFANA_VERSION]: 'data-testid datasource variable datasource name filter',\n            },\n          },\n          TextBoxVariable: {\n            textBoxOptionsQueryInput: {\n              [MIN_GRAFANA_VERSION]: 'Variable editor Form TextBox Query field',\n            },\n            textBoxOptionsQueryInputV2: {\n              [MIN_GRAFANA_VERSION]: 'data-testid Variable editor Form TextBox Query field',\n            },\n          },\n          CustomVariable: {\n            customValueInput: {\n              [MIN_GRAFANA_VERSION]: 'data-testid custom-variable-input',\n            },\n          },\n          IntervalVariable: {\n            intervalsValueInput: {\n              [MIN_GRAFANA_VERSION]: 'data-testid interval variable intervals input',\n            },\n            autoEnabledCheckbox: {\n              '10.4.0': 'data-testid interval variable auto value checkbox',\n            },\n            stepCountIntervalSelect: {\n              '10.4.0': 'data-testid interval variable step count input',\n            },\n            minIntervalInput: {\n              '10.4.0': 'data-testid interval variable mininum interval input',\n            },\n          },\n          GroupByVariable: {\n            dataSourceSelect: {\n              '10.4.0': 'data-testid Select a data source',\n            },\n            infoText: {\n              '10.4.0': 'data-testid group by variable info text',\n            },\n            modeToggle: {\n              '10.4.0': 'data-testid group by variable mode toggle',\n            },\n          },\n          AdHocFiltersVariable: {\n            datasourceSelect: {\n              '10.4.0': 'data-testid Select a data source',\n            },\n            infoText: {\n              '10.4.0': 'data-testid ad-hoc filters variable info text',\n            },\n            modeToggle: {\n              '11.0.0': 'data-testid ad-hoc filters variable mode toggle',\n            },\n          },\n        },\n      },\n    },\n    Annotations: {\n      marker: {\n        '10.0.0': 'data-testid annotation-marker',\n      },\n    },\n    Rows: {\n      Repeated: {\n        ConfigSection: {\n          warningMessage: {\n            '10.2.0': 'data-testid Repeated rows warning message',\n          },\n        },\n      },\n    },\n  },\n  Dashboards: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/dashboards',\n    },\n    dashboards: {\n      '10.2.0': (title: string) => `Dashboard search item ${title}`,\n    },\n    toggleView: {\n      [MIN_GRAFANA_VERSION]: 'data-testid radio-button',\n    },\n  },\n  SaveDashboardAsModal: {\n    newName: {\n      '10.2.0': 'Save dashboard title field',\n    },\n    save: {\n      '10.2.0': 'Save dashboard button',\n    },\n  },\n  SaveDashboardModal: {\n    save: {\n      '10.2.0': 'Dashboard settings Save Dashboard Modal Save button',\n    },\n    saveVariables: {\n      '10.2.0': 'Dashboard settings Save Dashboard Modal Save variables checkbox',\n    },\n    saveTimerange: {\n      '10.2.0': 'Dashboard settings Save Dashboard Modal Save timerange checkbox',\n    },\n    saveRefresh: {\n      '11.1.0': 'Dashboard settings Save Dashboard Modal Save refresh checkbox',\n    },\n  },\n  SharePanelModal: {\n    linkToRenderedImage: {\n      [MIN_GRAFANA_VERSION]: 'Link to rendered image',\n    },\n  },\n  ShareDashboardModal: {\n    PublicDashboard: {\n      WillBePublicCheckbox: {\n        '9.1.0': 'data-testid public dashboard will be public checkbox',\n      },\n      LimitedDSCheckbox: {\n        '9.1.0': 'data-testid public dashboard limited datasources checkbox',\n      },\n      CostIncreaseCheckbox: {\n        '9.1.0': 'data-testid public dashboard cost may increase checkbox',\n      },\n      PauseSwitch: {\n        '9.5.0': 'data-testid public dashboard pause switch',\n      },\n      EnableAnnotationsSwitch: {\n        '9.3.0': 'data-testid public dashboard on off switch for annotations',\n      },\n      CreateButton: {\n        '9.5.0': 'data-testid public dashboard create button',\n      },\n      DeleteButton: {\n        '9.3.0': 'data-testid public dashboard delete button',\n      },\n      CopyUrlInput: {\n        '9.1.0': 'data-testid public dashboard copy url input',\n      },\n      CopyUrlButton: {\n        '9.1.0': 'data-testid public dashboard copy url button',\n      },\n      SettingsDropdown: {\n        '10.1.0': 'data-testid public dashboard settings dropdown',\n      },\n      TemplateVariablesWarningAlert: {\n        '9.1.0': 'data-testid public dashboard disabled template variables alert',\n      },\n      UnsupportedDataSourcesWarningAlert: {\n        '9.5.0': 'data-testid public dashboard unsupported data sources alert',\n      },\n      NoUpsertPermissionsWarningAlert: {\n        '9.5.0': 'data-testid public dashboard no upsert permissions alert',\n      },\n      EnableTimeRangeSwitch: {\n        '9.4.0': 'data-testid public dashboard on off switch for time range',\n      },\n      EmailSharingConfiguration: {\n        Container: {\n          '9.5.0': 'data-testid email sharing config container',\n        },\n        ShareType: {\n          '9.5.0': 'data-testid public dashboard share type',\n        },\n        EmailSharingInput: {\n          '9.5.0': 'data-testid public dashboard email sharing input',\n        },\n        EmailSharingInviteButton: {\n          '9.5.0': 'data-testid public dashboard email sharing invite button',\n        },\n        EmailSharingList: {\n          '9.5.0': 'data-testid public dashboard email sharing list',\n        },\n        DeleteEmail: {\n          '9.5.0': 'data-testid public dashboard delete email button',\n        },\n        ReshareLink: {\n          '9.5.0': 'data-testid public dashboard reshare link button',\n        },\n      },\n    },\n    SnapshotScene: {\n      url: {\n        '11.1.0': (key: string) => `/dashboard/snapshot/${key}`,\n      },\n      PublishSnapshot: {\n        '11.1.0': 'data-testid publish snapshot button',\n      },\n      CopyUrlButton: {\n        '11.1.0': 'data-testid snapshot copy url button',\n      },\n      CopyUrlInput: {\n        '11.1.0': 'data-testid snapshot copy url input',\n      },\n    },\n  },\n  ShareDashboardDrawer: {\n    ShareInternally: {\n      container: {\n        '11.3.0': 'data-testid share internally drawer container',\n      },\n      lockTimeRangeSwitch: {\n        '11.3.0': 'data-testid share internally lock time range switch',\n      },\n      shortenUrlSwitch: {\n        '11.3.0': 'data-testid share internally shorten url switch',\n      },\n      copyUrlButton: {\n        '11.3.0': 'data-testid share internally copy url button',\n      },\n      SharePanel: {\n        preview: {\n          '11.5.0': 'data-testid share panel internally image generation preview',\n        },\n        widthInput: {\n          '11.5.0': 'data-testid share panel internally width input',\n        },\n        heightInput: {\n          '11.5.0': 'data-testid share panel internally height input',\n        },\n        scaleFactorInput: {\n          '11.5.0': 'data-testid share panel internally scale factor input',\n        },\n        generateImageButton: {\n          '11.5.0': 'data-testid share panel internally generate image button',\n        },\n        downloadImageButton: {\n          '11.5.0': 'data-testid share panel internally download image button',\n        },\n      },\n    },\n    ShareExternally: {\n      container: {\n        '11.3.0': 'data-testid share externally drawer container',\n      },\n      publicAlert: {\n        '11.3.0': 'data-testid public share alert',\n      },\n      emailSharingAlert: {\n        '11.3.0': 'data-testid email share alert',\n      },\n      shareTypeSelect: {\n        '11.3.0': 'data-testid share externally share type select',\n      },\n      Creation: {\n        PublicShare: {\n          createButton: {\n            '11.3.0': 'data-testid public share dashboard create button',\n          },\n          cancelButton: {\n            '11.3.0': 'data-testid public share dashboard cancel button',\n          },\n        },\n        EmailShare: {\n          createButton: {\n            '11.3.0': 'data-testid email share dashboard create button',\n          },\n          cancelButton: {\n            '11.3.0': 'data-testid email share dashboard cancel button',\n          },\n        },\n        willBePublicCheckbox: {\n          '11.3.0': 'data-testid share dashboard will be public checkbox',\n        },\n      },\n      Configuration: {\n        enableTimeRangeSwitch: {\n          '11.3.0': 'data-testid share externally enable time range switch',\n        },\n        enableAnnotationsSwitch: {\n          '11.3.0': 'data-testid share externally enable annotations switch',\n        },\n        copyUrlButton: {\n          '11.3.0': 'data-testid share externally copy url button',\n        },\n        revokeAccessButton: {\n          '11.3.0': 'data-testid share externally revoke access button',\n        },\n        toggleAccessButton: {\n          '11.3.0': 'data-testid share externally pause or resume access button',\n        },\n      },\n    },\n    ShareSnapshot: {\n      url: {\n        '11.3.0': (key: string) => `/dashboard/snapshot/${key}`,\n      },\n      container: {\n        '11.3.0': 'data-testid share snapshot drawer container',\n      },\n      publishSnapshot: {\n        '11.3.0': 'data-testid share snapshot publish button',\n      },\n      copyUrlButton: {\n        '11.3.0': 'data-testid share snapshot copy url button',\n      },\n    },\n  },\n  ExportDashboardDrawer: {\n    ExportAsJson: {\n      container: {\n        '11.3.0': 'data-testid export as json drawer container',\n      },\n      codeEditor: {\n        '11.3.0': 'data-testid export as json code editor',\n      },\n      exportExternallyToggle: {\n        '11.3.0': 'data-testid export as json externally switch',\n      },\n      saveToFileButton: {\n        '11.3.0': 'data-testid export as json save to file button',\n      },\n      copyToClipboardButton: {\n        '11.3.0': 'data-testid export as json copy to clipboard button',\n      },\n      cancelButton: {\n        '11.3.0': 'data-testid export as json cancel button',\n      },\n    },\n  },\n  PublicDashboard: {\n    page: {\n      '9.5.0': 'public-dashboard-page',\n    },\n    NotAvailable: {\n      container: {\n        '9.5.0': 'public-dashboard-not-available',\n      },\n      title: {\n        '9.5.0': 'public-dashboard-title',\n      },\n      pausedDescription: {\n        '9.5.0': 'public-dashboard-paused-description',\n      },\n    },\n    footer: {\n      '11.0.0': 'public-dashboard-footer',\n    },\n  },\n  PublicDashboardScene: {\n    loadingPage: {\n      '11.0.0': 'public-dashboard-scene-loading-page',\n    },\n    page: {\n      '11.0.0': 'public-dashboard-scene-page',\n    },\n    controls: {\n      '11.0.0': 'public-dashboard-controls',\n    },\n  },\n  RequestViewAccess: {\n    form: {\n      '9.5.0': 'request-view-access-form',\n    },\n    recipientInput: {\n      '9.5.0': 'request-view-access-recipient-input',\n    },\n    submitButton: {\n      '9.5.0': 'request-view-access-submit-button',\n    },\n  },\n  PublicDashboardConfirmAccess: {\n    submitButton: {\n      '10.2.0': 'data-testid confirm-access-submit-button',\n    },\n  },\n  Explore: {\n    url: {\n      [MIN_GRAFANA_VERSION]: '/explore',\n    },\n    General: {\n      container: {\n        [MIN_GRAFANA_VERSION]: 'data-testid Explore',\n      },\n      graph: {\n        [MIN_GRAFANA_VERSION]: 'Explore Graph',\n      },\n      table: {\n        [MIN_GRAFANA_VERSION]: 'Explore Table',\n      },\n      scrollView: {\n        '9.0.0': 'data-testid explorer scroll view',\n      },\n      addFromQueryLibrary: {\n        '11.5.0': 'data-testid explore add from query library button',\n      },\n    },\n    QueryHistory: {\n      container: {\n        '11.1.0': 'data-testid QueryHistory',\n      },\n    },\n  },\n  SoloPanel: {\n    url: {\n      [MIN_GRAFANA_VERSION]: (page: string) => `/d-solo/${page}`,\n    },\n  },\n  PluginsList: {\n    page: {\n      [MIN_GRAFANA_VERSION]: 'Plugins list page',\n    },\n    list: {\n      [MIN_GRAFANA_VERSION]: 'Plugins list',\n    },\n    listItem: {\n      [MIN_GRAFANA_VERSION]: 'Plugins list item',\n    },\n    signatureErrorNotice: {\n      '10.3.0': 'data-testid Unsigned plugins notice',\n      [MIN_GRAFANA_VERSION]: 'Unsigned plugins notice',\n    },\n  },\n  PluginPage: {\n    page: {\n      [MIN_GRAFANA_VERSION]: 'Plugin page',\n    },\n    signatureInfo: {\n      '10.3.0': 'data-testid Plugin signature info',\n      [MIN_GRAFANA_VERSION]: 'Plugin signature info',\n    },\n    disabledInfo: {\n      '10.3.0': 'data-testid Plugin disabled info',\n      [MIN_GRAFANA_VERSION]: 'Plugin disabled info',\n    },\n  },\n  PlaylistForm: {\n    name: {\n      [MIN_GRAFANA_VERSION]: 'Playlist name',\n    },\n    interval: {\n      [MIN_GRAFANA_VERSION]: 'Playlist interval',\n    },\n    itemDelete: {\n      '10.2.0': 'data-testid playlist-form-delete-item',\n    },\n  },\n  BrowseDashboards: {\n    table: {\n      body: {\n        '10.2.0': 'data-testid browse-dashboards-table',\n      },\n      row: {\n        '10.2.0': (name: string) => `data-testid browse dashboards row ${name}`,\n      },\n      checkbox: {\n        '10.0.0': (uid: string) => `data-testid ${uid} checkbox`,\n      },\n    },\n    NewFolderForm: {\n      form: {\n        '10.2.0': 'data-testid new folder form',\n      },\n      nameInput: {\n        '10.2.0': 'data-testid new-folder-name-input',\n      },\n      createButton: {\n        '10.2.0': 'data-testid new-folder-create-button',\n      },\n    },\n  },\n  SearchDashboards: {\n    table: {\n      '10.2.0': 'Search results table',\n    },\n  },\n  Search: {\n    url: {\n      '9.3.0': '/?search=openn',\n    },\n    FolderView: {\n      url: {\n        '9.3.0': '/?search=open&layout=folders',\n      },\n    },\n  },\n  PublicDashboards: {\n    ListItem: {\n      linkButton: {\n        '9.3.0': 'public-dashboard-link-button',\n      },\n      configButton: {\n        '9.3.0': 'public-dashboard-configuration-button',\n      },\n      trashcanButton: {\n        '9.3.0': 'public-dashboard-remove-button',\n      },\n      pauseSwitch: {\n        '10.1.0': 'data-testid public dashboard pause switch',\n      },\n    },\n  },\n  UserListPage: {\n    tabs: {\n      allUsers: {\n        '10.0.0': 'data-testid all-users-tab',\n      },\n      orgUsers: {\n        '10.0.0': 'data-testid org-users-tab',\n      },\n      anonUserDevices: {\n        '10.2.3': 'data-testid anon-user-devices-tab',\n      },\n      publicDashboardsUsers: {\n        '10.0.0': 'data-testid public-dashboards-users-tab',\n      },\n      users: {\n        '10.0.0': 'data-testid users-tab',\n      },\n    },\n    org: {\n      url: {\n        '10.2.0': '/admin/users',\n        '9.5.0': '/org/users',\n      },\n    },\n    admin: {\n      url: {\n        '9.5.0': '/admin/users',\n      },\n    },\n    publicDashboards: {\n      container: {\n        '11.1.0': 'data-testid public-dashboards-users-list',\n      },\n    },\n    UserListAdminPage: {\n      container: {\n        '10.0.0': 'data-testid user-list-admin-page',\n      },\n    },\n    UsersListPage: {\n      container: {\n        '10.0.0': 'data-testid users-list-page',\n      },\n    },\n    UserAnonListPage: {\n      container: {\n        '10.4.0': 'data-testid user-anon-list-page',\n      },\n    },\n    UsersListPublicDashboardsPage: {\n      container: {\n        '10.0.0': 'data-testid users-list-public-dashboards-page',\n      },\n      DashboardsListModal: {\n        listItem: {\n          '10.0.0': (uid: string) => `data-testid dashboards-list-item-${uid}`,\n        },\n      },\n    },\n  },\n  ProfilePage: {\n    url: {\n      '10.2.0': '/profile',\n    },\n  },\n  Plugin: {\n    url: {\n      [MIN_GRAFANA_VERSION]: (pluginId: string) => `/plugins/${pluginId}`,\n    },\n  },\n  MigrateToCloud: {\n    url: {\n      '11.2.0': '/admin/migrate-to-cloud',\n    },\n  },\n} satisfies VersionedSelectorGroup;\n\nexport type VersionedPages = typeof versionedPages;\n","import { memo } from 'react';\nimport * as React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { InlineField, Input, Stack } from '@grafana/ui';\n\nimport { LokiQuery, LokiQueryDirection, LokiQueryType } from '../types';\n\nexport interface LokiOptionFieldsProps {\n  lineLimitValue: string;\n  query: LokiQuery;\n  onChange: (value: LokiQuery) => void;\n  onRunQuery: () => void;\n  runOnBlur?: boolean;\n}\n\nexport const queryTypeOptions: Array<SelectableValue<LokiQueryType>> = [\n  { value: LokiQueryType.Range, label: 'Range', description: 'Run query over a range of time.' },\n  {\n    value: LokiQueryType.Instant,\n    label: 'Instant',\n    description: 'Run query against a single point in time. For this query, the \"To\" time is used.',\n  },\n];\n\nexport const queryDirections: Array<SelectableValue<LokiQueryDirection>> = [\n  { value: LokiQueryDirection.Backward, label: 'Backward', description: 'Search in backward direction.' },\n  {\n    value: LokiQueryDirection.Forward,\n    label: 'Forward',\n    description: 'Search in forward direction.',\n  },\n];\n\nif (config.featureToggles.lokiShardSplitting) {\n  queryDirections.push({\n    value: LokiQueryDirection.Scan,\n    label: 'Scan',\n    description: 'Experimental. Split the query into smaller units and stop at the requested log line limit.',\n    icon: 'exclamation-triangle',\n  });\n}\n\nif (config.featureToggles.lokiExperimentalStreaming) {\n  queryTypeOptions.push({\n    value: LokiQueryType.Stream,\n    label: 'Stream',\n    description: 'Run a query and keep sending results on an interval',\n  });\n}\n\nexport function getQueryDirectionLabel(direction: LokiQueryDirection) {\n  return queryDirections.find((queryDirection) => queryDirection.value === direction)?.label ?? 'Unknown';\n}\n\nexport function LokiOptionFields(props: LokiOptionFieldsProps) {\n  const { lineLimitValue, onRunQuery, runOnBlur, onChange } = props;\n  const query = props.query ?? {};\n\n  function onChangeQueryLimit(value: string) {\n    const nextQuery = { ...query, maxLines: preprocessMaxLines(value) };\n    onChange(nextQuery);\n  }\n\n  function onMaxLinesChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    if (query.maxLines !== preprocessMaxLines(e.currentTarget.value)) {\n      onChangeQueryLimit(e.currentTarget.value);\n    }\n  }\n\n  function onReturnKeyDown(e: React.KeyboardEvent<HTMLInputElement>) {\n    if (e.key === 'Enter') {\n      onRunQuery();\n    }\n  }\n\n  return (\n    <Stack alignItems=\"flex-start\" gap={0.5} aria-label=\"Loki extra field\">\n      {/*Line limit field*/}\n      <Stack wrap=\"nowrap\" gap={0} data-testid=\"lineLimitField\" aria-label=\"Line limit field\">\n        <InlineField label=\"Line limit\" tooltip={'Upper limit for number of log lines returned by query.'}>\n          <Input\n            className=\"width-4\"\n            placeholder=\"auto\"\n            type=\"number\"\n            min={0}\n            onChange={onMaxLinesChange}\n            onKeyDown={onReturnKeyDown}\n            value={lineLimitValue}\n            onBlur={() => {\n              if (runOnBlur) {\n                onRunQuery();\n              }\n            }}\n          />\n        </InlineField>\n      </Stack>\n    </Stack>\n  );\n}\n\nexport default memo(LokiOptionFields);\n\nexport function preprocessMaxLines(value: string): number | undefined {\n  const maxLines = parseInt(value, 10);\n  if (isNaN(maxLines) || maxLines < 0) {\n    return undefined;\n  }\n\n  return maxLines;\n}\n","import { lazy, Suspense } from 'react';\n\nimport { Props } from './MonacoQueryFieldProps';\n\nconst Field = lazy(() => import(/* webpackChunkName: \"loki-query-field\" */ './MonacoQueryField'));\n\nexport const MonacoQueryFieldLazy = (props: Props) => {\n  return (\n    <Suspense fallback={null}>\n      <Field {...props} />\n    </Suspense>\n  );\n};\n","import { useRef } from 'react';\n\nimport { MonacoQueryFieldLazy } from './MonacoQueryFieldLazy';\nimport { Props as MonacoProps } from './MonacoQueryFieldProps';\n\nexport type Props = Omit<MonacoProps, 'onRunQuery' | 'onBlur'> & {\n  onChange: (query: string) => void;\n  onRunQuery: () => void;\n  onQueryType?: (query: string) => void;\n};\n\nexport const MonacoQueryFieldWrapper = (props: Props) => {\n  const lastRunValueRef = useRef<string | null>(null);\n  const { onRunQuery, onChange, ...rest } = props;\n\n  const handleRunQuery = (value: string) => {\n    lastRunValueRef.current = value;\n    onChange(value);\n    onRunQuery();\n  };\n\n  const handleBlur = (value: string) => {\n    onChange(value);\n  };\n\n  return <MonacoQueryFieldLazy onRunQuery={handleRunQuery} onBlur={handleBlur} onChange={onChange} {...rest} />;\n};\n","import { PureComponent, ReactNode } from 'react';\n\nimport { QueryEditorProps } from '@grafana/data';\n\nimport { LokiDatasource } from '../datasource';\nimport { shouldRefreshLabels } from '../languageUtils';\nimport { LokiQuery, LokiOptions } from '../types';\n\nimport { MonacoQueryFieldWrapper } from './monaco-query-field/MonacoQueryFieldWrapper';\n\nexport interface LokiQueryFieldProps extends QueryEditorProps<LokiDatasource, LokiQuery, LokiOptions> {\n  ExtraFieldElement?: ReactNode;\n  placeholder?: string;\n  'data-testid'?: string;\n}\n\ninterface LokiQueryFieldState {\n  labelsLoaded: boolean;\n}\n\nexport class LokiQueryField extends PureComponent<LokiQueryFieldProps, LokiQueryFieldState> {\n  _isMounted = false;\n\n  constructor(props: LokiQueryFieldProps) {\n    super(props);\n\n    this.state = { labelsLoaded: false };\n  }\n\n  async componentDidMount() {\n    this._isMounted = true;\n    await this.props.datasource.languageProvider.start(this.props.range);\n    if (this._isMounted) {\n      this.setState({ labelsLoaded: true });\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  componentDidUpdate(prevProps: LokiQueryFieldProps) {\n    const {\n      range,\n      datasource: { languageProvider },\n    } = this.props;\n    const refreshLabels = shouldRefreshLabels(range, prevProps.range);\n    // We want to refresh labels when range changes (we round up intervals to a minute)\n    if (refreshLabels) {\n      languageProvider.fetchLabels({ timeRange: range });\n    }\n  }\n\n  onChangeQuery = (value: string, override?: boolean) => {\n    // Send text change to parent\n    const { query, onChange, onRunQuery } = this.props;\n    if (onChange) {\n      const nextQuery = { ...query, expr: value };\n      onChange(nextQuery);\n\n      if (override && onRunQuery) {\n        onRunQuery();\n      }\n    }\n  };\n\n  render() {\n    const { ExtraFieldElement, query, datasource, history, onRunQuery, range } = this.props;\n    const placeholder = this.props.placeholder ?? 'Enter a Loki query (run with Shift+Enter)';\n\n    return (\n      <>\n        <div\n          className=\"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1\"\n          data-testid={this.props['data-testid']}\n        >\n          <div className=\"gf-form--grow flex-shrink-1 min-width-15\">\n            <MonacoQueryFieldWrapper\n              datasource={datasource}\n              history={history ?? []}\n              onChange={this.onChangeQuery}\n              onRunQuery={onRunQuery}\n              initialValue={query.expr ?? ''}\n              placeholder={placeholder}\n              timeRange={range}\n            />\n          </div>\n        </div>\n        {ExtraFieldElement}\n      </>\n    );\n  }\n}\n","import { SyntaxNode } from '@lezer/common';\nimport { LRParser } from '@lezer/lr';\n\nimport { ErrorId } from '../../../querybuilder/parsingUtils';\n\ninterface ParserErrorBoundary {\n  startLineNumber: number;\n  startColumn: number;\n  endLineNumber: number;\n  endColumn: number;\n  error: string;\n}\n\ninterface ParseError {\n  text: string;\n  node: SyntaxNode;\n}\n\n/**\n * Conceived to work in combination with the MonacoQueryField component.\n * Given an original query, and it's interpolated version, it will return an array of ParserErrorBoundary\n * objects containing nodes which are actual errors. The interpolated version (even with placeholder variables)\n * is required because variables look like errors for Lezer.\n * @internal\n */\nexport function validateQuery(\n  query: string,\n  interpolatedQuery: string,\n  queryLines: string[],\n  parser: LRParser\n): ParserErrorBoundary[] | false {\n  if (!query) {\n    return false;\n  }\n\n  /**\n   * To provide support to variable interpolation in query validation, we run the parser in the interpolated\n   * query. If there are errors there, we trace them back to the original unparsed query, so we can more\n   * accurately highlight the error in the query, since it's likely that the variable name and variable value\n   * have different lengths. With this, we also exclude irrelevant parser errors that are produced by\n   * lezer not understanding $variables and $__variables, which usually generate 2 or 3 error SyntaxNode.\n   */\n  const interpolatedErrors: ParseError[] = parseQuery(interpolatedQuery, parser);\n  if (!interpolatedErrors.length) {\n    return false;\n  }\n\n  let parseErrors: ParseError[] = interpolatedErrors;\n  if (query !== interpolatedQuery) {\n    const queryErrors: ParseError[] = parseQuery(query, parser);\n    parseErrors = interpolatedErrors.flatMap(\n      (interpolatedError) =>\n        queryErrors.filter((queryError) => interpolatedError.text === queryError.text) || interpolatedError\n    );\n  }\n\n  return parseErrors.map((parseError) => findErrorBoundary(query, queryLines, parseError)).filter(isErrorBoundary);\n}\n\nfunction parseQuery(query: string, parser: LRParser) {\n  const parseErrors: ParseError[] = [];\n  const tree = parser.parse(query);\n  tree.iterate({\n    enter: (nodeRef): false | void => {\n      if (nodeRef.type.id === ErrorId) {\n        const node = nodeRef.node;\n        parseErrors.push({\n          node: node,\n          text: query.substring(node.from, node.to),\n        });\n      }\n    },\n  });\n  return parseErrors;\n}\n\nfunction findErrorBoundary(query: string, queryLines: string[], parseError: ParseError): ParserErrorBoundary | null {\n  if (queryLines.length === 1) {\n    const isEmptyString = parseError.node.from === parseError.node.to;\n    const errorNode = isEmptyString && parseError.node.parent ? parseError.node.parent : parseError.node;\n    const error = isEmptyString ? query.substring(errorNode.from, errorNode.to) : parseError.text;\n    return {\n      startLineNumber: 1,\n      startColumn: errorNode.from + 1,\n      endLineNumber: 1,\n      endColumn: errorNode.to + 1,\n      error,\n    };\n  }\n\n  let startPos = 0,\n    endPos = 0;\n  for (let line = 0; line < queryLines.length; line++) {\n    endPos = startPos + queryLines[line].length;\n\n    if (parseError.node.from > endPos) {\n      startPos += queryLines[line].length + 1;\n      continue;\n    }\n\n    return {\n      startLineNumber: line + 1,\n      startColumn: parseError.node.from - startPos + 1,\n      endLineNumber: line + 1,\n      endColumn: parseError.node.to - startPos + 1,\n      error: parseError.text,\n    };\n  }\n\n  return null;\n}\n\nfunction isErrorBoundary(boundary: ParserErrorBoundary | null): boundary is ParserErrorBoundary {\n  return boundary !== null;\n}\n\nexport const placeHolderScopedVars = {\n  __interval: { text: '1s', value: '1s' },\n  __rate_interval: { text: '1s', value: '1s' },\n  __auto: { text: '1s', value: '1s' },\n  __interval_ms: { text: '1000', value: 1000 },\n  __range_ms: { text: '1000', value: 1000 },\n  __range_s: { text: '1', value: 1 },\n  __range: { text: '1s', value: '1s' },\n};\n","/**\n * @module LRUCache\n */\nconst perf = typeof performance === 'object' &&\n    performance &&\n    typeof performance.now === 'function'\n    ? performance\n    : Date;\nconst warned = new Set();\n/* c8 ignore start */\nconst PROCESS = (typeof process === 'object' && !!process ? process : {});\n/* c8 ignore start */\nconst emitWarning = (msg, type, code, fn) => {\n    typeof PROCESS.emitWarning === 'function'\n        ? PROCESS.emitWarning(msg, type, code, fn)\n        : console.error(`[${code}] ${type}: ${msg}`);\n};\nlet AC = globalThis.AbortController;\nlet AS = globalThis.AbortSignal;\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n    //@ts-ignore\n    AS = class AbortSignal {\n        onabort;\n        _onabort = [];\n        reason;\n        aborted = false;\n        addEventListener(_, fn) {\n            this._onabort.push(fn);\n        }\n    };\n    //@ts-ignore\n    AC = class AbortController {\n        constructor() {\n            warnACPolyfill();\n        }\n        signal = new AS();\n        abort(reason) {\n            if (this.signal.aborted)\n                return;\n            //@ts-ignore\n            this.signal.reason = reason;\n            //@ts-ignore\n            this.signal.aborted = true;\n            //@ts-ignore\n            for (const fn of this.signal._onabort) {\n                fn(reason);\n            }\n            this.signal.onabort?.(reason);\n        }\n    };\n    let printACPolyfillWarning = PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1';\n    const warnACPolyfill = () => {\n        if (!printACPolyfillWarning)\n            return;\n        printACPolyfillWarning = false;\n        emitWarning('AbortController is not defined. If using lru-cache in ' +\n            'node 14, load an AbortController polyfill from the ' +\n            '`node-abort-controller` package. A minimal polyfill is ' +\n            'provided for use by LRUCache.fetch(), but it should not be ' +\n            'relied upon in other contexts (eg, passing it to other APIs that ' +\n            'use AbortController/AbortSignal might have undesirable effects). ' +\n            'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.', 'NO_ABORT_CONTROLLER', 'ENOTSUP', warnACPolyfill);\n    };\n}\n/* c8 ignore stop */\nconst shouldWarn = (code) => !warned.has(code);\nconst TYPE = Symbol('type');\nconst isPosInt = (n) => n && n === Math.floor(n) && n > 0 && isFinite(n);\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max) => !isPosInt(max)\n    ? null\n    : max <= Math.pow(2, 8)\n        ? Uint8Array\n        : max <= Math.pow(2, 16)\n            ? Uint16Array\n            : max <= Math.pow(2, 32)\n                ? Uint32Array\n                : max <= Number.MAX_SAFE_INTEGER\n                    ? ZeroArray\n                    : null;\n/* c8 ignore stop */\nclass ZeroArray extends Array {\n    constructor(size) {\n        super(size);\n        this.fill(0);\n    }\n}\nclass Stack {\n    heap;\n    length;\n    // private constructor\n    static #constructing = false;\n    static create(max) {\n        const HeapCls = getUintArray(max);\n        if (!HeapCls)\n            return [];\n        Stack.#constructing = true;\n        const s = new Stack(max, HeapCls);\n        Stack.#constructing = false;\n        return s;\n    }\n    constructor(max, HeapCls) {\n        /* c8 ignore start */\n        if (!Stack.#constructing) {\n            throw new TypeError('instantiate Stack using Stack.create(n)');\n        }\n        /* c8 ignore stop */\n        this.heap = new HeapCls(max);\n        this.length = 0;\n    }\n    push(n) {\n        this.heap[this.length++] = n;\n    }\n    pop() {\n        return this.heap[--this.length];\n    }\n}\n/**\n * Default export, the thing you're using this module to get.\n *\n * The `K` and `V` types define the key and value types, respectively. The\n * optional `FC` type defines the type of the `context` object passed to\n * `cache.fetch()` and `cache.memo()`.\n *\n * Keys and values **must not** be `null` or `undefined`.\n *\n * All properties from the options object (with the exception of `max`,\n * `maxSize`, `fetchMethod`, `memoMethod`, `dispose` and `disposeAfter`) are\n * added as normal public members. (The listed options are read-only getters.)\n *\n * Changing any of these will alter the defaults for subsequent method calls.\n */\nexport class LRUCache {\n    // options that cannot be changed without disaster\n    #max;\n    #maxSize;\n    #dispose;\n    #onInsert;\n    #disposeAfter;\n    #fetchMethod;\n    #memoMethod;\n    /**\n     * {@link LRUCache.OptionsBase.ttl}\n     */\n    ttl;\n    /**\n     * {@link LRUCache.OptionsBase.ttlResolution}\n     */\n    ttlResolution;\n    /**\n     * {@link LRUCache.OptionsBase.ttlAutopurge}\n     */\n    ttlAutopurge;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnGet}\n     */\n    updateAgeOnGet;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnHas}\n     */\n    updateAgeOnHas;\n    /**\n     * {@link LRUCache.OptionsBase.allowStale}\n     */\n    allowStale;\n    /**\n     * {@link LRUCache.OptionsBase.noDisposeOnSet}\n     */\n    noDisposeOnSet;\n    /**\n     * {@link LRUCache.OptionsBase.noUpdateTTL}\n     */\n    noUpdateTTL;\n    /**\n     * {@link LRUCache.OptionsBase.maxEntrySize}\n     */\n    maxEntrySize;\n    /**\n     * {@link LRUCache.OptionsBase.sizeCalculation}\n     */\n    sizeCalculation;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n     */\n    noDeleteOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n     */\n    noDeleteOnStaleGet;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n     */\n    allowStaleOnFetchAbort;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n     */\n    allowStaleOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n     */\n    ignoreFetchAbort;\n    // computed properties\n    #size;\n    #calculatedSize;\n    #keyMap;\n    #keyList;\n    #valList;\n    #next;\n    #prev;\n    #head;\n    #tail;\n    #free;\n    #disposed;\n    #sizes;\n    #starts;\n    #ttls;\n    #hasDispose;\n    #hasFetchMethod;\n    #hasDisposeAfter;\n    #hasOnInsert;\n    /**\n     * Do not call this method unless you need to inspect the\n     * inner workings of the cache.  If anything returned by this\n     * object is modified in any way, strange breakage may occur.\n     *\n     * These fields are private for a reason!\n     *\n     * @internal\n     */\n    static unsafeExposeInternals(c) {\n        return {\n            // properties\n            starts: c.#starts,\n            ttls: c.#ttls,\n            sizes: c.#sizes,\n            keyMap: c.#keyMap,\n            keyList: c.#keyList,\n            valList: c.#valList,\n            next: c.#next,\n            prev: c.#prev,\n            get head() {\n                return c.#head;\n            },\n            get tail() {\n                return c.#tail;\n            },\n            free: c.#free,\n            // methods\n            isBackgroundFetch: (p) => c.#isBackgroundFetch(p),\n            backgroundFetch: (k, index, options, context) => c.#backgroundFetch(k, index, options, context),\n            moveToTail: (index) => c.#moveToTail(index),\n            indexes: (options) => c.#indexes(options),\n            rindexes: (options) => c.#rindexes(options),\n            isStale: (index) => c.#isStale(index),\n        };\n    }\n    // Protected read-only members\n    /**\n     * {@link LRUCache.OptionsBase.max} (read-only)\n     */\n    get max() {\n        return this.#max;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.maxSize} (read-only)\n     */\n    get maxSize() {\n        return this.#maxSize;\n    }\n    /**\n     * The total computed size of items in the cache (read-only)\n     */\n    get calculatedSize() {\n        return this.#calculatedSize;\n    }\n    /**\n     * The number of items stored in the cache (read-only)\n     */\n    get size() {\n        return this.#size;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n     */\n    get fetchMethod() {\n        return this.#fetchMethod;\n    }\n    get memoMethod() {\n        return this.#memoMethod;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.dispose} (read-only)\n     */\n    get dispose() {\n        return this.#dispose;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.onInsert} (read-only)\n     */\n    get onInsert() {\n        return this.#onInsert;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n     */\n    get disposeAfter() {\n        return this.#disposeAfter;\n    }\n    constructor(options) {\n        const { max = 0, ttl, ttlResolution = 1, ttlAutopurge, updateAgeOnGet, updateAgeOnHas, allowStale, dispose, onInsert, disposeAfter, noDisposeOnSet, noUpdateTTL, maxSize = 0, maxEntrySize = 0, sizeCalculation, fetchMethod, memoMethod, noDeleteOnFetchRejection, noDeleteOnStaleGet, allowStaleOnFetchRejection, allowStaleOnFetchAbort, ignoreFetchAbort, } = options;\n        if (max !== 0 && !isPosInt(max)) {\n            throw new TypeError('max option must be a nonnegative integer');\n        }\n        const UintArray = max ? getUintArray(max) : Array;\n        if (!UintArray) {\n            throw new Error('invalid max value: ' + max);\n        }\n        this.#max = max;\n        this.#maxSize = maxSize;\n        this.maxEntrySize = maxEntrySize || this.#maxSize;\n        this.sizeCalculation = sizeCalculation;\n        if (this.sizeCalculation) {\n            if (!this.#maxSize && !this.maxEntrySize) {\n                throw new TypeError('cannot set sizeCalculation without setting maxSize or maxEntrySize');\n            }\n            if (typeof this.sizeCalculation !== 'function') {\n                throw new TypeError('sizeCalculation set to non-function');\n            }\n        }\n        if (memoMethod !== undefined &&\n            typeof memoMethod !== 'function') {\n            throw new TypeError('memoMethod must be a function if defined');\n        }\n        this.#memoMethod = memoMethod;\n        if (fetchMethod !== undefined &&\n            typeof fetchMethod !== 'function') {\n            throw new TypeError('fetchMethod must be a function if specified');\n        }\n        this.#fetchMethod = fetchMethod;\n        this.#hasFetchMethod = !!fetchMethod;\n        this.#keyMap = new Map();\n        this.#keyList = new Array(max).fill(undefined);\n        this.#valList = new Array(max).fill(undefined);\n        this.#next = new UintArray(max);\n        this.#prev = new UintArray(max);\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free = Stack.create(max);\n        this.#size = 0;\n        this.#calculatedSize = 0;\n        if (typeof dispose === 'function') {\n            this.#dispose = dispose;\n        }\n        if (typeof onInsert === 'function') {\n            this.#onInsert = onInsert;\n        }\n        if (typeof disposeAfter === 'function') {\n            this.#disposeAfter = disposeAfter;\n            this.#disposed = [];\n        }\n        else {\n            this.#disposeAfter = undefined;\n            this.#disposed = undefined;\n        }\n        this.#hasDispose = !!this.#dispose;\n        this.#hasOnInsert = !!this.#onInsert;\n        this.#hasDisposeAfter = !!this.#disposeAfter;\n        this.noDisposeOnSet = !!noDisposeOnSet;\n        this.noUpdateTTL = !!noUpdateTTL;\n        this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection;\n        this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection;\n        this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort;\n        this.ignoreFetchAbort = !!ignoreFetchAbort;\n        // NB: maxEntrySize is set to maxSize if it's set\n        if (this.maxEntrySize !== 0) {\n            if (this.#maxSize !== 0) {\n                if (!isPosInt(this.#maxSize)) {\n                    throw new TypeError('maxSize must be a positive integer if specified');\n                }\n            }\n            if (!isPosInt(this.maxEntrySize)) {\n                throw new TypeError('maxEntrySize must be a positive integer if specified');\n            }\n            this.#initializeSizeTracking();\n        }\n        this.allowStale = !!allowStale;\n        this.noDeleteOnStaleGet = !!noDeleteOnStaleGet;\n        this.updateAgeOnGet = !!updateAgeOnGet;\n        this.updateAgeOnHas = !!updateAgeOnHas;\n        this.ttlResolution =\n            isPosInt(ttlResolution) || ttlResolution === 0\n                ? ttlResolution\n                : 1;\n        this.ttlAutopurge = !!ttlAutopurge;\n        this.ttl = ttl || 0;\n        if (this.ttl) {\n            if (!isPosInt(this.ttl)) {\n                throw new TypeError('ttl must be a positive integer if specified');\n            }\n            this.#initializeTTLTracking();\n        }\n        // do not allow completely unbounded caches\n        if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n            throw new TypeError('At least one of max, maxSize, or ttl is required');\n        }\n        if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n            const code = 'LRU_CACHE_UNBOUNDED';\n            if (shouldWarn(code)) {\n                warned.add(code);\n                const msg = 'TTL caching without ttlAutopurge, max, or maxSize can ' +\n                    'result in unbounded memory consumption.';\n                emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache);\n            }\n        }\n    }\n    /**\n     * Return the number of ms left in the item's TTL. If item is not in cache,\n     * returns `0`. Returns `Infinity` if item is in cache without a defined TTL.\n     */\n    getRemainingTTL(key) {\n        return this.#keyMap.has(key) ? Infinity : 0;\n    }\n    #initializeTTLTracking() {\n        const ttls = new ZeroArray(this.#max);\n        const starts = new ZeroArray(this.#max);\n        this.#ttls = ttls;\n        this.#starts = starts;\n        this.#setItemTTL = (index, ttl, start = perf.now()) => {\n            starts[index] = ttl !== 0 ? start : 0;\n            ttls[index] = ttl;\n            if (ttl !== 0 && this.ttlAutopurge) {\n                const t = setTimeout(() => {\n                    if (this.#isStale(index)) {\n                        this.#delete(this.#keyList[index], 'expire');\n                    }\n                }, ttl + 1);\n                // unref() not supported on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n        };\n        this.#updateItemAge = index => {\n            starts[index] = ttls[index] !== 0 ? perf.now() : 0;\n        };\n        this.#statusTTL = (status, index) => {\n            if (ttls[index]) {\n                const ttl = ttls[index];\n                const start = starts[index];\n                /* c8 ignore next */\n                if (!ttl || !start)\n                    return;\n                status.ttl = ttl;\n                status.start = start;\n                status.now = cachedNow || getNow();\n                const age = status.now - start;\n                status.remainingTTL = ttl - age;\n            }\n        };\n        // debounce calls to perf.now() to 1s so we're not hitting\n        // that costly call repeatedly.\n        let cachedNow = 0;\n        const getNow = () => {\n            const n = perf.now();\n            if (this.ttlResolution > 0) {\n                cachedNow = n;\n                const t = setTimeout(() => (cachedNow = 0), this.ttlResolution);\n                // not available on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n            return n;\n        };\n        this.getRemainingTTL = key => {\n            const index = this.#keyMap.get(key);\n            if (index === undefined) {\n                return 0;\n            }\n            const ttl = ttls[index];\n            const start = starts[index];\n            if (!ttl || !start) {\n                return Infinity;\n            }\n            const age = (cachedNow || getNow()) - start;\n            return ttl - age;\n        };\n        this.#isStale = index => {\n            const s = starts[index];\n            const t = ttls[index];\n            return !!t && !!s && (cachedNow || getNow()) - s > t;\n        };\n    }\n    // conditionally set private methods related to TTL\n    #updateItemAge = () => { };\n    #statusTTL = () => { };\n    #setItemTTL = () => { };\n    /* c8 ignore stop */\n    #isStale = () => false;\n    #initializeSizeTracking() {\n        const sizes = new ZeroArray(this.#max);\n        this.#calculatedSize = 0;\n        this.#sizes = sizes;\n        this.#removeItemSize = index => {\n            this.#calculatedSize -= sizes[index];\n            sizes[index] = 0;\n        };\n        this.#requireSize = (k, v, size, sizeCalculation) => {\n            // provisionally accept background fetches.\n            // actual value size will be checked when they return.\n            if (this.#isBackgroundFetch(v)) {\n                return 0;\n            }\n            if (!isPosInt(size)) {\n                if (sizeCalculation) {\n                    if (typeof sizeCalculation !== 'function') {\n                        throw new TypeError('sizeCalculation must be a function');\n                    }\n                    size = sizeCalculation(v, k);\n                    if (!isPosInt(size)) {\n                        throw new TypeError('sizeCalculation return invalid (expect positive integer)');\n                    }\n                }\n                else {\n                    throw new TypeError('invalid size value (must be positive integer). ' +\n                        'When maxSize or maxEntrySize is used, sizeCalculation ' +\n                        'or size must be set.');\n                }\n            }\n            return size;\n        };\n        this.#addItemSize = (index, size, status) => {\n            sizes[index] = size;\n            if (this.#maxSize) {\n                const maxSize = this.#maxSize - sizes[index];\n                while (this.#calculatedSize > maxSize) {\n                    this.#evict(true);\n                }\n            }\n            this.#calculatedSize += sizes[index];\n            if (status) {\n                status.entrySize = size;\n                status.totalCalculatedSize = this.#calculatedSize;\n            }\n        };\n    }\n    #removeItemSize = _i => { };\n    #addItemSize = (_i, _s, _st) => { };\n    #requireSize = (_k, _v, size, sizeCalculation) => {\n        if (size || sizeCalculation) {\n            throw new TypeError('cannot set size without setting maxSize or maxEntrySize on cache');\n        }\n        return 0;\n    };\n    *#indexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#tail; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#head) {\n                    break;\n                }\n                else {\n                    i = this.#prev[i];\n                }\n            }\n        }\n    }\n    *#rindexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#head; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#tail) {\n                    break;\n                }\n                else {\n                    i = this.#next[i];\n                }\n            }\n        }\n    }\n    #isValidIndex(index) {\n        return (index !== undefined &&\n            this.#keyMap.get(this.#keyList[index]) === index);\n    }\n    /**\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from most recently used to least recently used.\n     */\n    *entries() {\n        for (const i of this.#indexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.entries}\n     *\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from least recently used to most recently used.\n     */\n    *rentries() {\n        for (const i of this.#rindexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the keys in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *keys() {\n        for (const i of this.#indexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.keys}\n     *\n     * Return a generator yielding the keys in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rkeys() {\n        for (const i of this.#rindexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the values in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *values() {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.values}\n     *\n     * Return a generator yielding the values in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rvalues() {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Iterating over the cache itself yields the same results as\n     * {@link LRUCache.entries}\n     */\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    /**\n     * A String value that is used in the creation of the default string\n     * description of an object. Called by the built-in method\n     * `Object.prototype.toString`.\n     */\n    [Symbol.toStringTag] = 'LRUCache';\n    /**\n     * Find a value for which the supplied fn method returns a truthy value,\n     * similar to `Array.find()`. fn is called as `fn(value, key, cache)`.\n     */\n    find(fn, getOptions = {}) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            if (fn(value, this.#keyList[i], this)) {\n                return this.get(this.#keyList[i], getOptions);\n            }\n        }\n    }\n    /**\n     * Call the supplied function on each item in the cache, in order from most\n     * recently used to least recently used.\n     *\n     * `fn` is called as `fn(value, key, cache)`.\n     *\n     * If `thisp` is provided, function will be called in the `this`-context of\n     * the provided object, or the cache if no `thisp` object is provided.\n     *\n     * Does not update age or recenty of use, or iterate over stale values.\n     */\n    forEach(fn, thisp = this) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * The same as {@link LRUCache.forEach} but items are iterated over in\n     * reverse order.  (ie, less recently used items are iterated over first.)\n     */\n    rforEach(fn, thisp = this) {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * Delete any stale entries. Returns true if anything was removed,\n     * false otherwise.\n     */\n    purgeStale() {\n        let deleted = false;\n        for (const i of this.#rindexes({ allowStale: true })) {\n            if (this.#isStale(i)) {\n                this.#delete(this.#keyList[i], 'expire');\n                deleted = true;\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Get the extended info about a given entry, to get its value, size, and\n     * TTL info simultaneously. Returns `undefined` if the key is not present.\n     *\n     * Unlike {@link LRUCache#dump}, which is designed to be portable and survive\n     * serialization, the `start` value is always the current timestamp, and the\n     * `ttl` is a calculated remaining time to live (negative if expired).\n     *\n     * Always returns stale values, if their info is found in the cache, so be\n     * sure to check for expirations (ie, a negative {@link LRUCache.Entry#ttl})\n     * if relevant.\n     */\n    info(key) {\n        const i = this.#keyMap.get(key);\n        if (i === undefined)\n            return undefined;\n        const v = this.#valList[i];\n        const value = this.#isBackgroundFetch(v)\n            ? v.__staleWhileFetching\n            : v;\n        if (value === undefined)\n            return undefined;\n        const entry = { value };\n        if (this.#ttls && this.#starts) {\n            const ttl = this.#ttls[i];\n            const start = this.#starts[i];\n            if (ttl && start) {\n                const remain = ttl - (perf.now() - start);\n                entry.ttl = remain;\n                entry.start = Date.now();\n            }\n        }\n        if (this.#sizes) {\n            entry.size = this.#sizes[i];\n        }\n        return entry;\n    }\n    /**\n     * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n     * passed to {@link LRUCache#load}.\n     *\n     * The `start` fields are calculated relative to a portable `Date.now()`\n     * timestamp, even if `performance.now()` is available.\n     *\n     * Stale entries are always included in the `dump`, even if\n     * {@link LRUCache.OptionsBase.allowStale} is false.\n     *\n     * Note: this returns an actual array, not a generator, so it can be more\n     * easily passed around.\n     */\n    dump() {\n        const arr = [];\n        for (const i of this.#indexes({ allowStale: true })) {\n            const key = this.#keyList[i];\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined || key === undefined)\n                continue;\n            const entry = { value };\n            if (this.#ttls && this.#starts) {\n                entry.ttl = this.#ttls[i];\n                // always dump the start relative to a portable timestamp\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = perf.now() - this.#starts[i];\n                entry.start = Math.floor(Date.now() - age);\n            }\n            if (this.#sizes) {\n                entry.size = this.#sizes[i];\n            }\n            arr.unshift([key, entry]);\n        }\n        return arr;\n    }\n    /**\n     * Reset the cache and load in the items in entries in the order listed.\n     *\n     * The shape of the resulting cache may be different if the same options are\n     * not used in both caches.\n     *\n     * The `start` fields are assumed to be calculated relative to a portable\n     * `Date.now()` timestamp, even if `performance.now()` is available.\n     */\n    load(arr) {\n        this.clear();\n        for (const [key, entry] of arr) {\n            if (entry.start) {\n                // entry.start is a portable timestamp, but we may be using\n                // node's performance.now(), so calculate the offset, so that\n                // we get the intended remaining TTL, no matter how long it's\n                // been on ice.\n                //\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = Date.now() - entry.start;\n                entry.start = perf.now() - age;\n            }\n            this.set(key, entry.value, entry);\n        }\n    }\n    /**\n     * Add a value to the cache.\n     *\n     * Note: if `undefined` is specified as a value, this is an alias for\n     * {@link LRUCache#delete}\n     *\n     * Fields on the {@link LRUCache.SetOptions} options param will override\n     * their corresponding values in the constructor options for the scope\n     * of this single `set()` operation.\n     *\n     * If `start` is provided, then that will set the effective start\n     * time for the TTL calculation. Note that this must be a previous\n     * value of `performance.now()` if supported, or a previous value of\n     * `Date.now()` if not.\n     *\n     * Options object may also include `size`, which will prevent\n     * calling the `sizeCalculation` function and just use the specified\n     * number if it is a positive integer, and `noDisposeOnSet` which\n     * will prevent calling a `dispose` function in the case of\n     * overwrites.\n     *\n     * If the `size` (or return value of `sizeCalculation`) for a given\n     * entry is greater than `maxEntrySize`, then the item will not be\n     * added to the cache.\n     *\n     * Will update the recency of the entry.\n     *\n     * If the value is `undefined`, then this is an alias for\n     * `cache.delete(key)`. `undefined` is never stored in the cache.\n     */\n    set(k, v, setOptions = {}) {\n        if (v === undefined) {\n            this.delete(k);\n            return this;\n        }\n        const { ttl = this.ttl, start, noDisposeOnSet = this.noDisposeOnSet, sizeCalculation = this.sizeCalculation, status, } = setOptions;\n        let { noUpdateTTL = this.noUpdateTTL } = setOptions;\n        const size = this.#requireSize(k, v, setOptions.size || 0, sizeCalculation);\n        // if the item doesn't fit, don't do anything\n        // NB: maxEntrySize set to maxSize by default\n        if (this.maxEntrySize && size > this.maxEntrySize) {\n            if (status) {\n                status.set = 'miss';\n                status.maxEntrySizeExceeded = true;\n            }\n            // have to delete, in case something is there already.\n            this.#delete(k, 'set');\n            return this;\n        }\n        let index = this.#size === 0 ? undefined : this.#keyMap.get(k);\n        if (index === undefined) {\n            // addition\n            index = (this.#size === 0\n                ? this.#tail\n                : this.#free.length !== 0\n                    ? this.#free.pop()\n                    : this.#size === this.#max\n                        ? this.#evict(false)\n                        : this.#size);\n            this.#keyList[index] = k;\n            this.#valList[index] = v;\n            this.#keyMap.set(k, index);\n            this.#next[this.#tail] = index;\n            this.#prev[index] = this.#tail;\n            this.#tail = index;\n            this.#size++;\n            this.#addItemSize(index, size, status);\n            if (status)\n                status.set = 'add';\n            noUpdateTTL = false;\n            if (this.#hasOnInsert) {\n                this.#onInsert?.(v, k, 'add');\n            }\n        }\n        else {\n            // update\n            this.#moveToTail(index);\n            const oldVal = this.#valList[index];\n            if (v !== oldVal) {\n                if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n                    oldVal.__abortController.abort(new Error('replaced'));\n                    const { __staleWhileFetching: s } = oldVal;\n                    if (s !== undefined && !noDisposeOnSet) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(s, k, 'set');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([s, k, 'set']);\n                        }\n                    }\n                }\n                else if (!noDisposeOnSet) {\n                    if (this.#hasDispose) {\n                        this.#dispose?.(oldVal, k, 'set');\n                    }\n                    if (this.#hasDisposeAfter) {\n                        this.#disposed?.push([oldVal, k, 'set']);\n                    }\n                }\n                this.#removeItemSize(index);\n                this.#addItemSize(index, size, status);\n                this.#valList[index] = v;\n                if (status) {\n                    status.set = 'replace';\n                    const oldValue = oldVal && this.#isBackgroundFetch(oldVal)\n                        ? oldVal.__staleWhileFetching\n                        : oldVal;\n                    if (oldValue !== undefined)\n                        status.oldValue = oldValue;\n                }\n            }\n            else if (status) {\n                status.set = 'update';\n            }\n            if (this.#hasOnInsert) {\n                this.onInsert?.(v, k, v === oldVal ? 'update' : 'replace');\n            }\n        }\n        if (ttl !== 0 && !this.#ttls) {\n            this.#initializeTTLTracking();\n        }\n        if (this.#ttls) {\n            if (!noUpdateTTL) {\n                this.#setItemTTL(index, ttl, start);\n            }\n            if (status)\n                this.#statusTTL(status, index);\n        }\n        if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return this;\n    }\n    /**\n     * Evict the least recently used item, returning its value or\n     * `undefined` if cache is empty.\n     */\n    pop() {\n        try {\n            while (this.#size) {\n                const val = this.#valList[this.#head];\n                this.#evict(true);\n                if (this.#isBackgroundFetch(val)) {\n                    if (val.__staleWhileFetching) {\n                        return val.__staleWhileFetching;\n                    }\n                }\n                else if (val !== undefined) {\n                    return val;\n                }\n            }\n        }\n        finally {\n            if (this.#hasDisposeAfter && this.#disposed) {\n                const dt = this.#disposed;\n                let task;\n                while ((task = dt?.shift())) {\n                    this.#disposeAfter?.(...task);\n                }\n            }\n        }\n    }\n    #evict(free) {\n        const head = this.#head;\n        const k = this.#keyList[head];\n        const v = this.#valList[head];\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('evicted'));\n        }\n        else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n                this.#dispose?.(v, k, 'evict');\n            }\n            if (this.#hasDisposeAfter) {\n                this.#disposed?.push([v, k, 'evict']);\n            }\n        }\n        this.#removeItemSize(head);\n        // if we aren't about to use the index, then null these out\n        if (free) {\n            this.#keyList[head] = undefined;\n            this.#valList[head] = undefined;\n            this.#free.push(head);\n        }\n        if (this.#size === 1) {\n            this.#head = this.#tail = 0;\n            this.#free.length = 0;\n        }\n        else {\n            this.#head = this.#next[head];\n        }\n        this.#keyMap.delete(k);\n        this.#size--;\n        return head;\n    }\n    /**\n     * Check if a key is in the cache, without updating the recency of use.\n     * Will return false if the item is stale, even though it is technically\n     * in the cache.\n     *\n     * Check if a key is in the cache, without updating the recency of\n     * use. Age is updated if {@link LRUCache.OptionsBase.updateAgeOnHas} is set\n     * to `true` in either the options or the constructor.\n     *\n     * Will return `false` if the item is stale, even though it is technically in\n     * the cache. The difference can be determined (if it matters) by using a\n     * `status` argument, and inspecting the `has` field.\n     *\n     * Will not update item age unless\n     * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n     */\n    has(k, hasOptions = {}) {\n        const { updateAgeOnHas = this.updateAgeOnHas, status } = hasOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v) &&\n                v.__staleWhileFetching === undefined) {\n                return false;\n            }\n            if (!this.#isStale(index)) {\n                if (updateAgeOnHas) {\n                    this.#updateItemAge(index);\n                }\n                if (status) {\n                    status.has = 'hit';\n                    this.#statusTTL(status, index);\n                }\n                return true;\n            }\n            else if (status) {\n                status.has = 'stale';\n                this.#statusTTL(status, index);\n            }\n        }\n        else if (status) {\n            status.has = 'miss';\n        }\n        return false;\n    }\n    /**\n     * Like {@link LRUCache#get} but doesn't update recency or delete stale\n     * items.\n     *\n     * Returns `undefined` if the item is stale, unless\n     * {@link LRUCache.OptionsBase.allowStale} is set.\n     */\n    peek(k, peekOptions = {}) {\n        const { allowStale = this.allowStale } = peekOptions;\n        const index = this.#keyMap.get(k);\n        if (index === undefined ||\n            (!allowStale && this.#isStale(index))) {\n            return;\n        }\n        const v = this.#valList[index];\n        // either stale and allowed, or forcing a refresh of non-stale value\n        return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n    }\n    #backgroundFetch(k, index, options, context) {\n        const v = index === undefined ? undefined : this.#valList[index];\n        if (this.#isBackgroundFetch(v)) {\n            return v;\n        }\n        const ac = new AC();\n        const { signal } = options;\n        // when/if our AC signals, then stop listening to theirs.\n        signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n            signal: ac.signal,\n        });\n        const fetchOpts = {\n            signal: ac.signal,\n            options,\n            context,\n        };\n        const cb = (v, updateCache = false) => {\n            const { aborted } = ac.signal;\n            const ignoreAbort = options.ignoreFetchAbort && v !== undefined;\n            if (options.status) {\n                if (aborted && !updateCache) {\n                    options.status.fetchAborted = true;\n                    options.status.fetchError = ac.signal.reason;\n                    if (ignoreAbort)\n                        options.status.fetchAbortIgnored = true;\n                }\n                else {\n                    options.status.fetchResolved = true;\n                }\n            }\n            if (aborted && !ignoreAbort && !updateCache) {\n                return fetchFail(ac.signal.reason);\n            }\n            // either we didn't abort, and are still here, or we did, and ignored\n            const bf = p;\n            if (this.#valList[index] === p) {\n                if (v === undefined) {\n                    if (bf.__staleWhileFetching) {\n                        this.#valList[index] = bf.__staleWhileFetching;\n                    }\n                    else {\n                        this.#delete(k, 'fetch');\n                    }\n                }\n                else {\n                    if (options.status)\n                        options.status.fetchUpdated = true;\n                    this.set(k, v, fetchOpts.options);\n                }\n            }\n            return v;\n        };\n        const eb = (er) => {\n            if (options.status) {\n                options.status.fetchRejected = true;\n                options.status.fetchError = er;\n            }\n            return fetchFail(er);\n        };\n        const fetchFail = (er) => {\n            const { aborted } = ac.signal;\n            const allowStaleAborted = aborted && options.allowStaleOnFetchAbort;\n            const allowStale = allowStaleAborted || options.allowStaleOnFetchRejection;\n            const noDelete = allowStale || options.noDeleteOnFetchRejection;\n            const bf = p;\n            if (this.#valList[index] === p) {\n                // if we allow stale on fetch rejections, then we need to ensure that\n                // the stale value is not removed from the cache when the fetch fails.\n                const del = !noDelete || bf.__staleWhileFetching === undefined;\n                if (del) {\n                    this.#delete(k, 'fetch');\n                }\n                else if (!allowStaleAborted) {\n                    // still replace the *promise* with the stale value,\n                    // since we are done with the promise at this point.\n                    // leave it untouched if we're still waiting for an\n                    // aborted background fetch that hasn't yet returned.\n                    this.#valList[index] = bf.__staleWhileFetching;\n                }\n            }\n            if (allowStale) {\n                if (options.status && bf.__staleWhileFetching !== undefined) {\n                    options.status.returnedStale = true;\n                }\n                return bf.__staleWhileFetching;\n            }\n            else if (bf.__returned === bf) {\n                throw er;\n            }\n        };\n        const pcall = (res, rej) => {\n            const fmp = this.#fetchMethod?.(k, v, fetchOpts);\n            if (fmp && fmp instanceof Promise) {\n                fmp.then(v => res(v === undefined ? undefined : v), rej);\n            }\n            // ignored, we go until we finish, regardless.\n            // defer check until we are actually aborting,\n            // so fetchMethod can override.\n            ac.signal.addEventListener('abort', () => {\n                if (!options.ignoreFetchAbort ||\n                    options.allowStaleOnFetchAbort) {\n                    res(undefined);\n                    // when it eventually resolves, update the cache.\n                    if (options.allowStaleOnFetchAbort) {\n                        res = v => cb(v, true);\n                    }\n                }\n            });\n        };\n        if (options.status)\n            options.status.fetchDispatched = true;\n        const p = new Promise(pcall).then(cb, eb);\n        const bf = Object.assign(p, {\n            __abortController: ac,\n            __staleWhileFetching: v,\n            __returned: undefined,\n        });\n        if (index === undefined) {\n            // internal, don't expose status.\n            this.set(k, bf, { ...fetchOpts.options, status: undefined });\n            index = this.#keyMap.get(k);\n        }\n        else {\n            this.#valList[index] = bf;\n        }\n        return bf;\n    }\n    #isBackgroundFetch(p) {\n        if (!this.#hasFetchMethod)\n            return false;\n        const b = p;\n        return (!!b &&\n            b instanceof Promise &&\n            b.hasOwnProperty('__staleWhileFetching') &&\n            b.__abortController instanceof AC);\n    }\n    async fetch(k, fetchOptions = {}) {\n        const { \n        // get options\n        allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, \n        // set options\n        ttl = this.ttl, noDisposeOnSet = this.noDisposeOnSet, size = 0, sizeCalculation = this.sizeCalculation, noUpdateTTL = this.noUpdateTTL, \n        // fetch exclusive options\n        noDeleteOnFetchRejection = this.noDeleteOnFetchRejection, allowStaleOnFetchRejection = this.allowStaleOnFetchRejection, ignoreFetchAbort = this.ignoreFetchAbort, allowStaleOnFetchAbort = this.allowStaleOnFetchAbort, context, forceRefresh = false, status, signal, } = fetchOptions;\n        if (!this.#hasFetchMethod) {\n            if (status)\n                status.fetch = 'get';\n            return this.get(k, {\n                allowStale,\n                updateAgeOnGet,\n                noDeleteOnStaleGet,\n                status,\n            });\n        }\n        const options = {\n            allowStale,\n            updateAgeOnGet,\n            noDeleteOnStaleGet,\n            ttl,\n            noDisposeOnSet,\n            size,\n            sizeCalculation,\n            noUpdateTTL,\n            noDeleteOnFetchRejection,\n            allowStaleOnFetchRejection,\n            allowStaleOnFetchAbort,\n            ignoreFetchAbort,\n            status,\n            signal,\n        };\n        let index = this.#keyMap.get(k);\n        if (index === undefined) {\n            if (status)\n                status.fetch = 'miss';\n            const p = this.#backgroundFetch(k, index, options, context);\n            return (p.__returned = p);\n        }\n        else {\n            // in cache, maybe already fetching\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                const stale = allowStale && v.__staleWhileFetching !== undefined;\n                if (status) {\n                    status.fetch = 'inflight';\n                    if (stale)\n                        status.returnedStale = true;\n                }\n                return stale ? v.__staleWhileFetching : (v.__returned = v);\n            }\n            // if we force a refresh, that means do NOT serve the cached value,\n            // unless we are already in the process of refreshing the cache.\n            const isStale = this.#isStale(index);\n            if (!forceRefresh && !isStale) {\n                if (status)\n                    status.fetch = 'hit';\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                if (status)\n                    this.#statusTTL(status, index);\n                return v;\n            }\n            // ok, it is stale or a forced refresh, and not already fetching.\n            // refresh the cache.\n            const p = this.#backgroundFetch(k, index, options, context);\n            const hasStale = p.__staleWhileFetching !== undefined;\n            const staleVal = hasStale && allowStale;\n            if (status) {\n                status.fetch = isStale ? 'stale' : 'refresh';\n                if (staleVal && isStale)\n                    status.returnedStale = true;\n            }\n            return staleVal ? p.__staleWhileFetching : (p.__returned = p);\n        }\n    }\n    async forceFetch(k, fetchOptions = {}) {\n        const v = await this.fetch(k, fetchOptions);\n        if (v === undefined)\n            throw new Error('fetch() returned undefined');\n        return v;\n    }\n    memo(k, memoOptions = {}) {\n        const memoMethod = this.#memoMethod;\n        if (!memoMethod) {\n            throw new Error('no memoMethod provided to constructor');\n        }\n        const { context, forceRefresh, ...options } = memoOptions;\n        const v = this.get(k, options);\n        if (!forceRefresh && v !== undefined)\n            return v;\n        const vv = memoMethod(k, v, {\n            options,\n            context,\n        });\n        this.set(k, vv, options);\n        return vv;\n    }\n    /**\n     * Return a value from the cache. Will update the recency of the cache\n     * entry found.\n     *\n     * If the key is not found, get() will return `undefined`.\n     */\n    get(k, getOptions = {}) {\n        const { allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, status, } = getOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const value = this.#valList[index];\n            const fetching = this.#isBackgroundFetch(value);\n            if (status)\n                this.#statusTTL(status, index);\n            if (this.#isStale(index)) {\n                if (status)\n                    status.get = 'stale';\n                // delete only if not an in-flight background fetch\n                if (!fetching) {\n                    if (!noDeleteOnStaleGet) {\n                        this.#delete(k, 'expire');\n                    }\n                    if (status && allowStale)\n                        status.returnedStale = true;\n                    return allowStale ? value : undefined;\n                }\n                else {\n                    if (status &&\n                        allowStale &&\n                        value.__staleWhileFetching !== undefined) {\n                        status.returnedStale = true;\n                    }\n                    return allowStale ? value.__staleWhileFetching : undefined;\n                }\n            }\n            else {\n                if (status)\n                    status.get = 'hit';\n                // if we're currently fetching it, we don't actually have it yet\n                // it's not stale, which means this isn't a staleWhileRefetching.\n                // If it's not stale, and fetching, AND has a __staleWhileFetching\n                // value, then that means the user fetched with {forceRefresh:true},\n                // so it's safe to return that value.\n                if (fetching) {\n                    return value.__staleWhileFetching;\n                }\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                return value;\n            }\n        }\n        else if (status) {\n            status.get = 'miss';\n        }\n    }\n    #connect(p, n) {\n        this.#prev[n] = p;\n        this.#next[p] = n;\n    }\n    #moveToTail(index) {\n        // if tail already, nothing to do\n        // if head, move head to next[index]\n        // else\n        //   move next[prev[index]] to next[index] (head has no prev)\n        //   move prev[next[index]] to prev[index]\n        // prev[index] = tail\n        // next[tail] = index\n        // tail = index\n        if (index !== this.#tail) {\n            if (index === this.#head) {\n                this.#head = this.#next[index];\n            }\n            else {\n                this.#connect(this.#prev[index], this.#next[index]);\n            }\n            this.#connect(this.#tail, index);\n            this.#tail = index;\n        }\n    }\n    /**\n     * Deletes a key out of the cache.\n     *\n     * Returns true if the key was deleted, false otherwise.\n     */\n    delete(k) {\n        return this.#delete(k, 'delete');\n    }\n    #delete(k, reason) {\n        let deleted = false;\n        if (this.#size !== 0) {\n            const index = this.#keyMap.get(k);\n            if (index !== undefined) {\n                deleted = true;\n                if (this.#size === 1) {\n                    this.#clear(reason);\n                }\n                else {\n                    this.#removeItemSize(index);\n                    const v = this.#valList[index];\n                    if (this.#isBackgroundFetch(v)) {\n                        v.__abortController.abort(new Error('deleted'));\n                    }\n                    else if (this.#hasDispose || this.#hasDisposeAfter) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(v, k, reason);\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([v, k, reason]);\n                        }\n                    }\n                    this.#keyMap.delete(k);\n                    this.#keyList[index] = undefined;\n                    this.#valList[index] = undefined;\n                    if (index === this.#tail) {\n                        this.#tail = this.#prev[index];\n                    }\n                    else if (index === this.#head) {\n                        this.#head = this.#next[index];\n                    }\n                    else {\n                        const pi = this.#prev[index];\n                        this.#next[pi] = this.#next[index];\n                        const ni = this.#next[index];\n                        this.#prev[ni] = this.#prev[index];\n                    }\n                    this.#size--;\n                    this.#free.push(index);\n                }\n            }\n        }\n        if (this.#hasDisposeAfter && this.#disposed?.length) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Clear the cache entirely, throwing away all values.\n     */\n    clear() {\n        return this.#clear('delete');\n    }\n    #clear(reason) {\n        for (const index of this.#rindexes({ allowStale: true })) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                v.__abortController.abort(new Error('deleted'));\n            }\n            else {\n                const k = this.#keyList[index];\n                if (this.#hasDispose) {\n                    this.#dispose?.(v, k, reason);\n                }\n                if (this.#hasDisposeAfter) {\n                    this.#disposed?.push([v, k, reason]);\n                }\n            }\n        }\n        this.#keyMap.clear();\n        this.#valList.fill(undefined);\n        this.#keyList.fill(undefined);\n        if (this.#ttls && this.#starts) {\n            this.#ttls.fill(0);\n            this.#starts.fill(0);\n        }\n        if (this.#sizes) {\n            this.#sizes.fill(0);\n        }\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free.length = 0;\n        this.#calculatedSize = 0;\n        this.#size = 0;\n        if (this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","import { flatten } from 'lodash';\nimport { LRUCache } from 'lru-cache';\n\nimport { AbstractQuery, getDefaultTimeRange, KeyValue, LanguageProvider, ScopedVars, TimeRange } from '@grafana/data';\nimport { BackendSrvRequest, config } from '@grafana/runtime';\n\nimport { DEFAULT_MAX_LINES_SAMPLE, LokiDatasource } from './datasource';\nimport { abstractQueryToExpr, mapAbstractOperatorsToOp, processLabels } from './languageUtils';\nimport { getStreamSelectorsFromQuery } from './queryUtils';\nimport { buildVisualQueryFromString } from './querybuilder/parsing';\nimport {\n  extractLabelKeysFromDataFrame,\n  extractLogParserFromDataFrame,\n  extractUnwrapLabelKeysFromDataFrame,\n} from './responseUtils';\nimport { DetectedFieldsResult, LabelType, LokiQuery, LokiQueryType, ParserAndLabelKeysResult } from './types';\n\nconst NS_IN_MS = 1000000;\nconst EMPTY_SELECTOR = '{}';\nconst HIDDEN_LABELS = ['__aggregated_metric__', '__tenant_id__', '__stream_shard__'];\n\nexport default class LokiLanguageProvider extends LanguageProvider {\n  labelKeys: string[];\n  started = false;\n  startedTimeRange?: TimeRange;\n  datasource: LokiDatasource;\n\n  /**\n   *  Cache for labels of series. This is bit simplistic in the sense that it just counts responses each as a 1 and does\n   *  not account for different size of a response. If that is needed a `length` function can be added in the options.\n   *  10 as a max size is totally arbitrary right now.\n   */\n  private seriesCache = new LRUCache<string, Record<string, string[]>>({ max: 10 });\n  private labelsCache = new LRUCache<string, string[]>({ max: 10 });\n  private detectedFieldValuesCache = new LRUCache<string, string[]>({ max: 10 });\n  private labelsPromisesCache = new LRUCache<string, Promise<string[]>>({ max: 10 });\n  private detectedLabelValuesPromisesCache = new LRUCache<string, Promise<string[]>>({ max: 10 });\n\n  constructor(datasource: LokiDatasource, initialValues?: any) {\n    super();\n\n    this.datasource = datasource;\n    this.labelKeys = [];\n\n    Object.assign(this, initialValues);\n  }\n\n  request = async (\n    url: string,\n    params?: Record<string, string | number>,\n    throwError?: boolean,\n    requestOptions?: Partial<BackendSrvRequest>\n  ) => {\n    try {\n      return await this.datasource.metadataRequest(url, params, requestOptions);\n    } catch (error) {\n      if (throwError) {\n        throw error;\n      } else {\n        console.error(error);\n      }\n    }\n\n    return undefined;\n  };\n\n  /**\n   * Initialize the language provider by fetching set of labels.\n   */\n  start = (timeRange?: TimeRange) => {\n    const range = timeRange ?? this.getDefaultTimeRange();\n    const newRangeParams = this.datasource.getTimeRangeParams(range);\n    const prevRangeParams = this.startedTimeRange ? this.datasource.getTimeRangeParams(this.startedTimeRange) : null;\n    // refetch labels if either there's not already a start task or the time range has changed\n    if (\n      !this.startTask ||\n      !prevRangeParams ||\n      newRangeParams.start !== prevRangeParams.start ||\n      newRangeParams.end !== prevRangeParams.end\n    ) {\n      this.startedTimeRange = range;\n      this.startTask = this.fetchLabels({ timeRange: range }).then(() => {\n        this.started = true;\n        return [];\n      });\n    }\n\n    return this.startTask;\n  };\n\n  /**\n   * Returns the label keys that have been fetched.\n   * If labels have not been fetched yet, it will return an empty array.\n   * For updated labels (which should not happen often), use fetchLabels.\n   * @todo It is quite complicated to know when to use fetchLabels and when to use getLabelKeys.\n   * We should consider simplifying this and use caching in the same way as with seriesCache and labelsCache\n   * and just always use fetchLabels.\n   * Caching should be thought out properly, so we are not fetching this often, as labelKeys should not be changing often.\n   *\n   * @returns {string[]} An array of label keys or an empty array if labels have not been fetched.\n   */\n  getLabelKeys(): string[] {\n    return this.labelKeys;\n  }\n\n  importFromAbstractQuery(labelBasedQuery: AbstractQuery): LokiQuery {\n    return {\n      refId: labelBasedQuery.refId,\n      expr: abstractQueryToExpr(labelBasedQuery),\n      queryType: LokiQueryType.Range,\n    };\n  }\n\n  exportToAbstractQuery(query: LokiQuery): AbstractQuery {\n    if (!query.expr || query.expr.length === 0) {\n      return { refId: query.refId, labelMatchers: [] };\n    }\n    const streamSelectors = getStreamSelectorsFromQuery(query.expr);\n\n    const labelMatchers = streamSelectors.map((streamSelector) => {\n      const visualQuery = buildVisualQueryFromString(streamSelector).query;\n      const matchers = visualQuery.labels.map((label) => {\n        return {\n          name: label.label,\n          value: label.value,\n          operator: mapAbstractOperatorsToOp[label.op],\n        };\n      });\n      return matchers;\n    });\n\n    return {\n      refId: query.refId,\n      labelMatchers: flatten(labelMatchers),\n    };\n  }\n\n  /**\n   * Fetch label keys using the best applicable endpoint.\n   *\n   * This asynchronous function returns all available label keys from the data source.\n   * It returns a promise that resolves to an array of strings containing the label keys.\n   *\n   * @param options - (Optional) An object containing additional options.\n   * @param options.streamSelector - (Optional) The stream selector to filter label keys. If not provided, all label keys are fetched.\n   * @param options.timeRange - (Optional) The time range for which you want to retrieve label keys. If not provided, the default time range is used.\n   * @returns A promise containing an array of label keys.\n   * @throws An error if the fetch operation fails.\n   */\n  async fetchLabels(options?: { streamSelector?: string; timeRange?: TimeRange }): Promise<string[]> {\n    // We'll default to use `/labels`. If the flag is disabled, and there's a streamSelector, we'll use the series endpoint.\n    if (config.featureToggles.lokiLabelNamesQueryApi || !options?.streamSelector) {\n      return this.fetchLabelsByLabelsEndpoint(options);\n    } else {\n      const data = await this.fetchSeriesLabels(options.streamSelector, { timeRange: options.timeRange });\n      return Object.keys(data ?? {});\n    }\n  }\n\n  /**\n   * Fetch all label keys\n   * This asynchronous function returns all available label keys from the data source.\n   * It returns a promise that resolves to an array of strings containing the label keys.\n   *\n   * @param options - (Optional) An object containing additional options - currently only time range.\n   * @param options.timeRange - (Optional) The time range for which you want to retrieve label keys. If not provided, the default time range is used.\n   * @returns A promise containing an array of label keys.\n   * @throws An error if the fetch operation fails.\n   */\n  private async fetchLabelsByLabelsEndpoint(options?: {\n    streamSelector?: string;\n    timeRange?: TimeRange;\n  }): Promise<string[]> {\n    const url = 'labels';\n    const range = options?.timeRange ?? this.getDefaultTimeRange();\n    const { start, end } = this.datasource.getTimeRangeParams(range);\n    const params: Record<string, string | number> = { start, end };\n    if (options?.streamSelector && options?.streamSelector !== EMPTY_SELECTOR) {\n      params['query'] = options.streamSelector;\n    }\n    const res = await this.request(url, params);\n    if (Array.isArray(res)) {\n      const labels = Array.from(new Set(res))\n        .slice()\n        .sort()\n        .filter((label: string) => HIDDEN_LABELS.includes(label) === false);\n      this.labelKeys = labels;\n      return this.labelKeys;\n    }\n\n    return [];\n  }\n\n  /**\n   * Fetch series labels for a selector\n   *\n   * This method fetches labels for a given stream selector, such as `{job=\"grafana\"}`.\n   * It returns a promise that resolves to a record mapping label names to their corresponding values.\n   *\n   * @param streamSelector - The stream selector for which you want to retrieve labels.\n   * @param options - (Optional) An object containing additional options - currently only time range.\n   * @param options.timeRange - (Optional) The time range for which you want to retrieve label keys. If not provided, the default time range is used.\n   * @returns A promise containing a record of label names and their values.\n   * @throws An error if the fetch operation fails.\n   */\n  fetchSeriesLabels = async (\n    streamSelector: string,\n    options?: { timeRange?: TimeRange }\n  ): Promise<Record<string, string[]>> => {\n    const interpolatedMatch = this.datasource.interpolateString(streamSelector);\n    const url = 'series';\n    const range = options?.timeRange ?? this.getDefaultTimeRange();\n    const { start, end } = this.datasource.getTimeRangeParams(range);\n\n    const cacheKey = this.generateCacheKey(url, start, end, interpolatedMatch);\n    let value = this.seriesCache.get(cacheKey);\n    if (!value) {\n      const params = { 'match[]': interpolatedMatch, start, end };\n      const data = await this.request(url, params);\n      if (!Array.isArray(data)) {\n        return {};\n      }\n      const { values } = processLabels(data);\n      value = values;\n      this.seriesCache.set(cacheKey, value);\n    }\n    return value;\n  };\n\n  /**\n   * Fetch series for a selector. Use this for raw results. Use fetchSeriesLabels() to get labels.\n   * @param match\n   * @param streamSelector - The stream selector for which you want to retrieve labels.\n   * @param options - (Optional) An object containing additional options.\n   * @param options.timeRange - (Optional) The time range for which you want to retrieve label keys. If not provided, the default time range is used.\n   * @returns A promise containing array with records of label names and their value.\n   */\n  fetchSeries = async (match: string, options?: { timeRange?: TimeRange }): Promise<Array<Record<string, string>>> => {\n    const url = 'series';\n    const range = options?.timeRange ?? this.getDefaultTimeRange();\n    const { start, end } = this.datasource.getTimeRangeParams(range);\n    const params = { 'match[]': match, start, end };\n    return await this.request(url, params);\n  };\n\n  // Cache key is a bit different here. We round up to a minute the intervals.\n  // The rounding may seem strange but makes relative intervals like now-1h less prone to need separate request every\n  // millisecond while still actually getting all the keys for the correct interval. This still can create problems\n  // when user does not the newest values for a minute if already cached.\n  private generateCacheKey(url: string, start: number, end: number, param: string): string {\n    return [url, this.roundTime(start), this.roundTime(end), param].join();\n  }\n\n  // Round nanoseconds epoch to nearest 5 minute interval\n  private roundTime(nanoseconds: number): number {\n    return nanoseconds ? Math.floor(nanoseconds / NS_IN_MS / 1000 / 60 / 5) : 0;\n  }\n\n  async fetchDetectedFields(\n    queryOptions: {\n      expr: string;\n      timeRange?: TimeRange;\n      limit?: number;\n      scopedVars?: ScopedVars;\n    },\n    requestOptions?: Partial<BackendSrvRequest>\n  ): Promise<DetectedFieldsResult | Error> {\n    const interpolatedExpr =\n      queryOptions.expr && queryOptions.expr !== EMPTY_SELECTOR\n        ? this.datasource.interpolateString(queryOptions.expr, queryOptions.scopedVars)\n        : undefined;\n\n    if (!interpolatedExpr) {\n      throw new Error('fetchDetectedFields requires query expression');\n    }\n\n    const url = `detected_fields`;\n    const range = queryOptions?.timeRange ?? this.getDefaultTimeRange();\n    const rangeParams = this.datasource.getTimeRangeParams(range);\n    const { start, end } = rangeParams;\n    const params: KeyValue<string | number> = { start, end, limit: queryOptions?.limit ?? 1000 };\n    params.query = interpolatedExpr;\n\n    return new Promise(async (resolve, reject) => {\n      try {\n        const data = await this.request(url, params, true, requestOptions);\n        resolve(data);\n      } catch (error) {\n        console.error('error', error);\n        reject(error);\n      }\n    });\n  }\n\n  async fetchDetectedFieldValues(\n    labelName: string,\n    queryOptions?: {\n      expr?: string;\n      timeRange?: TimeRange;\n      limit?: number;\n      scopedVars?: ScopedVars;\n      throwError?: boolean;\n    },\n    requestOptions?: Partial<BackendSrvRequest>\n  ): Promise<string[] | Error> {\n    // This function was named poorly, it's not detected label values, it's detected field values! :facepalm\n    return this.fetchDetectedLabelValues(labelName, queryOptions, requestOptions);\n  }\n\n  /**\n   * @deprecated: use fetchDetectedFieldValues instead\n   */\n  async fetchDetectedLabelValues(\n    labelName: string,\n    queryOptions?: {\n      expr?: string;\n      timeRange?: TimeRange;\n      limit?: number;\n      scopedVars?: ScopedVars;\n      throwError?: boolean;\n    },\n    requestOptions?: Partial<BackendSrvRequest>\n  ): Promise<string[] | Error> {\n    const label = encodeURIComponent(this.datasource.interpolateString(labelName));\n\n    const interpolatedExpr =\n      queryOptions?.expr && queryOptions.expr !== EMPTY_SELECTOR\n        ? this.datasource.interpolateString(queryOptions.expr, queryOptions.scopedVars)\n        : undefined;\n\n    const url = `detected_field/${label}/values`;\n    const range = queryOptions?.timeRange ?? this.getDefaultTimeRange();\n    const rangeParams = this.datasource.getTimeRangeParams(range);\n    const { start, end } = rangeParams;\n    const params: KeyValue<string | number> = { start, end, limit: queryOptions?.limit ?? 1000 };\n    let paramCacheKey = label;\n\n    if (interpolatedExpr) {\n      params.query = interpolatedExpr;\n      paramCacheKey += interpolatedExpr;\n    }\n\n    const cacheKey = this.generateCacheKey(url, start, end, paramCacheKey);\n\n    // Values in cache, return\n    const labelValues = this.detectedFieldValuesCache.get(cacheKey);\n    if (labelValues) {\n      return labelValues;\n    }\n\n    // Promise in cache, return\n    let labelValuesPromise = this.detectedLabelValuesPromisesCache.get(cacheKey);\n    if (labelValuesPromise) {\n      return labelValuesPromise;\n    }\n\n    labelValuesPromise = new Promise(async (resolve, reject) => {\n      try {\n        const data = await this.request(url, params, queryOptions?.throwError, requestOptions);\n        if (Array.isArray(data)) {\n          const labelValues = data.slice().sort();\n          this.detectedFieldValuesCache.set(cacheKey, labelValues);\n          this.detectedLabelValuesPromisesCache.delete(cacheKey);\n          resolve(labelValues);\n        }\n      } catch (error) {\n        if (queryOptions?.throwError) {\n          reject(error);\n        } else {\n          console.error(error);\n          resolve([]);\n        }\n      }\n    });\n    this.detectedLabelValuesPromisesCache.set(cacheKey, labelValuesPromise);\n\n    return labelValuesPromise;\n  }\n\n  /**\n   * Fetch label values\n   *\n   * This asynchronous function fetches values associated with a specified label name.\n   * It returns a promise that resolves to an array of strings containing the label values.\n   *\n   * @param labelName - The name of the label for which you want to retrieve values.\n   * @param options - (Optional) An object containing additional options.\n   * @param options.streamSelector - (Optional) The stream selector to filter label values. If not provided, all label values are fetched.\n   * @param options.timeRange - (Optional) The time range for which you want to retrieve label values. If not provided, the default time range is used.\n   * @returns A promise containing an array of label values.\n   * @throws An error if the fetch operation fails.\n   */\n  async fetchLabelValues(\n    labelName: string,\n    options?: { streamSelector?: string; timeRange?: TimeRange }\n  ): Promise<string[]> {\n    const label = encodeURIComponent(this.datasource.interpolateString(labelName));\n    // Loki doesn't allow empty streamSelector {}, so we should not send it.\n    const streamParam =\n      options?.streamSelector && options.streamSelector !== EMPTY_SELECTOR\n        ? this.datasource.interpolateString(options.streamSelector)\n        : undefined;\n\n    const url = `label/${label}/values`;\n    const range = options?.timeRange ?? this.getDefaultTimeRange();\n    const rangeParams = this.datasource.getTimeRangeParams(range);\n    const { start, end } = rangeParams;\n    const params: KeyValue<string | number> = { start, end };\n    let paramCacheKey = label;\n\n    if (streamParam) {\n      params.query = streamParam;\n      paramCacheKey += streamParam;\n    }\n\n    const cacheKey = this.generateCacheKey(url, start, end, paramCacheKey);\n\n    // Values in cache, return\n    const labelValues = this.labelsCache.get(cacheKey);\n    if (labelValues) {\n      return labelValues;\n    }\n\n    // Promise in cache, return\n    let labelValuesPromise = this.labelsPromisesCache.get(cacheKey);\n    if (labelValuesPromise) {\n      return labelValuesPromise;\n    }\n\n    labelValuesPromise = new Promise(async (resolve) => {\n      try {\n        const data = await this.request(url, params);\n        if (Array.isArray(data)) {\n          const labelValues = data.slice().sort();\n          this.labelsCache.set(cacheKey, labelValues);\n          this.labelsPromisesCache.delete(cacheKey);\n          resolve(labelValues);\n        }\n      } catch (error) {\n        console.error(error);\n        resolve([]);\n      }\n    });\n    this.labelsPromisesCache.set(cacheKey, labelValuesPromise);\n    return labelValuesPromise;\n  }\n\n  /**\n   * Get parser and label keys for a selector\n   *\n   * This asynchronous function is used to fetch parsers and label keys for a selected log stream based on sampled lines.\n   * It returns a promise that resolves to an object with the following properties:\n   *\n   * - `extractedLabelKeys`: An array of available label keys associated with the log stream.\n   * - `hasJSON`: A boolean indicating whether JSON parsing is available for the stream.\n   * - `hasLogfmt`: A boolean indicating whether Logfmt parsing is available for the stream.\n   * - `hasPack`: A boolean indicating whether Pack parsing is available for the stream.\n   * - `unwrapLabelKeys`: An array of label keys that can be used for unwrapping log data.\n   *\n   * @param streamSelector - The selector for the log stream you want to analyze.\n   * @param options - (Optional) An object containing additional options.\n   * @param options.maxLines - (Optional) The number of log lines requested when determining parsers and label keys.\n   * @param options.timeRange - (Optional) The time range for which you want to retrieve label keys. If not provided, the default time range is used.\n   * Smaller maxLines is recommended for improved query performance. The default count is 10.\n   * @returns A promise containing an object with parser and label key information.\n   * @throws An error if the fetch operation fails.\n   */\n  async getParserAndLabelKeys(\n    streamSelector: string,\n    options?: { maxLines?: number; timeRange?: TimeRange }\n  ): Promise<ParserAndLabelKeysResult> {\n    const empty = {\n      extractedLabelKeys: [],\n      structuredMetadataKeys: [],\n      unwrapLabelKeys: [],\n      hasJSON: false,\n      hasLogfmt: false,\n      hasPack: false,\n    };\n\n    const series = await this.datasource.getDataSamples(\n      {\n        expr: streamSelector,\n        refId: 'data-samples',\n        maxLines: options?.maxLines || DEFAULT_MAX_LINES_SAMPLE,\n      },\n      options?.timeRange ?? this.getDefaultTimeRange()\n    );\n\n    if (!series.length) {\n      return empty;\n    }\n\n    const { hasLogfmt, hasJSON, hasPack } = extractLogParserFromDataFrame(series[0]);\n\n    return {\n      extractedLabelKeys: [\n        ...extractLabelKeysFromDataFrame(series[0], LabelType.Indexed),\n        ...extractLabelKeysFromDataFrame(series[0], LabelType.Parsed),\n      ],\n      structuredMetadataKeys: extractLabelKeysFromDataFrame(series[0], LabelType.StructuredMetadata),\n      unwrapLabelKeys: extractUnwrapLabelKeysFromDataFrame(series[0]),\n      hasJSON,\n      hasPack,\n      hasLogfmt,\n    };\n  }\n\n  /**\n   * Get the default time range\n   *\n   * @returns {TimeRange} The default time range\n   */\n  private getDefaultTimeRange(): TimeRange {\n    return getDefaultTimeRange();\n  }\n}\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","export var dateTimestampProvider = {\n    now: function () {\n        return (dateTimestampProvider.delegate || Date).now();\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=dateTimestampProvider.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nvar ReplaySubject = (function (_super) {\n    __extends(ReplaySubject, _super);\n    function ReplaySubject(_bufferSize, _windowTime, _timestampProvider) {\n        if (_bufferSize === void 0) { _bufferSize = Infinity; }\n        if (_windowTime === void 0) { _windowTime = Infinity; }\n        if (_timestampProvider === void 0) { _timestampProvider = dateTimestampProvider; }\n        var _this = _super.call(this) || this;\n        _this._bufferSize = _bufferSize;\n        _this._windowTime = _windowTime;\n        _this._timestampProvider = _timestampProvider;\n        _this._buffer = [];\n        _this._infiniteTimeWindow = true;\n        _this._infiniteTimeWindow = _windowTime === Infinity;\n        _this._bufferSize = Math.max(1, _bufferSize);\n        _this._windowTime = Math.max(1, _windowTime);\n        return _this;\n    }\n    ReplaySubject.prototype.next = function (value) {\n        var _a = this, isStopped = _a.isStopped, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow, _timestampProvider = _a._timestampProvider, _windowTime = _a._windowTime;\n        if (!isStopped) {\n            _buffer.push(value);\n            !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n        }\n        this._trimBuffer();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._trimBuffer();\n        var subscription = this._innerSubscribe(subscriber);\n        var _a = this, _infiniteTimeWindow = _a._infiniteTimeWindow, _buffer = _a._buffer;\n        var copy = _buffer.slice();\n        for (var i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n            subscriber.next(copy[i]);\n        }\n        this._checkFinalizedStatuses(subscriber);\n        return subscription;\n    };\n    ReplaySubject.prototype._trimBuffer = function () {\n        var _a = this, _bufferSize = _a._bufferSize, _timestampProvider = _a._timestampProvider, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow;\n        var adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n        _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n        if (!_infiniteTimeWindow) {\n            var now = _timestampProvider.now();\n            var last = 0;\n            for (var i = 1; i < _buffer.length && _buffer[i] <= now; i += 2) {\n                last = i;\n            }\n            last && _buffer.splice(0, last + 1);\n        }\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\n//# sourceMappingURL=ReplaySubject.js.map","import { __assign, __extends } from \"tslib\";\nimport { Subject, AnonymousSubject } from '../../Subject';\nimport { Subscriber } from '../../Subscriber';\nimport { Observable } from '../../Observable';\nimport { Subscription } from '../../Subscription';\nimport { ReplaySubject } from '../../ReplaySubject';\nvar DEFAULT_WEBSOCKET_CONFIG = {\n    url: '',\n    deserializer: function (e) { return JSON.parse(e.data); },\n    serializer: function (value) { return JSON.stringify(value); },\n};\nvar WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT = 'WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }';\nvar WebSocketSubject = (function (_super) {\n    __extends(WebSocketSubject, _super);\n    function WebSocketSubject(urlConfigOrSource, destination) {\n        var _this = _super.call(this) || this;\n        _this._socket = null;\n        if (urlConfigOrSource instanceof Observable) {\n            _this.destination = destination;\n            _this.source = urlConfigOrSource;\n        }\n        else {\n            var config = (_this._config = __assign({}, DEFAULT_WEBSOCKET_CONFIG));\n            _this._output = new Subject();\n            if (typeof urlConfigOrSource === 'string') {\n                config.url = urlConfigOrSource;\n            }\n            else {\n                for (var key in urlConfigOrSource) {\n                    if (urlConfigOrSource.hasOwnProperty(key)) {\n                        config[key] = urlConfigOrSource[key];\n                    }\n                }\n            }\n            if (!config.WebSocketCtor && WebSocket) {\n                config.WebSocketCtor = WebSocket;\n            }\n            else if (!config.WebSocketCtor) {\n                throw new Error('no WebSocket constructor can be found');\n            }\n            _this.destination = new ReplaySubject();\n        }\n        return _this;\n    }\n    WebSocketSubject.prototype.lift = function (operator) {\n        var sock = new WebSocketSubject(this._config, this.destination);\n        sock.operator = operator;\n        sock.source = this;\n        return sock;\n    };\n    WebSocketSubject.prototype._resetState = function () {\n        this._socket = null;\n        if (!this.source) {\n            this.destination = new ReplaySubject();\n        }\n        this._output = new Subject();\n    };\n    WebSocketSubject.prototype.multiplex = function (subMsg, unsubMsg, messageFilter) {\n        var self = this;\n        return new Observable(function (observer) {\n            try {\n                self.next(subMsg());\n            }\n            catch (err) {\n                observer.error(err);\n            }\n            var subscription = self.subscribe({\n                next: function (x) {\n                    try {\n                        if (messageFilter(x)) {\n                            observer.next(x);\n                        }\n                    }\n                    catch (err) {\n                        observer.error(err);\n                    }\n                },\n                error: function (err) { return observer.error(err); },\n                complete: function () { return observer.complete(); },\n            });\n            return function () {\n                try {\n                    self.next(unsubMsg());\n                }\n                catch (err) {\n                    observer.error(err);\n                }\n                subscription.unsubscribe();\n            };\n        });\n    };\n    WebSocketSubject.prototype._connectSocket = function () {\n        var _this = this;\n        var _a = this._config, WebSocketCtor = _a.WebSocketCtor, protocol = _a.protocol, url = _a.url, binaryType = _a.binaryType;\n        var observer = this._output;\n        var socket = null;\n        try {\n            socket = protocol ? new WebSocketCtor(url, protocol) : new WebSocketCtor(url);\n            this._socket = socket;\n            if (binaryType) {\n                this._socket.binaryType = binaryType;\n            }\n        }\n        catch (e) {\n            observer.error(e);\n            return;\n        }\n        var subscription = new Subscription(function () {\n            _this._socket = null;\n            if (socket && socket.readyState === 1) {\n                socket.close();\n            }\n        });\n        socket.onopen = function (evt) {\n            var _socket = _this._socket;\n            if (!_socket) {\n                socket.close();\n                _this._resetState();\n                return;\n            }\n            var openObserver = _this._config.openObserver;\n            if (openObserver) {\n                openObserver.next(evt);\n            }\n            var queue = _this.destination;\n            _this.destination = Subscriber.create(function (x) {\n                if (socket.readyState === 1) {\n                    try {\n                        var serializer = _this._config.serializer;\n                        socket.send(serializer(x));\n                    }\n                    catch (e) {\n                        _this.destination.error(e);\n                    }\n                }\n            }, function (err) {\n                var closingObserver = _this._config.closingObserver;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                if (err && err.code) {\n                    socket.close(err.code, err.reason);\n                }\n                else {\n                    observer.error(new TypeError(WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT));\n                }\n                _this._resetState();\n            }, function () {\n                var closingObserver = _this._config.closingObserver;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                socket.close();\n                _this._resetState();\n            });\n            if (queue && queue instanceof ReplaySubject) {\n                subscription.add(queue.subscribe(_this.destination));\n            }\n        };\n        socket.onerror = function (e) {\n            _this._resetState();\n            observer.error(e);\n        };\n        socket.onclose = function (e) {\n            if (socket === _this._socket) {\n                _this._resetState();\n            }\n            var closeObserver = _this._config.closeObserver;\n            if (closeObserver) {\n                closeObserver.next(e);\n            }\n            if (e.wasClean) {\n                observer.complete();\n            }\n            else {\n                observer.error(e);\n            }\n        };\n        socket.onmessage = function (e) {\n            try {\n                var deserializer = _this._config.deserializer;\n                observer.next(deserializer(e));\n            }\n            catch (err) {\n                observer.error(err);\n            }\n        };\n    };\n    WebSocketSubject.prototype._subscribe = function (subscriber) {\n        var _this = this;\n        var source = this.source;\n        if (source) {\n            return source.subscribe(subscriber);\n        }\n        if (!this._socket) {\n            this._connectSocket();\n        }\n        this._output.subscribe(subscriber);\n        subscriber.add(function () {\n            var _socket = _this._socket;\n            if (_this._output.observers.length === 0) {\n                if (_socket && (_socket.readyState === 1 || _socket.readyState === 0)) {\n                    _socket.close();\n                }\n                _this._resetState();\n            }\n        });\n        return subscriber;\n    };\n    WebSocketSubject.prototype.unsubscribe = function () {\n        var _socket = this._socket;\n        if (_socket && (_socket.readyState === 1 || _socket.readyState === 0)) {\n            _socket.close();\n        }\n        this._resetState();\n        _super.prototype.unsubscribe.call(this);\n    };\n    return WebSocketSubject;\n}(AnonymousSubject));\nexport { WebSocketSubject };\n//# sourceMappingURL=WebSocketSubject.js.map","function f(s, x, y, z) {\n    switch (s) {\n        case 0:\n            return (x & y) ^ (~x & z);\n        case 1:\n            return x ^ y ^ z;\n        case 2:\n            return (x & y) ^ (x & z) ^ (y & z);\n        case 3:\n            return x ^ y ^ z;\n    }\n}\nfunction ROTL(x, n) {\n    return (x << n) | (x >>> (32 - n));\n}\nfunction sha1(bytes) {\n    const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n    const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n    const newBytes = new Uint8Array(bytes.length + 1);\n    newBytes.set(bytes);\n    newBytes[bytes.length] = 0x80;\n    bytes = newBytes;\n    const l = bytes.length / 4 + 2;\n    const N = Math.ceil(l / 16);\n    const M = new Array(N);\n    for (let i = 0; i < N; ++i) {\n        const arr = new Uint32Array(16);\n        for (let j = 0; j < 16; ++j) {\n            arr[j] =\n                (bytes[i * 64 + j * 4] << 24) |\n                    (bytes[i * 64 + j * 4 + 1] << 16) |\n                    (bytes[i * 64 + j * 4 + 2] << 8) |\n                    bytes[i * 64 + j * 4 + 3];\n        }\n        M[i] = arr;\n    }\n    M[N - 1][14] = ((bytes.length - 1) * 8) / Math.pow(2, 32);\n    M[N - 1][14] = Math.floor(M[N - 1][14]);\n    M[N - 1][15] = ((bytes.length - 1) * 8) & 0xffffffff;\n    for (let i = 0; i < N; ++i) {\n        const W = new Uint32Array(80);\n        for (let t = 0; t < 16; ++t) {\n            W[t] = M[i][t];\n        }\n        for (let t = 16; t < 80; ++t) {\n            W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n        }\n        let a = H[0];\n        let b = H[1];\n        let c = H[2];\n        let d = H[3];\n        let e = H[4];\n        for (let t = 0; t < 80; ++t) {\n            const s = Math.floor(t / 20);\n            const T = (ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t]) >>> 0;\n            e = d;\n            d = c;\n            c = ROTL(b, 30) >>> 0;\n            b = a;\n            a = T;\n        }\n        H[0] = (H[0] + a) >>> 0;\n        H[1] = (H[1] + b) >>> 0;\n        H[2] = (H[2] + c) >>> 0;\n        H[3] = (H[3] + d) >>> 0;\n        H[4] = (H[4] + e) >>> 0;\n    }\n    return Uint8Array.of(H[0] >> 24, H[0] >> 16, H[0] >> 8, H[0], H[1] >> 24, H[1] >> 16, H[1] >> 8, H[1], H[2] >> 24, H[2] >> 16, H[2] >> 8, H[2], H[3] >> 24, H[3] >> 16, H[3] >> 8, H[3], H[4] >> 24, H[4] >> 16, H[4] >> 8, H[4]);\n}\nexport default sha1;\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n","import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n","import validate from './validate.js';\nfunction parse(uuid) {\n    if (!validate(uuid)) {\n        throw TypeError('Invalid UUID');\n    }\n    let v;\n    return Uint8Array.of((v = parseInt(uuid.slice(0, 8), 16)) >>> 24, (v >>> 16) & 0xff, (v >>> 8) & 0xff, v & 0xff, (v = parseInt(uuid.slice(9, 13), 16)) >>> 8, v & 0xff, (v = parseInt(uuid.slice(14, 18), 16)) >>> 8, v & 0xff, (v = parseInt(uuid.slice(19, 23), 16)) >>> 8, v & 0xff, ((v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000) & 0xff, (v / 0x100000000) & 0xff, (v >>> 24) & 0xff, (v >>> 16) & 0xff, (v >>> 8) & 0xff, v & 0xff);\n}\nexport default parse;\n","import parse from './parse.js';\nimport { unsafeStringify } from './stringify.js';\nexport function stringToBytes(str) {\n    str = unescape(encodeURIComponent(str));\n    const bytes = new Uint8Array(str.length);\n    for (let i = 0; i < str.length; ++i) {\n        bytes[i] = str.charCodeAt(i);\n    }\n    return bytes;\n}\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(version, hash, value, namespace, buf, offset) {\n    const valueBytes = typeof value === 'string' ? stringToBytes(value) : value;\n    const namespaceBytes = typeof namespace === 'string' ? parse(namespace) : namespace;\n    if (typeof namespace === 'string') {\n        namespace = parse(namespace);\n    }\n    if (namespace?.length !== 16) {\n        throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    }\n    let bytes = new Uint8Array(16 + valueBytes.length);\n    bytes.set(namespaceBytes);\n    bytes.set(valueBytes, namespaceBytes.length);\n    bytes = hash(bytes);\n    bytes[6] = (bytes[6] & 0x0f) | version;\n    bytes[8] = (bytes[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = bytes[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(bytes);\n}\n","import sha1 from './sha1.js';\nimport v35, { DNS, URL } from './v35.js';\nexport { DNS, URL } from './v35.js';\nfunction v5(value, namespace, buf, offset) {\n    return v35(0x50, sha1, value, namespace, buf, offset);\n}\nv5.DNS = DNS;\nv5.URL = URL;\nexport default v5;\n","import { v5 as uuidv5 } from 'uuid';\n\nimport { MutableDataFrame } from '@grafana/data';\n\nimport { LokiStreamResult, LokiTailResponse } from './types';\n\nconst UUID_NAMESPACE = '6ec946da-0f49-47a8-983a-1d76d17e7c92';\n\n/**\n * Transform LokiResponse data and appends it to MutableDataFrame. Used for streaming where the dataFrame can be\n * a CircularDataFrame creating a fixed size rolling buffer.\n * TODO: Probably could be unified with the logStreamToDataFrame function.\n * @param response\n * @param data Needs to have ts, line, labels, id as fields\n */\nexport function appendResponseToBufferedData(response: LokiTailResponse, data: MutableDataFrame) {\n  // Should we do anything with: response.dropped_entries?\n\n  const streams: LokiStreamResult[] = response.streams;\n  if (!streams || !streams.length) {\n    return;\n  }\n\n  const tsField = data.fields[0];\n  const lineField = data.fields[1];\n  const idField = data.fields[2];\n\n  // We are comparing used ids only within the received stream. This could be a problem if the same line + labels + nanosecond timestamp came in 2 separate batches.\n  // As this is very unlikely, and the result would only affect live-tailing css animation we have decided to not compare all received uids from data param as this would slow down processing.\n  const usedUids: Record<string, number> = {};\n\n  for (const stream of streams) {\n    // Find unique labels\n    const allLabelsString = Object.entries(stream.stream)\n      .map(([key, val]) => `${key}=\"${val}\"`)\n      .sort()\n      .join('');\n\n    // Add each line\n    for (const [ts, line] of stream.values) {\n      tsField.values.push(new Date(parseInt(ts.slice(0, -6), 10)).toISOString());\n      lineField.values.push(line);\n      idField.values.push(createUid(ts, allLabelsString, line, usedUids, data.refId));\n    }\n  }\n}\n\nfunction createUid(\n  ts: string,\n  labelsString: string,\n  line: string,\n  usedUids: Record<string, number>,\n  refId?: string\n): string {\n  // Generate id as hashed nanosecond timestamp, labels and line (this does not have to be unique)\n  let id = uuidv5(`${ts}_${labelsString}_${line}`, UUID_NAMESPACE);\n\n  // Check if generated id is unique\n  // If not and we've already used it, append its count after it\n  if (id in usedUids) {\n    // Increase the count\n    const newCount = usedUids[id] + 1;\n    usedUids[id] = newCount;\n    // Append count to generated id to make it unique\n    id = `${id}_${newCount}`;\n  } else {\n    // If id is unique and wasn't used, add it to usedUids and start count at 0\n    usedUids[id] = 0;\n  }\n  // Return unique id\n  if (refId) {\n    return `${refId}_${id}`;\n  }\n  return id;\n}\n","import { Observable, throwError, timer } from 'rxjs';\nimport { finalize, map, retryWhen, mergeMap } from 'rxjs/operators';\nimport { webSocket } from 'rxjs/webSocket';\n\nimport { DataFrame, FieldType, KeyValue, CircularDataFrame } from '@grafana/data';\n\nimport { appendResponseToBufferedData } from './liveStreamsResultTransformer';\nimport { LokiTailResponse } from './types';\n\n/**\n * Maps directly to a query in the UI (refId is key)\n */\nexport interface LokiLiveTarget {\n  query: string;\n  url: string;\n  refId: string;\n  size: number;\n}\n\n/**\n * Cache of websocket streams that can be returned as observable. In case there already is a stream for particular\n * target it is returned and on subscription returns the latest dataFrame.\n */\nexport class LiveStreams {\n  private streams: KeyValue<Observable<DataFrame[]>> = {};\n\n  getStream(target: LokiLiveTarget, retryInterval = 5000): Observable<DataFrame[]> {\n    let stream = this.streams[target.url];\n\n    if (stream) {\n      return stream;\n    }\n\n    const data = new CircularDataFrame({ capacity: target.size });\n    data.addField({ name: 'Time', type: FieldType.time, config: {} });\n    data.addField({ name: 'Line', type: FieldType.string });\n    data.addField({ name: 'id', type: FieldType.string });\n    data.meta = { ...data.meta, preferredVisualisationType: 'logs' };\n    data.refId = target.refId;\n\n    stream = webSocket<LokiTailResponse>(target.url).pipe(\n      map((response: LokiTailResponse) => {\n        appendResponseToBufferedData(response, data);\n        return [data];\n      }),\n      retryWhen((attempts) =>\n        attempts.pipe(\n          mergeMap((error, i) => {\n            const retryAttempt = i + 1;\n            // Code 1006 is used to indicate that a connection was closed abnormally.\n            // Added hard limit of 30 on number of retries.\n            // If connection was closed abnormally, and we wish to retry, otherwise throw error.\n            if (error.code === 1006 && retryAttempt < 30) {\n              if (retryAttempt > 10) {\n                // If more than 10 times retried, consol.warn, but keep reconnecting\n                console.warn(\n                  `Websocket connection is being disrupted. We keep reconnecting but consider starting new live tailing again. Error: ${error.reason}`\n                );\n              }\n              // Retry every 5s\n              return timer(retryInterval);\n            }\n            return throwError(error);\n          })\n        )\n      ),\n      finalize(() => {\n        delete this.streams[target.url];\n      })\n    );\n    this.streams[target.url] = stream;\n\n    return stream;\n  }\n}\n","import { WebSocketSubject } from './WebSocketSubject';\nexport function webSocket(urlConfigOrSource) {\n    return new WebSocketSubject(urlConfigOrSource);\n}\n//# sourceMappingURL=webSocket.js.map","import { useEffect } from 'react';\nimport useAsyncFn from './useAsyncFn';\nexport default function useAsync(fn, deps) {\n    if (deps === void 0) { deps = []; }\n    var _a = useAsyncFn(fn, deps, {\n        loading: true,\n    }), state = _a[0], callback = _a[1];\n    useEffect(function () {\n        callback();\n    }, [callback]);\n    return state;\n}\n","import { __assign } from \"tslib\";\nimport { useCallback, useRef, useState } from 'react';\nimport useMountedState from './useMountedState';\nexport default function useAsyncFn(fn, deps, initialState) {\n    if (deps === void 0) { deps = []; }\n    if (initialState === void 0) { initialState = { loading: false }; }\n    var lastCallId = useRef(0);\n    var isMounted = useMountedState();\n    var _a = useState(initialState), state = _a[0], set = _a[1];\n    var callback = useCallback(function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var callId = ++lastCallId.current;\n        if (!state.loading) {\n            set(function (prevState) { return (__assign(__assign({}, prevState), { loading: true })); });\n        }\n        return fn.apply(void 0, args).then(function (value) {\n            isMounted() && callId === lastCallId.current && set({ value: value, loading: false });\n            return value;\n        }, function (error) {\n            isMounted() && callId === lastCallId.current && set({ error: error, loading: false });\n            return error;\n        });\n    }, deps);\n    return [state, callback];\n}\n","import { css } from '@emotion/css';\nimport { useRef, useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAsync } from 'react-use';\n\nimport { dateTime, GrafanaTheme2, LogRowModel, renderMarkdown, SelectableValue } from '@grafana/data';\nimport { RawQuery } from '@grafana/plugin-ui';\nimport { reportInteraction } from '@grafana/runtime';\nimport {\n  Alert,\n  Button,\n  Collapse,\n  Icon,\n  InlineField,\n  InlineFieldRow,\n  InlineSwitch,\n  Label,\n  MultiSelect,\n  RenderUserContentAsHTML,\n  Spinner,\n  Tooltip,\n  useStyles2,\n} from '@grafana/ui';\n\nimport {\n  LogContextProvider,\n  LOKI_LOG_CONTEXT_PRESERVED_LABELS,\n  PreservedLabels,\n  SHOULD_INCLUDE_PIPELINE_OPERATIONS,\n} from '../LogContextProvider';\nimport { escapeLabelValueInSelector } from '../languageUtils';\nimport { lokiGrammar } from '../syntax';\nimport { ContextFilter, LokiQuery } from '../types';\n\nexport interface LokiContextUiProps {\n  logContextProvider: LogContextProvider;\n  row: LogRowModel;\n  updateFilter: (value: ContextFilter[]) => void;\n  onClose: () => void;\n  origQuery?: LokiQuery;\n  runContextQuery?: () => void;\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    labels: css({\n      display: 'flex',\n      gap: theme.spacing(0.5),\n    }),\n    wrapper: css({\n      display: 'flex',\n      flexDirection: 'column',\n      flex: 1,\n      gap: theme.spacing(0.5),\n      position: 'relative',\n    }),\n    textWrapper: css({\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    hidden: css({\n      visibility: 'hidden',\n    }),\n    label: css({\n      maxWidth: '100%',\n      '&:first-of-type': {\n        marginBottom: theme.spacing(2),\n      },\n      '&:not(:first-of-type)': {\n        margin: theme.spacing(2, 0),\n      },\n    }),\n    rawQueryContainer: css({\n      textAlign: 'start',\n      lineBreak: 'anywhere',\n      marginTop: theme.spacing(-0.25),\n      marginRight: theme.spacing(6),\n      minHeight: theme.spacing(4),\n    }),\n    ui: css({\n      backgroundColor: theme.colors.background.secondary,\n      padding: theme.spacing(2),\n    }),\n    notification: css({\n      position: 'absolute',\n      zIndex: theme.zIndex.portal,\n      top: 0,\n      right: 0,\n    }),\n    rawQuery: css({\n      display: 'inline',\n    }),\n    queryDescription: css({\n      marginLeft: theme.spacing(0.5),\n    }),\n    iconButton: css({\n      position: 'absolute',\n      top: theme.spacing(1),\n      right: theme.spacing(1),\n      zIndex: theme.zIndex.navbarFixed,\n    }),\n    operationsToggle: css({\n      margin: theme.spacing(1, 0, -1, 0),\n      '& > div': {\n        margin: 0,\n        '& > label': {\n          padding: 0,\n        },\n      },\n    }),\n  };\n}\n\nexport const IS_LOKI_LOG_CONTEXT_UI_OPEN = 'isLogContextQueryUiOpen';\n\nexport function LokiContextUi(props: LokiContextUiProps) {\n  const { row, logContextProvider, updateFilter, onClose, origQuery, runContextQuery } = props;\n  const styles = useStyles2(getStyles);\n\n  const [contextFilters, setContextFilters] = useState<ContextFilter[]>([]);\n  const [showPreservedFiltersAppliedNotification, setShowPreservedFiltersAppliedNotification] = useState(false);\n\n  const [initialized, setInitialized] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [isOpen, setIsOpen] = useState(window.localStorage.getItem(IS_LOKI_LOG_CONTEXT_UI_OPEN) === 'true');\n  const [includePipelineOperations, setIncludePipelineOperations] = useState(\n    window.localStorage.getItem(SHOULD_INCLUDE_PIPELINE_OPERATIONS) === 'true'\n  );\n\n  const timerHandle = useRef<number>();\n  const previousInitialized = useRef<boolean>(false);\n  const previousContextFilters = useRef<ContextFilter[]>([]);\n\n  const isInitialState = useMemo(() => {\n    // Initial query has all regular labels enabled and all parsed labels disabled\n    if (initialized && contextFilters.some((filter) => filter.nonIndexed === filter.enabled)) {\n      return false;\n    }\n\n    // if we include pipeline operations, we also want to enable the revert button\n    if (includePipelineOperations && logContextProvider.queryContainsValidPipelineStages(origQuery)) {\n      return false;\n    }\n\n    return true;\n  }, [contextFilters, includePipelineOperations, initialized, logContextProvider, origQuery]);\n\n  useEffect(() => {\n    if (!initialized) {\n      return;\n    }\n\n    // don't trigger if we initialized, this will be the same query anyways.\n    if (!previousInitialized.current) {\n      previousInitialized.current = initialized;\n      return;\n    }\n\n    if (contextFilters.filter(({ enabled, nonIndexed }) => enabled && !nonIndexed).length === 0) {\n      setContextFilters(previousContextFilters.current);\n      return;\n    }\n\n    previousContextFilters.current = structuredClone(contextFilters);\n\n    if (timerHandle.current) {\n      clearTimeout(timerHandle.current);\n    }\n    setLoading(true);\n    timerHandle.current = window.setTimeout(() => {\n      updateFilter(contextFilters.filter(({ enabled }) => enabled));\n      // We are storing the removed labels and selected extracted labels in local storage so we can\n      // preselect the labels in the UI in the next log context view.\n      const preservedLabels: PreservedLabels = {\n        removedLabels: [],\n        selectedExtractedLabels: [],\n      };\n\n      contextFilters.forEach(({ enabled, nonIndexed, label }) => {\n        // We only want to store real labels that were removed from the initial query\n        if (!enabled && !nonIndexed) {\n          preservedLabels.removedLabels.push(label);\n        }\n        // Or extracted labels that were added to the initial query\n        if (enabled && nonIndexed) {\n          preservedLabels.selectedExtractedLabels.push(label);\n        }\n      });\n\n      window.localStorage.setItem(LOKI_LOG_CONTEXT_PRESERVED_LABELS, JSON.stringify(preservedLabels));\n      setLoading(false);\n    }, 1500);\n\n    return () => {\n      clearTimeout(timerHandle.current);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [contextFilters, initialized]);\n\n  useEffect(() => {\n    return () => {\n      clearTimeout(timerHandle.current);\n      onClose();\n    };\n  }, [onClose]);\n\n  useAsync(async () => {\n    setLoading(true);\n    const initContextFilters = await logContextProvider.getInitContextFilters(row, origQuery, {\n      from: dateTime(row.timeEpochMs),\n      to: dateTime(row.timeEpochMs),\n      raw: { from: dateTime(row.timeEpochMs), to: dateTime(row.timeEpochMs) },\n    });\n    setContextFilters(initContextFilters.contextFilters);\n    setShowPreservedFiltersAppliedNotification(initContextFilters.preservedFiltersApplied);\n    setInitialized(true);\n    setLoading(false);\n  });\n\n  // To hide previousContextFiltersApplied notification after 2 seconds\n  useEffect(() => {\n    if (showPreservedFiltersAppliedNotification) {\n      setTimeout(() => {\n        setShowPreservedFiltersAppliedNotification(false);\n      }, 2000);\n    }\n  }, [showPreservedFiltersAppliedNotification]);\n\n  useEffect(() => {\n    reportInteraction('grafana_explore_logs_loki_log_context_loaded', {\n      logRowUid: row.uid,\n      type: 'load',\n    });\n\n    return () => {\n      reportInteraction('grafana_explore_logs_loki_log_context_loaded', {\n        logRowUid: row.uid,\n        type: 'unload',\n      });\n    };\n  }, [row.uid]);\n\n  const realLabels = contextFilters.filter(({ nonIndexed }) => !nonIndexed);\n  const realLabelsEnabled = realLabels.filter(({ enabled }) => enabled);\n\n  const parsedLabels = contextFilters.filter(({ nonIndexed }) => nonIndexed);\n  const parsedLabelsEnabled = parsedLabels.filter(({ enabled }) => enabled);\n\n  const contextFilterToSelectFilter = useCallback((contextFilter: ContextFilter): SelectableValue<string> => {\n    return {\n      label: `${contextFilter.label}=\"${escapeLabelValueInSelector(contextFilter.value)}\"`,\n      value: contextFilter.label,\n    };\n  }, []);\n\n  // If there's any nonIndexed labels, that includes structured metadata and parsed labels, we show the nonIndexed labels input\n  const showNonIndexedLabels = parsedLabels.length > 0;\n\n  let queryExpr = logContextProvider.prepareExpression(\n    contextFilters.filter(({ enabled }) => enabled),\n    origQuery\n  );\n  return (\n    <div className={styles.wrapper}>\n      {showPreservedFiltersAppliedNotification && (\n        <Alert\n          className={styles.notification}\n          title=\"Previously used filters have been applied.\"\n          severity=\"info\"\n          elevated={true}\n        ></Alert>\n      )}\n      <Tooltip content={'Revert to initial log context query.'}>\n        <div className={styles.iconButton}>\n          <Button\n            data-testid=\"revert-button\"\n            icon=\"history-alt\"\n            variant=\"secondary\"\n            disabled={isInitialState}\n            onClick={(e) => {\n              reportInteraction('grafana_explore_logs_loki_log_context_reverted', {\n                logRowUid: row.uid,\n              });\n              setContextFilters((contextFilters) => {\n                return contextFilters.map((contextFilter) => ({\n                  ...contextFilter,\n                  // For revert to initial query we need to enable all labels and disable all parsed labels\n                  enabled: !contextFilter.nonIndexed,\n                }));\n              });\n              // We are removing the preserved labels from local storage so we can preselect the labels in the UI\n              window.localStorage.removeItem(LOKI_LOG_CONTEXT_PRESERVED_LABELS);\n              window.localStorage.removeItem(SHOULD_INCLUDE_PIPELINE_OPERATIONS);\n              setIncludePipelineOperations(false);\n            }}\n          />\n        </div>\n      </Tooltip>\n\n      <Collapse\n        collapsible={true}\n        isOpen={isOpen}\n        onToggle={() => {\n          window.localStorage.setItem(IS_LOKI_LOG_CONTEXT_UI_OPEN, (!isOpen).toString());\n          setIsOpen((isOpen) => !isOpen);\n          reportInteraction('grafana_explore_logs_loki_log_context_toggled', {\n            logRowUid: row.uid,\n            action: !isOpen ? 'open' : 'close',\n          });\n        }}\n        label={\n          <div className={styles.rawQueryContainer}>\n            {initialized ? (\n              <>\n                <RawQuery\n                  language={{ grammar: lokiGrammar, name: 'loki' }}\n                  query={queryExpr}\n                  className={styles.rawQuery}\n                />\n                <Tooltip content=\"The initial log context query is created from all labels defining the stream for the selected log line. Use the editor below to customize the log context query.\">\n                  <Icon name=\"info-circle\" size=\"sm\" className={styles.queryDescription} />\n                </Tooltip>\n              </>\n            ) : (\n              <Spinner />\n            )}\n          </div>\n        }\n      >\n        <div className={styles.ui}>\n          <Label\n            className={styles.label}\n            description=\"The initial log context query is created from all labels defining the stream for the selected log line. You can broaden your search by removing one or more of the label filters.\"\n          >\n            Widen the search\n          </Label>\n          <MultiSelect\n            isLoading={loading}\n            options={realLabels.map(contextFilterToSelectFilter)}\n            value={realLabelsEnabled.map(contextFilterToSelectFilter)}\n            closeMenuOnSelect={true}\n            maxMenuHeight={200}\n            noOptionsMessage=\"No further labels available\"\n            onChange={(keys, actionMeta) => {\n              if (actionMeta.action === 'select-option') {\n                reportInteraction('grafana_explore_logs_loki_log_context_filtered', {\n                  logRowUid: row.uid,\n                  type: 'label',\n                  action: 'select',\n                });\n              }\n              if (actionMeta.action === 'remove-value') {\n                reportInteraction('grafana_explore_logs_loki_log_context_filtered', {\n                  logRowUid: row.uid,\n                  type: 'label',\n                  action: 'remove',\n                });\n              }\n              return setContextFilters(\n                contextFilters.map((filter) => {\n                  if (filter.nonIndexed) {\n                    return filter;\n                  }\n                  filter.enabled = keys.some((key) => key.value === filter.label);\n                  return filter;\n                })\n              );\n            }}\n          />\n          {showNonIndexedLabels && (\n            <>\n              <Label\n                className={styles.label}\n                description={`By using a parser in your original query, you can use filters for extracted labels. Refine your search by applying extracted labels created from the selected log line.`}\n              >\n                Refine the search\n              </Label>\n              <MultiSelect\n                isLoading={loading}\n                options={parsedLabels.map(contextFilterToSelectFilter)}\n                value={parsedLabelsEnabled.map(contextFilterToSelectFilter)}\n                closeMenuOnSelect={true}\n                maxMenuHeight={200}\n                noOptionsMessage=\"No further labels available\"\n                isClearable={true}\n                onChange={(keys, actionMeta) => {\n                  if (actionMeta.action === 'select-option') {\n                    reportInteraction('grafana_explore_logs_loki_log_context_filtered', {\n                      logRowUid: row.uid,\n                      type: 'parsed_label',\n                      action: 'select',\n                    });\n                  }\n                  if (actionMeta.action === 'remove-value') {\n                    reportInteraction('grafana_explore_logs_loki_log_context_filtered', {\n                      logRowUid: row.uid,\n                      type: 'parsed_label',\n                      action: 'remove',\n                    });\n                  }\n                  setContextFilters(\n                    contextFilters.map((filter) => {\n                      if (!filter.nonIndexed) {\n                        return filter;\n                      }\n                      filter.enabled = keys.some((key) => key.value === filter.label);\n                      return filter;\n                    })\n                  );\n                }}\n              />\n            </>\n          )}\n          {logContextProvider.queryContainsValidPipelineStages(origQuery) && (\n            <InlineFieldRow className={styles.operationsToggle}>\n              <InlineField\n                label=\"Include LogQL pipeline operations\"\n                tooltip={\n                  <RenderUserContentAsHTML\n                    content={renderMarkdown(\n                      \"This will include LogQL operations such as `line_format` or `label_format`. It won't include line or label filter operations.\"\n                    )}\n                  />\n                }\n              >\n                <InlineSwitch\n                  value={includePipelineOperations}\n                  showLabel={true}\n                  transparent={true}\n                  onChange={(e) => {\n                    reportInteraction('grafana_explore_logs_loki_log_context_pipeline_toggled', {\n                      logRowUid: row.uid,\n                      action: e.currentTarget.checked ? 'enable' : 'disable',\n                    });\n                    window.localStorage.setItem(SHOULD_INCLUDE_PIPELINE_OPERATIONS, e.currentTarget.checked.toString());\n                    setIncludePipelineOperations(e.currentTarget.checked);\n                    if (runContextQuery) {\n                      runContextQuery();\n                    }\n                  }}\n                />\n              </InlineField>\n            </InlineFieldRow>\n          )}\n        </div>\n      </Collapse>\n    </div>\n  );\n}\n","import { DataFrame, Field, FieldType } from '@grafana/data';\n\nexport enum SortDirection {\n  Ascending,\n  Descending,\n}\n\n// creates the `index` for the sorting.\n// this is needed by the `SortedVector`.\n// the index is an array of numbers, and it defines an order.\n// at every slot in the index the values is the position of\n// the sorted item.\n// for example, an index of [3,1,2] means that\n// in the dataframe, that has 3 rows, after sorting:\n// - the third row will become the first\n// - the first row will become the second\n// - the second row will become the third\nfunction makeIndex(field: Field<number>, dir: SortDirection): number[] {\n  const fieldValues: number[] = field.values;\n  const { nanos } = field;\n\n  // we first build an array which is [0,1,2,3....]\n  const index = Array(fieldValues.length);\n  for (let i = 0; i < index.length; i++) {\n    index[i] = i;\n  }\n\n  const isAsc = dir === SortDirection.Ascending;\n\n  index.sort((a: number, b: number): number => {\n    // we need to answer this question:\n    // in the field-used-for-sorting, how would we compare value-at-index-a to value-at-index-b?\n    const valA = fieldValues[a];\n    const valB = fieldValues[b];\n    if (valA < valB) {\n      return isAsc ? -1 : 1;\n    }\n\n    if (valA > valB) {\n      return isAsc ? 1 : -1;\n    }\n\n    // the millisecond timestamps are equal,\n    // compare the nanosecond part, if available\n\n    if (nanos === undefined) {\n      return 0;\n    }\n\n    const nanoA = nanos[a];\n    const nanoB = nanos[b];\n\n    if (nanoA < nanoB) {\n      return isAsc ? -1 : 1;\n    }\n\n    if (nanoA > nanoB) {\n      return isAsc ? 1 : -1;\n    }\n\n    return 0;\n  });\n\n  return index;\n}\n\n// sort a dataframe that is in the Loki dataframe format ascending or desceding based on time,\n// with nanosecond precision.\nexport function sortDataFrameByTime(frame: DataFrame, dir: SortDirection): DataFrame {\n  const { fields, ...rest } = frame;\n\n  // we use the approach used in @grafana/data/sortDataframe.\n  // we cannot use it directly, because it does not take `.nanos` into account\n  // (see https://github.com/grafana/grafana/issues/72351).\n  // we can switch to to @grafana/data/sortDataframe when the issue is fixed.\n\n  const timeField = fields.find((field) => field.type === FieldType.time);\n  if (timeField === undefined) {\n    throw new Error('missing timestamp field. should never happen');\n  }\n\n  const index = makeIndex(timeField, dir);\n\n  return {\n    ...rest,\n    fields: fields.map((field) => ({\n      ...field,\n      values: sorted(field.values, index),\n      nanos: field.nanos === undefined ? undefined : sorted(field.nanos, index),\n    })),\n  };\n}\n\nfunction sorted<T>(vals: T[], index: number[]): T[] {\n  return vals.map((_, idx) => vals[index[idx]]);\n}\n","import { isEmpty } from 'lodash';\nimport { catchError, lastValueFrom, of, switchMap } from 'rxjs';\n\nimport {\n  CoreApp,\n  DataFrame,\n  DataQueryError,\n  DataQueryResponse,\n  FieldCache,\n  FieldType,\n  LogRowModel,\n  TimeRange,\n  toUtc,\n  LogRowContextQueryDirection,\n  LogRowContextOptions,\n  dateTime,\n  ScopedVars,\n} from '@grafana/data';\nimport { LabelParser, LabelFilter, LineFilters, PipelineStage, Logfmt, Json } from '@grafana/lezer-logql';\n\nimport { LokiContextUi } from './components/LokiContextUi';\nimport { LokiDatasource, makeRequest, REF_ID_STARTER_LOG_ROW_CONTEXT } from './datasource';\nimport { escapeLabelValueInExactSelector, getLabelTypeFromFrame } from './languageUtils';\nimport { addLabelToQuery, addParserToQuery } from './modifyQuery';\nimport {\n  getNodePositionsFromQuery,\n  getParserFromQuery,\n  getStreamSelectorsFromQuery,\n  isQueryWithParser,\n} from './queryUtils';\nimport { sortDataFrameByTime, SortDirection } from './sortDataFrame';\nimport { ContextFilter, LabelType, LokiQuery, LokiQueryDirection, LokiQueryType } from './types';\n\nexport const LOKI_LOG_CONTEXT_PRESERVED_LABELS = 'lokiLogContextPreservedLabels';\nexport const SHOULD_INCLUDE_PIPELINE_OPERATIONS = 'lokiLogContextShouldIncludePipelineOperations';\n\nexport type PreservedLabels = {\n  removedLabels: string[];\n  selectedExtractedLabels: string[];\n};\n\nexport class LogContextProvider {\n  datasource: LokiDatasource;\n  cachedContextFilters: ContextFilter[];\n  onContextClose: (() => void) | undefined;\n\n  constructor(datasource: LokiDatasource) {\n    this.datasource = datasource;\n    this.cachedContextFilters = [];\n  }\n\n  private async getQueryAndRange(\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    origQuery?: LokiQuery,\n    cacheFilters = true\n  ) {\n    const direction = (options && options.direction) || LogRowContextQueryDirection.Backward;\n    const limit = (options && options.limit) || this.datasource.maxLines;\n    // If the user doesn't have any filters applied already, or if we don't want\n    // to use the cached filters, we need to reinitialize them.\n    if (this.cachedContextFilters.length === 0 || !cacheFilters) {\n      const filters = (\n        await this.getInitContextFilters(row, origQuery, {\n          from: dateTime(row.timeEpochMs),\n          to: dateTime(row.timeEpochMs),\n          raw: { from: dateTime(row.timeEpochMs), to: dateTime(row.timeEpochMs) },\n        })\n      ).contextFilters.filter((filter) => filter.enabled);\n\n      this.cachedContextFilters = filters;\n    }\n\n    return await this.prepareLogRowContextQueryTarget(row, limit, direction, origQuery);\n  }\n\n  getLogRowContextQuery = async (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    origQuery?: LokiQuery,\n    cacheFilters = true\n  ): Promise<LokiQuery> => {\n    if (origQuery && options?.scopedVars) {\n      origQuery = this.datasource.applyTemplateVariables(origQuery, options?.scopedVars);\n    }\n    const { query } = await this.getQueryAndRange(row, options, origQuery, cacheFilters);\n\n    if (!cacheFilters) {\n      // If the caller doesn't want to cache the filters, we need to reset them.\n      this.cachedContextFilters = [];\n    }\n\n    return query;\n  };\n\n  getLogRowContext = async (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    origQuery?: LokiQuery\n  ): Promise<{ data: DataFrame[] }> => {\n    if (origQuery && options?.scopedVars) {\n      origQuery = this.datasource.applyTemplateVariables(origQuery, options?.scopedVars);\n    }\n    const direction = (options && options.direction) || LogRowContextQueryDirection.Backward;\n    const { query, range } = await this.getQueryAndRange(row, options, origQuery);\n\n    const processResults = (result: DataQueryResponse): DataQueryResponse => {\n      const frames: DataFrame[] = result.data;\n      const processedFrames = frames.map((frame) => sortDataFrameByTime(frame, SortDirection.Descending));\n\n      return {\n        ...result,\n        data: processedFrames,\n      };\n    };\n\n    // this can only be called from explore currently\n    const app = CoreApp.Explore;\n\n    return lastValueFrom(\n      this.datasource.query(makeRequest(query, range, app, `${REF_ID_STARTER_LOG_ROW_CONTEXT}${direction}`)).pipe(\n        catchError((err) => {\n          const error: DataQueryError = {\n            message: 'Error during context query. Please check JS console logs.',\n            status: err.status,\n            statusText: err.statusText,\n          };\n          throw error;\n        }),\n        switchMap((res) => of(processResults(res)))\n      )\n    );\n  };\n\n  async prepareLogRowContextQueryTarget(\n    row: LogRowModel,\n    limit: number,\n    direction: LogRowContextQueryDirection,\n    origQuery?: LokiQuery\n  ): Promise<{ query: LokiQuery; range: TimeRange }> {\n    const expr = this.prepareExpression(this.cachedContextFilters, origQuery);\n\n    const contextTimeBuffer = 2 * 60 * 60 * 1000; // 2h buffer\n\n    const queryDirection =\n      direction === LogRowContextQueryDirection.Forward ? LokiQueryDirection.Forward : LokiQueryDirection.Backward;\n\n    const query: LokiQuery = {\n      expr,\n      queryType: LokiQueryType.Range,\n      // refId has to be:\n      // - always different (temporarily, will be fixed later)\n      // - not increase in size\n      // because it may be called many times from logs-context\n      refId: `${REF_ID_STARTER_LOG_ROW_CONTEXT}_${Math.random().toString()}`,\n      maxLines: limit,\n      direction: queryDirection,\n      datasource: { uid: this.datasource.uid, type: this.datasource.type },\n    };\n\n    const fieldCache = new FieldCache(row.dataFrame);\n    const tsField = fieldCache.getFirstFieldOfType(FieldType.time);\n    if (tsField === undefined) {\n      throw new Error('loki: data frame missing time-field, should never happen');\n    }\n    const tsValue = tsField.values[row.rowIndex];\n    const timestamp = toUtc(tsValue);\n\n    const range =\n      queryDirection === LokiQueryDirection.Forward\n        ? {\n            // start param in Loki API is inclusive so we'll have to filter out the row that this request is based from\n            // and any other that were logged in the same ns but before the row. Right now these rows will be lost\n            // because the are before but came it he response that should return only rows after.\n            from: timestamp,\n            // convert to ns, we lose some precision here but it is not that important at the far points of the context\n            to: toUtc(row.timeEpochMs + contextTimeBuffer),\n          }\n        : {\n            // convert to ns, we lose some precision here but it is not that important at the far points of the context\n            from: toUtc(row.timeEpochMs - contextTimeBuffer),\n            to: timestamp,\n          };\n\n    return {\n      query,\n      range: {\n        from: range.from,\n        to: range.to,\n        raw: range,\n      },\n    };\n  }\n\n  getLogRowContextUi(\n    row: LogRowModel,\n    runContextQuery?: () => void,\n    origQuery?: LokiQuery,\n    scopedVars?: ScopedVars\n  ): React.ReactNode {\n    if (origQuery && scopedVars) {\n      origQuery = this.datasource.applyTemplateVariables(origQuery, scopedVars);\n    }\n    const updateFilter = (contextFilters: ContextFilter[]) => {\n      this.cachedContextFilters = contextFilters;\n\n      if (runContextQuery) {\n        runContextQuery();\n      }\n    };\n\n    // we need to cache this function so that it doesn't get recreated on every render\n    this.onContextClose =\n      this.onContextClose ??\n      (() => {\n        this.cachedContextFilters = [];\n      });\n\n    return LokiContextUi({\n      row,\n      origQuery,\n      updateFilter,\n      onClose: this.onContextClose,\n      logContextProvider: this,\n      runContextQuery,\n    });\n  }\n\n  prepareExpression(contextFilters: ContextFilter[], query: LokiQuery | undefined): string {\n    let preparedExpression = this.processContextFiltersToExpr(contextFilters, query);\n    if (window.localStorage.getItem(SHOULD_INCLUDE_PIPELINE_OPERATIONS) === 'true') {\n      preparedExpression = this.processPipelineStagesToExpr(preparedExpression, query);\n    }\n    return preparedExpression;\n  }\n\n  processContextFiltersToExpr = (contextFilters: ContextFilter[], query: LokiQuery | undefined): string => {\n    const labelFilters = contextFilters\n      .map((filter) => {\n        if (!filter.nonIndexed && filter.enabled) {\n          // escape backslashes in label as users can't escape them by themselves\n          return `${filter.label}=\"${escapeLabelValueInExactSelector(filter.value)}\"`;\n        }\n        return '';\n      })\n      // Filter empty strings\n      .filter((label) => !!label)\n      .join(',');\n\n    let expr = `{${labelFilters}}`;\n\n    // We need to have original query to get parser and include parsed labels\n    // We only add parser and parsed labels if there is only one parser in query\n    if (query) {\n      let hasParser = false;\n      if (isQueryWithParser(query.expr).parserCount === 1) {\n        hasParser = true;\n        const parser = getParserFromQuery(query.expr);\n        if (parser) {\n          expr = addParserToQuery(expr, parser);\n        }\n      }\n\n      const nonIndexedLabels = contextFilters.filter((filter) => filter.nonIndexed && filter.enabled);\n      for (const parsedLabel of nonIndexedLabels) {\n        if (parsedLabel.enabled) {\n          expr = addLabelToQuery(\n            expr,\n            parsedLabel.label,\n            '=',\n            parsedLabel.value,\n            hasParser ? LabelType.Parsed : LabelType.StructuredMetadata\n          );\n        }\n      }\n    }\n\n    return expr;\n  };\n\n  processPipelineStagesToExpr = (currentExpr: string, query: LokiQuery | undefined): string => {\n    let newExpr = currentExpr;\n    const origExpr = query?.expr ?? '';\n\n    if (isQueryWithParser(origExpr).parserCount > 1) {\n      return newExpr;\n    }\n\n    const allNodePositions = getNodePositionsFromQuery(origExpr, [\n      PipelineStage,\n      LabelParser,\n      Logfmt,\n      Json,\n      LineFilters,\n      LabelFilter,\n    ]);\n    const pipelineStagePositions = allNodePositions.filter((position) => position.type?.id === PipelineStage);\n    const otherNodePositions = allNodePositions.filter((position) => position.type?.id !== PipelineStage);\n\n    for (const pipelineStagePosition of pipelineStagePositions) {\n      // we don't process pipeline stages that contain label parsers, line filters or label filters\n      if (otherNodePositions.some((position) => pipelineStagePosition.contains(position))) {\n        continue;\n      }\n\n      newExpr += ` ${pipelineStagePosition.getExpression(origExpr)}`;\n    }\n\n    return newExpr;\n  };\n\n  queryContainsValidPipelineStages = (query: LokiQuery | undefined): boolean => {\n    const origExpr = query?.expr ?? '';\n    const allNodePositions = getNodePositionsFromQuery(origExpr, [\n      PipelineStage,\n      LabelParser,\n      LineFilters,\n      LabelFilter,\n    ]);\n    const pipelineStagePositions = allNodePositions.filter((position) => position.type?.id === PipelineStage);\n    const otherNodePositions = allNodePositions.filter((position) => position.type?.id !== PipelineStage);\n\n    return pipelineStagePositions.some((pipelineStagePosition) =>\n      otherNodePositions.every((position) => pipelineStagePosition.contains(position) === false)\n    );\n  };\n\n  getInitContextFilters = async (\n    row: LogRowModel,\n    query?: LokiQuery,\n    timeRange?: TimeRange\n  ): Promise<{ contextFilters: ContextFilter[]; preservedFiltersApplied: boolean }> => {\n    let preservedFiltersApplied = false;\n    if (!query || isEmpty(row.labels)) {\n      return { contextFilters: [], preservedFiltersApplied };\n    }\n    const rowLabels = row.labels;\n\n    // 1. First we need to get all labels from the log row's label\n    // and correctly set parsed and not parsed labels\n    let allLabels: string[] = [];\n    if (!isQueryWithParser(query.expr).queryWithParser) {\n      // If there is no parser, we use getLabelKeys because it has better caching\n      // and all labels should already be fetched\n      await this.datasource.languageProvider.start(timeRange);\n      allLabels = this.datasource.languageProvider.getLabelKeys();\n    } else {\n      // If we have parser, we use fetchLabels to fetch actual labels for selected stream\n      const stream = getStreamSelectorsFromQuery(query.expr);\n      // We are using stream[0] as log query can always have just 1 stream selector\n      allLabels = await this.datasource.languageProvider.fetchLabels({ streamSelector: stream[0], timeRange });\n    }\n\n    const contextFilters: ContextFilter[] = [];\n    Object.entries(rowLabels).forEach(([label, value]) => {\n      const labelType = getLabelTypeFromFrame(label, row.dataFrame, row.rowIndex);\n      const filter: ContextFilter = {\n        label,\n        value: value,\n        enabled: allLabels.includes(label),\n        nonIndexed: labelType !== null && labelType !== LabelType.Indexed,\n      };\n\n      contextFilters.push(filter);\n    });\n\n    // Secondly we check for preserved labels and update enabled state of filters based on that\n    let preservedLabels: undefined | PreservedLabels = undefined;\n    const preservedLabelsString = window.localStorage.getItem(LOKI_LOG_CONTEXT_PRESERVED_LABELS);\n    if (preservedLabelsString) {\n      try {\n        preservedLabels = JSON.parse(preservedLabelsString);\n        // Do nothing when error occurs\n      } catch (e) {}\n    }\n\n    if (!preservedLabels) {\n      // If we don't have preservedLabels, we return contextFilters as they are\n      return { contextFilters, preservedFiltersApplied };\n    } else {\n      // Otherwise, we need to update filters based on preserved labels\n      let arePreservedLabelsUsed = false;\n      const newContextFilters = contextFilters.map((contextFilter) => {\n        // We checked for undefined above\n        if (preservedLabels!.removedLabels.includes(contextFilter.label)) {\n          arePreservedLabelsUsed = true;\n          return { ...contextFilter, enabled: false };\n        }\n        // We checked for undefined above\n        if (preservedLabels!.selectedExtractedLabels.includes(contextFilter.label)) {\n          arePreservedLabelsUsed = true;\n          return { ...contextFilter, enabled: true };\n        }\n        return { ...contextFilter };\n      });\n\n      const isAtLeastOneRealLabelEnabled = newContextFilters.some(({ enabled, nonIndexed }) => enabled && !nonIndexed);\n      if (!isAtLeastOneRealLabelEnabled) {\n        // If we end up with no real labels enabled, we need to reset the init filters\n        return { contextFilters, preservedFiltersApplied };\n      } else {\n        if (arePreservedLabelsUsed) {\n          preservedFiltersApplied = true;\n        }\n        return { contextFilters: newContextFilters, preservedFiltersApplied };\n      }\n    }\n  };\n}\n","import { LokiVariableQuery, LokiVariableQueryType } from '../types';\n\nexport const labelNamesRegex = /^label_names\\(\\)\\s*$/;\nexport const labelValuesRegex = /^label_values\\((?:(.+),\\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\\)\\s*$/;\n\nexport function migrateVariableQuery(rawQuery: string | LokiVariableQuery): LokiVariableQuery {\n  // If not string, we assume LokiVariableQuery\n  if (typeof rawQuery !== 'string') {\n    return rawQuery;\n  }\n\n  const queryBase = {\n    refId: 'LokiVariableQueryEditor-VariableQuery',\n    type: LokiVariableQueryType.LabelNames,\n  };\n\n  const labelNames = rawQuery.match(labelNamesRegex);\n  if (labelNames) {\n    return {\n      ...queryBase,\n      type: LokiVariableQueryType.LabelNames,\n    };\n  }\n\n  const labelValues = rawQuery.match(labelValuesRegex);\n  if (labelValues) {\n    return {\n      ...queryBase,\n      type: LokiVariableQueryType.LabelValues,\n      label: labelValues[2] ? labelValues[2] : labelValues[1],\n      stream: labelValues[2] ? labelValues[1] : undefined,\n    };\n  }\n\n  return queryBase;\n}\n","import { FormEvent, useState, useEffect } from 'react';\nimport { usePrevious } from 'react-use';\n\nimport { QueryEditorProps, SelectableValue } from '@grafana/data';\nimport { InlineField, InlineFieldRow, Input, Select } from '@grafana/ui';\n\nimport { LokiDatasource } from '../datasource';\nimport { migrateVariableQuery } from '../migrations/variableQueryMigrations';\nimport { LokiOptions, LokiQuery, LokiVariableQuery, LokiVariableQueryType as QueryType } from '../types';\n\nconst variableOptions = [\n  { label: 'Label names', value: QueryType.LabelNames },\n  { label: 'Label values', value: QueryType.LabelValues },\n];\n\nexport type Props = QueryEditorProps<LokiDatasource, LokiQuery, LokiOptions, LokiVariableQuery>;\n\nconst refId = 'LokiVariableQueryEditor-VariableQuery';\n\nexport const LokiVariableQueryEditor = ({ onChange, query, datasource, range }: Props) => {\n  const [type, setType] = useState<number | undefined>(undefined);\n  const [label, setLabel] = useState('');\n  const [labelOptions, setLabelOptions] = useState<Array<SelectableValue<string>>>([]);\n  const [stream, setStream] = useState('');\n  const previousType = usePrevious(type);\n\n  useEffect(() => {\n    if (!query) {\n      return;\n    }\n\n    const variableQuery = typeof query === 'string' ? migrateVariableQuery(query) : query;\n    setType(variableQuery.type);\n    setLabel(variableQuery.label || '');\n    setStream(variableQuery.stream || '');\n  }, [query]);\n\n  useEffect(() => {\n    // Fetch label names when the query type is LabelValues, and the previous type was not the same\n    if (type !== QueryType.LabelValues || previousType === type) {\n      return;\n    }\n\n    datasource.languageProvider.fetchLabels({ timeRange: range }).then((labelNames) => {\n      setLabelOptions(labelNames.map((labelName) => ({ label: labelName, value: labelName })));\n    });\n  }, [datasource, type, range, previousType]);\n\n  const onQueryTypeChange = (newType: SelectableValue<QueryType>) => {\n    setType(newType.value);\n    if (newType.value !== undefined) {\n      onChange({\n        type: newType.value,\n        label,\n        stream,\n        refId,\n      });\n    }\n  };\n\n  const onLabelChange = (newLabel: SelectableValue<string>) => {\n    setLabel(newLabel.value || '');\n  };\n\n  const onStreamChange = (e: FormEvent<HTMLInputElement>) => {\n    setStream(e.currentTarget.value);\n  };\n\n  const handleBlur = () => {\n    if (type !== undefined) {\n      onChange({ type, label, stream, refId: 'LokiVariableQueryEditor-VariableQuery' });\n    }\n  };\n\n  return (\n    <>\n      <InlineFieldRow>\n        <InlineField label=\"Query type\" labelWidth={20}>\n          <Select\n            aria-label=\"Query type\"\n            onChange={onQueryTypeChange}\n            onBlur={handleBlur}\n            value={type}\n            options={variableOptions}\n            width={16}\n          />\n        </InlineField>\n        {type === QueryType.LabelValues && (\n          <>\n            <InlineField label=\"Label\" labelWidth={20}>\n              <Select\n                aria-label=\"Label\"\n                onChange={onLabelChange}\n                onBlur={handleBlur}\n                value={{ label: label, value: label }}\n                options={labelOptions}\n                width={16}\n                allowCustomValue\n              />\n            </InlineField>\n          </>\n        )}\n      </InlineFieldRow>\n      {type === QueryType.LabelValues && (\n        <InlineFieldRow>\n          <InlineField\n            label=\"Stream selector\"\n            labelWidth={20}\n            grow={true}\n            tooltip={\n              <div>\n                {\n                  'Optional. If defined, a list of values for the specified log stream selector is returned. For example: {label=\"value\"} or {label=\"$variable\"}'\n                }\n              </div>\n            }\n          >\n            <Input\n              type=\"text\"\n              aria-label=\"Stream selector\"\n              placeholder=\"Optional stream selector\"\n              value={stream}\n              onChange={onStreamChange}\n              onBlur={handleBlur}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n    </>\n  );\n};\n","import { from, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { CustomVariableSupport, DataQueryRequest, MetricFindValue, ScopedVars, TimeRange } from '@grafana/data';\n\nimport { LokiVariableQueryEditor } from './components/VariableQueryEditor';\nimport { LokiDatasource } from './datasource';\nimport { LokiVariableQuery } from './types';\n\nexport class LokiVariableSupport extends CustomVariableSupport<LokiDatasource, LokiVariableQuery> {\n  editor = LokiVariableQueryEditor;\n\n  constructor(private datasource: LokiDatasource) {\n    super();\n  }\n\n  async execute(query: LokiVariableQuery, scopedVars: ScopedVars, range: TimeRange) {\n    return this.datasource.metricFindQuery(query, { scopedVars, range });\n  }\n\n  query(request: DataQueryRequest<LokiVariableQuery>): Observable<{ data: MetricFindValue[] }> {\n    const result = this.execute(request.targets[0], request.scopedVars, request.range);\n\n    return from(result).pipe(map((data) => ({ data })));\n  }\n}\n","import { groupBy } from 'lodash';\n\nimport { FieldType, DataFrame, DataLink, Field } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\n\nimport { DerivedFieldConfig } from './types';\n\nexport function getDerivedFields(dataFrame: DataFrame, derivedFieldConfigs: DerivedFieldConfig[]): Field[] {\n  if (!derivedFieldConfigs.length) {\n    return [];\n  }\n  const derivedFieldsGrouped = groupBy(derivedFieldConfigs, 'name');\n\n  const newFields = Object.values(derivedFieldsGrouped).map(fieldFromDerivedFieldConfig);\n\n  // line-field is the first string-field\n  // NOTE: we should create some common log-frame-extra-string-field code somewhere\n  const lineField = dataFrame.fields.find((f) => f.type === FieldType.string);\n\n  if (lineField === undefined) {\n    // if this is happening, something went wrong, let's raise an error\n    throw new Error('invalid logs-dataframe, string-field missing');\n  }\n\n  const labelFields = dataFrame.fields.find((f) => f.type === FieldType.other && f.name === 'labels');\n\n  for (let i = 0; i < lineField.values.length; i++) {\n    for (const field of newFields) {\n      // `matcherRegex` can be either a RegExp that is used to extract the value from the log line, or it can be a label key to derive the field from the labels\n      if (derivedFieldsGrouped[field.name][0].matcherType === 'label' && labelFields) {\n        const label = labelFields.values[i];\n        if (label) {\n          // Find the key that matches the regex pattern in `matcherRegex`\n          const intersectingKey = Object.keys(label).find((key) => {\n            const regex = new RegExp(derivedFieldsGrouped[field.name][0].matcherRegex);\n            return regex.test(key);\n          });\n\n          if (intersectingKey) {\n            field.values.push(label[intersectingKey]);\n            continue;\n          }\n        }\n        field.values.push(null);\n      } else if (\n        derivedFieldsGrouped[field.name][0].matcherType === 'regex' ||\n        derivedFieldsGrouped[field.name][0].matcherType === undefined\n      ) {\n        // `matcherRegex` will actually be used as a RegExp here\n        const line = lineField.values[i];\n        const logMatch = line.match(derivedFieldsGrouped[field.name][0].matcherRegex);\n\n        if (logMatch && logMatch[1]) {\n          field.values.push(logMatch[1]);\n          continue;\n        }\n\n        field.values.push(null);\n      } else {\n        field.values.push(null);\n      }\n    }\n  }\n\n  return newFields;\n}\n\n/**\n * Transform derivedField config into dataframe field with config that contains link.\n */\nfunction fieldFromDerivedFieldConfig(derivedFieldConfigs: DerivedFieldConfig[]): Field {\n  const dataSourceSrv = getDataSourceSrv();\n\n  const dataLinks = derivedFieldConfigs.reduce<DataLink[]>((acc, derivedFieldConfig) => {\n    // Having field.datasourceUid means it is an internal link.\n    if (derivedFieldConfig.datasourceUid) {\n      const dsSettings = dataSourceSrv.getInstanceSettings(derivedFieldConfig.datasourceUid);\n      const queryType = (type: string | undefined): string | undefined => {\n        switch (type) {\n          case 'tempo':\n            return 'traceql';\n          case 'grafana-x-ray-datasource':\n            return 'getTrace';\n          default:\n            return undefined;\n        }\n      };\n\n      acc.push({\n        // Will be filled out later\n        title: derivedFieldConfig.urlDisplayLabel || '',\n        url: '',\n        // This is hardcoded for Jaeger or Zipkin not way right now to specify datasource specific query object\n        internal: {\n          query: { query: derivedFieldConfig.url, queryType: queryType(dsSettings?.type) },\n          datasourceUid: derivedFieldConfig.datasourceUid,\n          datasourceName: dsSettings?.name ?? 'Data source not found',\n        },\n        targetBlank: derivedFieldConfig.targetBlank,\n      });\n    } else if (derivedFieldConfig.url) {\n      acc.push({\n        // We do not know what title to give here so we count on presentation layer to create a title from metadata.\n        title: derivedFieldConfig.urlDisplayLabel || '',\n        // This is hardcoded for Jaeger or Zipkin not way right now to specify datasource specific query object\n        url: derivedFieldConfig.url,\n        targetBlank: derivedFieldConfig.targetBlank,\n      });\n    }\n    return acc;\n  }, []);\n\n  return {\n    name: derivedFieldConfigs[0].name,\n    type: FieldType.string,\n    config: {\n      links: dataLinks,\n    },\n    // We are adding values later on\n    values: [],\n  };\n}\n","import { groupBy } from 'lodash';\n\nimport { DataFrame, Field, FieldType } from '@grafana/data';\n\nexport function makeTableFrames(instantMetricFrames: DataFrame[]): DataFrame[] {\n  // first we remove frames that have no refId\n  // (we will group them by refId, so we need it to be set)\n  const framesWithRefId = instantMetricFrames.filter((f) => f.refId !== undefined);\n\n  const framesByRefId = groupBy(framesWithRefId, (frame) => frame.refId);\n\n  return Object.entries(framesByRefId).map(([refId, frames]) => makeTableFrame(frames, refId));\n}\n\ntype NumberField = Field<number>;\ntype StringField = Field<string>;\n\nfunction makeTableFrame(instantMetricFrames: DataFrame[], refId: string): DataFrame {\n  const tableTimeField: NumberField = { name: 'Time', config: {}, values: [], type: FieldType.time };\n  const tableValueField: NumberField = {\n    name: `Value #${refId}`,\n    config: {},\n    values: [],\n    type: FieldType.number,\n  };\n\n  // Sort metric labels, create columns for them and record their index\n  const allLabelNames = new Set(\n    instantMetricFrames.map((frame) => frame.fields.map((field) => Object.keys(field.labels ?? {})).flat()).flat()\n  );\n\n  const sortedLabelNames = Array.from(allLabelNames).sort();\n\n  const labelFields: StringField[] = sortedLabelNames.map((labelName) => ({\n    name: labelName,\n    config: { filterable: true },\n    values: [],\n    type: FieldType.string,\n  }));\n\n  instantMetricFrames.forEach((frame) => {\n    const timeField = frame.fields.find((field) => field.type === FieldType.time);\n    const valueField = frame.fields.find((field) => field.type === FieldType.number);\n    if (timeField == null || valueField == null) {\n      return;\n    }\n\n    const timeArray = timeField.values;\n    const valueArray = valueField.values;\n\n    for (let x of timeArray) {\n      tableTimeField.values.push(x);\n    }\n\n    for (let x of valueArray) {\n      tableValueField.values.push(x);\n    }\n\n    const labels = valueField.labels ?? {};\n\n    for (let f of labelFields) {\n      const text = labels[f.name] ?? '';\n      // we insert the labels as many times as we have values\n      for (let i = 0; i < valueArray.length; i++) {\n        f.values.push(text);\n      }\n    }\n  });\n\n  return {\n    fields: [tableTimeField, ...labelFields, tableValueField],\n    refId,\n    meta: { preferredVisualisationType: 'table' },\n    length: tableTimeField.values.length,\n  };\n}\n","import { DataQueryResponse, DataFrame, isDataFrame, FieldType, QueryResultMeta, DataQueryError } from '@grafana/data';\n\nimport { getDerivedFields } from './getDerivedFields';\nimport { makeTableFrames } from './makeTableFrames';\nimport { getExpressionFromExecutedQuery, getHighlighterExpressionsFromQuery } from './queryUtils';\nimport { dataFrameHasLokiError } from './responseUtils';\nimport { DerivedFieldConfig, LokiQuery, LokiQueryType } from './types';\n\nfunction isMetricFrame(frame: DataFrame): boolean {\n  return frame.fields.every((field) => field.type === FieldType.time || field.type === FieldType.number);\n}\n\n// returns a new frame, with meta shallow merged with its original meta\nfunction setFrameMeta(frame: DataFrame, meta: QueryResultMeta): DataFrame {\n  const { meta: oldMeta, ...rest } = frame;\n  // meta maybe be undefined, we need to handle that\n  const newMeta = { ...oldMeta, ...meta };\n  return {\n    ...rest,\n    meta: newMeta,\n  };\n}\n\nfunction processStreamFrame(\n  frame: DataFrame,\n  query: LokiQuery | undefined,\n  derivedFieldConfigs: DerivedFieldConfig[]\n): DataFrame {\n  const custom: Record<string, string> = {\n    ...frame.meta?.custom, // keep the original meta.custom\n    // used by logsModel\n    lokiQueryStatKey: 'Summary: total bytes processed',\n  };\n\n  if (dataFrameHasLokiError(frame)) {\n    custom.error = 'Error when parsing some of the logs';\n  }\n\n  const meta: QueryResultMeta = {\n    preferredVisualisationType: 'logs',\n    limit: query?.maxLines,\n    searchWords: query ? getHighlighterExpressionsFromQuery(query.expr) : undefined,\n    custom,\n  };\n\n  const newFrame = setFrameMeta(frame, meta);\n  const derivedFields = getDerivedFields(newFrame, derivedFieldConfigs);\n  return {\n    ...newFrame,\n    fields: [...newFrame.fields, ...derivedFields],\n  };\n}\n\nfunction processStreamsFrames(\n  frames: DataFrame[],\n  queryMap: Map<string, LokiQuery>,\n  derivedFieldConfigs: DerivedFieldConfig[]\n): DataFrame[] {\n  return frames.map((frame) => {\n    const query = frame.refId !== undefined ? queryMap.get(frame.refId) : undefined;\n    return processStreamFrame(frame, query, derivedFieldConfigs);\n  });\n}\n\nfunction processMetricInstantFrames(frames: DataFrame[]): DataFrame[] {\n  return frames.length > 0 ? makeTableFrames(frames) : [];\n}\n\nfunction processMetricRangeFrames(frames: DataFrame[]): DataFrame[] {\n  const meta: QueryResultMeta = { preferredVisualisationType: 'graph' };\n  return frames.map((frame) => setFrameMeta(frame, meta));\n}\n\n// we split the frames into 3 groups, because we will handle\n// each group slightly differently\nfunction groupFrames(\n  frames: DataFrame[],\n  queryMap: Map<string, LokiQuery>\n): {\n  streamsFrames: DataFrame[];\n  metricInstantFrames: DataFrame[];\n  metricRangeFrames: DataFrame[];\n} {\n  const streamsFrames: DataFrame[] = [];\n  const metricInstantFrames: DataFrame[] = [];\n  const metricRangeFrames: DataFrame[] = [];\n\n  frames.forEach((frame) => {\n    if (!isMetricFrame(frame)) {\n      streamsFrames.push(frame);\n    } else {\n      const isInstantFrame = frame.refId != null && queryMap.get(frame.refId)?.queryType === LokiQueryType.Instant;\n      if (isInstantFrame) {\n        metricInstantFrames.push(frame);\n      } else {\n        metricRangeFrames.push(frame);\n      }\n    }\n  });\n\n  return { streamsFrames, metricInstantFrames, metricRangeFrames };\n}\n\nfunction improveError(error: DataQueryError | undefined, queryMap: Map<string, LokiQuery>): DataQueryError | undefined {\n  // many things are optional in an error-object, we need an error-message to exist,\n  // and we need to find the loki-query, based on the refId in the error-object.\n  if (error === undefined) {\n    return error;\n  }\n\n  const { refId, message } = error;\n  if (refId === undefined || message === undefined) {\n    return error;\n  }\n\n  const query = queryMap.get(refId);\n  if (query === undefined) {\n    return error;\n  }\n\n  if (message.includes('escape') && query.expr.includes('\\\\')) {\n    return {\n      ...error,\n      message: `${message}. Make sure that all special characters are escaped with \\\\. For more information on escaping of special characters visit LogQL documentation at https://grafana.com/docs/loki/latest/logql/.`,\n    };\n  }\n\n  return error;\n}\n\nexport function transformBackendResult(\n  response: DataQueryResponse,\n  queries: LokiQuery[],\n  derivedFieldConfigs: DerivedFieldConfig[]\n): DataQueryResponse {\n  const { data, error, ...rest } = response;\n\n  // in the typescript type, data is an array of basically anything.\n  // we do know that they have to be dataframes, so we make a quick check,\n  // this way we can be sure, and also typescript is happy.\n  const dataFrames = data.map((d) => {\n    if (!isDataFrame(d)) {\n      throw new Error('transformation only supports dataframe responses');\n    }\n    return d;\n  });\n\n  const queryMap = new Map(\n    queries.map((query) => {\n      const executedExpr = response.data.find((data) => data.refId === query.refId)?.meta.executedQueryString;\n      const executedQuery = {\n        ...query,\n        expr: executedExpr ? getExpressionFromExecutedQuery(executedExpr) : query.expr,\n      };\n\n      return [query.refId, executedQuery];\n    })\n  );\n\n  const { streamsFrames, metricInstantFrames, metricRangeFrames } = groupFrames(dataFrames, queryMap);\n\n  return {\n    ...rest,\n    error: improveError(error, queryMap),\n    data: [\n      ...processMetricRangeFrames(metricRangeFrames),\n      ...processMetricInstantFrames(metricInstantFrames),\n      ...processStreamsFrames(streamsFrames, queryMap, derivedFieldConfigs),\n    ],\n  };\n}\n","import { memo } from 'react';\n\nimport { AnnotationQuery } from '@grafana/data';\nimport { EditorField, EditorRow } from '@grafana/plugin-ui';\nimport { Input, Stack } from '@grafana/ui';\n\nimport { LokiQuery } from '../types';\n\nimport { LokiOptionFields } from './LokiOptionFields';\nimport { LokiQueryField } from './LokiQueryField';\nimport { LokiQueryEditorProps } from './types';\n\ntype Props = LokiQueryEditorProps & {\n  annotation?: AnnotationQuery<LokiQuery>;\n  onAnnotationChange?: (annotation: AnnotationQuery<LokiQuery>) => void;\n};\n\nexport const LokiAnnotationsQueryEditor = memo(function LokiAnnotationQueryEditor(props: Props) {\n  const { annotation, onAnnotationChange, history } = props;\n\n  // this should never happen, but we want to keep typescript happy\n  if (annotation === undefined || onAnnotationChange === undefined) {\n    return null;\n  }\n\n  const onChangeQuery = (query: LokiQuery) => {\n    onAnnotationChange({\n      ...annotation,\n      expr: query.expr,\n      maxLines: query.maxLines,\n      queryType: 'range',\n    });\n  };\n\n  const queryWithRefId: LokiQuery = {\n    refId: '',\n    expr: annotation.expr,\n    maxLines: annotation.maxLines,\n    instant: annotation.instant,\n    queryType: annotation.queryType,\n  };\n  return (\n    <Stack gap={5} direction=\"column\">\n      <Stack gap={0} direction=\"column\">\n        <LokiQueryField\n          datasource={props.datasource}\n          query={queryWithRefId}\n          onChange={onChangeQuery}\n          onRunQuery={() => {}}\n          history={history}\n          ExtraFieldElement={\n            <LokiOptionFields\n              lineLimitValue={queryWithRefId?.maxLines?.toString() || ''}\n              query={queryWithRefId}\n              onRunQuery={() => {}}\n              onChange={onChangeQuery}\n            />\n          }\n        />\n      </Stack>\n      <EditorRow>\n        <EditorField\n          label=\"Title\"\n          tooltip={\n            'Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance.'\n          }\n        >\n          <Input\n            type=\"text\"\n            placeholder=\"alertname\"\n            value={annotation.titleFormat}\n            onChange={(event) => {\n              onAnnotationChange({\n                ...annotation,\n                titleFormat: event.currentTarget.value,\n              });\n            }}\n          />\n        </EditorField>\n        <EditorField label=\"Tags\">\n          <Input\n            type=\"text\"\n            placeholder=\"label1,label2\"\n            value={annotation.tagKeys}\n            onChange={(event) => {\n              onAnnotationChange({\n                ...annotation,\n                tagKeys: event.currentTarget.value,\n              });\n            }}\n          />\n        </EditorField>\n        <EditorField\n          label=\"Text\"\n          tooltip={\n            'Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance.'\n          }\n        >\n          <Input\n            type=\"text\"\n            placeholder=\"instance\"\n            value={annotation.textFormat}\n            onChange={(event) => {\n              onAnnotationChange({\n                ...annotation,\n                textFormat: event.currentTarget.value,\n              });\n            }}\n          />\n        </EditorField>\n      </EditorRow>\n    </Stack>\n  );\n});\n","import {\n  closestIdx,\n  DataFrame,\n  DataFrameType,\n  DataQueryResponse,\n  DataQueryResponseData,\n  Field,\n  FieldType,\n  LoadingState,\n  QueryResultMetaStat,\n  shallowCompare,\n} from '@grafana/data';\n\nimport { LOADING_FRAME_NAME } from './querySplitting';\n\nexport function combineResponses(currentResponse: DataQueryResponse | null, newResponse: DataQueryResponse) {\n  if (!currentResponse) {\n    return cloneQueryResponse(newResponse);\n  }\n\n  newResponse.data.forEach((newFrame) => {\n    const currentFrame = currentResponse.data.find((frame) => shouldCombine(frame, newFrame));\n    if (!currentFrame) {\n      currentResponse.data.push(cloneDataFrame(newFrame));\n      return;\n    }\n    mergeFrames(currentFrame, newFrame);\n  });\n\n  const mergedErrors = [...(currentResponse.errors ?? []), ...(newResponse.errors ?? [])];\n  if (mergedErrors.length > 0) {\n    currentResponse.errors = mergedErrors;\n  }\n\n  // the `.error` attribute is obsolete now,\n  // but we have to maintain it, otherwise\n  // some grafana parts do not behave well.\n  // we just choose the old error, if it exists,\n  // otherwise the new error, if it exists.\n  const mergedError = currentResponse.error ?? newResponse.error;\n  if (mergedError != null) {\n    currentResponse.error = mergedError;\n  }\n\n  const mergedTraceIds = [...(currentResponse.traceIds ?? []), ...(newResponse.traceIds ?? [])];\n  if (mergedTraceIds.length > 0) {\n    currentResponse.traceIds = mergedTraceIds;\n  }\n\n  return currentResponse;\n}\n\n/**\n * Given an existing DataQueryResponse, replace any data frame present in newResponse with those in newResponse\n */\nexport function replaceResponses(currentResponse: DataQueryResponse | null, newResponse: DataQueryResponse) {\n  if (!currentResponse) {\n    return cloneQueryResponse(newResponse);\n  }\n\n  newResponse.data.forEach((newFrame) => {\n    const currentFrameIndex = currentResponse.data.findIndex((frame) => shouldCombine(frame, newFrame));\n    if (currentFrameIndex < 0) {\n      currentResponse.data.push(cloneDataFrame(newFrame));\n      return;\n    }\n    currentResponse.data[currentFrameIndex] = newFrame;\n  });\n\n  // Clean up loading frame when newResponse contains the final response\n  if (newResponse.state === LoadingState.Done) {\n    currentResponse.data = currentResponse.data.filter((frame) => frame.name !== LOADING_FRAME_NAME);\n  }\n\n  const mergedErrors = [...(currentResponse.errors ?? []), ...(newResponse.errors ?? [])];\n  if (mergedErrors.length > 0) {\n    currentResponse.errors = mergedErrors;\n  }\n\n  const mergedError = currentResponse.error ?? newResponse.error;\n  if (mergedError != null) {\n    currentResponse.error = mergedError;\n  }\n\n  const mergedTraceIds = [...(currentResponse.traceIds ?? []), ...(newResponse.traceIds ?? [])];\n  if (mergedTraceIds.length > 0) {\n    currentResponse.traceIds = mergedTraceIds;\n  }\n\n  return currentResponse;\n}\n\n/**\n * Given two data frames, merge their values. Overlapping values will be added together.\n */\nexport function mergeFrames(dest: DataFrame, source: DataFrame) {\n  const destTimeField = dest.fields.find((field) => field.type === FieldType.time);\n  const destIdField = dest.fields.find((field) => field.type === FieldType.string && field.name === 'id');\n  const sourceTimeField = source.fields.find((field) => field.type === FieldType.time);\n  const sourceIdField = source.fields.find((field) => field.type === FieldType.string && field.name === 'id');\n\n  if (!destTimeField || !sourceTimeField) {\n    console.error(new Error(`Time fields not found in the data frames`));\n    return;\n  }\n\n  const sourceTimeValues = sourceTimeField?.values.slice(0) ?? [];\n  const totalFields = Math.max(dest.fields.length, source.fields.length);\n\n  for (let i = 0; i < sourceTimeValues.length; i++) {\n    const destIdx = resolveIdx(destTimeField, sourceTimeField, i);\n\n    const entryExistsInDest = compareEntries(destTimeField, destIdField, destIdx, sourceTimeField, sourceIdField, i);\n\n    for (let f = 0; f < totalFields; f++) {\n      // For now, skip undefined fields that exist in the new frame\n      if (!dest.fields[f]) {\n        continue;\n      }\n      // Index is not reliable when frames have disordered fields, or an extra/missing field, so we find them by name.\n      // If the field has no name, we fallback to the old index version.\n      const sourceField = findSourceField(dest.fields[f], source.fields, f);\n      if (!sourceField) {\n        continue;\n      }\n      // Same value, accumulate\n      if (entryExistsInDest) {\n        if (dest.fields[f].type === FieldType.time) {\n          // Time already exists, skip\n          continue;\n        } else if (dest.fields[f].type === FieldType.number) {\n          // Number, add\n          dest.fields[f].values[destIdx] = (dest.fields[f].values[destIdx] ?? 0) + sourceField.values[i];\n        } else if (dest.fields[f].type === FieldType.other) {\n          // Possibly labels, combine\n          if (typeof sourceField.values[i] === 'object') {\n            dest.fields[f].values[destIdx] = {\n              ...dest.fields[f].values[destIdx],\n              ...sourceField.values[i],\n            };\n          } else if (sourceField.values[i]) {\n            dest.fields[f].values[destIdx] = sourceField.values[i];\n          }\n        } else {\n          // Replace value\n          dest.fields[f].values[destIdx] = sourceField.values[i];\n        }\n      } else if (sourceField.values[i] !== undefined) {\n        // Insert in the `destIdx` position\n        dest.fields[f].values.splice(destIdx, 0, sourceField.values[i]);\n        if (sourceField.nanos) {\n          dest.fields[f].nanos = dest.fields[f].nanos ?? new Array(dest.fields[f].values.length - 1).fill(0);\n          dest.fields[f].nanos?.splice(destIdx, 0, sourceField.nanos[i]);\n        } else if (dest.fields[f].nanos) {\n          dest.fields[f].nanos?.splice(destIdx, 0, 0);\n        }\n      }\n    }\n  }\n\n  dest.length = dest.fields[0].values.length;\n\n  dest.meta = {\n    ...dest.meta,\n    stats: getCombinedMetadataStats(dest.meta?.stats ?? [], source.meta?.stats ?? []),\n  };\n}\n\nfunction resolveIdx(destField: Field, sourceField: Field, index: number) {\n  const idx = closestIdx(sourceField.values[index], destField.values);\n  if (idx < 0) {\n    return 0;\n  }\n  if (sourceField.values[index] === destField.values[idx] && sourceField.nanos && destField.nanos) {\n    return sourceField.nanos[index] > destField.nanos[idx] ? idx + 1 : idx;\n  }\n  if (sourceField.values[index] > destField.values[idx]) {\n    return idx + 1;\n  }\n  return idx;\n}\n\nfunction compareEntries(\n  destTimeField: Field,\n  destIdField: Field | undefined,\n  destIndex: number,\n  sourceTimeField: Field,\n  sourceIdField: Field | undefined,\n  sourceIndex: number\n) {\n  const sameTimestamp = compareNsTimestamps(destTimeField, destIndex, sourceTimeField, sourceIndex);\n  if (!sameTimestamp) {\n    return false;\n  }\n  if (!destIdField || !sourceIdField) {\n    return true;\n  }\n  // Log frames, check indexes\n  return (\n    destIdField.values[destIndex] !== undefined && destIdField.values[destIndex] === sourceIdField.values[sourceIndex]\n  );\n}\n\nfunction compareNsTimestamps(destField: Field, destIndex: number, sourceField: Field, sourceIndex: number) {\n  if (destField.nanos && sourceField.nanos) {\n    return (\n      destField.values[destIndex] !== undefined &&\n      destField.values[destIndex] === sourceField.values[sourceIndex] &&\n      destField.nanos[destIndex] !== undefined &&\n      destField.nanos[destIndex] === sourceField.nanos[sourceIndex]\n    );\n  }\n  return destField.values[destIndex] !== undefined && destField.values[destIndex] === sourceField.values[sourceIndex];\n}\n\nfunction findSourceField(referenceField: Field, sourceFields: Field[], index: number) {\n  const candidates = sourceFields.filter((f) => f.name === referenceField.name);\n\n  if (candidates.length === 1) {\n    return candidates[0];\n  }\n\n  if (referenceField.labels) {\n    return candidates.find((candidate) => shallowCompare(referenceField.labels ?? {}, candidate.labels ?? {}));\n  }\n\n  return sourceFields[index];\n}\n\nconst TOTAL_BYTES_STAT = 'Summary: total bytes processed';\nconst EXEC_TIME_STAT = 'Summary: exec time';\n// This is specific for Loki\nfunction getCombinedMetadataStats(\n  destStats: QueryResultMetaStat[],\n  sourceStats: QueryResultMetaStat[]\n): QueryResultMetaStat[] {\n  // in the current approach, we only handle a single stat\n  const stats: QueryResultMetaStat[] = [];\n  for (const stat of [TOTAL_BYTES_STAT, EXEC_TIME_STAT]) {\n    const destStat = destStats.find((s) => s.displayName === stat);\n    const sourceStat = sourceStats.find((s) => s.displayName === stat);\n\n    if (sourceStat != null && destStat != null) {\n      stats.push({ value: sourceStat.value + destStat.value, displayName: stat, unit: destStat.unit });\n      continue;\n    }\n\n    // maybe one of them exist\n    const eitherStat = sourceStat ?? destStat;\n    if (eitherStat != null) {\n      stats.push(eitherStat);\n    }\n  }\n  return stats;\n}\n\n/**\n * Deep clones a DataQueryResponse\n */\nexport function cloneQueryResponse(response: DataQueryResponse): DataQueryResponse {\n  const newResponse = {\n    ...response,\n    data: response.data.map(cloneDataFrame),\n  };\n  return newResponse;\n}\n\nfunction cloneDataFrame(frame: DataQueryResponseData): DataQueryResponseData {\n  return {\n    ...frame,\n    fields: frame.fields.map((field: Field) => ({\n      ...field,\n      values: field.values,\n    })),\n  };\n}\n\nfunction shouldCombine(frame1: DataFrame, frame2: DataFrame): boolean {\n  if (frame1.refId !== frame2.refId || frame1.name !== frame2.name) {\n    return false;\n  }\n\n  const frameType1 = frame1.meta?.type;\n  const frameType2 = frame2.meta?.type;\n\n  if (frameType1 !== frameType2) {\n    // we do not join things that have a different type\n    return false;\n  }\n\n  // metric range query data\n  if (frameType1 === DataFrameType.TimeSeriesMulti) {\n    const field1 = frame1.fields.find((f) => f.type === FieldType.number);\n    const field2 = frame2.fields.find((f) => f.type === FieldType.number);\n    if (field1 === undefined || field2 === undefined) {\n      // should never happen\n      return false;\n    }\n\n    return shallowCompare(field1.labels ?? {}, field2.labels ?? {});\n  }\n\n  // logs query data\n  // logs use a special attribute in the dataframe's \"custom\" section\n  // because we do not have a good \"frametype\" value for them yet.\n  const customType1 = frame1.meta?.custom?.frameType;\n  const customType2 = frame2.meta?.custom?.frameType;\n  // Legacy frames have this custom type\n  if (customType1 === 'LabeledTimeValues' && customType2 === 'LabeledTimeValues') {\n    return true;\n  } else if (customType1 === customType2) {\n    // Data plane frames don't\n    return true;\n  }\n\n  // should never reach here\n  return false;\n}\n","import { groupBy, partition } from 'lodash';\nimport { Observable, Subscriber, Subscription, tap } from 'rxjs';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n  arrayToDataFrame,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataTopic,\n  dateTime,\n  rangeUtil,\n  TimeRange,\n  LoadingState,\n} from '@grafana/data';\n\nimport { LokiDatasource } from './datasource';\nimport { splitTimeRange as splitLogsTimeRange } from './logsTimeSplitting';\nimport { combineResponses } from './mergeResponses';\nimport { splitTimeRange as splitMetricTimeRange } from './metricTimeSplitting';\nimport { isLogsQuery, isQueryWithRangeVariable } from './queryUtils';\nimport { isRetriableError } from './responseUtils';\nimport { trackGroupedQueries } from './tracking';\nimport { LokiGroupedRequest, LokiQuery, LokiQueryDirection, LokiQueryType } from './types';\n\nexport function partitionTimeRange(\n  isLogsQuery: boolean,\n  originalTimeRange: TimeRange,\n  stepMs: number,\n  duration: number\n): TimeRange[] {\n  const start = originalTimeRange.from.toDate().getTime();\n  const end = originalTimeRange.to.toDate().getTime();\n\n  const ranges = isLogsQuery\n    ? splitLogsTimeRange(start, end, duration)\n    : splitMetricTimeRange(start, end, stepMs, duration);\n\n  return ranges.map(([start, end]) => {\n    const from = dateTime(start);\n    const to = dateTime(end);\n    return {\n      from,\n      to,\n      raw: { from, to },\n    };\n  });\n}\n\ninterface QuerySplittingOptions {\n  /**\n   * Tells the query splitting code to not emit partial updates. Only emit on error or when it finishes querying.\n   */\n  skipPartialUpdates?: boolean;\n  /**\n   * Do not retry failed queries.\n   */\n  disableRetry?: boolean;\n}\n\n/**\n * Based in the state of the current response, if any, adjust target parameters such as `maxLines`.\n * For `maxLines`, we will update it as `maxLines - current amount of lines`.\n * At the end, we will filter the targets that don't need to be executed in the next request batch,\n * becasue, for example, the `maxLines` have been reached.\n */\nexport function adjustTargetsFromResponseState(targets: LokiQuery[], response: DataQueryResponse | null): LokiQuery[] {\n  if (!response) {\n    return targets;\n  }\n\n  return targets\n    .map((target) => {\n      if (!target.maxLines || !isLogsQuery(target.expr)) {\n        return target;\n      }\n      const targetFrame = response.data.find((frame) => frame.refId === target.refId);\n      if (!targetFrame) {\n        return target;\n      }\n      const updatedMaxLines = target.maxLines - targetFrame.length;\n      return {\n        ...target,\n        maxLines: updatedMaxLines < 0 ? 0 : updatedMaxLines,\n      };\n    })\n    .filter((target) => target.maxLines === undefined || target.maxLines > 0);\n}\nexport function runSplitGroupedQueries(\n  datasource: LokiDatasource,\n  requests: LokiGroupedRequest[],\n  options: QuerySplittingOptions = {}\n) {\n  const responseKey = requests.length ? requests[0].request.queryGroupId : uuidv4();\n  let mergedResponse: DataQueryResponse = { data: [], state: LoadingState.Streaming, key: responseKey };\n  const totalRequests = Math.max(...requests.map(({ partition }) => partition.length));\n  const longestPartition = requests.filter(({ partition }) => partition.length === totalRequests)[0].partition;\n\n  let shouldStop = false;\n  let subquerySubscription: Subscription | null = null;\n  let retriesMap = new Map<string, number>();\n  let retryTimer: ReturnType<typeof setTimeout> | null = null;\n\n  const runNextRequest = (subscriber: Subscriber<DataQueryResponse>, requestN: number, requestGroup: number) => {\n    let retrying = false;\n\n    if (subquerySubscription != null) {\n      subquerySubscription.unsubscribe();\n      subquerySubscription = null;\n    }\n\n    if (shouldStop) {\n      subscriber.complete();\n      return;\n    }\n\n    const done = () => {\n      mergedResponse.state = LoadingState.Done;\n      subscriber.next(mergedResponse);\n      subscriber.complete();\n    };\n\n    const nextRequest = () => {\n      const { nextRequestN, nextRequestGroup } = getNextRequestPointers(requests, requestGroup, requestN);\n      if (nextRequestN > 0 && nextRequestGroup >= 0) {\n        runNextRequest(subscriber, nextRequestN, nextRequestGroup);\n        return;\n      }\n      done();\n    };\n\n    const retry = (errorResponse?: DataQueryResponse) => {\n      if (options.disableRetry) {\n        return false;\n      }\n      try {\n        if (errorResponse && !isRetriableError(errorResponse)) {\n          return false;\n        }\n      } catch (e) {\n        console.error(e);\n        shouldStop = true;\n        return false;\n      }\n\n      const key = `${requestN}-${requestGroup}`;\n      const retries = retriesMap.get(key) ?? 0;\n      if (retries > 0) {\n        return false;\n      }\n\n      retriesMap.set(key, retries + 1);\n\n      retryTimer = setTimeout(\n        () => {\n          runNextRequest(subscriber, requestN, requestGroup);\n        },\n        1500 * Math.pow(2, retries)\n      ); // Exponential backoff\n\n      retrying = true;\n\n      return true;\n    };\n\n    const group = requests[requestGroup];\n    const range = group.partition[requestN - 1];\n    const targets = adjustTargetsFromResponseState(group.request.targets, mergedResponse);\n\n    if (!targets.length) {\n      nextRequest();\n      return;\n    }\n\n    const subRequest = { ...requests[requestGroup].request, range, targets };\n    // request may not have a request id\n    if (group.request.requestId) {\n      subRequest.requestId = `${group.request.requestId}_${requestN}`;\n    }\n\n    subquerySubscription = datasource.runQuery(subRequest).subscribe({\n      next: (partialResponse) => {\n        if ((partialResponse.errors ?? []).length > 0 || partialResponse.error != null) {\n          if (retry(partialResponse)) {\n            return;\n          }\n          shouldStop = true;\n        }\n        mergedResponse = combineResponses(mergedResponse, partialResponse);\n        if (!options.skipPartialUpdates) {\n          mergedResponse = updateLoadingFrame(mergedResponse, subRequest, longestPartition, requestN);\n        }\n      },\n      complete: () => {\n        if (retrying) {\n          return;\n        }\n        if (!options.skipPartialUpdates) {\n          subscriber.next(mergedResponse);\n        }\n        nextRequest();\n      },\n      error: (error) => {\n        subscriber.error(error);\n        if (retry()) {\n          return;\n        }\n      },\n    });\n  };\n\n  const response = new Observable<DataQueryResponse>((subscriber) => {\n    runNextRequest(subscriber, totalRequests, 0);\n    return () => {\n      shouldStop = true;\n      if (retryTimer) {\n        clearTimeout(retryTimer);\n        retryTimer = null;\n      }\n      if (subquerySubscription != null) {\n        subquerySubscription.unsubscribe();\n        subquerySubscription = null;\n      }\n    };\n  });\n\n  return response;\n}\n\nexport const LOADING_FRAME_NAME = 'loki-splitting-progress';\n\nfunction updateLoadingFrame(\n  response: DataQueryResponse,\n  request: DataQueryRequest<LokiQuery>,\n  partition: TimeRange[],\n  requestN: number\n): DataQueryResponse {\n  if (isLogsQuery(request.targets[0].expr)) {\n    return response;\n  }\n  response.data = response.data.filter((frame) => frame.name !== LOADING_FRAME_NAME);\n\n  if (requestN <= 1) {\n    return response;\n  }\n\n  const loadingFrame = arrayToDataFrame([\n    {\n      time: partition[0].from.valueOf(),\n      timeEnd: partition[requestN - 2].to.valueOf(),\n      isRegion: true,\n      color: 'rgba(120, 120, 120, 0.1)',\n    },\n  ]);\n  loadingFrame.name = LOADING_FRAME_NAME;\n  loadingFrame.meta = {\n    dataTopic: DataTopic.Annotations,\n  };\n\n  response.data.push(loadingFrame);\n\n  return response;\n}\n\nfunction getNextRequestPointers(requests: LokiGroupedRequest[], requestGroup: number, requestN: number) {\n  // There's a pending request from the next group:\n  for (let i = requestGroup + 1; i < requests.length; i++) {\n    const group = requests[i];\n    if (group.partition[requestN - 1]) {\n      return {\n        nextRequestGroup: i,\n        nextRequestN: requestN,\n      };\n    }\n  }\n  return {\n    // Find the first group where `[requestN - 1]` is defined\n    nextRequestGroup: requests.findIndex((group) => group?.partition[requestN - 1] !== undefined),\n    nextRequestN: requestN - 1,\n  };\n}\n\nfunction querySupportsSplitting(query: LokiQuery) {\n  return (\n    query.queryType !== LokiQueryType.Instant &&\n    // Queries with $__range variable should not be split because then the interpolated $__range variable is incorrect\n    // because it is interpolated on the backend with the split timeRange\n    !isQueryWithRangeVariable(query.expr)\n  );\n}\n\nexport function runSplitQuery(\n  datasource: LokiDatasource,\n  request: DataQueryRequest<LokiQuery>,\n  options: QuerySplittingOptions = {}\n) {\n  const queries = request.targets\n    .filter((query) => !query.hide)\n    .filter((query) => query.expr)\n    .map((query) => datasource.applyTemplateVariables(query, request.scopedVars, request.filters));\n  const [nonSplittingQueries, normalQueries] = partition(queries, (query) => !querySupportsSplitting(query));\n  const [logQueries, metricQueries] = partition(normalQueries, (query) => isLogsQuery(query.expr));\n\n  request.queryGroupId = uuidv4();\n  const oneDayMs = 24 * 60 * 60 * 1000;\n  const directionPartitionedLogQueries = groupBy(logQueries, (query) =>\n    query.direction === LokiQueryDirection.Forward ? LokiQueryDirection.Forward : LokiQueryDirection.Backward\n  );\n  const requests: LokiGroupedRequest[] = [];\n\n  for (const direction in directionPartitionedLogQueries) {\n    const queries = directionPartitionedLogQueries[direction];\n    const resolutionPartition = groupBy(queries, (query) => query.resolution || 1);\n    for (const resolution in resolutionPartition) {\n      const groupedRequest = {\n        request: { ...request, targets: resolutionPartition[resolution] },\n        partition: partitionTimeRange(true, request.range, request.intervalMs, oneDayMs),\n      };\n\n      if (direction === LokiQueryDirection.Forward) {\n        groupedRequest.partition.reverse();\n      }\n\n      requests.push(groupedRequest);\n    }\n  }\n\n  const stepMsPartition = groupBy(metricQueries, (query) =>\n    calculateStep(request.intervalMs, request.range, query.resolution || 1, query.step)\n  );\n\n  for (const stepMs in stepMsPartition) {\n    const targets = stepMsPartition[stepMs].map((q) => {\n      const { maxLines, ...query } = q;\n      return query;\n    });\n    requests.push({\n      request: { ...request, targets },\n      partition: partitionTimeRange(false, request.range, Number(stepMs), oneDayMs),\n    });\n  }\n\n  if (nonSplittingQueries.length) {\n    requests.push({\n      request: { ...request, targets: nonSplittingQueries },\n      partition: [request.range],\n    });\n  }\n\n  const startTime = new Date();\n  return runSplitGroupedQueries(datasource, requests, options).pipe(\n    tap((response) => {\n      if (response.state === LoadingState.Done) {\n        trackGroupedQueries(response, requests, request, startTime);\n      }\n    })\n  );\n}\n\n// Replicate from backend for split queries for now, until we can move query splitting to the backend\n// https://github.com/grafana/grafana/blob/main/pkg/tsdb/loki/step.go#L23\nfunction calculateStep(intervalMs: number, range: TimeRange, resolution: number, step: string | undefined) {\n  // If we can parse step,the we use it\n  // Otherwise we will calculate step based on interval\n  const interval_regex = /(-?\\d+(?:\\.\\d+)?)(ms|[Mwdhmsy])/;\n  if (step?.match(interval_regex)) {\n    return rangeUtil.intervalToMs(step) * resolution;\n  }\n\n  const newStep = intervalMs * resolution;\n  const safeStep = Math.round((range.to.valueOf() - range.from.valueOf()) / 11000);\n  return Math.max(newStep, safeStep);\n}\n","// every timestamp in this file is a number which contains an unix-timestamp-in-millisecond format,\n// like returned by `new Date().getTime()`. this is needed because the \"math\"\n// has to be done on integer numbers.\n\n// the way loki handles logs-range-queries is that if you specify start & end,\n// one of those will be included, but the other will not. this allows us to\n// make it easy to split ranges.\n// for example, if the time-range is 100<>150,\n// we can split it into:\n// - 100<>120\n// - 120<>140\n// - 140<>150\n// and no log-line will be skipped or duplicated\n// (NOTE: we do these calculations in milliseconds. at the end, Loki receives\n// nanoseconds, but it will be OK, because it's simply a matter to adding `000000`,\n// to the end, so if we do it right in milliseconds, it should be OK in\n// nanoseconds too\n\nexport function splitTimeRange(\n  startTime: number,\n  endTime: number,\n  idealRangeDuration: number\n): Array<[number, number]> {\n  if (endTime - startTime <= idealRangeDuration) {\n    return [[startTime, endTime]];\n  }\n\n  const result: Array<[number, number]> = [];\n\n  // we walk backward, because we need want the potentially smaller \"last\" chunk\n  // to be at the oldest timestamp.\n  for (let chunkEndTime = endTime; chunkEndTime > startTime; chunkEndTime -= idealRangeDuration) {\n    // when we get close to the start of the time range, we need to be sure not\n    // to cross over the startTime\n    const chunkStartTime = Math.max(chunkEndTime - idealRangeDuration, startTime);\n    result.push([chunkStartTime, chunkEndTime]);\n  }\n\n  // because we walked backwards, we need to reverse the array\n  result.reverse();\n\n  return result;\n}\n","// every timestamp in this file is a number which contains an unix-timestamp-in-millisecond format,\n// like returned by `new Date().getTime()`. this is needed because the \"math\"\n// has to be done on integer numbers.\n\n// we are trying to be compatible with\n// https://github.com/grafana/loki/blob/089ec1b05f5ec15a8851d0e8230153e0eeb4dcec/pkg/querier/queryrange/split_by_interval.go#L327-L336\n\nexport function splitTimeRange(\n  startTime: number,\n  endTime: number,\n  step: number,\n  idealRangeDuration: number\n): Array<[number, number]> {\n  if (idealRangeDuration < step) {\n    // we cannot create chunks smaller than `step`\n    return [[startTime, endTime]];\n  }\n\n  // we make the duration a multiple of `step`, lowering it if necessary\n  const alignedDuration = Math.trunc(idealRangeDuration / step) * step;\n\n  const alignedStartTime = startTime - (startTime % step);\n\n  const result: Array<[number, number]> = [];\n\n  // in a previous version we started iterating from the end, to the start.\n  // However this is not easily possible as end timestamps are always inclusive\n  // for Loki. So a `2022-02-08T00:00:00Z` end time with a 1day step would mean\n  // to include the 08.02.2022, which we don't want. So we have to start from\n  // the start, always ending at the last step before the actual end, or the total end.\n  for (let chunkStartTime = alignedStartTime; chunkStartTime < endTime; chunkStartTime += alignedDuration) {\n    const chunkEndTime = Math.min(chunkStartTime + alignedDuration - step, endTime);\n    result.push([chunkStartTime, chunkEndTime]);\n  }\n\n  return result;\n}\n","import { groupBy, partition } from 'lodash';\nimport { Observable, Subscriber, Subscription } from 'rxjs';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { DataQueryRequest, LoadingState, DataQueryResponse, QueryResultMetaStat } from '@grafana/data';\n\nimport { LokiDatasource } from './datasource';\nimport { combineResponses, replaceResponses } from './mergeResponses';\nimport { adjustTargetsFromResponseState, runSplitQuery } from './querySplitting';\nimport { getSelectorForShardValues, interpolateShardingSelector, requestSupportsSharding } from './queryUtils';\nimport { isRetriableError } from './responseUtils';\nimport { LokiQuery } from './types';\n\n/**\n * Query splitting by stream shards.\n * Query splitting was introduced in Loki to optimize querying for long intervals and high volume of data,\n * dividing a big request into smaller sub-requests, combining and displaying the results as they arrive.\n *\n * This approach, inspired by the time-based query splitting, takes advantage of the __stream_shard__\n * internal label, representing how data is spread into different sources that can be queried individually.\n *\n * The main entry point of this module is runShardSplitQuery(), which prepares the query for execution and\n * passes it to splitQueriesByStreamShard() to begin the querying loop.\n *\n * splitQueriesByStreamShard() has the following structure:\n * - Creates and returns an Observable to which the UI will subscribe\n * - Requests the __stream_shard__ values of the selected service:\n *   . If there are no shard values, it falls back to the standard querying approach of the data source in runNonSplitRequest()\n *   . If there are shards:\n *     - It sorts them by value, descending. Higher shard numbers correspond with the least volume.\n *     - It defines an initial group size, roughly Math.sqrt(amountOfShards).\n *     - It begins the querying loop with runNextRequest().\n * - runNextRequest() will create a group of groupSize shards from the nth shard (cycle), and has the following internal structure:\n *   . groupShardRequests() returns an array of shards from cycle to cycle + groupSize.\n *   . interpolateShardingSelector() will update the stream selector with the shard numbers in the current group.\n *   . After query execution:\n *     - If the response is successful:\n *       . It will add new data to the response with combineResponses()\n *       . Using the data and meta data of the response, updateGroupSizeFromResponse() will increase or decrease the group size.\n *       . nextRequest() will use the current cycle and group size to determine the next request or complete execution with done().\n *     - If the response is unsuccessful:\n *       . If the response is not a query error, and the group size bigger than 1, it will decrease the group size.\n *       . If the group size is already 1, it will retry the request up to 2 times.\n *       . If there are retry attempts, it will retry the current cycle, or else stop querying.\n * - Once all request groups have been executed, it will be done().\n */\n\nexport function runShardSplitQuery(datasource: LokiDatasource, request: DataQueryRequest<LokiQuery>) {\n  const queries = request.targets\n    .filter((query) => query.expr)\n    .filter((query) => !query.hide)\n    .map((query) => datasource.applyTemplateVariables(query, request.scopedVars, request.filters));\n\n  return splitQueriesByStreamShard(datasource, request, queries);\n}\n\nfunction splitQueriesByStreamShard(\n  datasource: LokiDatasource,\n  request: DataQueryRequest<LokiQuery>,\n  splittingTargets: LokiQuery[]\n) {\n  let shouldStop = false;\n  let mergedResponse: DataQueryResponse = { data: [], state: LoadingState.Streaming, key: uuidv4() };\n  let subquerySubscription: Subscription | null = null;\n  let retriesMap = new Map<string, number>();\n  let retryTimer: ReturnType<typeof setTimeout> | null = null;\n\n  const runNextRequest = (subscriber: Subscriber<DataQueryResponse>, group: number, groups: ShardedQueryGroup[]) => {\n    let nextGroupSize = groups[group].groupSize;\n    const { shards, groupSize, cycle } = groups[group];\n    let retrying = false;\n\n    if (subquerySubscription != null) {\n      subquerySubscription.unsubscribe();\n      subquerySubscription = null;\n    }\n\n    const done = () => {\n      mergedResponse.state = shouldStop ? LoadingState.Error : LoadingState.Done;\n      subscriber.next(mergedResponse);\n      subscriber.complete();\n    };\n\n    if (shouldStop) {\n      done();\n      return;\n    }\n\n    const nextRequest = () => {\n      const nextGroup =\n        groups[group + 1] && groupHasPendingRequests(groups[group + 1])\n          ? groups[group + 1]\n          : groups.find((shardGroup) => groupHasPendingRequests(shardGroup));\n\n      if (nextGroup === undefined) {\n        done();\n        return;\n      }\n      groups[group].groupSize = nextGroupSize;\n      runNextRequest(subscriber, groups.indexOf(nextGroup), groups);\n    };\n\n    const retry = (errorResponse?: DataQueryResponse) => {\n      try {\n        if (errorResponse && !isRetriableError(errorResponse)) {\n          return false;\n        }\n      } catch (e) {\n        console.error(e);\n        shouldStop = true;\n        return false;\n      }\n\n      if (groupSize !== undefined && groupSize > 1) {\n        groups[group].groupSize = Math.floor(Math.sqrt(groupSize));\n        debug(`Possible time out, new group size ${groups[group].groupSize}`);\n        retrying = true;\n        runNextRequest(subscriber, group, groups);\n        return true;\n      }\n\n      const key = `${group}_${cycle}`;\n      const retries = retriesMap.get(key) ?? 0;\n\n      if (retries > 1) {\n        shouldStop = true;\n        return false;\n      }\n\n      retriesMap.set(key, retries + 1);\n\n      retryTimer = setTimeout(\n        () => {\n          console.warn(`Retrying ${group} ${cycle} (${retries + 1})`);\n          runNextRequest(subscriber, group, groups);\n          retryTimer = null;\n        },\n        1500 * Math.pow(2, retries)\n      ); // Exponential backoff\n\n      retrying = true;\n\n      return true;\n    };\n\n    const targets = adjustTargetsFromResponseState(groups[group].targets, mergedResponse);\n    if (!targets.length) {\n      nextRequest();\n      return;\n    }\n\n    const shardsToQuery =\n      shards && cycle !== undefined && groupSize ? groupShardRequests(shards, cycle, groupSize) : [];\n    const subRequest = { ...request, targets: interpolateShardingSelector(targets, shardsToQuery) };\n    // Request may not have a request id\n    if (request.requestId) {\n      subRequest.requestId =\n        shardsToQuery.length > 0 ? `${request.requestId}_shard_${group}_${cycle}_${groupSize}` : request.requestId;\n    }\n\n    debug(shardsToQuery.length ? `Querying ${shardsToQuery.join(', ')}` : 'Running regular query');\n\n    subquerySubscription = runSplitQuery(datasource, subRequest, {\n      skipPartialUpdates: true,\n      disableRetry: true,\n    }).subscribe({\n      next: (partialResponse: DataQueryResponse) => {\n        if ((partialResponse.errors ?? []).length > 0 || partialResponse.error != null) {\n          if (retry(partialResponse)) {\n            return;\n          }\n        }\n        if (groupSize && cycle !== undefined && shards !== undefined) {\n          nextGroupSize = constrainGroupSize(\n            cycle + groupSize,\n            updateGroupSizeFromResponse(partialResponse, groups[group]),\n            shards.length\n          );\n          if (nextGroupSize !== groupSize) {\n            debug(`New group size ${nextGroupSize}`);\n          }\n        }\n        mergedResponse =\n          shardsToQuery.length > 0\n            ? combineResponses(mergedResponse, partialResponse)\n            : replaceResponses(mergedResponse, partialResponse);\n\n        // When we delegate query running to runSplitQuery(), we will receive partial updates here, and complete\n        // will be called when all the sub-requests were completed, so we need to show partial progress here.\n        if (shardsToQuery.length === 0) {\n          subscriber.next(mergedResponse);\n        }\n      },\n      complete: () => {\n        if (retrying) {\n          return;\n        }\n        subscriber.next(mergedResponse);\n        nextRequest();\n      },\n      error: (error: unknown) => {\n        console.error(error, { msg: 'failed to shard' });\n        subscriber.next(mergedResponse);\n        if (retry()) {\n          return;\n        }\n        nextRequest();\n      },\n    });\n  };\n\n  const response = new Observable<DataQueryResponse>((subscriber) => {\n    groupTargetsByQueryType(splittingTargets, datasource, request).then((groupedRequests) => {\n      runNextRequest(subscriber, 0, groupedRequests);\n    });\n    return () => {\n      shouldStop = true;\n      if (retryTimer) {\n        clearTimeout(retryTimer);\n      }\n      if (subquerySubscription != null) {\n        subquerySubscription.unsubscribe();\n        subquerySubscription = null;\n      }\n    };\n  });\n\n  return response;\n}\n\ninterface ShardedQueryGroup {\n  targets: LokiQuery[];\n  shards?: number[];\n  groupSize?: number;\n  cycle?: number;\n}\n\nasync function groupTargetsByQueryType(\n  targets: LokiQuery[],\n  datasource: LokiDatasource,\n  request: DataQueryRequest<LokiQuery>\n) {\n  const [shardedQueries, otherQueries] = partition(targets, (query) => requestSupportsSharding([query]));\n  const groups: ShardedQueryGroup[] = [];\n\n  if (otherQueries.length) {\n    groups.push({\n      targets: otherQueries,\n    });\n  }\n\n  const selectorPartition = groupBy(shardedQueries, (query) => getSelectorForShardValues(query.expr));\n  for (const selector in selectorPartition) {\n    try {\n      const values = await datasource.languageProvider.fetchLabelValues('__stream_shard__', {\n        timeRange: request.range,\n        streamSelector: selector,\n      });\n      const shards = values.map((value) => parseInt(value, 10));\n      if (shards) {\n        shards.sort((a, b) => b - a);\n        debug(`Querying ${selector} with shards ${shards.join(', ')}`);\n      }\n      groups.push({\n        targets: selectorPartition[selector],\n        shards: shards.length ? shards : undefined,\n        groupSize: shards.length ? getInitialGroupSize(shards) : undefined,\n        cycle: 0,\n      });\n    } catch (error) {\n      console.error(error, { msg: 'failed to fetch label values for __stream_shard__' });\n      groups.push({\n        targets: selectorPartition[selector],\n      });\n    }\n  }\n\n  return groups;\n}\n\nfunction groupHasPendingRequests(group: ShardedQueryGroup) {\n  if (group.cycle === undefined || !group.groupSize || !group.shards) {\n    return false;\n  }\n  const { cycle, groupSize, shards } = group;\n  const nextCycle = Math.min(cycle + groupSize, shards.length);\n  group.cycle = nextCycle;\n  return cycle < shards.length && nextCycle <= shards.length;\n}\n\nfunction updateGroupSizeFromResponse(response: DataQueryResponse, group: ShardedQueryGroup) {\n  const { groupSize: currentSize } = group;\n  if (!currentSize) {\n    return 1;\n  }\n  if (!response.data.length) {\n    // Empty response, increase group size\n    return currentSize + 1;\n  }\n\n  const metaExecutionTime: QueryResultMetaStat | undefined = response.data[0].meta?.stats?.find(\n    (stat: QueryResultMetaStat) => stat.displayName === 'Summary: exec time'\n  );\n\n  if (metaExecutionTime) {\n    const executionTime = Math.round(metaExecutionTime.value);\n    debug(`${metaExecutionTime.value}`);\n    // Positive scenarios\n    if (executionTime <= 1) {\n      return Math.floor(currentSize * 1.5);\n    } else if (executionTime < 6) {\n      return Math.ceil(currentSize * 1.1);\n    }\n\n    // Negative scenarios\n    if (currentSize === 1) {\n      return currentSize;\n    } else if (executionTime < 20) {\n      return Math.ceil(currentSize * 0.9);\n    } else {\n      return Math.floor(currentSize / 2);\n    }\n  }\n\n  return currentSize;\n}\n\n/**\n * Prevents the group size for ever being more than maxFactor% of the pending shards.\n */\nfunction constrainGroupSize(cycle: number, groupSize: number, shards: number) {\n  const maxFactor = 0.7;\n  return Math.min(groupSize, Math.max(Math.floor((shards - cycle) * maxFactor), 1));\n}\n\nfunction groupShardRequests(shards: number[], start: number, groupSize: number) {\n  if (start === shards.length) {\n    return [-1];\n  }\n  return shards.slice(start, start + groupSize);\n}\n\nfunction getInitialGroupSize(shards: number[]) {\n  return Math.floor(Math.sqrt(shards.length));\n}\n\n// Enable to output debugging logs\nconst DEBUG_ENABLED = Boolean(localStorage.getItem(`loki.sharding_debug_enabled`));\nfunction debug(message: string) {\n  if (!DEBUG_ENABLED) {\n    return;\n  }\n  console.log(message);\n}\n","import { map, Observable, defer, mergeMap } from 'rxjs';\n\nimport {\n  DataFrameJSON,\n  DataQueryRequest,\n  DataQueryResponse,\n  LiveChannelEvent,\n  LiveChannelScope,\n  LoadingState,\n  StreamingDataFrame,\n} from '@grafana/data';\nimport { getGrafanaLiveSrv, config } from '@grafana/runtime';\n\nimport { LokiDatasource } from './datasource';\nimport { LokiQuery } from './types';\n\n/**\n * Calculate a unique key for the query.  The key is used to pick a channel and should\n * be unique for each distinct query execution plan.  This key is not secure and is only picked to avoid\n * possible collisions\n */\nexport async function getLiveStreamKey(query: LokiQuery): Promise<string> {\n  const str = JSON.stringify({ expr: query.expr });\n\n  const msgUint8 = new TextEncoder().encode(str); // encode as (utf-8) Uint8Array\n  const hashBuffer = await crypto.subtle.digest('SHA-1', msgUint8); // hash the message\n  const hashArray = Array.from(new Uint8Array(hashBuffer.slice(0, 8))); // first 8 bytes\n  return `${query.datasource?.uid}/${hashArray.map((b) => b.toString(16).padStart(2, '0')).join('')}/${config.bootData.user.orgId}`;\n}\n\n// This will get both v1 and v2 result formats\nexport function doLokiChannelStream(\n  query: LokiQuery,\n  ds: LokiDatasource,\n  options: DataQueryRequest<LokiQuery>\n): Observable<DataQueryResponse> {\n  // maximum time to keep values\n  const range = options.range;\n  const maxDelta = range.to.valueOf() - range.from.valueOf() + 1000;\n  let maxLength = options.maxDataPoints ?? 1000;\n  if (maxLength > 100) {\n    // for small buffers, keep them small\n    maxLength *= 2;\n  }\n\n  let frame: StreamingDataFrame | undefined = undefined;\n  const updateFrame = (msg: LiveChannelEvent<unknown>) => {\n    if ('message' in msg && msg.message) {\n      const p: DataFrameJSON = msg.message;\n      if (!frame) {\n        frame = StreamingDataFrame.fromDataFrameJSON(p, {\n          maxLength,\n          maxDelta,\n          displayNameFormat: query.legendFormat,\n        });\n      } else {\n        frame.push(p);\n      }\n    }\n    return frame;\n  };\n\n  return defer(() => getLiveStreamKey(query)).pipe(\n    mergeMap((key) => {\n      return getGrafanaLiveSrv()\n        .getStream({\n          scope: LiveChannelScope.DataSource,\n          namespace: ds.uid,\n          path: `tail/${key}`,\n          data: {\n            ...query,\n            timeRange: {\n              from: range.from.valueOf().toString(),\n              to: range.to.valueOf().toString(),\n            },\n          },\n        })\n        .pipe(\n          map((evt) => {\n            const frame = updateFrame(evt);\n            return {\n              data: frame ? [frame] : [],\n              state: LoadingState.Streaming,\n            };\n          })\n        );\n    })\n  );\n}\n\nexport const convertToWebSocketUrl = (url: string) => {\n  const protocol = window.location.protocol === 'https:' ? 'wss://' : 'ws://';\n  let backend = `${protocol}${window.location.host}${config.appSubUrl}`;\n  if (backend.endsWith('/')) {\n    backend = backend.slice(0, -1);\n  }\n  return `${backend}${url}`;\n};\n","import { cloneDeep, map as lodashMap } from 'lodash';\nimport { lastValueFrom, merge, Observable, of, throwError } from 'rxjs';\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\n\nimport {\n  AbstractQuery,\n  AnnotationEvent,\n  AnnotationQueryRequest,\n  CoreApp,\n  DataFrame,\n  DataFrameView,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  DataSourceWithLogsContextSupport,\n  DataSourceWithSupplementaryQueriesSupport,\n  SupplementaryQueryType,\n  DataSourceWithQueryExportSupport,\n  DataSourceWithQueryImportSupport,\n  Labels,\n  LoadingState,\n  LogRowModel,\n  QueryFixAction,\n  QueryHint,\n  rangeUtil,\n  ScopedVars,\n  SupplementaryQueryOptions,\n  TimeRange,\n  LogRowContextOptions,\n  DataSourceWithToggleableQueryFiltersSupport,\n  ToggleFilterAction,\n  QueryFilterOptions,\n  renderLegendFormat,\n  LegacyMetricFindQueryOptions,\n  AdHocVariableFilter,\n  urlUtil,\n  MetricFindValue,\n  DataSourceGetTagValuesOptions,\n  DataSourceGetTagKeysOptions,\n  DataSourceWithQueryModificationSupport,\n  LogsVolumeOption,\n  LogsSampleOptions,\n  QueryVariableModel,\n  CustomVariableModel,\n} from '@grafana/data';\nimport { Duration } from '@grafana/lezer-logql';\nimport { BackendSrvRequest, config, DataSourceWithBackend, getTemplateSrv, TemplateSrv } from '@grafana/runtime';\nimport { DataQuery } from '@grafana/schema';\n\nimport LanguageProvider from './LanguageProvider';\nimport { LiveStreams, LokiLiveTarget } from './LiveStreams';\nimport { LogContextProvider } from './LogContextProvider';\nimport { LokiVariableSupport } from './LokiVariableSupport';\nimport { transformBackendResult } from './backendResultTransformer';\nimport { LokiAnnotationsQueryEditor } from './components/AnnotationsQueryEditor';\nimport { placeHolderScopedVars } from './components/monaco-query-field/monaco-completion-provider/validation';\nimport { escapeLabelValueInSelector, isRegexSelector, getLabelTypeFromFrame } from './languageUtils';\nimport { labelNamesRegex, labelValuesRegex } from './migrations/variableQueryMigrations';\nimport {\n  addLabelFormatToQuery,\n  addLabelToQuery,\n  addNoPipelineErrorToQuery,\n  addParserToQuery,\n  removeCommentsFromQuery,\n  addFilterAsLabelFilter,\n  getParserPositions,\n  toLabelFilter,\n  addLineFilter,\n  findLastPosition,\n  getLabelFilterPositions,\n  queryHasFilter,\n  removeLabelFromQuery,\n} from './modifyQuery';\nimport { getQueryHints } from './queryHints';\nimport { runSplitQuery } from './querySplitting';\nimport {\n  getLogQueryFromMetricsQuery,\n  getLokiQueryFromDataQuery,\n  getNodesFromQuery,\n  getNormalizedLokiQuery,\n  getStreamSelectorsFromQuery,\n  isLogsQuery,\n  isQueryWithError,\n  requestSupportsSharding,\n  requestSupportsSplitting,\n} from './queryUtils';\nimport { replaceVariables, returnVariables } from './querybuilder/parsingUtils';\nimport { runShardSplitQuery } from './shardQuerySplitting';\nimport { convertToWebSocketUrl, doLokiChannelStream } from './streaming';\nimport { trackQuery } from './tracking';\nimport {\n  LokiOptions,\n  LokiQuery,\n  LokiQueryType,\n  LokiVariableQuery,\n  LokiVariableQueryType,\n  QueryStats,\n  SupportingQueryType,\n} from './types';\n\nexport type RangeQueryOptions = DataQueryRequest<LokiQuery> | AnnotationQueryRequest<LokiQuery>;\nexport const DEFAULT_MAX_LINES = 1000;\nexport const DEFAULT_MAX_LINES_SAMPLE = 10;\nexport const LOKI_ENDPOINT = '/loki/api/v1';\nexport const REF_ID_DATA_SAMPLES = 'loki-data-samples';\nexport const REF_ID_STARTER_ANNOTATION = 'annotation-';\nexport const REF_ID_STARTER_LOG_ROW_CONTEXT = 'log-row-context-query-';\nexport const REF_ID_STARTER_LOG_VOLUME = 'log-volume-';\nexport const REF_ID_STARTER_LOG_SAMPLE = 'log-sample-';\nexport const REF_ID_STARTER_STATS = 'log-stats-';\n\nconst NS_IN_MS = 1000000;\n\nexport function makeRequest(\n  query: LokiQuery,\n  range: TimeRange,\n  app: CoreApp,\n  requestId: string,\n  hideFromInspector?: boolean\n): DataQueryRequest<LokiQuery> {\n  const intervalInfo = rangeUtil.calculateInterval(range, 1);\n  return {\n    targets: [query],\n    requestId,\n    interval: intervalInfo.interval,\n    intervalMs: intervalInfo.intervalMs,\n    range: range,\n    scopedVars: {},\n    timezone: 'UTC',\n    app,\n    startTime: Date.now(),\n    hideFromInspector,\n  };\n}\n\nexport class LokiDatasource\n  extends DataSourceWithBackend<LokiQuery, LokiOptions>\n  implements\n    DataSourceWithLogsContextSupport,\n    DataSourceWithSupplementaryQueriesSupport<LokiQuery>,\n    DataSourceWithQueryImportSupport<LokiQuery>,\n    DataSourceWithQueryExportSupport<LokiQuery>,\n    DataSourceWithToggleableQueryFiltersSupport<LokiQuery>,\n    DataSourceWithQueryModificationSupport<LokiQuery>\n{\n  private streams = new LiveStreams();\n  private logContextProvider: LogContextProvider;\n  languageProvider: LanguageProvider;\n  maxLines: number;\n\n  constructor(\n    private instanceSettings: DataSourceInstanceSettings<LokiOptions>,\n    private readonly templateSrv: TemplateSrv = getTemplateSrv()\n  ) {\n    super(instanceSettings);\n\n    this.languageProvider = new LanguageProvider(this);\n    const settingsData = instanceSettings.jsonData || {};\n    this.maxLines = parseInt(settingsData.maxLines ?? '0', 10) || DEFAULT_MAX_LINES;\n    this.annotations = {\n      QueryEditor: LokiAnnotationsQueryEditor,\n    };\n    this.variables = new LokiVariableSupport(this);\n    this.logContextProvider = new LogContextProvider(this);\n  }\n\n  /**\n   * Implemented for DataSourceWithSupplementaryQueriesSupport.\n   * It generates a DataQueryRequest for a specific supplementary query type.\n   * @returns A DataQueryRequest for the supplementary queries or undefined if not supported.\n   */\n  getSupplementaryRequest(\n    type: SupplementaryQueryType,\n    request: DataQueryRequest<LokiQuery>,\n    options?: SupplementaryQueryOptions\n  ): DataQueryRequest<LokiQuery> | undefined {\n    switch (type) {\n      case SupplementaryQueryType.LogsVolume:\n        const logsVolumeOption: LogsVolumeOption =\n          options?.type === SupplementaryQueryType.LogsVolume ? options : { type };\n        return this.getLogsVolumeDataProvider(request, logsVolumeOption);\n      case SupplementaryQueryType.LogsSample:\n        const logsSampleOption: LogsSampleOptions =\n          options?.type === SupplementaryQueryType.LogsSample ? options : { type };\n        return this.getLogsSampleDataProvider(request, logsSampleOption);\n      default:\n        return undefined;\n    }\n  }\n\n  /**\n   * Implemented for DataSourceWithSupplementaryQueriesSupport.\n   * It returns the supplementary types that the data source supports.\n   * @returns An array of supported supplementary query types.\n   */\n  getSupportedSupplementaryQueryTypes(): SupplementaryQueryType[] {\n    return [SupplementaryQueryType.LogsVolume, SupplementaryQueryType.LogsSample];\n  }\n\n  /**\n   * Implemented for DataSourceWithSupplementaryQueriesSupport.\n   * It retrieves supplementary queries based on the provided options and Loki query.\n   * @returns A supplemented Loki query or undefined if unsupported.\n   */\n  getSupplementaryQuery(options: SupplementaryQueryOptions, query: LokiQuery): LokiQuery | undefined {\n    if (query.hide) {\n      return undefined;\n    }\n\n    const normalizedQuery = getNormalizedLokiQuery(query);\n    let expr = removeCommentsFromQuery(normalizedQuery.expr);\n    let isQuerySuitable = false;\n\n    switch (options.type) {\n      case SupplementaryQueryType.LogsVolume:\n        // it has to be a logs-producing range-query\n        isQuerySuitable = !!(expr && isLogsQuery(expr) && normalizedQuery.queryType === LokiQueryType.Range);\n        if (!isQuerySuitable) {\n          return undefined;\n        }\n\n        const dropErrorExpression = `${expr} | drop __error__`;\n        const field = options.field || 'level, detected_level';\n        if (isQueryWithError(this.interpolateString(dropErrorExpression, placeHolderScopedVars)) === false) {\n          expr = dropErrorExpression;\n        }\n\n        return {\n          ...normalizedQuery,\n          refId: `${REF_ID_STARTER_LOG_VOLUME}${normalizedQuery.refId}`,\n          queryType: LokiQueryType.Range,\n          supportingQueryType: SupportingQueryType.LogsVolume,\n          expr: `sum by (${field}) (count_over_time(${expr}[$__auto]))`,\n        };\n\n      case SupplementaryQueryType.LogsSample:\n        // it has to be a metric query\n        isQuerySuitable = !!(expr && !isLogsQuery(expr));\n        if (!isQuerySuitable) {\n          return undefined;\n        }\n        return {\n          ...normalizedQuery,\n          queryType: LokiQueryType.Range,\n          refId: `${REF_ID_STARTER_LOG_SAMPLE}${normalizedQuery.refId}`,\n          expr: getLogQueryFromMetricsQuery(expr),\n          maxLines: Number.isNaN(Number(options.limit)) ? this.maxLines : Number(options.limit),\n          supportingQueryType: SupportingQueryType.LogsSample,\n        };\n\n      default:\n        return undefined;\n    }\n  }\n\n  /**\n   * Private method used in the `getDataProvider` for DataSourceWithSupplementaryQueriesSupport, specifically for Logs volume queries.\n   * @returns A DataQueryRequest or undefined if no suitable queries are found.\n   */\n  private getLogsVolumeDataProvider(\n    request: DataQueryRequest<LokiQuery>,\n    options: LogsVolumeOption\n  ): DataQueryRequest<LokiQuery> | undefined {\n    const logsVolumeRequest = cloneDeep(request);\n    const targets = logsVolumeRequest.targets\n      .map((query) => this.getSupplementaryQuery(options, query))\n      .filter((query): query is LokiQuery => !!query);\n\n    if (!targets.length) {\n      return undefined;\n    }\n\n    return { ...logsVolumeRequest, targets };\n  }\n\n  /**\n   * Private method used in the `getDataProvider` for DataSourceWithSupplementaryQueriesSupport, specifically for Logs sample queries.\n   * @returns A DataQueryRequest or undefined if no suitable queries are found.\n   */\n  private getLogsSampleDataProvider(\n    request: DataQueryRequest<LokiQuery>,\n    options?: LogsSampleOptions\n  ): DataQueryRequest<LokiQuery> | undefined {\n    const logsSampleRequest = cloneDeep(request);\n    const targets = logsSampleRequest.targets\n      .map((query) => this.getSupplementaryQuery({ type: SupplementaryQueryType.LogsSample, limit: 100 }, query))\n      .filter((query): query is LokiQuery => !!query);\n\n    if (!targets.length) {\n      return undefined;\n    }\n    return { ...logsSampleRequest, targets };\n  }\n\n  /**\n   * Required by DataSourceApi. It executes queries based on the provided DataQueryRequest.\n   * @returns An Observable of DataQueryResponse containing the query results.\n   */\n  query(request: DataQueryRequest<LokiQuery>): Observable<DataQueryResponse> {\n    const queries = request.targets\n      .map(getNormalizedLokiQuery) // used to \"fix\" the deprecated `.queryType` prop\n      .map((q) => ({\n        ...q,\n        maxLines: q.maxLines ?? this.maxLines,\n        scopes:\n          config.featureToggles.scopeFilters && config.featureToggles.logQLScope\n            ? request.scopes?.flatMap((scope) => scope.spec.filters)\n            : undefined,\n      }));\n\n    const fixedRequest: DataQueryRequest<LokiQuery> = {\n      ...request,\n      targets: queries,\n    };\n\n    const streamQueries = fixedRequest.targets.filter((q) => q.queryType === LokiQueryType.Stream);\n    if (\n      config.featureToggles.lokiExperimentalStreaming &&\n      streamQueries.length > 0 &&\n      fixedRequest.rangeRaw?.to === 'now'\n    ) {\n      // this is still an in-development feature,\n      // we do not support mixing stream-queries with normal-queries for now.\n      const streamRequest = {\n        ...fixedRequest,\n        targets: streamQueries,\n      };\n      return merge(\n        ...streamQueries.map((q) =>\n          doLokiChannelStream(\n            this.applyTemplateVariables(q, request.scopedVars, request.filters),\n            this, // the datasource\n            streamRequest\n          )\n        )\n      );\n    }\n\n    if (fixedRequest.liveStreaming) {\n      return this.runLiveQueryThroughBackend(fixedRequest);\n    }\n\n    if (config.featureToggles.lokiShardSplitting && requestSupportsSharding(fixedRequest.targets)) {\n      return runShardSplitQuery(this, fixedRequest);\n    } else if (config.featureToggles.lokiQuerySplitting && requestSupportsSplitting(fixedRequest.targets)) {\n      return runSplitQuery(this, fixedRequest);\n    }\n\n    const startTime = new Date();\n    return this.runQuery(fixedRequest).pipe(tap((response) => trackQuery(response, fixedRequest, startTime)));\n  }\n\n  /**\n   * Executes requests through the backend using the `super.query()`, as part of the `query` method in DataSourceWithBackend.\n   * @returns An Observable of transformed DataQueryResponse results from the backend.\n   */\n  runQuery(fixedRequest: DataQueryRequest<LokiQuery>) {\n    return super\n      .query(fixedRequest)\n      .pipe(\n        map((response) =>\n          transformBackendResult(response, fixedRequest.targets, this.instanceSettings.jsonData.derivedFields ?? [])\n        )\n      );\n  }\n\n  /**\n   * Used within the `query` to execute live queries.\n   * It is intended for logs-queries, not metric queries.\n   * @returns An Observable of DataQueryResponse with live query results or an empty response if no suitable queries are found.\n   * @todo: The name says \"backend\" but it's actually running the query through the frontend. We should fix this.\n   */\n  private runLiveQueryThroughBackend(request: DataQueryRequest<LokiQuery>): Observable<DataQueryResponse> {\n    // and only for logs-queries, not metric queries\n    const logsQueries = request.targets.filter((query) => query.expr !== '' && isLogsQuery(query.expr));\n    if (logsQueries.length === 0) {\n      return of({\n        data: [],\n        state: LoadingState.Done,\n      });\n    }\n\n    const subQueries = logsQueries.map((query) => {\n      const interpolatedQuery = this.applyTemplateVariables(query, request.scopedVars, request.filters);\n      const maxDataPoints = interpolatedQuery.maxLines || this.maxLines;\n      // FIXME: currently we are running it through the frontend still.\n      return this.runLiveQuery(interpolatedQuery, maxDataPoints);\n    });\n\n    return merge(...subQueries);\n  }\n\n  /**\n   * Used within the `runLiveQuery` to create a live target for a Loki query.\n   * @returns A LokiLiveTarget object containing the necessary information for a live query.\n   */\n  private createLiveTarget(target: LokiQuery, maxDataPoints: number): LokiLiveTarget {\n    const query = target.expr;\n    const baseUrl = this.instanceSettings.url;\n    const params = urlUtil.serializeParams({ query });\n\n    return {\n      query,\n      url: convertToWebSocketUrl(`${baseUrl}/loki/api/v1/tail?${params}`),\n      refId: target.refId,\n      size: maxDataPoints,\n    };\n  }\n\n  /**\n   * Runs live queries, which involves creating a WebSocket connection to listen for new logs.\n   * It returns a slightly different DataQueryResponse compared to runQueries. It provides a single DataFrame\n   * even if there are multiple Loki streams. Common labels are set on dataFrame.labels, and unique labels per row are\n   * available in dataFrame.fields.labels.\n   * @returns An Observable of DataQueryResponse with streaming data or an error message if live tailing encounters an issue.\n   */\n  private runLiveQuery = (target: LokiQuery, maxDataPoints: number): Observable<DataQueryResponse> => {\n    const liveTarget = this.createLiveTarget(target, maxDataPoints);\n\n    return this.streams.getStream(liveTarget).pipe(\n      map((data) => ({\n        data: data || [],\n        key: `loki-${liveTarget.refId}`,\n        state: LoadingState.Streaming,\n      })),\n      catchError((err) => {\n        return throwError(() => `Live tailing was stopped due to following error: ${err.reason}`);\n      })\n    );\n  };\n\n  /**\n   * Implemented as a part of DataSourceApi. Interpolates variables and adds ad hoc filters to a list of Loki queries.\n   * @returns An array of expanded Loki queries with interpolated variables and ad hoc filters.\n   */\n  interpolateVariablesInQueries(\n    queries: LokiQuery[],\n    scopedVars: ScopedVars,\n    adhocFilters?: AdHocVariableFilter[]\n  ): LokiQuery[] {\n    let expandedQueries = queries;\n    if (queries && queries.length) {\n      expandedQueries = queries.map((query) => ({\n        ...query,\n        datasource: this.getRef(),\n        expr: this.addAdHocFilters(\n          this.templateSrv.replace(query.expr, scopedVars, this.interpolateQueryExpr),\n          adhocFilters\n        ),\n      }));\n    }\n\n    return expandedQueries;\n  }\n\n  /**\n   * Implemented as part of DataSourceApi. Converts a Loki query to a simple text string.\n   * Used, for example, in Query history.\n   * @returns A text representation of the query.\n   */\n  getQueryDisplayText(query: LokiQuery) {\n    return query.expr;\n  }\n\n  /**\n   * Given a time range, returns it as Loki parameters.\n   * @returns An object containing the start and end times in nanoseconds since the Unix epoch.\n   */\n  getTimeRangeParams(timeRange: TimeRange) {\n    return { start: timeRange.from.valueOf() * NS_IN_MS, end: timeRange.to.valueOf() * NS_IN_MS };\n  }\n\n  /**\n   * Implemented as part of DataSourceWithQueryImportSupport.\n   * Imports queries from AbstractQuery objects when switching between different data source types.\n   * @returns A Promise that resolves to an array of Loki queries.\n   */\n  async importFromAbstractQueries(abstractQueries: AbstractQuery[]): Promise<LokiQuery[]> {\n    await this.languageProvider.start();\n    const existingKeys = this.languageProvider.labelKeys;\n\n    if (existingKeys && existingKeys.length) {\n      abstractQueries = abstractQueries.map((abstractQuery) => {\n        abstractQuery.labelMatchers = abstractQuery.labelMatchers.filter((labelMatcher) => {\n          return existingKeys.includes(labelMatcher.name);\n        });\n        return abstractQuery;\n      });\n    }\n\n    return abstractQueries.map((abstractQuery) => this.languageProvider.importFromAbstractQuery(abstractQuery));\n  }\n\n  /**\n   * Implemented as part of DataSourceWithQueryImportSupport.\n   * Exports Loki queries to AbstractQuery objects when switching between different data source types.\n   * @returns A Promise that resolves to an array of AbstractQuery objects.\n   */\n  async exportToAbstractQueries(queries: LokiQuery[]): Promise<AbstractQuery[]> {\n    return queries.map((query) => this.languageProvider.exportToAbstractQuery(query));\n  }\n\n  /**\n   * A method that wraps `getResource` from DataSourceWithBackend to perform metadata requests, with an additional check for valid URL values.\n   * @returns A Promise that resolves to the data retrieved from the metadata request, or an empty array if no data is available.\n   */\n  async metadataRequest(url: string, params?: Record<string, string | number>, options?: Partial<BackendSrvRequest>) {\n    // url must not start with a `/`, otherwise the AJAX-request\n    // going from the browser will contain `//`, which can cause problems.\n    if (url.startsWith('/')) {\n      throw new Error(`invalid metadata request url: ${url}`);\n    }\n\n    const res = await this.getResource(url, params, options);\n\n    // detected_field/${label}/values has different structure then other metadata responses\n    if (!res.data && res.values) {\n      return res.values ?? [];\n    }\n\n    // detected_fields has a different return structure then other metadata responses\n    if (!res.data && res.fields) {\n      return res.fields ?? [];\n    }\n    return res.data ?? [];\n  }\n\n  /**\n   * Used in `getQueryStats`. It wraps `getResource` from DataSourceWithBackend to perform a stats request\n   * Specifically designed for the stats endpoint, which does not return data but includes stats directly in the response object.\n   * @returns A Promise that resolves to a QueryStats object containing the statistics retrieved from the stats request.\n   */\n  async statsMetadataRequest(\n    url: string,\n    params?: Record<string, string | number>,\n    options?: Partial<BackendSrvRequest>\n  ): Promise<QueryStats> {\n    if (url.startsWith('/')) {\n      throw new Error(`invalid metadata request url: ${url}`);\n    }\n\n    return await this.getResource(url, params, options);\n  }\n\n  /**\n   * Used in `getStats`. Retrieves statistics for a Loki query and processes them into a QueryStats object.\n   * @returns A Promise that resolves to a QueryStats object containing the query statistics or undefined if the query is invalid.\n   */\n  async getQueryStats(query: LokiQuery, timeRange: TimeRange): Promise<QueryStats | undefined> {\n    // if query is invalid, clear stats, and don't request\n    if (isQueryWithError(this.interpolateString(query.expr, placeHolderScopedVars))) {\n      return undefined;\n    }\n\n    const labelMatchers = getStreamSelectorsFromQuery(query.expr);\n    let statsForAll: QueryStats = { streams: 0, chunks: 0, bytes: 0, entries: 0 };\n\n    for (const idx in labelMatchers) {\n      const { start, end } = this.getStatsTimeRange(query, Number(idx), timeRange);\n\n      if (start === undefined || end === undefined) {\n        return { streams: 0, chunks: 0, bytes: 0, entries: 0, message: 'Query size estimate not available.' };\n      }\n\n      try {\n        const data = await this.statsMetadataRequest(\n          'index/stats',\n          {\n            query: labelMatchers[idx],\n            start: start,\n            end: end,\n          },\n          { showErrorAlert: false, requestId: `${REF_ID_STARTER_STATS}${query.refId}` }\n        );\n\n        statsForAll = {\n          streams: statsForAll.streams + data.streams,\n          chunks: statsForAll.chunks + data.chunks,\n          bytes: statsForAll.bytes + data.bytes,\n          entries: statsForAll.entries + data.entries,\n        };\n      } catch (e) {\n        break;\n      }\n    }\n\n    return statsForAll;\n  }\n\n  /**\n   * Used within the `getQueryStats`. Retrieves the time range for a Loki stats query, adjusting it to cover the requested period.\n   * In metric queries, this means extending it over the range interval.\n   * @returns An object containing the start and end time in nanoseconds (NS_IN_MS) or undefined if the time range cannot be estimated.\n   */\n\n  getStatsTimeRange(\n    query: LokiQuery,\n    idx: number,\n    timeRange: TimeRange\n  ): { start: number | undefined; end: number | undefined } {\n    let start: number, end: number;\n    const NS_IN_MS = 1000000;\n    const durationNodes = getNodesFromQuery(query.expr, [Duration]);\n    const durations = durationNodes.map((d) => query.expr.substring(d.from, d.to));\n\n    if (isLogsQuery(query.expr)) {\n      // logs query with instant type can not be estimated\n      if (query.queryType === LokiQueryType.Instant) {\n        return { start: undefined, end: undefined };\n      }\n      // logs query with range type\n      return this.getTimeRangeParams(timeRange);\n    }\n\n    if (query.queryType === LokiQueryType.Instant) {\n      // metric query with instant type\n\n      if (!!durations[idx]) {\n        // if query has a duration e.g. [1m]\n        end = this.getTimeRangeParams(timeRange).end;\n        start = end - rangeUtil.intervalToMs(durations[idx]) * NS_IN_MS;\n        return { start, end };\n      } else {\n        // if query has no duration e.g. [$__interval]\n\n        if (/(\\$__auto|\\$__range)/.test(query.expr)) {\n          // if $__auto or $__range is used, we can estimate the time range using the selected range\n          return this.getTimeRangeParams(timeRange);\n        }\n\n        // otherwise we cant estimate the time range\n        return { start: undefined, end: undefined };\n      }\n    }\n\n    // metric query with range type\n    return this.getTimeRangeParams(timeRange);\n  }\n\n  /**\n   * Retrieves statistics for a Loki query and returns the QueryStats object.\n   * @returns A Promise that resolves to a QueryStats object or null if the query is invalid or has no statistics.\n   */\n  async getStats(query: LokiQuery, timeRange: TimeRange): Promise<QueryStats | null> {\n    if (!query.expr) {\n      return null;\n    }\n\n    const response = await this.getQueryStats(query, timeRange);\n\n    if (!response) {\n      return null;\n    }\n\n    return Object.values(response).every((v) => v === 0) ? null : response;\n  }\n\n  /**\n   * Implemented as part of DataSourceAPI and used for template variable queries.\n   * @returns A Promise that resolves to an array of results from the metric find query.\n   */\n  async metricFindQuery(\n    query: LokiVariableQuery | string,\n    options?: LegacyMetricFindQueryOptions\n  ): Promise<MetricFindValue[]> {\n    if (!query) {\n      return Promise.resolve([]);\n    }\n\n    let interpolatedVariableQuery: LokiVariableQuery | undefined;\n\n    if (typeof query === 'string') {\n      interpolatedVariableQuery = this.parseStringToVariableQuery(this.interpolateString(query, options?.scopedVars));\n    } else {\n      interpolatedVariableQuery = {\n        ...query,\n        label: this.interpolateString(query.label || '', options?.scopedVars),\n        stream: this.interpolateString(query.stream || '', options?.scopedVars),\n      };\n    }\n\n    if (interpolatedVariableQuery) {\n      return await this.processMetricFindQuery(interpolatedVariableQuery, options?.range);\n    }\n\n    return Promise.resolve([]);\n  }\n\n  /**\n   * Used within the `metricFindQuery`. Retrieves the correct variable results based on the provided LokiVariableQuery.\n   * @returns A Promise that resolves to an array of variable results based on the query type and parameters.\n   */\n\n  private async processMetricFindQuery(query: LokiVariableQuery, timeRange?: TimeRange): Promise<MetricFindValue[]> {\n    if (query.type === LokiVariableQueryType.LabelNames) {\n      const result = await this.languageProvider.fetchLabels({ timeRange });\n      return result.map((value: string) => ({ text: value }));\n    }\n\n    if (!query.label) {\n      return [];\n    }\n\n    const result = await this.languageProvider.fetchLabelValues(query.label, {\n      streamSelector: query.stream,\n      timeRange,\n    });\n    return result.map((value: string) => ({ text: value }));\n  }\n\n  /**\n   * Used in `metricFindQuery` to process legacy query strings (label_name() and label_values()) to variable query objects.\n   * @returns LokiVariableQuery object based on the provided query string, or undefined if string can't be parsed.\n   */\n  private parseStringToVariableQuery(query: string): LokiVariableQuery | undefined {\n    const refId = 'LokiVariableQueryEditor-VariableQuery';\n    const labelNames = query.match(labelNamesRegex);\n    if (labelNames) {\n      return {\n        type: LokiVariableQueryType.LabelNames,\n        refId,\n      };\n    }\n\n    const labelValues = query.match(labelValuesRegex);\n    if (labelValues) {\n      return {\n        type: LokiVariableQueryType.LabelValues,\n        label: labelValues[2],\n        stream: labelValues[1],\n        refId,\n      };\n    }\n    return undefined;\n  }\n\n  /**\n   * Used to fetch data samples, typically for autocompletion and query building to recommend parsers, labels, and values based on sampled data.\n   * Currently, it works for logs data only.\n   * @returns A Promise that resolves to an array of DataFrames containing data samples.\n   */\n  async getDataSamples(query: LokiQuery, timeRange: TimeRange): Promise<DataFrame[]> {\n    // Currently works only for logs sample\n    if (!isLogsQuery(query.expr) || isQueryWithError(this.interpolateString(query.expr, placeHolderScopedVars))) {\n      return [];\n    }\n\n    const lokiLogsQuery: LokiQuery = {\n      expr: query.expr,\n      queryType: LokiQueryType.Range,\n      refId: REF_ID_DATA_SAMPLES,\n      maxLines: query.maxLines || DEFAULT_MAX_LINES_SAMPLE,\n      supportingQueryType: SupportingQueryType.DataSample,\n    };\n\n    const request = makeRequest(lokiLogsQuery, timeRange, CoreApp.Unknown, REF_ID_DATA_SAMPLES, true);\n    return await lastValueFrom(this.query(request).pipe(switchMap((res) => of(res.data))));\n  }\n\n  /**\n   * Implemented as part of the DataSourceAPI. Retrieves tag keys that can be used for ad-hoc filtering.\n   * @returns A Promise that resolves to an array of label names represented as MetricFindValue objects.\n   */\n  async getTagKeys(options?: DataSourceGetTagKeysOptions<LokiQuery>): Promise<MetricFindValue[]> {\n    let streamSelector = '{}';\n    for (const filter of options?.filters ?? []) {\n      streamSelector = addLabelToQuery(streamSelector, filter.key, filter.operator, filter.value);\n    }\n    const result = await this.languageProvider.fetchLabels({ timeRange: options?.timeRange, streamSelector });\n    return result.map((value: string) => ({ text: value }));\n  }\n\n  /**\n   * Implemented as part of the DataSourceAPI. Retrieves tag values that can be used for ad-hoc filtering.\n   * @returns A Promise that resolves to an array of label values represented as MetricFindValue objects\n   */\n  async getTagValues(options: DataSourceGetTagValuesOptions<LokiQuery>): Promise<MetricFindValue[]> {\n    let streamSelector = '{}';\n    for (const filter of options?.filters ?? []) {\n      streamSelector = addLabelToQuery(streamSelector, filter.key, filter.operator, filter.value);\n    }\n    const result = await this.languageProvider.fetchLabelValues(options.key, {\n      timeRange: options.timeRange,\n      streamSelector,\n    });\n    return result.map((value: string) => ({ text: value }));\n  }\n\n  /**\n   * Used for interpolation logic in `interpolateVariablesInQueries` and `applyTemplateVariables`.\n   * Handles escaping of special characters based on variable type and value.\n   * @returns The interpolated value with appropriate character escaping.\n   */\n  interpolateQueryExpr(value: any, variable: QueryVariableModel | CustomVariableModel) {\n    // if no multi or include all do not regexEscape\n    if (!variable.multi && !variable.includeAll) {\n      return value;\n    }\n\n    if (typeof value === 'string') {\n      return lokiSpecialRegexEscape(value);\n    }\n\n    const escapedValues = lodashMap(value, lokiSpecialRegexEscape);\n    return escapedValues.join('|');\n  }\n\n  /**\n   * Implemented for `DataSourceWithToggleableQueryFiltersSupport`. Toggles a filter on or off based on the provided filter action.\n   * It is used for example in Explore to toggle fields on and off trough log details.\n   * @returns A new LokiQuery with the filter toggled as specified.\n   */\n  toggleQueryFilter(query: LokiQuery, filter: ToggleFilterAction): LokiQuery {\n    let expression = query.expr ?? '';\n    const labelType = getLabelTypeFromFrame(filter.options.key, filter.frame, 0);\n    switch (filter.type) {\n      case 'FILTER_FOR': {\n        if (filter.options?.key && filter.options?.value) {\n          const value = escapeLabelValueInSelector(filter.options.value);\n\n          // This gives the user the ability to toggle a filter on and off.\n          expression = queryHasFilter(expression, filter.options.key, '=', value)\n            ? removeLabelFromQuery(expression, filter.options.key, '=', value)\n            : addLabelToQuery(expression, filter.options.key, '=', value, labelType);\n        }\n        break;\n      }\n      case 'FILTER_OUT': {\n        if (filter.options?.key && filter.options?.value) {\n          const value = escapeLabelValueInSelector(filter.options.value);\n\n          /**\n           * If there is a filter with the same key and value, remove it.\n           * This prevents the user from seeing no changes in the query when they apply\n           * this filter.\n           */\n          if (queryHasFilter(expression, filter.options.key, '=', value)) {\n            expression = removeLabelFromQuery(expression, filter.options.key, '=', value);\n          }\n\n          expression = addLabelToQuery(expression, filter.options.key, '!=', value, labelType);\n        }\n        break;\n      }\n      default:\n        break;\n    }\n    return { ...query, expr: expression };\n  }\n\n  /**\n   * Implemented for `DataSourceWithToggleableQueryFiltersSupport`. Checks if a query expression contains a filter based on the provided filter options.\n   * @returns A boolean value indicating whether the filter exists in the query expression.\n   */\n  queryHasFilter(query: LokiQuery, filter: QueryFilterOptions): boolean {\n    let expression = query.expr ?? '';\n    return queryHasFilter(expression, filter.key, '=', filter.value);\n  }\n\n  /**\n   * Implemented as part of `DataSourceWithQueryModificationSupport`. Used to modify a query based on the provided action.\n   * It is used, for example, in the Query Builder to apply hints such as parsers, operations, etc.\n   * @returns A new LokiQuery with the specified modification applied.\n   */\n  modifyQuery(query: LokiQuery, action: QueryFixAction): LokiQuery {\n    let expression = query.expr ?? '';\n    // NB: Usually the labelKeys should be fetched and cached in the datasource,\n    // but there might be some edge cases where this wouldn't be the case.\n    // However the changed would make this method `async`.\n    switch (action.type) {\n      case 'ADD_FILTER': {\n        if (action.options?.key && action.options?.value) {\n          const labelType = getLabelTypeFromFrame(action.options.key, action.frame, 0);\n          const value = escapeLabelValueInSelector(action.options.value);\n          expression = addLabelToQuery(expression, action.options.key, '=', value, labelType);\n        }\n        break;\n      }\n      case 'ADD_FILTER_OUT': {\n        if (action.options?.key && action.options?.value) {\n          const labelType = getLabelTypeFromFrame(action.options.key, action.frame, 0);\n          const value = escapeLabelValueInSelector(action.options.value);\n          expression = addLabelToQuery(expression, action.options.key, '!=', value, labelType);\n        }\n        break;\n      }\n      case 'ADD_LOGFMT_PARSER': {\n        expression = addParserToQuery(expression, 'logfmt');\n        break;\n      }\n      case 'ADD_JSON_PARSER': {\n        expression = addParserToQuery(expression, 'json');\n        break;\n      }\n      case 'ADD_UNPACK_PARSER': {\n        expression = addParserToQuery(expression, 'unpack');\n        break;\n      }\n      case 'ADD_NO_PIPELINE_ERROR': {\n        expression = addNoPipelineErrorToQuery(expression);\n        break;\n      }\n      case 'ADD_LEVEL_LABEL_FORMAT': {\n        if (action.options?.originalLabel && action.options?.renameTo) {\n          expression = addLabelFormatToQuery(expression, {\n            renameTo: action.options.renameTo,\n            originalLabel: action.options.originalLabel,\n          });\n        }\n        break;\n      }\n      case 'ADD_LABEL_FILTER': {\n        const parserPositions = getParserPositions(query.expr);\n        const labelFilterPositions = getLabelFilterPositions(query.expr);\n        const lastPosition = findLastPosition([...parserPositions, ...labelFilterPositions]);\n        const filter = toLabelFilter('', '', '=');\n        expression = addFilterAsLabelFilter(expression, [lastPosition], filter);\n        break;\n      }\n      case 'ADD_STRING_FILTER':\n      case 'ADD_LINE_FILTER': {\n        expression = addLineFilter(expression, action.options?.value);\n        break;\n      }\n      case 'ADD_STRING_FILTER_OUT':\n      case 'ADD_LINE_FILTER_OUT': {\n        expression = addLineFilter(expression, action.options?.value, '!=');\n        break;\n      }\n      default:\n        break;\n    }\n    return { ...query, expr: expression };\n  }\n\n  /**\n   * Implemented as part of `DataSourceWithQueryModificationSupport`. Returns a list of operation\n   * types that are supported by `modifyQuery()`.\n   */\n  getSupportedQueryModifications() {\n    return [\n      'ADD_FILTER',\n      'ADD_FILTER_OUT',\n      'ADD_LOGFMT_PARSER',\n      'ADD_JSON_PARSER',\n      'ADD_UNPACK_PARSER',\n      'ADD_NO_PIPELINE_ERROR',\n      'ADD_LEVEL_LABEL_FORMAT',\n      'ADD_LABEL_FILTER',\n      'ADD_STRING_FILTER',\n      'ADD_STRING_FILTER_OUT',\n    ];\n  }\n\n  /**\n   * Part of `DataSourceWithLogsContextSupport`, used to retrieve log context for a log row.\n   * @returns A promise that resolves to an object containing the log context data as DataFrames.\n   */\n  getLogRowContext = async (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    origQuery?: DataQuery\n  ): Promise<{ data: DataFrame[] }> => {\n    return await this.logContextProvider.getLogRowContext(row, options, getLokiQueryFromDataQuery(origQuery));\n  };\n  /**\n   * Part of `DataSourceWithLogsContextSupport`, used to retrieve the log context query for the provided log row and original query.\n   * @returns A promise that resolves to a DataQuery representing the log context query.\n   */\n  getLogRowContextQuery = async (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    origQuery?: DataQuery,\n    cacheFilters?: boolean\n  ): Promise<DataQuery> => {\n    return await this.logContextProvider.getLogRowContextQuery(\n      row,\n      options,\n      getLokiQueryFromDataQuery(origQuery),\n      cacheFilters\n    );\n  };\n\n  /**\n   * Part of `DataSourceWithLogsContextSupport`, used to retrieve the log context UI for the provided log row and original query.\n   * @returns A React component or element representing the log context UI for the log row.\n   */\n  getLogRowContextUi(\n    row: LogRowModel,\n    runContextQuery: () => void,\n    origQuery: DataQuery,\n    scopedVars?: ScopedVars\n  ): React.ReactNode {\n    return this.logContextProvider.getLogRowContextUi(\n      row,\n      runContextQuery,\n      getLokiQueryFromDataQuery(origQuery),\n      scopedVars\n    );\n  }\n\n  /**\n   * Implemented as part of the DataSourceAPI. It allows the datasource to serve as a source of annotations for a dashboard.\n   * @returns A promise that resolves to an array of AnnotationEvent objects representing the annotations for the dashboard.\n   * @todo This is deprecated and it is recommended to use the `AnnotationSupport` feature for annotations.\n   */\n  async annotationQuery(options: any): Promise<AnnotationEvent[]> {\n    const { expr, maxLines, instant, tagKeys = '', titleFormat = '', textFormat = '' } = options.annotation;\n\n    if (!expr) {\n      return [];\n    }\n\n    const id = `${REF_ID_STARTER_ANNOTATION}${options.annotation.name}`;\n\n    const query: LokiQuery = {\n      refId: id,\n      expr,\n      maxLines,\n      instant,\n      queryType: instant ? LokiQueryType.Instant : LokiQueryType.Range,\n    };\n\n    const request = makeRequest(query, options.range, CoreApp.Dashboard, id);\n\n    const { data } = await lastValueFrom(this.query(request));\n\n    const annotations: AnnotationEvent[] = [];\n    const splitKeys: string[] = tagKeys.split(',').filter((v: string) => v !== '');\n\n    const isDataplaneLog = config.featureToggles.lokiLogsDataplane;\n\n    for (const frame of data) {\n      const view = new DataFrameView<{ timestamp: string; Time: string; body: string; Line: string; labels: Labels }>(\n        frame\n      );\n\n      view.forEach((row) => {\n        const { labels } = row;\n\n        const maybeDuplicatedTags = Object.entries(labels)\n          .map(([key, val]) => [key, val.trim()]) // trim all label-values\n          .filter(([key, val]) => {\n            if (val === '') {\n              // remove empty\n              return false;\n            }\n\n            // if tags are specified, remove label if does not match tags\n            if (splitKeys.length && !splitKeys.includes(key)) {\n              return false;\n            }\n\n            return true;\n          })\n          .map(([_, val]) => val); // keep only the label-value\n\n        // remove duplicates\n        const tags = Array.from(new Set(maybeDuplicatedTags));\n\n        const logLine = isDataplaneLog ? row.body : row.Line;\n\n        annotations.push({\n          time: isDataplaneLog ? new Date(row.timestamp).valueOf() : new Date(row.Time).valueOf(),\n          title: renderLegendFormat(titleFormat, labels),\n          text: renderLegendFormat(textFormat, labels) || logLine,\n          tags,\n        });\n      });\n    }\n\n    return annotations;\n  }\n\n  /**\n   * Adds ad hoc filters to a query expression, handling proper escaping of filter values.\n   * @returns The query expression with ad hoc filters and correctly escaped values.\n   * @todo this.templateSrv.getAdhocFilters() is deprecated\n   */\n  addAdHocFilters(queryExpr: string, adhocFilters?: AdHocVariableFilter[]) {\n    if (!adhocFilters?.length) {\n      return queryExpr;\n    }\n\n    let expr = replaceVariables(queryExpr);\n\n    expr = adhocFilters.reduce((acc: string, filter: { key: string; operator: string; value: string }) => {\n      const { key, operator } = filter;\n      let { value } = filter;\n      if (!isRegexSelector(operator)) {\n        // We want to escape special characters in value for non-regex selectors to match the same char in the log line as the user types in the input\n        value = escapeLabelValueInSelector(value, operator);\n      }\n      return addLabelToQuery(acc, key, operator, value);\n    }, expr);\n\n    return returnVariables(expr);\n  }\n\n  /**\n   * Filters out queries that are empty or hidden. Used when running queries through backend.\n   * It is called from DatasourceWithBackend.\n   * @returns `true` if the query is not hidden and its expression is not empty; `false` otherwise.\n   */\n  filterQuery(query: LokiQuery): boolean {\n    if (query.hide || query.expr === '') {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Applies template variables and add hoc filters to a query. Used when running queries through backend.\n   * It is called from DatasourceWithBackend.\n   * @returns A modified Loki query with template variables and ad hoc filters applied.\n   */\n  applyTemplateVariables(target: LokiQuery, scopedVars: ScopedVars, adhocFilters?: AdHocVariableFilter[]): LokiQuery {\n    // We want to interpolate these variables on backend because we support using them in\n    // alerting/ML queries and we want to have consistent interpolation for all queries\n    const { __auto, __interval, __interval_ms, __range, __range_s, __range_ms, ...rest } = scopedVars || {};\n\n    const variables = {\n      ...rest,\n\n      // pass through for backend interpolation. Need to be in scopedVars for Scenes though\n      __interval: {\n        value: '$__interval',\n      },\n      __interval_ms: {\n        value: '$__interval_ms',\n      },\n    };\n\n    const exprWithAdHoc = this.addAdHocFilters(\n      this.templateSrv.replace(target.expr, variables, this.interpolateQueryExpr),\n      adhocFilters\n    );\n\n    const step = this.templateSrv.replace(target.step, variables);\n    const legendFormat = this.templateSrv.replace(target.legendFormat, variables);\n\n    return {\n      ...target,\n      expr: exprWithAdHoc,\n      step,\n      legendFormat,\n    };\n  }\n\n  /**\n   * Interpolates template variables in a given string. Template variables are passed trough scopedVars.\n   * @returns The string with template variables replaced by their values.\n   */\n  interpolateString(string: string, scopedVars?: ScopedVars) {\n    return this.templateSrv.replace(string, scopedVars, this.interpolateQueryExpr);\n  }\n\n  /**\n   * Retrieves and returns a list of variable names used in the template service.\n   * Used for example in the Query Builder to populate the variable dropdown with template variables.\n   * @returns An array of variable names, each prefixed with '$'.\n   */\n  getVariables(): string[] {\n    return this.templateSrv.getVariables().map((v) => `$${v.name}`);\n  }\n  /**\n   * Retrieves query hints for query improvements based on a Loki query and its result data.\n   * Used in Query builder to provide hints for query improvements, such as adding a parser, etc.\n   * @returns An array of query hints for potential query improvements.\n   */\n  getQueryHints(query: LokiQuery, result: DataFrame[]): QueryHint[] {\n    return getQueryHints(query.expr, result);\n  }\n\n  /**\n   * Get a default LokiQuery based on the specified app. Currently used in UnifiedAlerting.\n   * @returns A default LokiQuery object with appropriate settings for the given application.\n   */\n  getDefaultQuery(app: CoreApp): LokiQuery {\n    const defaults = { refId: 'A', expr: '' };\n\n    if (app === CoreApp.UnifiedAlerting) {\n      return {\n        ...defaults,\n        queryType: LokiQueryType.Instant,\n      };\n    }\n\n    return {\n      ...defaults,\n      queryType: LokiQueryType.Range,\n    };\n  }\n}\nexport function lokiSpecialRegexEscape<T>(value: T) {\n  if (typeof value === 'string') {\n    return value.replace(/\\\\/g, '\\\\\\\\\\\\\\\\').replace(/[$^*{}\\[\\]+?.()|]/g, '\\\\\\\\$&');\n  }\n  return value;\n}\n","import { DataFrame, QueryHint } from '@grafana/data';\n\nimport {\n  isQueryWithLabelFilter,\n  isQueryPipelineErrorFiltering,\n  isQueryWithLabelFormat,\n  isQueryWithParser,\n  isQueryWithLineFilter,\n} from './queryUtils';\nimport {\n  dataFrameHasLevelLabel,\n  extractHasErrorLabelFromDataFrame,\n  extractLevelLikeLabelFromDataFrame,\n  extractLogParserFromDataFrame,\n} from './responseUtils';\n\nexport function getQueryHints(query: string, series: DataFrame[]): QueryHint[] {\n  if (series.length === 0) {\n    return [];\n  }\n\n  const hints: QueryHint[] = [];\n  const { queryWithParser, parserCount } = isQueryWithParser(query);\n\n  if (!queryWithParser) {\n    const { hasLogfmt, hasJSON, hasPack } = extractLogParserFromDataFrame(series[0]);\n    if (hasJSON) {\n      if (hasPack) {\n        hints.push({\n          type: 'ADD_UNPACK_PARSER',\n          label: 'Selected log stream selector has packed logs.',\n          fix: {\n            title: 'add unpack parser',\n            label: 'Consider using unpack parser.',\n            action: {\n              type: 'ADD_UNPACK_PARSER',\n              query,\n            },\n          },\n        });\n      } else {\n        hints.push({\n          type: 'ADD_JSON_PARSER',\n          label: 'Selected log stream selector has JSON formatted logs.',\n          fix: {\n            title: 'add json parser',\n            label: 'Consider using JSON parser.',\n            action: {\n              type: 'ADD_JSON_PARSER',\n              query,\n            },\n          },\n        });\n      }\n    }\n\n    if (hasLogfmt) {\n      hints.push({\n        type: 'ADD_LOGFMT_PARSER',\n        label: 'Selected log stream selector has logfmt formatted logs.',\n        fix: {\n          title: 'add logfmt parser',\n          label: 'Consider using logfmt parser to turn key-value pairs in your log lines to labels.',\n          action: {\n            type: 'ADD_LOGFMT_PARSER',\n            query,\n          },\n        },\n      });\n    }\n  }\n\n  if (queryWithParser) {\n    // To keep this simple, we consider pipeline error filtering hint only is query has up to 1 parser\n    if (parserCount === 1) {\n      const hasPipelineErrorFiltering = isQueryPipelineErrorFiltering(query);\n      const hasError = extractHasErrorLabelFromDataFrame(series[0]);\n      if (hasError && !hasPipelineErrorFiltering) {\n        hints.push({\n          type: 'ADD_NO_PIPELINE_ERROR',\n          label: 'Some logs in your selected log streams have parsing error.',\n          fix: {\n            title: 'remove pipeline errors',\n            label: 'Consider filtering out logs with parsing errors.',\n            action: {\n              type: 'ADD_NO_PIPELINE_ERROR',\n              query,\n            },\n          },\n        });\n      }\n    }\n\n    const hasLabelFilter = isQueryWithLabelFilter(query);\n\n    if (!hasLabelFilter) {\n      hints.push({\n        type: 'ADD_LABEL_FILTER',\n        label: 'Consider filtering logs by their label and value.',\n        fix: {\n          title: 'add label filter',\n          label: '',\n          action: {\n            type: 'ADD_LABEL_FILTER',\n            query,\n          },\n        },\n      });\n    }\n  }\n\n  const queryWithLabelFormat = isQueryWithLabelFormat(query);\n  if (!queryWithLabelFormat) {\n    const hasLevel = dataFrameHasLevelLabel(series[0]);\n    const levelLikeLabel = extractLevelLikeLabelFromDataFrame(series[0]);\n\n    // Add hint only if we don't have \"level\" label and have level-like label\n    if (!hasLevel && levelLikeLabel) {\n      hints.push({\n        type: 'ADD_LEVEL_LABEL_FORMAT',\n        label: `Some logs in your selected log stream have \"${levelLikeLabel}\" label.`,\n        fix: {\n          title: 'add label level format',\n          label: `If ${levelLikeLabel} label has level values, consider using label_format to rename it to \"level\". Level label can be then visualized in log volumes.`,\n          action: {\n            type: 'ADD_LEVEL_LABEL_FORMAT',\n            query,\n            options: {\n              renameTo: 'level',\n              originalLabel: levelLikeLabel,\n            },\n          },\n        },\n      });\n    }\n  }\n\n  const hasLineFilter = isQueryWithLineFilter(query);\n\n  if (!hasLineFilter) {\n    hints.push({\n      type: 'ADD_LINE_FILTER',\n      label: 'Consider filtering logs for specific string.',\n      fix: {\n        title: 'add line filter',\n        label: '',\n        action: {\n          type: 'ADD_LINE_FILTER',\n          query,\n        },\n      },\n    });\n  }\n\n  return hints;\n}\n","import { invert } from 'lodash';\n\nimport { AbstractLabelMatcher, AbstractLabelOperator, AbstractQuery, DataFrame, TimeRange } from '@grafana/data';\n\nimport { LabelType } from './types';\n\nfunction roundMsToMin(milliseconds: number): number {\n  return roundSecToMin(milliseconds / 1000);\n}\n\nfunction roundSecToMin(seconds: number): number {\n  return Math.floor(seconds / 60);\n}\n\nexport function shouldRefreshLabels(range?: TimeRange, prevRange?: TimeRange): boolean {\n  if (range && prevRange) {\n    const sameMinuteFrom = roundMsToMin(range.from.valueOf()) === roundMsToMin(prevRange.from.valueOf());\n    const sameMinuteTo = roundMsToMin(range.to.valueOf()) === roundMsToMin(prevRange.to.valueOf());\n    // If both are same, don't need to refresh\n    return !(sameMinuteFrom && sameMinuteTo);\n  }\n  return false;\n}\n\n// Loki regular-expressions use the RE2 syntax (https://github.com/google/re2/wiki/Syntax),\n// so every character that matches something in that list has to be escaped.\n// the list of meta characters is: *+?()|\\.[]{}^$\n// we make a javascript regular expression that matches those characters:\nconst RE2_METACHARACTERS = /[*+?()|\\\\.\\[\\]{}^$]/g;\nfunction escapeLokiRegexp(value: string): string {\n  return value.replace(RE2_METACHARACTERS, '\\\\$&');\n}\n\n// based on the openmetrics-documentation, the 3 symbols we have to handle are:\n// - \\n ... the newline character\n// - \\  ... the backslash character\n// - \"  ... the double-quote character\nexport function escapeLabelValueInExactSelector(labelValue: string): string {\n  return labelValue.replace(/\\\\/g, '\\\\\\\\').replace(/\\n/g, '\\\\n').replace(/\"/g, '\\\\\"');\n}\n\nexport function unescapeLabelValue(labelValue: string): string {\n  return labelValue.replace(/\\\\n/g, '\\n').replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\n}\n\nexport function escapeLabelValueInRegexSelector(labelValue: string): string {\n  return escapeLabelValueInExactSelector(escapeLokiRegexp(labelValue));\n}\n\nexport function escapeLabelValueInSelector(labelValue: string, selector?: string): string {\n  return isRegexSelector(selector)\n    ? escapeLabelValueInRegexSelector(labelValue)\n    : escapeLabelValueInExactSelector(labelValue);\n}\n\nexport function isRegexSelector(selector?: string) {\n  if (selector && (selector.includes('=~') || selector.includes('!~'))) {\n    return true;\n  }\n  return false;\n}\n\nexport function isBytesString(string: string) {\n  const BYTES_KEYWORDS = [\n    'b',\n    'kib',\n    'Kib',\n    'kb',\n    'KB',\n    'mib',\n    'Mib',\n    'mb',\n    'MB',\n    'gib',\n    'Gib',\n    'gb',\n    'GB',\n    'tib',\n    'Tib',\n    'tb',\n    'TB',\n    'pib',\n    'Pib',\n    'pb',\n    'PB',\n    'eib',\n    'Eib',\n    'eb',\n    'EB',\n  ];\n  const regex = new RegExp(`^(?:-?\\\\d+(?:\\\\.\\\\d+)?)(?:${BYTES_KEYWORDS.join('|')})$`);\n  const match = string.match(regex);\n  return !!match;\n}\n\nexport function getLabelTypeFromFrame(labelKey: string, frame?: DataFrame, index?: number): null | LabelType {\n  if (!frame || index === undefined) {\n    return null;\n  }\n\n  const typeField = frame.fields.find((field) => field.name === 'labelTypes')?.values[index];\n  if (!typeField) {\n    return null;\n  }\n  switch (typeField[labelKey]) {\n    case 'I':\n      return LabelType.Indexed;\n    case 'S':\n      return LabelType.StructuredMetadata;\n    case 'P':\n      return LabelType.Parsed;\n    default:\n      return null;\n  }\n}\n\nexport const mapOpToAbstractOp: Record<AbstractLabelOperator, string> = {\n  [AbstractLabelOperator.Equal]: '=',\n  [AbstractLabelOperator.NotEqual]: '!=',\n  [AbstractLabelOperator.EqualRegEx]: '=~',\n  [AbstractLabelOperator.NotEqualRegEx]: '!~',\n};\n\n// eslint-disable-next-line @typescript-eslint/consistent-type-assertions\nexport const mapAbstractOperatorsToOp = invert(mapOpToAbstractOp) as Record<string, AbstractLabelOperator>;\n\nexport function abstractQueryToExpr(labelBasedQuery: AbstractQuery): string {\n  const expr = labelBasedQuery.labelMatchers\n    .map((selector: AbstractLabelMatcher) => {\n      const operator = mapOpToAbstractOp[selector.operator];\n      if (operator) {\n        return `${selector.name}${operator}\"${selector.value}\"`;\n      } else {\n        return '';\n      }\n    })\n    .filter((e: string) => e !== '')\n    .join(', ');\n\n  return expr ? `{${expr}}` : '';\n}\n\nexport function processLabels(labels: Array<{ [key: string]: string }>) {\n  const valueSet: { [key: string]: Set<string> } = {};\n  labels.forEach((label) => {\n    Object.keys(label).forEach((key) => {\n      if (!valueSet[key]) {\n        valueSet[key] = new Set();\n      }\n      if (!valueSet[key].has(label[key])) {\n        valueSet[key].add(label[key]);\n      }\n    });\n  });\n\n  const valueArray: { [key: string]: string[] } = {};\n  limitSuggestions(Object.keys(valueSet)).forEach((key) => {\n    valueArray[key] = limitSuggestions(Array.from(valueSet[key]));\n  });\n\n  return { values: valueArray, keys: Object.keys(valueArray) };\n}\n\n// Max number of items (metrics, labels, values) that we display as suggestions. Prevents from running out of memory.\nexport const SUGGESTIONS_LIMIT = 10000;\nexport function limitSuggestions(items: string[]) {\n  return items.slice(0, SUGGESTIONS_LIMIT);\n}\n","import { NodeType, SyntaxNode } from '@lezer/common';\nimport { sortBy } from 'lodash';\n\nimport {\n  Identifier,\n  LabelFilter,\n  LabelParser,\n  LineComment,\n  LineFilters,\n  LogExpr,\n  LogRangeExpr,\n  Matcher,\n  parser,\n  PipelineExpr,\n  Selector,\n  UnwrapExpr,\n  String,\n  PipelineStage,\n  LogfmtParser,\n  JsonExpressionParser,\n  LogfmtExpressionParser,\n  Expr,\n  LabelFormatExpr,\n} from '@grafana/lezer-logql';\nimport { QueryBuilderLabelFilter } from '@grafana/plugin-ui';\n\nimport { unescapeLabelValue } from './languageUtils';\nimport { getNodePositionsFromQuery } from './queryUtils';\nimport { lokiQueryModeller as modeller } from './querybuilder/LokiQueryModeller';\nimport { buildVisualQueryFromString, handleQuotes } from './querybuilder/parsing';\nimport { LabelType } from './types';\n\nexport class NodePosition {\n  from: number;\n  to: number;\n  type?: NodeType;\n\n  constructor(from: number, to: number, type?: NodeType) {\n    this.from = from;\n    this.to = to;\n    this.type = type;\n  }\n\n  static fromNode(node: SyntaxNode): NodePosition {\n    return new NodePosition(node.from, node.to, node.type);\n  }\n\n  contains(position: NodePosition): boolean {\n    return this.from <= position.from && this.to >= position.to;\n  }\n\n  getExpression(query: string): string {\n    return query.substring(this.from, this.to);\n  }\n}\n\n/**\n * Checks for the presence of a given label=value filter in any Matcher expression in the query.\n */\nexport function queryHasFilter(query: string, key: string, operator: string, value: string): boolean {\n  const matchers = getMatchersWithFilter(query, key, operator, value);\n  return matchers.length > 0;\n}\n\n/**\n * Removes a label=value Matcher expression from the query.\n */\nexport function removeLabelFromQuery(query: string, key: string, operator: string, value: string): string {\n  const matchers = getMatchersWithFilter(query, key, operator, value);\n  for (const matcher of matchers) {\n    query =\n      matcher.parent?.type.id === LabelFilter ? removeLabelFilter(query, matcher) : removeSelector(query, matcher);\n  }\n  return query;\n}\n\nfunction removeLabelFilter(query: string, matcher: SyntaxNode): string {\n  const pipelineStage = matcher.parent?.parent;\n  if (!pipelineStage || pipelineStage.type.id !== PipelineStage) {\n    return query;\n  }\n  return (query.substring(0, pipelineStage.from) + query.substring(pipelineStage.to)).trim();\n}\n\nfunction removeSelector(query: string, matcher: SyntaxNode): string {\n  let selector: SyntaxNode | null = matcher;\n  do {\n    selector = selector.parent;\n  } while (selector && selector.type.id !== Selector);\n  const label = matcher.getChild(Identifier);\n  if (!selector || !label) {\n    return query;\n  }\n  const labelName = query.substring(label.from, label.to);\n\n  const prefix = query.substring(0, selector.from);\n  const suffix = query.substring(selector.to);\n\n  const matchVisQuery = buildVisualQueryFromString(query.substring(selector.from, selector.to));\n  matchVisQuery.query.labels = matchVisQuery.query.labels.filter((label) => label.label !== labelName);\n\n  return prefix + modeller.renderQuery(matchVisQuery.query) + suffix;\n}\n\nfunction getMatchersWithFilter(query: string, label: string, operator: string, value: string): SyntaxNode[] {\n  const tree = parser.parse(query);\n  const matchers: SyntaxNode[] = [];\n  tree.iterate({\n    enter: ({ type, node }): void => {\n      if (type.id === Matcher) {\n        matchers.push(node);\n      }\n    },\n  });\n  return matchers.filter((matcher) => {\n    const labelNode = matcher.getChild(Identifier);\n    const opNode = labelNode?.nextSibling;\n    const valueNode = matcher.getChild(String);\n    if (!labelNode || !opNode || !valueNode) {\n      return false;\n    }\n    const labelName = query.substring(labelNode.from, labelNode.to);\n    if (labelName !== label) {\n      return false;\n    }\n    const labelValue = query.substring(valueNode.from, valueNode.to);\n    if (handleQuotes(labelValue) !== unescapeLabelValue(value)) {\n      return false;\n    }\n    const labelOperator = query.substring(opNode.from, opNode.to);\n    if (labelOperator !== operator) {\n      return false;\n    }\n    return true;\n  });\n}\n\n/**\n * Adds label filter to existing query. Useful for query modification for example for ad hoc filters.\n *\n * It uses LogQL parser to find instances of labels, alters them and then splices them back into the query.\n * In a case when we have parser, instead of adding new instance of label it adds label filter after the parser.\n *\n * This operates on substrings of the query with labels and operates just on those. This makes this\n * more robust and can alter even invalid queries, and preserves in general the query structure and whitespace.\n */\nexport function addLabelToQuery(\n  query: string,\n  key: string,\n  operator: string,\n  value: string,\n  labelType?: LabelType | null\n): string {\n  if (!key) {\n    throw new Error('Need label to add to query.');\n  }\n\n  const streamSelectorPositions = getStreamSelectorPositions(query);\n  if (!streamSelectorPositions.length) {\n    return query;\n  }\n\n  const parserPositions = getParserPositions(query);\n  const labelFilterPositions = getLabelFilterPositions(query);\n  const hasStreamSelectorMatchers = getMatcherInStreamPositions(query);\n  // For non-indexed labels we want to add them after label_format to, for example, allow ad-hoc filters to use formatted labels\n  const labelFormatPositions = getNodePositionsFromQuery(query, [LabelFormatExpr]);\n\n  // If the label type wasn't passed in from the calling function, we can use lezer to figure out if this label is already in the stream selectors\n  if (!labelType) {\n    const identifierSelectorMatchers = getIdentifierInStreamPositions(query);\n    const indexedKeys = identifierSelectorMatchers.map((match) => match.getExpression(query));\n    if (indexedKeys.includes(key)) {\n      labelType = LabelType.Indexed;\n    }\n  }\n\n  const everyStreamSelectorHasMatcher = streamSelectorPositions.every((streamSelectorPosition) =>\n    hasStreamSelectorMatchers.some(\n      (matcherPosition) =>\n        matcherPosition.from >= streamSelectorPosition.from && matcherPosition.to <= streamSelectorPosition.to\n    )\n  );\n\n  const filter = toLabelFilter(key, value, operator);\n  if (labelType === LabelType.Parsed || labelType === LabelType.StructuredMetadata) {\n    const lastPositionsPerExpression = getLastPositionPerExpression(query, [\n      ...streamSelectorPositions,\n      ...labelFilterPositions,\n      ...parserPositions,\n      ...labelFormatPositions,\n    ]);\n\n    return addFilterAsLabelFilter(query, lastPositionsPerExpression, filter);\n  } else if (labelType === LabelType.Indexed) {\n    return addFilterToStreamSelector(query, streamSelectorPositions, filter);\n  } else {\n    // labelType is not set, so we need to figure out where to add the label\n    // if we don't have a parser, or have empty stream selectors, we will just add it to the stream selector\n    if (parserPositions.length === 0 || everyStreamSelectorHasMatcher === false) {\n      return addFilterToStreamSelector(query, streamSelectorPositions, filter);\n    } else {\n      // If `labelType` is not set, it indicates a potential metric query (`labelType` is present only in log queries that came from a Loki instance supporting the `categorize-labels` API). In case we are not adding the label to stream selectors we need to find the last position to add in each expression.\n      // E.g. in `sum(rate({foo=\"bar\"} | logfmt [$__auto])) / sum(rate({foo=\"baz\"} | logfmt [$__auto]))` we need to add the label at two places.\n      const lastPositionsPerExpression = getLastPositionPerExpression(query, [\n        ...parserPositions,\n        ...labelFilterPositions,\n        ...labelFormatPositions,\n      ]);\n\n      return addFilterAsLabelFilter(query, lastPositionsPerExpression, filter);\n    }\n  }\n}\n\nfunction getLastPositionPerExpression(query: string, positions: NodePosition[]): NodePosition[] {\n  const subExpressions = findLeaves(getNodePositionsFromQuery(query, [Expr]));\n  const subPositions = [...positions];\n\n  // find last position for each subexpression\n  const lastPositionsPerExpression = subExpressions.map((subExpression) => {\n    return findLastPosition(\n      subPositions.filter((p) => {\n        return subExpression.contains(p);\n      })\n    );\n  });\n  return lastPositionsPerExpression;\n}\n\n/**\n * Adds parser to existing query. Useful for query modification for hints.\n * It uses LogQL parser to find instances of stream selectors or line filters and adds parser after them.\n *\n * @param query\n * @param parser\n */\nexport function addParserToQuery(query: string, parser: string): string {\n  const lineFilterPositions = getLineFiltersPositions(query);\n\n  if (lineFilterPositions.length) {\n    return appendToLogsQuery(query, lineFilterPositions, parser);\n  } else {\n    const streamSelectorPositions = getStreamSelectorPositions(query);\n    if (!streamSelectorPositions.length) {\n      return query;\n    }\n    return appendToLogsQuery(query, streamSelectorPositions, parser);\n  }\n}\n\n/**\n * Adds a drop statement to the query.\n * It uses LogQL parser to find instances of stream selectors or line filters and adds parser after them.\n *\n * @param query\n * @param parser\n */\nexport function addDropToQuery(query: string, labelsToDrop: string[]): string {\n  const lineFilterPositions = getLineFiltersPositions(query);\n\n  if (lineFilterPositions.length) {\n    return appendToLogsQuery(query, lineFilterPositions, `drop ${labelsToDrop.join(', ')}`);\n  } else {\n    const streamSelectorPositions = getStreamSelectorPositions(query);\n    if (!streamSelectorPositions.length) {\n      return query;\n    }\n    return appendToLogsQuery(query, streamSelectorPositions, `drop ${labelsToDrop.join(', ')}`);\n  }\n}\n\n/**\n * Adds a statement after line filters or stream selectors\n * @param query\n * @param queryPartPositions\n * @param parser\n */\nfunction appendToLogsQuery(query: string, queryPartPositions: NodePosition[], statement: string): string {\n  let newQuery = '';\n  let prev = 0;\n\n  for (let i = 0; i < queryPartPositions.length; i++) {\n    // Splice on a string for each matched vector selector\n    const match = queryPartPositions[i];\n    const isLast = i === queryPartPositions.length - 1;\n\n    const start = query.substring(prev, match.to);\n    const end = isLast ? query.substring(match.to) : '';\n\n    // Add parser\n    newQuery += start + ` | ${statement}` + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\n\n/**\n * Adds filtering for pipeline errors to existing query. Useful for query modification for hints.\n * It uses LogQL parser to find parsers and adds pipeline errors filtering after them.\n *\n * @param query\n */\nexport function addNoPipelineErrorToQuery(query: string): string {\n  const parserPositions = getParserPositions(query);\n  if (!parserPositions.length) {\n    return query;\n  }\n\n  const filter = toLabelFilter('__error__', '', '=');\n  return addFilterAsLabelFilter(query, parserPositions, filter);\n}\n\n/**\n * Adds label format to existing query. Useful for query modification for hints.\n * It uses LogQL parser to find log query and add label format at the end.\n *\n * @param query\n * @param labelFormat\n */\nexport function addLabelFormatToQuery(query: string, labelFormat: { originalLabel: string; renameTo: string }): string {\n  const logQueryPositions = getLogQueryPositions(query);\n  return addLabelFormat(query, logQueryPositions, labelFormat);\n}\n\n/**\n * Removes all comments from query.\n * It uses  LogQL parser to find all LineComments and removes them.\n */\nexport function removeCommentsFromQuery(query: string): string {\n  const lineCommentPositions = getLineCommentPositions(query);\n\n  if (!lineCommentPositions.length) {\n    return query;\n  }\n\n  let newQuery = '';\n  let prev = 0;\n\n  for (let lineCommentPosition of lineCommentPositions) {\n    newQuery = newQuery + query.substring(prev, lineCommentPosition.from);\n    prev = lineCommentPosition.to;\n  }\n  newQuery = newQuery + query.substring(prev);\n  return newQuery;\n}\n\n/**\n * Parse the string and get all Selector positions in the query together with parsed representation of the\n * selector.\n * @param query\n */\nexport function getStreamSelectorPositions(query: string): NodePosition[] {\n  const tree = parser.parse(query);\n  const positions: NodePosition[] = [];\n  tree.iterate({\n    enter: ({ type, node }): false | void => {\n      if (type.id === Selector) {\n        positions.push(NodePosition.fromNode(node));\n        return false;\n      }\n    },\n  });\n  return positions;\n}\n\n/**\n * Parse the string and get all LabelParser positions in the query.\n * @param query\n */\nexport function getParserPositions(query: string): NodePosition[] {\n  const tree = parser.parse(query);\n  const positions: NodePosition[] = [];\n  const parserNodeTypes = [LabelParser, JsonExpressionParser, LogfmtParser, LogfmtExpressionParser];\n  tree.iterate({\n    enter: ({ type, node }): false | void => {\n      if (parserNodeTypes.includes(type.id)) {\n        positions.push(NodePosition.fromNode(node));\n        return false;\n      }\n    },\n  });\n  return positions;\n}\n\n/**\n * Parse the string and get all LabelFilter positions in the query.\n * @param query\n */\nexport function getLabelFilterPositions(query: string): NodePosition[] {\n  const tree = parser.parse(query);\n  const positions: NodePosition[] = [];\n  tree.iterate({\n    enter: ({ type, node }): false | void => {\n      if (type.id === LabelFilter) {\n        positions.push(NodePosition.fromNode(node));\n        return false;\n      }\n    },\n  });\n  return positions;\n}\n\n/**\n * Parse the string and get all Line filter positions in the query.\n * @param query\n */\nfunction getLineFiltersPositions(query: string): NodePosition[] {\n  const tree = parser.parse(query);\n  const positions: NodePosition[] = [];\n  tree.iterate({\n    enter: ({ type, node }): false | void => {\n      if (type.id === LineFilters) {\n        positions.push(NodePosition.fromNode(node));\n        return false;\n      }\n    },\n  });\n  return positions;\n}\n\n/**\n * Parse the string and get all Log query positions in the query.\n * @param query\n */\nfunction getLogQueryPositions(query: string): NodePosition[] {\n  const tree = parser.parse(query);\n  const positions: NodePosition[] = [];\n  tree.iterate({\n    enter: ({ type, node }): false | void => {\n      if (type.id === LogExpr) {\n        positions.push(NodePosition.fromNode(node));\n        return false;\n      }\n\n      // This is a case in metrics query\n      if (type.id === LogRangeExpr) {\n        // Unfortunately, LogRangeExpr includes both log and non-log (e.g. Duration/Range/...) parts of query.\n        // We get position of all log-parts within LogRangeExpr: Selector, PipelineExpr and UnwrapExpr.\n        const logPartsPositions: NodePosition[] = [];\n        const selector = node.getChild(Selector);\n        if (selector) {\n          logPartsPositions.push(NodePosition.fromNode(selector));\n        }\n\n        const pipeline = node.getChild(PipelineExpr);\n        if (pipeline) {\n          logPartsPositions.push(NodePosition.fromNode(pipeline));\n        }\n\n        const unwrap = node.getChild(UnwrapExpr);\n        if (unwrap) {\n          logPartsPositions.push(NodePosition.fromNode(unwrap));\n        }\n\n        // We sort them and then pick \"from\" from first position and \"to\" from last position.\n        const sorted = sortBy(logPartsPositions, (position) => position.to);\n        positions.push(new NodePosition(sorted[0].from, sorted[sorted.length - 1].to));\n        return false;\n      }\n    },\n  });\n  return positions;\n}\n\nexport function toLabelFilter(key: string, value: string, operator: string): QueryBuilderLabelFilter {\n  // We need to make sure that we convert the value back to string because it may be a number\n  return { label: key, op: operator, value };\n}\n\n/**\n * Add filter as to stream selectors\n * @param query\n * @param vectorSelectorPositions\n * @param filter\n */\nfunction addFilterToStreamSelector(\n  query: string,\n  vectorSelectorPositions: NodePosition[],\n  filter: QueryBuilderLabelFilter\n): string {\n  let newQuery = '';\n  let prev = 0;\n\n  for (let i = 0; i < vectorSelectorPositions.length; i++) {\n    // This is basically just doing splice on a string for each matched vector selector.\n    const match = vectorSelectorPositions[i];\n    const isLast = i === vectorSelectorPositions.length - 1;\n\n    const start = query.substring(prev, match.from);\n    const end = isLast ? query.substring(match.to) : '';\n    const matchVisQuery = buildVisualQueryFromString(query.substring(match.from, match.to));\n\n    if (!labelExists(matchVisQuery.query.labels, filter)) {\n      // We don't want to add duplicate labels.\n      matchVisQuery.query.labels.push(filter);\n    }\n    const newLabels = modeller.renderQuery(matchVisQuery.query);\n    newQuery += start + newLabels + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\n\n/**\n * Add filter as label filter after the parsers\n * @param query\n * @param positionsToAddAfter\n * @param filter\n */\nexport function addFilterAsLabelFilter(\n  query: string,\n  positionsToAddAfter: NodePosition[],\n  filter: QueryBuilderLabelFilter\n): string {\n  let newQuery = '';\n  let prev = 0;\n\n  for (let i = 0; i < positionsToAddAfter.length; i++) {\n    // This is basically just doing splice on a string for each matched vector selector.\n    const match = positionsToAddAfter[i];\n    const isLast = i === positionsToAddAfter.length - 1;\n\n    const start = query.substring(prev, match.to);\n    const end = isLast ? query.substring(match.to) : '';\n\n    let labelFilter = '';\n    // For < and >, if the value is number, we don't add quotes around it and use it as number\n    if (!Number.isNaN(Number(filter.value)) && (filter.op === '<' || filter.op === '>')) {\n      labelFilter = ` | ${filter.label}${filter.op}${Number(filter.value)}`;\n    } else {\n      // we now unescape all escaped values again, because we are using backticks which can handle those cases.\n      // we also don't care about the operator here, because we need to unescape for both, regex and equal.\n      labelFilter = ` | ${filter.label}${filter.op}\\`${unescapeLabelValue(filter.value)}\\``;\n    }\n\n    newQuery += start + labelFilter + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\n\n/**\n * Add filter as label filter after the parsers\n * @param query\n * @param logQueryPositions\n * @param labelFormat\n */\nfunction addLabelFormat(\n  query: string,\n  logQueryPositions: NodePosition[],\n  labelFormat: { originalLabel: string; renameTo: string }\n): string {\n  let newQuery = '';\n  let prev = 0;\n\n  for (let i = 0; i < logQueryPositions.length; i++) {\n    // This is basically just doing splice on a string for each matched vector selector.\n    const match = logQueryPositions[i];\n    const isLast = i === logQueryPositions.length - 1;\n\n    const start = query.substring(prev, match.to);\n    const end = isLast ? query.substring(match.to) : '';\n\n    const labelFilter = ` | label_format ${labelFormat.renameTo}=${labelFormat.originalLabel}`;\n    newQuery += start + labelFilter + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\n\nexport function addLineFilter(query: string, value = '', operator = '|='): string {\n  const streamSelectorPositions = getStreamSelectorPositions(query);\n  if (!streamSelectorPositions.length) {\n    return query;\n  }\n  const streamSelectorEnd = streamSelectorPositions[0].to;\n\n  const newQueryExpr = query.slice(0, streamSelectorEnd) + ` ${operator} \\`${value}\\`` + query.slice(streamSelectorEnd);\n  return newQueryExpr;\n}\n\nfunction getLineCommentPositions(query: string): NodePosition[] {\n  const tree = parser.parse(query);\n  const positions: NodePosition[] = [];\n  tree.iterate({\n    enter: ({ type, from, to }): false | void => {\n      if (type.id === LineComment) {\n        positions.push(new NodePosition(from, to, type));\n        return false;\n      }\n    },\n  });\n  return positions;\n}\n\n/**\n * Check if label exists in the list of labels but ignore the operator.\n * @param labels\n * @param filter\n */\nfunction labelExists(labels: QueryBuilderLabelFilter[], filter: QueryBuilderLabelFilter) {\n  return labels.find((label) => label.label === filter.label && label.value === filter.value);\n}\n\n/**\n * Return the last position based on \"to\" property\n * @param positions\n */\nexport function findLastPosition(positions: NodePosition[]): NodePosition {\n  if (!positions.length) {\n    return new NodePosition(0, 0);\n  }\n  return positions.reduce((prev, current) => (prev.to > current.to ? prev : current));\n}\n\n/**\n * Gets all leaves of the nodes given. Leaves are nodes that don't contain any other nodes.\n *\n * @param {NodePosition[]} nodes\n * @return\n */\nfunction findLeaves(nodes: NodePosition[]): NodePosition[] {\n  return nodes.filter((node) => nodes.every((n) => node.contains(n) === false || node === n));\n}\n\nfunction getAllPositionsInNodeByType(node: SyntaxNode, type: number): NodePosition[] {\n  if (node.type.id === type) {\n    return [NodePosition.fromNode(node)];\n  }\n\n  const positions: NodePosition[] = [];\n  let pos = 0;\n  let child = node.childAfter(pos);\n  while (child) {\n    positions.push(...getAllPositionsInNodeByType(child, type));\n    pos = child.to;\n    child = node.childAfter(pos);\n  }\n  return positions;\n}\n\nfunction getMatcherInStreamPositions(query: string): NodePosition[] {\n  const tree = parser.parse(query);\n  const positions: NodePosition[] = [];\n  tree.iterate({\n    enter: ({ node }): false | void => {\n      if (node.type.id === Selector) {\n        positions.push(...getAllPositionsInNodeByType(node, Matcher));\n      }\n    },\n  });\n  return positions;\n}\n\nexport function getIdentifierInStreamPositions(query: string): NodePosition[] {\n  const tree = parser.parse(query);\n  const positions: NodePosition[] = [];\n  tree.iterate({\n    enter: ({ node }): false | void => {\n      if (node.type.id === Selector) {\n        positions.push(...getAllPositionsInNodeByType(node, Identifier));\n      }\n    },\n  });\n  return positions;\n}\n","import { SyntaxNode } from '@lezer/common';\nimport { escapeRegExp } from 'lodash';\n\nimport {\n  parser,\n  LineFilter,\n  PipeExact,\n  PipeMatch,\n  Filter,\n  String,\n  LabelFormatExpr,\n  Selector,\n  PipelineExpr,\n  LabelParser,\n  JsonExpressionParser,\n  LabelFilter,\n  MetricExpr,\n  Matcher,\n  Identifier,\n  Range,\n  Logfmt,\n  Json,\n  OrFilter,\n  FilterOp,\n  RangeOp,\n  VectorOp,\n  BinOpExpr,\n} from '@grafana/lezer-logql';\nimport { DataQuery } from '@grafana/schema';\n\nimport { addDropToQuery, addLabelToQuery, getStreamSelectorPositions, NodePosition } from './modifyQuery';\nimport { ErrorId } from './querybuilder/parsingUtils';\nimport { LabelType, LokiQuery, LokiQueryDirection, LokiQueryType } from './types';\n\n/**\n * Returns search terms from a LogQL query.\n * E.g., `{} |= \"foo\" |= \"bar\" != \"baz\"` returns `['foo', 'bar']`.\n */\nexport function getHighlighterExpressionsFromQuery(input = ''): string[] {\n  const results: string[] = [];\n\n  const filters = getNodesFromQuery(input, [LineFilter]);\n\n  for (const filter of filters) {\n    const pipeExact = filter.getChild(Filter)?.getChild(PipeExact);\n    const pipeMatch = filter.getChild(Filter)?.getChild(PipeMatch);\n    const strings = getStringsFromLineFilter(filter);\n\n    if ((!pipeExact && !pipeMatch) || !strings.length) {\n      continue;\n    }\n\n    for (const string of strings) {\n      const filterTerm = input.substring(string.from, string.to).trim();\n      const backtickedTerm = filterTerm[0] === '`';\n      const unwrappedFilterTerm = filterTerm.substring(1, filterTerm.length - 1);\n\n      if (!unwrappedFilterTerm) {\n        continue;\n      }\n\n      let resultTerm = '';\n\n      // Only filter expressions with |~ operator are treated as regular expressions\n      if (pipeMatch) {\n        // When using backticks, Loki doesn't require to escape special characters and we can just push regular expression to highlights array\n        // When using quotes, we have extra backslash escaping and we need to replace \\\\ with \\\n        resultTerm = backtickedTerm ? unwrappedFilterTerm : unwrappedFilterTerm.replace(/\\\\\\\\/g, '\\\\');\n      } else {\n        // We need to escape this string so it is not matched as regular expression\n        resultTerm = escapeRegExp(unwrappedFilterTerm);\n      }\n\n      if (resultTerm) {\n        results.push(resultTerm);\n      }\n    }\n  }\n  return results;\n}\n\nexport function getExpressionFromExecutedQuery(executedQueryString: string) {\n  return executedQueryString.replace('Expr: ', '');\n}\n\nexport function getStringsFromLineFilter(filter: SyntaxNode): SyntaxNode[] {\n  const nodes: SyntaxNode[] = [];\n  let node: SyntaxNode | null = filter;\n  do {\n    const string = node.getChild(String);\n    if (string && !node.getChild(FilterOp)) {\n      nodes.push(string);\n    }\n    node = node.getChild(OrFilter);\n  } while (node != null);\n\n  return nodes;\n}\n\nexport function getNormalizedLokiQuery(query: LokiQuery): LokiQuery {\n  let queryType = getLokiQueryType(query);\n  // instant and range are deprecated, we want to remove them\n  const { instant, range, ...rest } = query;\n\n  // if `query.expr` is not parsable this might throw an error\n  try {\n    if (isLogsQuery(query.expr) && queryType === LokiQueryType.Instant) {\n      queryType = LokiQueryType.Range;\n    }\n  } catch (e) {}\n  return { ...rest, queryType };\n}\n\nexport function getLokiQueryType(query: LokiQuery): LokiQueryType {\n  // we are migrating from `.instant` and `.range` to `.queryType`\n  // this function returns the correct query type\n  const { queryType } = query;\n  const hasValidQueryType =\n    queryType === LokiQueryType.Range || queryType === LokiQueryType.Instant || queryType === LokiQueryType.Stream;\n\n  // if queryType exists, it is respected\n  if (hasValidQueryType) {\n    return queryType;\n  }\n\n  // if no queryType, and instant===true, it's instant\n  if (query.instant === true) {\n    return LokiQueryType.Instant;\n  }\n\n  // otherwise it is range\n  return LokiQueryType.Range;\n}\n\nconst tagsToObscure = ['String', 'Identifier', 'LineComment', 'Number'];\nconst partsToKeep = ['__error__', '__interval', '__interval_ms', '__auto'];\nexport function obfuscate(query: string): string {\n  let obfuscatedQuery: string = query;\n  const tree = parser.parse(query);\n  tree.iterate({\n    enter: ({ name, from, to }): false | void => {\n      const queryPart = query.substring(from, to);\n      if (tagsToObscure.includes(name) && !partsToKeep.includes(queryPart)) {\n        obfuscatedQuery = obfuscatedQuery.replace(queryPart, name);\n      }\n    },\n  });\n  return obfuscatedQuery;\n}\n\nexport function parseToNodeNamesArray(query: string): string[] {\n  const queryParts: string[] = [];\n  const tree = parser.parse(query);\n  tree.iterate({\n    enter: ({ name }): false | void => {\n      queryParts.push(name);\n    },\n  });\n  return queryParts;\n}\n\nexport function isQueryWithNode(query: string, nodeType: number): boolean {\n  let isQueryWithNode = false;\n  const tree = parser.parse(query);\n  tree.iterate({\n    enter: ({ type }): false | void => {\n      if (type.id === nodeType) {\n        isQueryWithNode = true;\n        return false;\n      }\n    },\n  });\n  return isQueryWithNode;\n}\n\nexport function getNodesFromQuery(query: string, nodeTypes?: number[]): SyntaxNode[] {\n  const nodes: SyntaxNode[] = [];\n  const tree = parser.parse(query);\n  tree.iterate({\n    enter: (node): false | void => {\n      if (nodeTypes === undefined || nodeTypes.includes(node.type.id)) {\n        nodes.push(node.node);\n      }\n    },\n  });\n  return nodes;\n}\n\nexport function getNodePositionsFromQuery(query: string, nodeTypes?: number[]): NodePosition[] {\n  const positions: NodePosition[] = [];\n  const tree = parser.parse(query);\n  tree.iterate({\n    enter: (node): false | void => {\n      if (nodeTypes === undefined || nodeTypes.includes(node.type.id)) {\n        positions.push(NodePosition.fromNode(node.node));\n      }\n    },\n  });\n  return positions;\n}\n\nexport function getNodeFromQuery(query: string, nodeType: number): SyntaxNode | undefined {\n  const nodes = getNodesFromQuery(query, [nodeType]);\n  return nodes.length > 0 ? nodes[0] : undefined;\n}\n\n/**\n * Parses the query and looks for error nodes. If there is at least one, it returns true.\n * Grafana variables are considered errors, so if you need to validate a query\n * with variables you should interpolate it first.\n */\nexport function isQueryWithError(query: string): boolean {\n  return isQueryWithNode(query, ErrorId);\n}\n\nexport function isLogsQuery(query: string): boolean {\n  // As a safeguard we are checking for a length of 2, because at least the query should be `{}`\n  return query.trim().length > 2 && !isQueryWithNode(query, MetricExpr);\n}\n\nexport function isQueryWithParser(query: string): { queryWithParser: boolean; parserCount: number } {\n  const nodes = getNodesFromQuery(query, [LabelParser, JsonExpressionParser, Logfmt]);\n  const parserCount = nodes.length;\n  return { queryWithParser: parserCount > 0, parserCount };\n}\n\nexport function getParserFromQuery(query: string): string | undefined {\n  const parsers = getNodesFromQuery(query, [LabelParser, Json, Logfmt]);\n  return parsers.length > 0 ? query.substring(parsers[0].from, parsers[0].to).trim() : undefined;\n}\n\nexport function isQueryPipelineErrorFiltering(query: string): boolean {\n  const labels = getNodesFromQuery(query, [LabelFilter]);\n  for (const node of labels) {\n    const label = node.getChild(Matcher)?.getChild(Identifier);\n    if (label) {\n      const labelName = query.substring(label.from, label.to);\n      if (labelName === '__error__') {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nexport function isQueryWithLabelFormat(query: string): boolean {\n  return isQueryWithNode(query, LabelFormatExpr);\n}\n\nexport function getLogQueryFromMetricsQuery(query: string): string {\n  if (isLogsQuery(query)) {\n    return query;\n  }\n\n  // Log query in metrics query composes of Selector & PipelineExpr\n  const selectorNode = getNodeFromQuery(query, Selector);\n  if (!selectorNode) {\n    return '';\n  }\n  const selector = query.substring(selectorNode.from, selectorNode.to);\n\n  const pipelineExprNode = getNodeFromQuery(query, PipelineExpr);\n  const pipelineExpr = pipelineExprNode ? query.substring(pipelineExprNode.from, pipelineExprNode.to) : '';\n\n  return `${selector} ${pipelineExpr}`.trim();\n}\n\nexport function getLogQueryFromMetricsQueryAtPosition(query: string, position: number): string {\n  if (isLogsQuery(query)) {\n    return query;\n  }\n\n  const metricQuery = getNodesFromQuery(query, [MetricExpr])\n    .reverse() // So we don't get the root metric node\n    .find((node) => node.from <= position && node.to >= position);\n  if (!metricQuery) {\n    return '';\n  }\n  return getLogQueryFromMetricsQuery(query.substring(metricQuery.from, metricQuery.to));\n}\n\nexport function isQueryWithLabelFilter(query: string): boolean {\n  return isQueryWithNode(query, LabelFilter);\n}\n\nexport function isQueryWithLineFilter(query: string): boolean {\n  return isQueryWithNode(query, LineFilter);\n}\n\nexport function isQueryWithRangeVariable(query: string): boolean {\n  const rangeNodes = getNodesFromQuery(query, [Range]);\n  for (const node of rangeNodes) {\n    if (query.substring(node.from, node.to).match(/\\[\\$__range(_s|_ms)?/)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getStreamSelectorsFromQuery(query: string): string[] {\n  const labelMatcherPositions = getStreamSelectorPositions(query);\n\n  const labelMatchers = labelMatcherPositions.map((labelMatcher) => {\n    return query.slice(labelMatcher.from, labelMatcher.to);\n  });\n\n  return labelMatchers;\n}\n\nexport function requestSupportsSplitting(allQueries: LokiQuery[]) {\n  const queries = allQueries\n    .filter((query) => !query.hide)\n    .filter((query) => !query.refId.includes('do-not-chunk'))\n    .filter((query) => query.expr);\n\n  return queries.length > 0;\n}\n\nexport function requestSupportsSharding(allQueries: LokiQuery[]) {\n  const queries = allQueries\n    .filter((query) => !query.hide)\n    .filter((query) => query.queryType !== LokiQueryType.Instant)\n    .filter((query) => !query.refId.includes('do-not-shard'))\n    .filter((query) => query.expr)\n    .filter(\n      (query) =>\n        (query.direction === LokiQueryDirection.Scan && isLogsQuery(query.expr)) || metricSupportsSharding(query.expr)\n    );\n\n  return queries.length > 0;\n}\n\nfunction metricSupportsSharding(query: string) {\n  if (isLogsQuery(query)) {\n    return false;\n  }\n  query = query.trim().toLowerCase();\n\n  const disallowed = getNodesFromQuery(query, [BinOpExpr]);\n  if (disallowed.length > 0) {\n    return false;\n  }\n\n  /**\n   * If there are VectorAggregationExpr, we want to make sure that the leftmost VectorOp is sum, meaning that\n   * it's wrapped in a sum. E.g.\n   * Disallowed: avg(sum by (level) (avg_over_time({place=\"luna\"}[1m])))\n   * Allowed: sum(sum by (level) (avg_over_time({place=\"luna\"}[1m])))\n   */\n  const vectorOps = getNodesFromQuery(query, [VectorOp]);\n  const supportedVectorOps = vectorOps.filter((node) => getNodeString(query, node) === 'sum');\n  const unsupportedVectorOps = vectorOps.filter((node) => getNodeString(query, node) !== 'sum');\n  const supportedWrappingVectorOpps = supportedVectorOps.filter((supportedOp) =>\n    unsupportedVectorOps.every((unsupportedOp) => supportedOp.from < unsupportedOp.from)\n  );\n  if (unsupportedVectorOps.length > 0) {\n    return supportedWrappingVectorOpps.length > 0;\n  }\n\n  const rangeOps = getNodesFromQuery(query, [RangeOp]);\n  const supportedRangeOps = ['count_over_time', 'sum_over_time', 'bytes_over_time'];\n  for (const node of rangeOps) {\n    if (!supportedRangeOps.includes(getNodeString(query, node))) {\n      return supportedWrappingVectorOpps.length > 0;\n    }\n  }\n\n  return true;\n}\n\nfunction getNodeString(query: string, node: SyntaxNode) {\n  return query.substring(node.from, node.to);\n}\n\nexport const isLokiQuery = (query: DataQuery): query is LokiQuery => {\n  if (!query) {\n    return false;\n  }\n\n  return 'expr' in query && query.expr !== undefined;\n};\n\nexport const getLokiQueryFromDataQuery = (query?: DataQuery): LokiQuery | undefined => {\n  if (!query || !isLokiQuery(query)) {\n    return undefined;\n  }\n\n  return query;\n};\n\nexport const interpolateShardingSelector = (queries: LokiQuery[], shards: number[]) => {\n  if (shards.length === 0) {\n    return queries;\n  }\n\n  let shardValue = shards.join('|');\n\n  // -1 means empty shard value\n  if (shardValue === '-1' || shards.length === 1) {\n    shardValue = shardValue === '-1' ? '' : shardValue;\n    return queries.map((query) => ({\n      ...query,\n      expr: addStreamShardLabelsToQuery(query.expr, '=', shardValue),\n    }));\n  }\n\n  return queries.map((query) => ({\n    ...query,\n    expr: addStreamShardLabelsToQuery(query.expr, '=~', shardValue),\n  }));\n};\n\nfunction addStreamShardLabelsToQuery(query: string, operator: string, shardValue: string) {\n  const shardedQuery = addLabelToQuery(query, '__stream_shard__', operator, shardValue, LabelType.Indexed);\n  if (!isLogsQuery(query)) {\n    return addDropToQuery(shardedQuery, ['__stream_shard__']);\n  }\n  return shardedQuery;\n}\n\nexport const getSelectorForShardValues = (query: string) => {\n  const selector = getNodesFromQuery(query, [Selector]);\n  if (selector.length > 0) {\n    return query.substring(selector[0].from, selector[0].to);\n  }\n  return '';\n};\n","import { Registry } from '@grafana/data';\nimport { BINARY_OPERATIONS_KEY } from './types.js';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass QueryModellerBase {\n  constructor(operationDefinitions, innerQueryPlaceholder) {\n    __publicField(this, \"operationsRegistry\");\n    __publicField(this, \"categories\", []);\n    __publicField(this, \"innerQueryPlaceholder\");\n    this.operationsRegistry = new Registry(() => operationDefinitions);\n    this.innerQueryPlaceholder = innerQueryPlaceholder || \"<query>\";\n  }\n  setOperationCategories(categories) {\n    this.categories = categories;\n  }\n  getOperationsForCategory(category) {\n    return this.operationsRegistry.list().filter((op) => op.category === category && !op.hideFromList);\n  }\n  getAlternativeOperations(key) {\n    return this.operationsRegistry.list().filter((op) => op.alternativesKey && op.alternativesKey === key);\n  }\n  getCategories() {\n    return this.categories;\n  }\n  getOperationDefinition(id) {\n    return this.operationsRegistry.getIfExists(id);\n  }\n  hasBinaryOp(query) {\n    return query.operations.find((op) => {\n      const def = this.getOperationDefinition(op.id);\n      return (def == null ? undefined : def.category) === BINARY_OPERATIONS_KEY;\n    }) !== undefined;\n  }\n}\n\nexport { QueryModellerBase };\n//# sourceMappingURL=QueryModellerBase.js.map\n","import {\n  QueryModellerBase,\n  QueryBuilderLabelFilter,\n  VisualQuery,\n  QueryBuilderOperation,\n  VisualQueryBinary,\n} from '@grafana/plugin-ui';\n\nimport { operationDefinitions } from './operations';\nimport { LokiOperationId, LokiQueryPattern, LokiQueryPatternType, LokiVisualQueryOperationCategory } from './types';\n\nexport class LokiQueryModeller extends QueryModellerBase {\n  constructor() {\n    super(operationDefinitions, '<expr>');\n\n    this.setOperationCategories([\n      LokiVisualQueryOperationCategory.Aggregations,\n      LokiVisualQueryOperationCategory.RangeFunctions,\n      LokiVisualQueryOperationCategory.Formats,\n      LokiVisualQueryOperationCategory.BinaryOps,\n      LokiVisualQueryOperationCategory.LabelFilters,\n      LokiVisualQueryOperationCategory.LineFilters,\n    ]);\n  }\n\n  renderOperations(queryString: string, operations: QueryBuilderOperation[]): string {\n    for (const operation of operations) {\n      if (operation.disabled) {\n        continue;\n      }\n      const def = this.operationsRegistry.getIfExists(operation.id);\n      if (!def) {\n        console.error(`Could not find operation ${operation.id} in the registry`);\n        continue;\n      }\n      queryString = def.renderer(operation, def, queryString);\n    }\n    return queryString;\n  }\n\n  renderBinaryQueries(queryString: string, binaryQueries?: Array<VisualQueryBinary<VisualQuery>>) {\n    if (binaryQueries) {\n      for (const binQuery of binaryQueries) {\n        queryString = `${this.renderBinaryQuery(queryString, binQuery)}`;\n      }\n    }\n    return queryString;\n  }\n\n  private renderBinaryQuery(leftOperand: string, binaryQuery: VisualQueryBinary<VisualQuery>) {\n    let result = leftOperand + ` ${binaryQuery.operator} `;\n\n    if (binaryQuery.vectorMatches) {\n      result += `${binaryQuery.vectorMatchesType}(${binaryQuery.vectorMatches}) `;\n    }\n\n    return result + this.renderQuery(binaryQuery.query, true);\n  }\n\n  renderLabels(labels: QueryBuilderLabelFilter[]): string {\n    if (labels.length === 0) {\n      return '{}';\n    }\n\n    let expr = '{';\n    for (const filter of labels) {\n      if (expr !== '{') {\n        expr += ', ';\n      }\n\n      expr += `${filter.label}${filter.op}\"${filter.value}\"`;\n    }\n\n    return expr + `}`;\n  }\n\n  renderQuery(query: VisualQuery, nested?: boolean): string {\n    let queryString = this.renderLabels(query.labels);\n    queryString = this.renderOperations(queryString, query.operations);\n\n    if (!nested && this.hasBinaryOp(query) && Boolean(query.binaryQueries?.length)) {\n      queryString = `(${queryString})`;\n    }\n\n    queryString = this.renderBinaryQueries(queryString, query.binaryQueries);\n\n    return queryString;\n  }\n\n  getQueryPatterns(): LokiQueryPattern[] {\n    return [\n      {\n        name: 'Parse log lines with logfmt parser',\n        type: LokiQueryPatternType.Log,\n        // {} | logfmt | __error__=``\n        operations: [\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n        ],\n      },\n      {\n        name: 'Parse log lines with JSON parser',\n        type: LokiQueryPatternType.Log,\n        // {} | json | __error__=``\n        operations: [\n          { id: LokiOperationId.Json, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n        ],\n      },\n      {\n        name: 'Filter log line and parse with logfmt parser',\n        type: LokiQueryPatternType.Log,\n        // {} |= `` | logfmt | __error__=``\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n        ],\n      },\n      {\n        name: 'Filter log lines and parse with json parser',\n        type: LokiQueryPatternType.Log,\n        // {} |= `` | json | __error__=``\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.Json, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n        ],\n      },\n      {\n        name: 'Parse log line with logfmt parser and use label filter',\n        type: LokiQueryPatternType.Log,\n        // {} |= `` | logfmt | __error__=`` | label=`value`\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.LabelFilter, params: ['label', '=', 'value'] },\n        ],\n      },\n      {\n        name: 'Parse log lines with nested json',\n        type: LokiQueryPatternType.Log,\n        // {} |= `` | json | line_format `{{ .message}}` | json\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.Json, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.LineFormat, params: ['{{.message}}'] },\n          { id: LokiOperationId.Json, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n        ],\n      },\n      {\n        name: 'Reformat log lines',\n        type: LokiQueryPatternType.Log,\n        // {} |= `` | logfmt | line_format `{{.message}}`\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.LineFormat, params: ['{{.message}}'] },\n        ],\n      },\n      {\n        name: 'Rename lvl label to level',\n        type: LokiQueryPatternType.Log,\n        // {} |= `` | logfmt | label_format level=lvl\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.LabelFormat, params: ['lvl', 'level'] },\n        ],\n      },\n      {\n        name: 'Query on value inside a log line',\n        type: LokiQueryPatternType.Metric,\n        // sum(sum_over_time({ | logfmt | __error__=`` | unwrap | __error__=`` [$__auto]))\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.Unwrap, params: [''] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.SumOverTime, params: ['$__auto'] },\n          { id: LokiOperationId.Sum, params: [] },\n        ],\n      },\n      {\n        name: 'Total requests per label of streams',\n        type: LokiQueryPatternType.Metric,\n        // sum by() (count_over_time({}[$__auto)\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.CountOverTime, params: ['$__auto'] },\n          { id: LokiOperationId.Sum, params: [] },\n        ],\n      },\n      {\n        name: 'Total requests per parsed label or label of streams',\n        type: LokiQueryPatternType.Metric,\n        // sum by() (count_over_time({}| logfmt | __error__=`` [$__auto))\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.CountOverTime, params: ['$__auto'] },\n          { id: LokiOperationId.Sum, params: [] },\n        ],\n      },\n      {\n        name: 'Bytes used by a log stream',\n        type: LokiQueryPatternType.Metric,\n        // bytes_over_time({}[$__auto])\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.BytesOverTime, params: ['$__auto'] },\n        ],\n      },\n      {\n        name: 'Count of log lines per stream',\n        type: LokiQueryPatternType.Metric,\n        // count_over_time({}[$__auto])\n        operations: [\n          { id: LokiOperationId.LineContains, params: [''] },\n          { id: LokiOperationId.CountOverTime, params: ['$__auto'] },\n        ],\n      },\n      {\n        name: 'Top N results by label or parsed label',\n        type: LokiQueryPatternType.Metric,\n        // topk(10, sum by () (count_over_time({} | logfmt | __error__=`` [$__auto])))\n        operations: [\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.CountOverTime, params: ['$__auto'] },\n          { id: LokiOperationId.Sum, params: [] },\n          { id: LokiOperationId.TopK, params: [10] },\n        ],\n      },\n      {\n        name: 'Extracted quantile',\n        type: LokiQueryPatternType.Metric,\n        // quantile_over_time(0.5,{} | logfmt | unwrap latency[$__auto]) by ()\n        operations: [\n          { id: LokiOperationId.Logfmt, params: [] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.Unwrap, params: ['latency'] },\n          { id: LokiOperationId.LabelFilterNoErrors, params: [] },\n          { id: LokiOperationId.QuantileOverTime, params: ['$__auto', 0.5] },\n          { id: LokiOperationId.Sum, params: [] },\n        ],\n      },\n    ];\n  }\n}\n\nexport const lokiQueryModeller = new LokiQueryModeller();\n","import {\n  QueryBuilderOperation,\n  QueryBuilderOperationDefinition,\n  QueryBuilderOperationParamDef,\n} from '@grafana/plugin-ui';\n\nimport { defaultAddOperationHandler } from './operationUtils';\nimport { LokiOperationId, LokiVisualQueryOperationCategory } from './types';\n\nexport const binaryScalarDefs = [\n  {\n    id: LokiOperationId.Addition,\n    name: 'Add scalar',\n    sign: '+',\n  },\n  {\n    id: LokiOperationId.Subtraction,\n    name: 'Subtract scalar',\n    sign: '-',\n  },\n  {\n    id: LokiOperationId.MultiplyBy,\n    name: 'Multiply by scalar',\n    sign: '*',\n  },\n  {\n    id: LokiOperationId.DivideBy,\n    name: 'Divide by scalar',\n    sign: '/',\n  },\n  {\n    id: LokiOperationId.Modulo,\n    name: 'Modulo by scalar',\n    sign: '%',\n  },\n  {\n    id: LokiOperationId.Exponent,\n    name: 'Exponent',\n    sign: '^',\n  },\n  {\n    id: LokiOperationId.EqualTo,\n    name: 'Equal to',\n    sign: '==',\n    comparison: true,\n  },\n  {\n    id: LokiOperationId.NotEqualTo,\n    name: 'Not equal to',\n    sign: '!=',\n    comparison: true,\n  },\n  {\n    id: LokiOperationId.GreaterThan,\n    name: 'Greater than',\n    sign: '>',\n    comparison: true,\n  },\n  {\n    id: LokiOperationId.LessThan,\n    name: 'Less than',\n    sign: '<',\n    comparison: true,\n  },\n  {\n    id: LokiOperationId.GreaterOrEqual,\n    name: 'Greater or equal to',\n    sign: '>=',\n    comparison: true,\n  },\n  {\n    id: LokiOperationId.LessOrEqual,\n    name: 'Less or equal to',\n    sign: '<=',\n    comparison: true,\n  },\n];\n\n// Not sure about this one. It could also be a more generic 'Simple math operation' where user specifies\n// both the operator and the operand in a single input\nexport const binaryScalarOperations: QueryBuilderOperationDefinition[] = binaryScalarDefs.map((opDef) => {\n  const params: QueryBuilderOperationParamDef[] = [{ name: 'Value', type: 'number' }];\n  let defaultParams: [number] | [number, boolean] = [2];\n  if (opDef.comparison) {\n    params.push({\n      name: 'Bool',\n      type: 'boolean',\n      description: 'If checked comparison will return 0 or 1 for the value rather than filtering.',\n    });\n    defaultParams = [2, false];\n  }\n\n  return {\n    id: opDef.id,\n    name: opDef.name,\n    params,\n    defaultParams,\n    toggleable: true,\n    alternativesKey: 'binary scalar operations',\n    category: LokiVisualQueryOperationCategory.BinaryOps,\n    renderer: getSimpleBinaryRenderer(opDef.sign),\n    addOperationHandler: defaultAddOperationHandler,\n  };\n});\n\nfunction getSimpleBinaryRenderer(operator: string) {\n  return function binaryRenderer(\n    model: QueryBuilderOperation,\n    def: QueryBuilderOperationDefinition,\n    innerExpr: string\n  ) {\n    let param = model.params[0];\n    let bool = '';\n    if (model.params.length === 2) {\n      bool = model.params[1] ? ' bool' : '';\n    }\n\n    return `${innerExpr} ${operator}${bool} ${param}`;\n  };\n}\n","import { useState } from 'react';\n\nimport { DataSourceApi, SelectableValue } from '@grafana/data';\nimport {\n  QueryBuilderLabelFilter,\n  QueryBuilderOperationParamEditorProps,\n  QueryBuilderOperationParamValue,\n  VisualQuery,\n  VisualQueryModeller,\n} from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport { getOperationParamId } from '../operationUtils';\n\nexport const LabelParamEditor = ({\n  onChange,\n  index,\n  operationId,\n  value,\n  query,\n  datasource,\n  queryModeller,\n}: QueryBuilderOperationParamEditorProps) => {\n  const [state, setState] = useState<{\n    options?: SelectableValue[];\n    isLoading?: boolean;\n  }>({});\n\n  return (\n    <Select<QueryBuilderOperationParamValue | undefined>\n      inputId={getOperationParamId(operationId, index)}\n      autoFocus={value === ''}\n      openMenuOnFocus\n      onOpenMenu={async () => {\n        setState({ isLoading: true });\n        const options = await loadGroupByLabels(query, datasource, queryModeller);\n        setState({ options, isLoading: undefined });\n      }}\n      isLoading={state.isLoading}\n      allowCustomValue\n      noOptionsMessage=\"No labels found\"\n      loadingMessage=\"Loading labels\"\n      options={state.options}\n      value={toOption(value)}\n      onChange={(value) => onChange(index, value.value!)}\n    />\n  );\n};\n\nasync function loadGroupByLabels(\n  query: VisualQuery,\n  datasource: DataSourceApi,\n  queryModeller: VisualQueryModeller\n): Promise<SelectableValue[]> {\n  let labels: QueryBuilderLabelFilter[] = query.labels;\n\n  const queryString = queryModeller.renderLabels(labels);\n  const result: string[] = await datasource.languageProvider.fetchLabels({ streamSelector: queryString });\n\n  return result.map((x) => ({\n    label: x,\n    value: x,\n  }));\n}\n\nconst toOption = (\n  value: QueryBuilderOperationParamValue | undefined\n): SelectableValue<QueryBuilderOperationParamValue | undefined> => ({ label: value?.toString(), value });\n","import { capitalize } from 'lodash';\nimport pluralize from 'pluralize';\n\nimport {\n  QueryBuilderOperation,\n  QueryBuilderOperationDefinition,\n  QueryBuilderOperationParamDef,\n  QueryBuilderOperationParamValue,\n  VisualQuery,\n  VisualQueryModeller,\n} from '@grafana/plugin-ui';\n\nimport { escapeLabelValueInExactSelector } from '../languageUtils';\nimport { FUNCTIONS } from '../syntax';\n\nimport { LabelParamEditor } from './components/LabelParamEditor';\nimport { LokiOperationId, LokiOperationOrder, LokiVisualQuery, LokiVisualQueryOperationCategory } from './types';\n\nexport function createRangeOperation(\n  name: string,\n  isRangeOperationWithGrouping?: boolean\n): QueryBuilderOperationDefinition {\n  const params = [getRangeVectorParamDef()];\n  const defaultParams = ['$__auto'];\n  let paramChangedHandler = undefined;\n\n  if (name === LokiOperationId.QuantileOverTime) {\n    defaultParams.push('0.95');\n    params.push({\n      name: 'Quantile',\n      type: 'number',\n    });\n  }\n\n  if (isRangeOperationWithGrouping) {\n    params.push({\n      name: 'By label',\n      type: 'string',\n      restParam: true,\n      optional: true,\n    });\n\n    paramChangedHandler = getOnLabelAddedHandler(`__${name}_by`);\n  }\n\n  return {\n    id: name,\n    name: getLokiOperationDisplayName(name),\n    params: params,\n    defaultParams,\n    toggleable: true,\n    alternativesKey: 'range function',\n    category: LokiVisualQueryOperationCategory.RangeFunctions,\n    orderRank: LokiOperationOrder.RangeVectorFunction,\n    renderer: operationWithRangeVectorRenderer,\n    addOperationHandler: addLokiOperation,\n    paramChangedHandler,\n    explainHandler: (op, def) => {\n      let opDocs = FUNCTIONS.find((x) => x.insertText === op.id)?.documentation ?? '';\n\n      if (op.params[0] === '$__auto') {\n        return `${opDocs} \\`$__auto\\` is a variable that will be replaced with the [value of step](https://grafana.com/docs/grafana/next/datasources/loki/query-editor/#options) for range queries and with the value of the selected time range (calculated to - from) for instant queries.`;\n      } else {\n        return `${opDocs} The [range vector](https://grafana.com/docs/loki/latest/logql/metric_queries/#range-vector-aggregation) is set to \\`${op.params[0]}\\`.`;\n      }\n    },\n  };\n}\n\nexport function createRangeOperationWithGrouping(name: string): QueryBuilderOperationDefinition[] {\n  const rangeOperation = createRangeOperation(name, true);\n  // Copy range operation params without the last param\n  const params = rangeOperation.params.slice(0, -1);\n  const operations: QueryBuilderOperationDefinition[] = [\n    rangeOperation,\n    {\n      id: `__${name}_by`,\n      name: `${getLokiOperationDisplayName(name)} by`,\n      params: [\n        ...params,\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: [...rangeOperation.defaultParams, ''],\n      toggleable: true,\n      alternativesKey: 'range function with grouping',\n      category: LokiVisualQueryOperationCategory.RangeFunctions,\n      renderer: getRangeAggregationWithGroupingRenderer(name, 'by'),\n      paramChangedHandler: getLastLabelRemovedHandler(name),\n      explainHandler: getAggregationExplainer(name, 'by'),\n      addOperationHandler: addLokiOperation,\n      hideFromList: true,\n    },\n    {\n      id: `__${name}_without`,\n      name: `${getLokiOperationDisplayName(name)} without`,\n      params: [\n        ...params,\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: [...rangeOperation.defaultParams, ''],\n      alternativesKey: 'range function with grouping',\n      category: LokiVisualQueryOperationCategory.RangeFunctions,\n      renderer: getRangeAggregationWithGroupingRenderer(name, 'without'),\n      paramChangedHandler: getLastLabelRemovedHandler(name),\n      explainHandler: getAggregationExplainer(name, 'without'),\n      addOperationHandler: addLokiOperation,\n      hideFromList: true,\n    },\n  ];\n\n  return operations;\n}\n\nexport function getRangeAggregationWithGroupingRenderer(aggregation: string, grouping: 'by' | 'without') {\n  return function aggregationRenderer(\n    model: QueryBuilderOperation,\n    def: QueryBuilderOperationDefinition,\n    innerExpr: string\n  ) {\n    const restParamIndex = def.params.findIndex((param) => param.restParam);\n    const params = model.params.slice(0, restParamIndex);\n    const restParams = model.params.slice(restParamIndex);\n\n    if (params.length === 2 && aggregation === LokiOperationId.QuantileOverTime) {\n      return `${aggregation}(${params[1]}, ${innerExpr} [${params[0]}]) ${grouping} (${restParams.join(', ')})`;\n    }\n\n    return `${aggregation}(${innerExpr} [${params[0]}]) ${grouping} (${restParams.join(', ')})`;\n  };\n}\n\nfunction operationWithRangeVectorRenderer(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDefinition,\n  innerExpr: string\n) {\n  const params = model.params ?? [];\n  const rangeVector = params[0] ?? '$__auto';\n  // QuantileOverTime is only range vector with more than one param\n  if (params.length === 2 && model.id === LokiOperationId.QuantileOverTime) {\n    const quantile = params[1];\n    return `${model.id}(${quantile}, ${innerExpr} [${rangeVector}])`;\n  }\n\n  return `${model.id}(${innerExpr} [${params[0] ?? '$__auto'}])`;\n}\n\nexport function labelFilterRenderer(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDefinition,\n  innerExpr: string\n) {\n  const integerOperators = ['<', '<=', '>', '>='];\n\n  if (integerOperators.includes(String(model.params[1]))) {\n    return `${innerExpr} | ${model.params[0]} ${model.params[1]} ${model.params[2]}`;\n  }\n\n  return `${innerExpr} | ${model.params[0]} ${model.params[1]} \\`${model.params[2]}\\``;\n}\n\nexport function isConflictingFilter(\n  operation: QueryBuilderOperation,\n  queryOperations: QueryBuilderOperation[]\n): boolean {\n  if (!operation) {\n    return false;\n  }\n  const operationIsNegative = operation.params[1].toString().startsWith('!');\n\n  const candidates = queryOperations.filter(\n    (queryOperation) =>\n      queryOperation.id === LokiOperationId.LabelFilter &&\n      queryOperation.params[0] === operation.params[0] &&\n      queryOperation.params[2] === operation.params[2]\n  );\n\n  const conflict = candidates.some((candidate) => {\n    if (operationIsNegative && candidate.params[1].toString().startsWith('!') === false) {\n      return true;\n    }\n    if (operationIsNegative === false && candidate.params[1].toString().startsWith('!')) {\n      return true;\n    }\n    return false;\n  });\n\n  return conflict;\n}\n\nexport function pipelineRenderer(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDefinition,\n  innerExpr: string\n) {\n  switch (model.id) {\n    case LokiOperationId.Logfmt:\n      const [strict = false, keepEmpty = false, ...labels] = model.params;\n      return `${innerExpr} | logfmt${strict ? ' --strict' : ''}${keepEmpty ? ' --keep-empty' : ''} ${labels\n        .filter((label) => label)\n        .join(', ')}`.trim();\n    case LokiOperationId.Json:\n      return `${innerExpr} | json ${model.params.filter((param) => param).join(', ')}`.trim();\n    case LokiOperationId.Drop:\n      return `${innerExpr} | drop ${model.params.filter((param) => param).join(', ')}`.trim();\n    case LokiOperationId.Keep:\n      return `${innerExpr} | keep ${model.params.filter((param) => param).join(', ')}`.trim();\n    default:\n      return `${innerExpr} | ${model.id}`;\n  }\n}\n\nfunction isRangeVectorFunction(def: QueryBuilderOperationDefinition) {\n  return def.category === LokiVisualQueryOperationCategory.RangeFunctions;\n}\n\nfunction getIndexOfOrLast(\n  operations: QueryBuilderOperation[],\n  queryModeller: VisualQueryModeller,\n  condition: (def: QueryBuilderOperationDefinition) => boolean\n) {\n  const index = operations.findIndex((x) => {\n    const opDef = queryModeller.getOperationDefinition(x.id);\n    if (!opDef) {\n      return false;\n    }\n    return condition(opDef);\n  });\n\n  return index === -1 ? operations.length : index;\n}\n\nexport function addLokiOperation(\n  def: QueryBuilderOperationDefinition,\n  query: LokiVisualQuery,\n  modeller: VisualQueryModeller\n): LokiVisualQuery {\n  const newOperation: QueryBuilderOperation = {\n    id: def.id,\n    params: def.defaultParams,\n  };\n\n  const operations = [...query.operations];\n\n  const existingRangeVectorFunction = operations.find((x) => {\n    const opDef = modeller.getOperationDefinition(x.id);\n    if (!opDef) {\n      return false;\n    }\n    return isRangeVectorFunction(opDef);\n  });\n\n  switch (def.category) {\n    case LokiVisualQueryOperationCategory.Aggregations:\n    case LokiVisualQueryOperationCategory.Functions:\n      // If we are adding a function but we have not range vector function yet add one\n      if (!existingRangeVectorFunction) {\n        const placeToInsert = getIndexOfOrLast(\n          operations,\n          modeller,\n          (def) => def.category === LokiVisualQueryOperationCategory.Functions\n        );\n        operations.splice(placeToInsert, 0, { id: LokiOperationId.Rate, params: ['$__auto'] });\n      }\n      operations.push(newOperation);\n      break;\n    case LokiVisualQueryOperationCategory.RangeFunctions:\n      // If adding a range function and range function is already added replace it\n      if (existingRangeVectorFunction) {\n        const index = operations.indexOf(existingRangeVectorFunction);\n        operations[index] = newOperation;\n        break;\n      }\n\n    // Add range functions after any formats, line filters and label filters\n    default:\n      const placeToInsert = getIndexOfOrLast(\n        operations,\n        modeller,\n        (x) => (def.orderRank ?? 100) < (x.orderRank ?? 100)\n      );\n      operations.splice(placeToInsert, 0, newOperation);\n      break;\n  }\n\n  return {\n    ...query,\n    operations,\n  };\n}\n\nexport function addNestedQueryHandler(def: QueryBuilderOperationDefinition, query: LokiVisualQuery): LokiVisualQuery {\n  return {\n    ...query,\n    binaryQueries: [\n      ...(query.binaryQueries ?? []),\n      {\n        operator: '/',\n        query,\n      },\n    ],\n  };\n}\n\nexport function getLineFilterRenderer(operation: string, caseInsensitive?: boolean) {\n  return function lineFilterRenderer(\n    model: QueryBuilderOperation,\n    def: QueryBuilderOperationDefinition,\n    innerExpr: string\n  ) {\n    const hasBackticks = model.params.some((param) => typeof param === 'string' && param.includes('`'));\n    const delimiter = hasBackticks ? '\"' : '`';\n    let params;\n    if (hasBackticks) {\n      params = model.params.map((param) =>\n        typeof param === 'string' ? escapeLabelValueInExactSelector(param) : param\n      );\n    } else {\n      params = model.params;\n    }\n    if (caseInsensitive) {\n      return `${innerExpr} ${operation} ${delimiter}(?i)${params.join(`${delimiter} or ${delimiter}(?i)`)}${delimiter}`;\n    }\n    return `${innerExpr} ${operation} ${delimiter}${params.join(`${delimiter} or ${delimiter}`)}${delimiter}`;\n  };\n}\n\nfunction getRangeVectorParamDef(): QueryBuilderOperationParamDef {\n  return {\n    name: 'Range',\n    type: 'string',\n    options: ['$__auto'],\n    description:\n      'Use the default value \"$__auto\". Change the \"step\" value in the query options to change the bucket size.',\n  };\n}\n\nexport function getOperationParamId(operationId: string, paramIndex: number) {\n  return `operations.${operationId}.param.${paramIndex}`;\n}\n\nexport function getOnLabelAddedHandler(changeToOperationId: string) {\n  return function onParamChanged(index: number, op: QueryBuilderOperation, def: QueryBuilderOperationDefinition) {\n    // Check if we actually have the label param. As it's optional the aggregation can have one less, which is the\n    // case of just simple aggregation without label. When user adds the label it now has the same number of params\n    // as its definition, and now we can change it to its `_by` variant.\n    if (op.params.length === def.params.length) {\n      return {\n        ...op,\n        id: changeToOperationId,\n      };\n    }\n    return op;\n  };\n}\n\n/**\n * Very simple poc implementation, needs to be modified to support all aggregation operators\n */\nexport function getAggregationExplainer(aggregationName: string, mode: 'by' | 'without' | '') {\n  return function aggregationExplainer(model: QueryBuilderOperation) {\n    const labels = model.params.map((label) => `\\`${label}\\``).join(' and ');\n    const labelWord = pluralize('label', model.params.length);\n\n    switch (mode) {\n      case 'by':\n        return `Calculates ${aggregationName} over dimensions while preserving ${labelWord} ${labels}.`;\n      case 'without':\n        return `Calculates ${aggregationName} over the dimensions ${labels}. All other labels are preserved.`;\n      default:\n        return `Calculates ${aggregationName} over the dimensions.`;\n    }\n  };\n}\n\n/**\n * This function will transform operations without labels to their plan aggregation operation\n */\nexport function getLastLabelRemovedHandler(changeToOperationId: string) {\n  return function onParamChanged(index: number, op: QueryBuilderOperation, def: QueryBuilderOperationDefinition) {\n    // If definition has more params then is defined there are no optional rest params anymore.\n    // We then transform this operation into a different one\n    if (op.params.length < def.params.length) {\n      return {\n        ...op,\n        id: changeToOperationId,\n      };\n    }\n\n    return op;\n  };\n}\n\nexport function getLokiOperationDisplayName(funcName: string) {\n  return capitalize(funcName.replace(/_/g, ' '));\n}\n\nexport function defaultAddOperationHandler<T extends VisualQuery>(def: QueryBuilderOperationDefinition, query: T) {\n  const newOperation: QueryBuilderOperation = {\n    id: def.id,\n    params: def.defaultParams,\n  };\n\n  return {\n    ...query,\n    operations: [...query.operations, newOperation],\n  };\n}\n\nexport function createAggregationOperation(\n  name: string,\n  overrides: Partial<QueryBuilderOperationDefinition> = {}\n): QueryBuilderOperationDefinition[] {\n  const operations: QueryBuilderOperationDefinition[] = [\n    {\n      id: name,\n      name: getLokiOperationDisplayName(name),\n      params: [\n        {\n          name: 'By label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n        },\n      ],\n      defaultParams: [],\n      toggleable: true,\n      alternativesKey: 'plain aggregations',\n      category: LokiVisualQueryOperationCategory.Aggregations,\n      renderer: functionRendererLeft,\n      paramChangedHandler: getOnLabelAddedHandler(`__${name}_by`),\n      explainHandler: getAggregationExplainer(name, ''),\n      addOperationHandler: defaultAddOperationHandler,\n      ...overrides,\n    },\n    {\n      id: `__${name}_by`,\n      name: `${getLokiOperationDisplayName(name)} by`,\n      params: [\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: [''],\n      alternativesKey: 'aggregations by',\n      category: LokiVisualQueryOperationCategory.Aggregations,\n      renderer: getAggregationByRenderer(name),\n      paramChangedHandler: getLastLabelRemovedHandler(name),\n      explainHandler: getAggregationExplainer(name, 'by'),\n      addOperationHandler: defaultAddOperationHandler,\n      hideFromList: true,\n      ...overrides,\n    },\n    {\n      id: `__${name}_without`,\n      name: `${getLokiOperationDisplayName(name)} without`,\n      params: [\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: [''],\n      alternativesKey: 'aggregations by',\n      category: LokiVisualQueryOperationCategory.Aggregations,\n      renderer: getAggregationWithoutRenderer(name),\n      paramChangedHandler: getLastLabelRemovedHandler(name),\n      explainHandler: getAggregationExplainer(name, 'without'),\n      addOperationHandler: defaultAddOperationHandler,\n      hideFromList: true,\n      ...overrides,\n    },\n  ];\n\n  return operations;\n}\n\nfunction getAggregationWithoutRenderer(aggregation: string) {\n  return function aggregationRenderer(\n    model: QueryBuilderOperation,\n    def: QueryBuilderOperationDefinition,\n    innerExpr: string\n  ) {\n    return `${aggregation} without(${model.params.join(', ')}) (${innerExpr})`;\n  };\n}\n\nexport function functionRendererLeft(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDefinition,\n  innerExpr: string\n) {\n  const params = renderParams(model, def, innerExpr);\n  const str = model.id + '(';\n\n  if (innerExpr) {\n    params.push(innerExpr);\n  }\n\n  return str + params.join(', ') + ')';\n}\n\nfunction renderParams(model: QueryBuilderOperation, def: QueryBuilderOperationDefinition, innerExpr: string) {\n  return (model.params ?? []).map((value, index) => {\n    const paramDef = def.params[index];\n    if (paramDef.type === 'string') {\n      return '\"' + value + '\"';\n    }\n\n    return value;\n  });\n}\n\nfunction getAggregationByRenderer(aggregation: string) {\n  return function aggregationRenderer(\n    model: QueryBuilderOperation,\n    def: QueryBuilderOperationDefinition,\n    innerExpr: string\n  ) {\n    return `${aggregation} by(${model.params.join(', ')}) (${innerExpr})`;\n  };\n}\n\nexport function createAggregationOperationWithParam(\n  name: string,\n  paramsDef: { params: QueryBuilderOperationParamDef[]; defaultParams: QueryBuilderOperationParamValue[] },\n  overrides: Partial<QueryBuilderOperationDefinition> = {}\n): QueryBuilderOperationDefinition[] {\n  const operations = createAggregationOperation(name, overrides);\n  operations[0].params.unshift(...paramsDef.params);\n  operations[1].params.unshift(...paramsDef.params);\n  operations[2].params.unshift(...paramsDef.params);\n  operations[0].defaultParams = paramsDef.defaultParams;\n  operations[1].defaultParams = [...paramsDef.defaultParams, ''];\n  operations[2].defaultParams = [...paramsDef.defaultParams, ''];\n  operations[1].renderer = getAggregationByRendererWithParameter(name);\n  operations[2].renderer = getAggregationByRendererWithParameter(name);\n  return operations;\n}\n\nfunction getAggregationByRendererWithParameter(aggregation: string) {\n  return function aggregationRenderer(\n    model: QueryBuilderOperation,\n    def: QueryBuilderOperationDefinition,\n    innerExpr: string\n  ) {\n    const restParamIndex = def.params.findIndex((param) => param.restParam);\n    const params = model.params.slice(0, restParamIndex);\n    const restParams = model.params.slice(restParamIndex);\n\n    return `${aggregation} by(${restParams.join(', ')}) (${params\n      .map((param, idx) => (def.params[idx].type === 'string' ? `\\\"${param}\\\"` : param))\n      .join(', ')}, ${innerExpr})`;\n  };\n}\n","import { useState } from 'react';\n\nimport { SelectableValue, getDefaultTimeRange, toOption } from '@grafana/data';\nimport { QueryBuilderOperationParamEditorProps, VisualQueryModeller } from '@grafana/plugin-ui';\nimport { Select } from '@grafana/ui';\n\nimport { placeHolderScopedVars } from '../../components/monaco-query-field/monaco-completion-provider/validation';\nimport { LokiDatasource } from '../../datasource';\nimport { getLogQueryFromMetricsQuery, isQueryWithError } from '../../queryUtils';\nimport { extractUnwrapLabelKeysFromDataFrame } from '../../responseUtils';\nimport { getOperationParamId } from '../operationUtils';\nimport { LokiVisualQuery } from '../types';\n\nexport function UnwrapParamEditor({\n  onChange,\n  index,\n  operationId,\n  value,\n  query,\n  datasource,\n  timeRange,\n  queryModeller,\n}: QueryBuilderOperationParamEditorProps) {\n  const [state, setState] = useState<{\n    options?: Array<SelectableValue<string>>;\n    isLoading?: boolean;\n  }>({});\n\n  return (\n    <Select\n      inputId={getOperationParamId(operationId, index)}\n      onOpenMenu={async () => {\n        // This check is always true, we do it to make typescript happy\n        if (datasource instanceof LokiDatasource) {\n          setState({ isLoading: true });\n          const options = await loadUnwrapOptions(query, datasource, queryModeller, timeRange);\n          setState({ options, isLoading: undefined });\n        }\n      }}\n      isLoading={state.isLoading}\n      allowCustomValue\n      noOptionsMessage=\"No labels found\"\n      loadingMessage=\"Loading labels\"\n      options={state.options}\n      value={value ? toOption(value.toString()) : null}\n      onChange={(value) => {\n        if (value.value) {\n          onChange(index, value.value);\n        }\n      }}\n    />\n  );\n}\n\nasync function loadUnwrapOptions(\n  query: LokiVisualQuery,\n  datasource: LokiDatasource,\n  queryModeller: VisualQueryModeller,\n  timeRange = getDefaultTimeRange()\n): Promise<Array<SelectableValue<string>>> {\n  const queryExpr = queryModeller.renderQuery(query);\n  const logExpr = getLogQueryFromMetricsQuery(queryExpr);\n  if (isQueryWithError(datasource.interpolateString(logExpr, placeHolderScopedVars))) {\n    return [];\n  }\n\n  const samples = await datasource.getDataSamples({ expr: logExpr, refId: 'unwrap_samples' }, timeRange);\n  const unwrapLabels = extractUnwrapLabelKeysFromDataFrame(samples[0]);\n\n  const labelOptions = unwrapLabels.map((label) => ({\n    label,\n    value: label,\n  }));\n\n  return labelOptions;\n}\n","import { QueryBuilderOperationDefinition, QueryBuilderOperationParamValue } from '@grafana/plugin-ui';\n\nimport { binaryScalarOperations } from './binaryScalarOperations';\nimport { UnwrapParamEditor } from './components/UnwrapParamEditor';\nimport {\n  addLokiOperation,\n  addNestedQueryHandler,\n  createAggregationOperation,\n  createAggregationOperationWithParam,\n  createRangeOperation,\n  createRangeOperationWithGrouping,\n  getLineFilterRenderer,\n  labelFilterRenderer,\n  pipelineRenderer,\n} from './operationUtils';\nimport { LokiOperationId, LokiOperationOrder, lokiOperators, LokiVisualQueryOperationCategory } from './types';\n\nfunction getOperationDefinitions(): QueryBuilderOperationDefinition[] {\n  const aggregations = [\n    LokiOperationId.Sum,\n    LokiOperationId.Min,\n    LokiOperationId.Max,\n    LokiOperationId.Avg,\n    LokiOperationId.Stddev,\n    LokiOperationId.Stdvar,\n    LokiOperationId.Count,\n  ].flatMap((opId) =>\n    createAggregationOperation(opId, {\n      addOperationHandler: addLokiOperation,\n      orderRank: LokiOperationOrder.Last,\n    })\n  );\n\n  const aggregationsWithParam = [LokiOperationId.TopK, LokiOperationId.BottomK].flatMap((opId) => {\n    return createAggregationOperationWithParam(\n      opId,\n      {\n        params: [{ name: 'K-value', type: 'number' }],\n        defaultParams: [5],\n      },\n      {\n        addOperationHandler: addLokiOperation,\n        orderRank: LokiOperationOrder.Last,\n      }\n    );\n  });\n\n  const rangeOperations = [\n    createRangeOperation(LokiOperationId.Rate),\n    createRangeOperation(LokiOperationId.RateCounter),\n    createRangeOperation(LokiOperationId.CountOverTime),\n    createRangeOperation(LokiOperationId.SumOverTime),\n    createRangeOperation(LokiOperationId.BytesRate),\n    createRangeOperation(LokiOperationId.BytesOverTime),\n    createRangeOperation(LokiOperationId.AbsentOverTime),\n  ];\n\n  const rangeOperationsWithGrouping = [\n    ...createRangeOperationWithGrouping(LokiOperationId.AvgOverTime),\n    ...createRangeOperationWithGrouping(LokiOperationId.MaxOverTime),\n    ...createRangeOperationWithGrouping(LokiOperationId.MinOverTime),\n    ...createRangeOperationWithGrouping(LokiOperationId.FirstOverTime),\n    ...createRangeOperationWithGrouping(LokiOperationId.LastOverTime),\n    ...createRangeOperationWithGrouping(LokiOperationId.StdvarOverTime),\n    ...createRangeOperationWithGrouping(LokiOperationId.StddevOverTime),\n    ...createRangeOperationWithGrouping(LokiOperationId.QuantileOverTime),\n  ];\n\n  const list: QueryBuilderOperationDefinition[] = [\n    ...aggregations,\n    ...aggregationsWithParam,\n    ...rangeOperations,\n    ...rangeOperationsWithGrouping,\n    {\n      id: LokiOperationId.Json,\n      name: 'Json',\n      params: [\n        {\n          name: 'Expression',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          minWidth: 18,\n          placeholder: 'server=\"servers[0]\"',\n          description:\n            'Using expressions with your json parser will extract only the specified json fields to labels. You can specify one or more expressions in this way. All expressions must be quoted.',\n        },\n      ],\n      defaultParams: [],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.Parsers,\n      renderer: pipelineRenderer,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () =>\n        `This will extract keys and values from a [json](https://grafana.com/docs/loki/latest/logql/log_queries/#json) formatted log line as labels. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`,\n    },\n    {\n      id: LokiOperationId.Logfmt,\n      name: 'Logfmt',\n      params: [\n        {\n          name: 'Strict',\n          type: 'boolean',\n          optional: true,\n          description:\n            'With strict parsing enabled, the logfmt parser immediately stops scanning the log line and returns early with an error when it encounters any poorly formatted key/value pair.',\n        },\n        {\n          name: 'Keep empty',\n          type: 'boolean',\n          optional: true,\n          description:\n            'The logfmt parser retains standalone keys (keys without a value) as labels with its value set to empty string. ',\n        },\n        {\n          name: 'Expression',\n          type: 'string',\n          optional: true,\n          restParam: true,\n          minWidth: 18,\n          placeholder: 'field_name',\n          description:\n            'Using expressions with your logfmt parser will extract and rename (if provided) only the specified fields to labels. You can specify one or more expressions in this way.',\n        },\n      ],\n      defaultParams: [false, false],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.Parsers,\n      renderer: pipelineRenderer,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () =>\n        `This will extract all keys and values from a [logfmt](https://grafana.com/docs/loki/latest/logql/log_queries/#logfmt) formatted log line as labels. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`,\n    },\n    {\n      id: LokiOperationId.Regexp,\n      name: 'Regexp',\n      params: [\n        {\n          name: 'String',\n          type: 'string',\n          hideName: true,\n          placeholder: '<re>',\n          description: 'The regexp expression that matches the structure of a log line.',\n          minWidth: 20,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.Parsers,\n      renderer: (model, def, innerExpr) => `${innerExpr} | regexp \\`${model.params[0]}\\``,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () =>\n        `The [regexp parser](https://grafana.com/docs/loki/latest/logql/log_queries/#regular-expression) takes a single parameter | regexp \"<re>\" which is the regular expression using the Golang RE2 syntax. The regular expression must contain a least one named sub-match (e.g (?P<name>re)), each sub-match will extract a different label. The expression matches the structure of a log line. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`,\n    },\n    {\n      id: LokiOperationId.Pattern,\n      name: 'Pattern',\n      params: [\n        {\n          name: 'String',\n          type: 'string',\n          hideName: true,\n          placeholder: '<pattern-expression>',\n          description: 'The expression that matches the structure of a log line.',\n          minWidth: 20,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.Parsers,\n      renderer: (model, def, innerExpr) => `${innerExpr} | pattern \\`${model.params[0]}\\``,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () =>\n        `The [pattern parser](https://grafana.com/docs/loki/latest/logql/log_queries/#pattern) allows the explicit extraction of fields from log lines by defining a pattern expression (| pattern \\`<pattern-expression>\\`). The expression matches the structure of a log line. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`,\n    },\n    {\n      id: LokiOperationId.Unpack,\n      name: 'Unpack',\n      params: [],\n      defaultParams: [],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.Parsers,\n      renderer: pipelineRenderer,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () =>\n        `This will extract all keys and values from a JSON log line, [unpacking](https://grafana.com/docs/loki/latest/logql/log_queries/#unpack) all embedded labels in the pack stage. The extracted labels can be used in label filter expressions and used as values for a range aggregation via the unwrap operation.`,\n    },\n    {\n      id: LokiOperationId.LineFormat,\n      name: 'Line format',\n      params: [\n        {\n          name: 'String',\n          type: 'string',\n          hideName: true,\n          placeholder: '{{.status_code}}',\n          description: 'A line template that can refer to stream labels and extracted labels.',\n          minWidth: 20,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.PipeOperations,\n      renderer: (model, def, innerExpr) => `${innerExpr} | line_format \\`${model.params[0]}\\``,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () =>\n        `This will replace log line using a specified template. The template can refer to stream labels and extracted labels.\n\nExample: \\`{{.status_code}} - {{.message}}\\`\n\n[Read the docs](https://grafana.com/docs/loki/latest/logql/log_queries/#line-format-expression) for more.\n        `,\n    },\n    {\n      id: LokiOperationId.LabelFormat,\n      name: 'Label format',\n      params: [\n        { name: 'Label', type: 'string' },\n        { name: 'Rename to', type: 'string' },\n      ],\n      defaultParams: ['', ''],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.PipeOperations,\n      renderer: (model, def, innerExpr) => `${innerExpr} | label_format ${model.params[1]}=${model.params[0]}`,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () =>\n        `This will change name of label to desired new label. In the example below, label \"error_level\" will be renamed to \"level\".\n\nExample: \\`\\`error_level=\\`level\\` \\`\\`\n\n[Read the docs](https://grafana.com/docs/loki/latest/logql/log_queries/#labels-format-expression) for more.\n        `,\n    },\n\n    {\n      id: LokiOperationId.LineContains,\n      name: 'Line contains',\n      params: [\n        {\n          name: '',\n          type: 'string',\n          hideName: true,\n          restParam: true,\n          placeholder: 'Text to find',\n          description: 'Find log lines that contains this text',\n          minWidth: 20,\n          runQueryOnEnter: true,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'line filter',\n      category: LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: LokiOperationOrder.LineFilters,\n      renderer: getLineFilterRenderer('|='),\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) => `Return log lines that contain string \\`${op.params?.join('`, or `')}\\`.`,\n    },\n    {\n      id: LokiOperationId.LineContainsNot,\n      name: 'Line does not contain',\n      params: [\n        {\n          name: '',\n          type: 'string',\n          hideName: true,\n          restParam: true,\n          placeholder: 'Text to exclude',\n          description: 'Find log lines that does not contain this text',\n          minWidth: 26,\n          runQueryOnEnter: true,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'line filter',\n      category: LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: LokiOperationOrder.LineFilters,\n      renderer: getLineFilterRenderer('!='),\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) => `Return log lines that does not contain string \\`${op.params?.join('`, or `')}\\`.`,\n    },\n    {\n      id: LokiOperationId.LineContainsCaseInsensitive,\n      name: 'Line contains case insensitive',\n      params: [\n        {\n          name: '',\n          type: 'string',\n          hideName: true,\n          restParam: true,\n          placeholder: 'Text to find',\n          description: 'Find log lines that contains this text',\n          minWidth: 33,\n          runQueryOnEnter: true,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'line filter',\n      category: LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: LokiOperationOrder.LineFilters,\n      renderer: getLineFilterRenderer('|~', true),\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) => `Return log lines that match regex \\`(?i)${op.params?.join('`, or `(?i)')}\\`.`,\n    },\n    {\n      id: LokiOperationId.LineContainsNotCaseInsensitive,\n      name: 'Line does not contain case insensitive',\n      params: [\n        {\n          name: '',\n          type: 'string',\n          hideName: true,\n          restParam: true,\n          placeholder: 'Text to exclude',\n          description: 'Find log lines that does not contain this text',\n          minWidth: 40,\n          runQueryOnEnter: true,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'line filter',\n      category: LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: LokiOperationOrder.LineFilters,\n      renderer: getLineFilterRenderer('!~', true),\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) => `Return log lines that does not match regex \\`(?i)${op.params?.join('`, or `(?i)')}\\`.`,\n    },\n    {\n      id: LokiOperationId.LineMatchesRegex,\n      name: 'Line contains regex match',\n      params: [\n        {\n          name: '',\n          type: 'string',\n          hideName: true,\n          restParam: true,\n          placeholder: 'Pattern to match',\n          description: 'Find log lines that match this regex pattern',\n          minWidth: 30,\n          runQueryOnEnter: true,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'line filter',\n      category: LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: LokiOperationOrder.LineFilters,\n      renderer: getLineFilterRenderer('|~'),\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) => `Return log lines that match a \\`RE2\\` regex pattern. \\`${op.params?.join('`, or `')}\\`.`,\n    },\n    {\n      id: LokiOperationId.LineMatchesRegexNot,\n      name: 'Line does not match regex',\n      params: [\n        {\n          name: '',\n          type: 'string',\n          hideName: true,\n          restParam: true,\n          placeholder: 'Pattern to exclude',\n          description: 'Find log lines that does not match this regex pattern',\n          minWidth: 30,\n          runQueryOnEnter: true,\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'line filter',\n      category: LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: LokiOperationOrder.LineFilters,\n      renderer: getLineFilterRenderer('!~'),\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) =>\n        `Return log lines that doesn't match a \\`RE2\\` regex pattern. \\`${op.params?.join('`, or `')}\\`.`,\n    },\n    {\n      id: LokiOperationId.LineFilterIpMatches,\n      name: 'IP line filter expression',\n      params: [\n        {\n          name: 'Operator',\n          type: 'string',\n          minWidth: 16,\n          options: [lokiOperators.contains, lokiOperators.doesNotContain],\n        },\n        {\n          name: 'Pattern',\n          type: 'string',\n          placeholder: '<pattern>',\n          minWidth: 16,\n          runQueryOnEnter: true,\n        },\n      ],\n      defaultParams: ['|=', ''],\n      toggleable: true,\n      alternativesKey: 'line filter',\n      category: LokiVisualQueryOperationCategory.LineFilters,\n      orderRank: LokiOperationOrder.LineFilters,\n      renderer: (op, def, innerExpr) => `${innerExpr} ${op.params[0]} ip(\\`${op.params[1]}\\`)`,\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) => `Return log lines using IP matching of \\`${op.params[1]}\\``,\n    },\n    {\n      id: LokiOperationId.LabelFilter,\n      name: 'Label filter expression',\n      params: [\n        { name: 'Label', type: 'string', minWidth: 14 },\n        {\n          name: 'Operator',\n          type: 'string',\n          minWidth: 14,\n          options: [\n            lokiOperators.equals,\n            lokiOperators.doesNotEqual,\n            lokiOperators.matchesRegex,\n            lokiOperators.doesNotMatchRegex,\n            lokiOperators.greaterThan,\n            lokiOperators.lessThan,\n            lokiOperators.greaterThanOrEqual,\n            lokiOperators.lessThanOrEqual,\n          ],\n        },\n        { name: 'Value', type: 'string', minWidth: 14 },\n      ],\n      defaultParams: ['', '=', ''],\n      toggleable: true,\n      alternativesKey: 'label filter',\n      category: LokiVisualQueryOperationCategory.LabelFilters,\n      orderRank: LokiOperationOrder.PipeOperations,\n      renderer: labelFilterRenderer,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () => `Label expression filter allows filtering using original and extracted labels.`,\n    },\n    {\n      id: LokiOperationId.LabelFilterIpMatches,\n      name: 'IP label filter expression',\n      params: [\n        { name: 'Label', type: 'string', minWidth: 14 },\n        {\n          name: 'Operator',\n          type: 'string',\n          minWidth: 14,\n          options: [lokiOperators.equals, lokiOperators.doesNotEqual],\n        },\n        { name: 'Value', type: 'string', minWidth: 14 },\n      ],\n      defaultParams: ['', '=', ''],\n      toggleable: true,\n      alternativesKey: 'label filter',\n      category: LokiVisualQueryOperationCategory.LabelFilters,\n      orderRank: LokiOperationOrder.PipeOperations,\n      renderer: (model, def, innerExpr) =>\n        `${innerExpr} | ${model.params[0]} ${model.params[1]} ip(\\`${model.params[2]}\\`)`,\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) => `Return log lines using IP matching of \\`${op.params[2]}\\` for \\`${op.params[0]}\\` label`,\n    },\n    {\n      id: LokiOperationId.LabelFilterNoErrors,\n      name: 'No pipeline errors',\n      params: [],\n      defaultParams: [],\n      toggleable: true,\n      alternativesKey: 'label filter',\n      category: LokiVisualQueryOperationCategory.LabelFilters,\n      orderRank: LokiOperationOrder.NoErrors,\n      renderer: (model, def, innerExpr) => `${innerExpr} | __error__=\\`\\``,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () => `Filter out all formatting and parsing errors.`,\n    },\n    {\n      id: LokiOperationId.Unwrap,\n      name: 'Unwrap',\n      params: [\n        {\n          name: 'Identifier',\n          type: 'string',\n          hideName: true,\n          minWidth: 16,\n          placeholder: 'Label key',\n          editor: UnwrapParamEditor,\n        },\n        {\n          name: 'Conversion function',\n          hideName: true,\n          type: 'string',\n          options: ['duration', 'duration_seconds', 'bytes'],\n          optional: true,\n        },\n      ],\n      defaultParams: ['', ''],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.Unwrap,\n      renderer: (op, def, innerExpr) =>\n        `${innerExpr} | unwrap ${op.params[1] ? `${op.params[1]}(${op.params[0]})` : op.params[0]}`,\n      addOperationHandler: addLokiOperation,\n      explainHandler: (op) => {\n        let label = String(op.params[0]).length > 0 ? op.params[0] : '<label>';\n        return `Use the extracted label \\`${label}\\` as sample values instead of log lines for the subsequent range aggregation.${\n          op.params[1]\n            ? ` Conversion function \\`${op.params[1]}\\` wrapping \\`${label}\\` will attempt to convert this label from a specific format (e.g. 3k, 500ms).`\n            : ''\n        }`;\n      },\n    },\n    {\n      id: LokiOperationId.Decolorize,\n      name: 'Decolorize',\n      params: [],\n      defaultParams: [],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.PipeOperations,\n      renderer: (op, def, innerExpr) => `${innerExpr} | decolorize`,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () => `This will remove ANSI color codes from log lines.`,\n    },\n    {\n      id: LokiOperationId.Drop,\n      name: 'Drop',\n      params: [\n        // As drop can support both labels (e.g. job) and expressions (e.g. job=\"grafana\"), we\n        // use input and not LabelParamEditor.\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          minWidth: 18,\n          placeholder: 'job=\"grafana\"',\n          description: 'Specify labels or expressions to drop.',\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.PipeOperations,\n      renderer: pipelineRenderer,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () => 'The drop expression will drop the given labels in the pipeline.',\n    },\n    {\n      id: LokiOperationId.Keep,\n      name: 'Keep',\n      params: [\n        // As keep can support both labels (e.g. job) and expressions (e.g. job=\"grafana\"), we\n        // use input and not LabelParamEditor.\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          minWidth: 18,\n          placeholder: 'job=\"grafana\"',\n          description: 'Specify labels or expressions to keep.',\n        },\n      ],\n      defaultParams: [''],\n      toggleable: true,\n      alternativesKey: 'format',\n      category: LokiVisualQueryOperationCategory.Formats,\n      orderRank: LokiOperationOrder.PipeOperations,\n      renderer: pipelineRenderer,\n      addOperationHandler: addLokiOperation,\n      explainHandler: () =>\n        'The keep expression will keep only the specified labels in the pipeline and drop all the other labels.',\n    },\n    ...binaryScalarOperations,\n    {\n      id: LokiOperationId.NestedQuery,\n      name: 'Binary operation with query',\n      params: [],\n      defaultParams: [],\n      toggleable: true,\n      category: LokiVisualQueryOperationCategory.BinaryOps,\n      renderer: (model, def, innerExpr) => innerExpr,\n      addOperationHandler: addNestedQueryHandler,\n    },\n  ];\n\n  return list;\n}\n\n// Keeping a local copy as an optimization measure.\nexport const operationDefinitions = getOperationDefinitions();\n\n/**\n * Given an operator, return the corresponding explain.\n * For usage within the Query Editor.\n */\nexport function explainOperator(id: LokiOperationId | string): string {\n  const definition = operationDefinitions.find((operation) => operation.id === id);\n\n  const explain = definition?.explainHandler?.({ id: '', params: ['<value>'] }) || '';\n\n  // Strip markdown links\n  return explain.replace(/\\[(.*)\\]\\(.*\\)/g, '$1');\n}\n\nexport function getDefinitionById(id: string): QueryBuilderOperationDefinition | undefined {\n  return operationDefinitions.find((x) => x.id === id);\n}\n\nexport function checkParamsAreValid(\n  def: QueryBuilderOperationDefinition,\n  params: QueryBuilderOperationParamValue[]\n): boolean {\n  // For now we only check if the operation has all the required params.\n  if (params.length < def.params.filter((param) => !param.optional).length) {\n    return false;\n  }\n\n  return true;\n}\n","import { SyntaxNode } from '@lezer/common';\n\nimport {\n  And,\n  BinOpExpr,\n  Bool,\n  By,\n  ConvOp,\n  Decolorize,\n  DropLabel,\n  DropLabels,\n  DropLabelsExpr,\n  Filter,\n  FilterOp,\n  Grouping,\n  GroupingLabelList,\n  GroupingLabels,\n  Identifier,\n  Ip,\n  IpLabelFilter,\n  Json,\n  JsonExpressionParser,\n  KeepLabel,\n  KeepLabels,\n  KeepLabelsExpr,\n  LabelExtractionExpression,\n  LabelFilter,\n  LabelFormatMatcher,\n  LabelParser,\n  LineFilter,\n  LineFormatExpr,\n  LogfmtExpressionParser,\n  LogfmtParser,\n  LogRangeExpr,\n  Matcher,\n  MetricExpr,\n  Number as NumberLezer,\n  On,\n  Or,\n  parser,\n  ParserFlag,\n  Range,\n  RangeAggregationExpr,\n  RangeOp,\n  String,\n  UnitFilter,\n  Unwrap,\n  UnwrapExpr,\n  VectorAggregationExpr,\n  VectorOp,\n  Without,\n  BinOpModifier,\n  OnOrIgnoringModifier,\n  OrFilter,\n} from '@grafana/lezer-logql';\nimport { QueryBuilderLabelFilter, QueryBuilderOperation, QueryBuilderOperationParamValue } from '@grafana/plugin-ui';\n\nimport { binaryScalarDefs } from './binaryScalarOperations';\nimport { checkParamsAreValid, getDefinitionById } from './operations';\nimport {\n  ErrorId,\n  getAllByType,\n  getLeftMostChild,\n  getString,\n  makeBinOp,\n  makeError,\n  replaceVariables,\n} from './parsingUtils';\nimport { LokiOperationId, LokiVisualQuery, LokiVisualQueryBinary } from './types';\n\ninterface Context {\n  query: LokiVisualQuery;\n  errors: ParsingError[];\n}\n\ninterface ParsingError {\n  text: string;\n  from?: number;\n  to?: number;\n  parentType?: string;\n}\n\ninterface GetOperationResult {\n  operation?: QueryBuilderOperation;\n  error?: string;\n}\n\nexport function buildVisualQueryFromString(expr: string): Context {\n  const replacedExpr = replaceVariables(expr);\n  const tree = parser.parse(replacedExpr);\n  const node = tree.topNode;\n\n  // This will be modified in the handleExpression\n  const visQuery: LokiVisualQuery = {\n    labels: [],\n    operations: [],\n  };\n\n  const context: Context = {\n    query: visQuery,\n    errors: [],\n  };\n\n  try {\n    handleExpression(replacedExpr, node, context);\n  } catch (err) {\n    // Not ideal to log it here, but otherwise we would lose the stack trace.\n    console.error(err);\n    if (err instanceof Error) {\n      context.errors.push({\n        text: err.message,\n      });\n    }\n  }\n\n  // If we have empty query, we want to reset errors\n  if (isEmptyQuery(context.query)) {\n    context.errors = [];\n  }\n  return context;\n}\n\nexport function handleExpression(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n  switch (node.type.id) {\n    case Matcher: {\n      visQuery.labels.push(getLabel(expr, node));\n      const err = node.getChild(ErrorId);\n      if (err) {\n        context.errors.push(makeError(expr, err));\n      }\n      break;\n    }\n\n    case LineFilter: {\n      const { operation, error } = getLineFilter(expr, node);\n      if (operation) {\n        visQuery.operations.push(operation);\n      }\n      // Show error for query patterns not supported in visual query builder\n      if (error) {\n        context.errors.push(createNotSupportedError(expr, node, error));\n      }\n      break;\n    }\n\n    case LabelParser: {\n      visQuery.operations.push(getLabelParser(expr, node));\n      break;\n    }\n\n    case LabelFilter: {\n      const { operation, error } = getLabelFilter(expr, node);\n      if (operation) {\n        visQuery.operations.push(operation);\n      }\n      // Show error for query patterns not supported in visual query builder\n      if (error) {\n        context.errors.push(createNotSupportedError(expr, node, error));\n      }\n      break;\n    }\n    case JsonExpressionParser: {\n      visQuery.operations.push(getJsonExpressionParser(expr, node));\n      break;\n    }\n\n    case LogfmtParser:\n    case LogfmtExpressionParser: {\n      const { operation, error } = getLogfmtParser(expr, node);\n      if (operation) {\n        visQuery.operations.push(operation);\n      }\n      if (error) {\n        context.errors.push(createNotSupportedError(expr, node, error));\n      }\n      break;\n    }\n\n    case LineFormatExpr: {\n      visQuery.operations.push(getLineFormat(expr, node));\n      break;\n    }\n\n    case LabelFormatMatcher: {\n      visQuery.operations.push(getLabelFormat(expr, node));\n      break;\n    }\n\n    case UnwrapExpr: {\n      const { operation, error } = handleUnwrapExpr(expr, node, context);\n      if (operation) {\n        visQuery.operations.push(operation);\n      }\n      // Show error for query patterns not supported in visual query builder\n      if (error) {\n        context.errors.push(createNotSupportedError(expr, node, error));\n      }\n\n      break;\n    }\n\n    case Decolorize: {\n      visQuery.operations.push(getDecolorize());\n      break;\n    }\n\n    case RangeAggregationExpr: {\n      visQuery.operations.push(handleRangeAggregation(expr, node, context));\n      break;\n    }\n\n    case VectorAggregationExpr: {\n      visQuery.operations.push(handleVectorAggregation(expr, node, context));\n      break;\n    }\n\n    case BinOpExpr: {\n      handleBinary(expr, node, context);\n      break;\n    }\n\n    case ErrorId: {\n      if (isIntervalVariableError(node)) {\n        break;\n      }\n      context.errors.push(makeError(expr, node));\n      break;\n    }\n\n    case DropLabelsExpr: {\n      visQuery.operations.push(handleDropFilter(expr, node, context));\n      break;\n    }\n\n    case KeepLabelsExpr: {\n      visQuery.operations.push(handleKeepFilter(expr, node, context));\n      break;\n    }\n\n    default: {\n      // Any other nodes we just ignore and go to its children. This should be fine as there are lots of wrapper\n      // nodes that can be skipped.\n      // TODO: there are probably cases where we will just skip nodes we don't support and we should be able to\n      //  detect those and report back.\n      let child = node.firstChild;\n      while (child) {\n        handleExpression(expr, child, context);\n        child = child.nextSibling;\n      }\n    }\n  }\n}\n\nfunction getLabel(expr: string, node: SyntaxNode): QueryBuilderLabelFilter {\n  const labelNode = node.getChild(Identifier);\n  const label = getString(expr, labelNode);\n  const op = getString(expr, labelNode?.nextSibling);\n  let value = getString(expr, node.getChild(String));\n  // `value` is wrapped in double quotes, so we need to remove them. As a value can contain double quotes, we can't use RegEx here.\n  value = value.substring(1, value.length - 1);\n\n  return {\n    label,\n    op,\n    value,\n  };\n}\n\nfunction getLineFilter(expr: string, node: SyntaxNode): GetOperationResult {\n  const filter = getString(expr, node.getChild(Filter));\n  const filterExpr = handleQuotes(getString(expr, node.getChild(String)));\n  const ipLineFilter = node.getChild(FilterOp)?.getChild(Ip);\n  if (ipLineFilter) {\n    return {\n      operation: {\n        id: LokiOperationId.LineFilterIpMatches,\n        params: [filter, filterExpr],\n      },\n    };\n  }\n\n  const params = [filterExpr];\n  let orFilter = node.getChild(OrFilter);\n  while (orFilter) {\n    params.push(handleQuotes(getString(expr, orFilter.getChild(String))));\n    orFilter = orFilter.getChild(OrFilter);\n  }\n\n  const mapFilter: Record<string, LokiOperationId> = {\n    '|=': LokiOperationId.LineContains,\n    '!=': LokiOperationId.LineContainsNot,\n    '|~': LokiOperationId.LineMatchesRegex,\n    '!~': LokiOperationId.LineMatchesRegexNot,\n  };\n\n  return {\n    operation: {\n      id: mapFilter[filter],\n      params,\n    },\n  };\n}\n\nfunction getLabelParser(expr: string, node: SyntaxNode): QueryBuilderOperation {\n  const parserNode = node.firstChild;\n  const parser = getString(expr, parserNode);\n\n  const string = handleQuotes(getString(expr, node.getChild(String)));\n  let params: QueryBuilderOperationParamValue[] = !!string ? [string] : [];\n  const opDef = getDefinitionById(parser);\n  if (opDef && !checkParamsAreValid(opDef, params)) {\n    params = opDef?.defaultParams || [];\n  }\n\n  return {\n    id: parser,\n    params,\n  };\n}\n\nfunction getJsonExpressionParser(expr: string, node: SyntaxNode): QueryBuilderOperation {\n  const parserNode = node.getChild(Json);\n  const parser = getString(expr, parserNode);\n\n  const params = [...getAllByType(expr, node, LabelExtractionExpression)];\n  return {\n    id: parser,\n    params,\n  };\n}\n\nfunction getLogfmtParser(expr: string, node: SyntaxNode): GetOperationResult {\n  const flags: string[] = [];\n  const labels: string[] = [];\n  let error: string | undefined = undefined;\n\n  const offset = node.from;\n  node.toTree().iterate({\n    enter: (subNode) => {\n      if (subNode.type.id === ParserFlag) {\n        flags.push(expr.substring(subNode.from + offset, subNode.to + offset));\n      } else if (subNode.type.id === LabelExtractionExpression) {\n        labels.push(expr.substring(subNode.from + offset, subNode.to + offset));\n      } else if (subNode.type.id === ErrorId) {\n        error = `Unexpected string \"${expr.substring(subNode.from + offset, subNode.to + offset)}\"`;\n      }\n    },\n  });\n\n  const operation = {\n    id: LokiOperationId.Logfmt,\n    params: [flags.includes('--strict'), flags.includes('--keep-empty'), ...labels],\n  };\n\n  return {\n    operation,\n    error,\n  };\n}\n\nfunction getLabelFilter(expr: string, node: SyntaxNode): GetOperationResult {\n  // Check for nodes not supported in visual builder and return error\n  if (node.getChild(Or) || node.getChild(And) || node.getChild('Comma')) {\n    return {\n      error: 'Label filter with comma, \"and\", \"or\" not supported in query builder',\n    };\n  }\n  if (node.firstChild!.type.id === IpLabelFilter) {\n    const ipLabelFilter = node.firstChild;\n    const label = ipLabelFilter?.getChild(Identifier);\n    const op = label?.nextSibling;\n    const value = ipLabelFilter?.getChild(String);\n    const valueString = handleQuotes(getString(expr, value));\n\n    return {\n      operation: {\n        id: LokiOperationId.LabelFilterIpMatches,\n        params: [getString(expr, label), getString(expr, op), valueString],\n      },\n    };\n  }\n\n  const id = LokiOperationId.LabelFilter;\n  if (node.firstChild!.type.id === UnitFilter) {\n    const filter = node.firstChild!.firstChild;\n    const label = filter!.firstChild;\n    const op = label!.nextSibling;\n    const value = op!.nextSibling;\n    const valueString = handleQuotes(getString(expr, value));\n\n    return {\n      operation: {\n        id,\n        params: [getString(expr, label), getString(expr, op), valueString],\n      },\n    };\n  }\n  // In this case it is Matcher or NumberFilter\n  const filter = node.firstChild;\n  const label = filter!.firstChild;\n  const op = label!.nextSibling;\n  const value = op!.nextSibling;\n  const params = [getString(expr, label), getString(expr, op), handleQuotes(getString(expr, value))];\n\n  // Special case of pipe filtering - no errors\n  if (params.join('') === `__error__=`) {\n    return {\n      operation: {\n        id: LokiOperationId.LabelFilterNoErrors,\n        params: [],\n      },\n    };\n  }\n\n  return {\n    operation: {\n      id,\n      params,\n    },\n  };\n}\n\nfunction getLineFormat(expr: string, node: SyntaxNode): QueryBuilderOperation {\n  const id = LokiOperationId.LineFormat;\n  const string = handleQuotes(getString(expr, node.getChild(String)));\n\n  return {\n    id,\n    params: [string],\n  };\n}\n\nfunction getLabelFormat(expr: string, node: SyntaxNode): QueryBuilderOperation {\n  const id = LokiOperationId.LabelFormat;\n  const renameTo = node.getChild(Identifier);\n  const op = renameTo!.nextSibling;\n  const originalLabel = op!.nextSibling;\n\n  return {\n    id,\n    params: [getString(expr, originalLabel), handleQuotes(getString(expr, renameTo))],\n  };\n}\n\nfunction getDecolorize(): QueryBuilderOperation {\n  const id = LokiOperationId.Decolorize;\n\n  return {\n    id,\n    params: [],\n  };\n}\n\nfunction handleUnwrapExpr(expr: string, node: SyntaxNode, context: Context): GetOperationResult {\n  const unwrapExprChild = node.getChild(UnwrapExpr);\n  const labelFilterChild = node.getChild(LabelFilter);\n  const unwrapChild = node.getChild(Unwrap);\n\n  if (unwrapExprChild) {\n    handleExpression(expr, unwrapExprChild, context);\n  }\n\n  if (labelFilterChild) {\n    handleExpression(expr, labelFilterChild, context);\n  }\n\n  if (unwrapChild) {\n    if (unwrapChild.nextSibling?.type.id === ConvOp) {\n      const convOp = unwrapChild.nextSibling;\n      const identifier = convOp.nextSibling;\n      return {\n        operation: {\n          id: LokiOperationId.Unwrap,\n          params: [getString(expr, identifier), getString(expr, convOp)],\n        },\n      };\n    }\n\n    return {\n      operation: {\n        id: LokiOperationId.Unwrap,\n        params: [getString(expr, unwrapChild?.nextSibling), ''],\n      },\n    };\n  }\n\n  return {};\n}\n\nfunction handleRangeAggregation(expr: string, node: SyntaxNode, context: Context) {\n  const nameNode = node.getChild(RangeOp);\n  const funcName = getString(expr, nameNode);\n  const number = node.getChild(NumberLezer);\n  const logExpr = node.getChild(LogRangeExpr);\n  const params = number !== null && number !== undefined ? [getString(expr, number)] : [];\n  const range = logExpr?.getChild(Range);\n  const rangeValue = range ? getString(expr, range) : null;\n  const grouping = node.getChild(Grouping);\n\n  if (rangeValue) {\n    params.unshift(rangeValue.substring(1, rangeValue.length - 1));\n  }\n\n  if (grouping) {\n    params.push(...getAllByType(expr, grouping, Identifier));\n  }\n\n  const op = {\n    id: funcName,\n    params,\n  };\n\n  if (logExpr) {\n    handleExpression(expr, logExpr, context);\n  }\n\n  return op;\n}\n\nfunction handleVectorAggregation(expr: string, node: SyntaxNode, context: Context) {\n  const nameNode = node.getChild(VectorOp);\n  let funcName = getString(expr, nameNode);\n\n  const grouping = node.getChild(Grouping);\n  const params = [];\n\n  const numberNode = node.getChild(NumberLezer);\n  const errorNode = node.getChild(ErrorId)?.getChild(Identifier);\n\n  if (numberNode) {\n    params.push(Number(getString(expr, numberNode)));\n  } else if (errorNode) {\n    // Variables get parsed as errors, so the value us an identifier within an error node.\n    params.push(getString(expr, errorNode));\n  }\n\n  if (grouping) {\n    const byModifier = grouping.getChild(By);\n    if (byModifier && funcName) {\n      funcName = `__${funcName}_by`;\n    }\n\n    const withoutModifier = grouping.getChild(Without);\n    if (withoutModifier) {\n      funcName = `__${funcName}_without`;\n    }\n\n    params.push(...getAllByType(expr, grouping, Identifier));\n  }\n\n  const metricExpr = node.getChild(MetricExpr);\n  const op: QueryBuilderOperation = { id: funcName, params };\n\n  if (metricExpr) {\n    // A vector aggregation expression with a child of metric expression with a child of binary expression is ambiguous after being parsed into a visual query\n    if (metricExpr.firstChild?.type.id === BinOpExpr) {\n      context.errors.push({\n        text: 'Query parsing is ambiguous.',\n        from: metricExpr.firstChild.from,\n        to: metricExpr.firstChild?.to,\n      });\n    }\n\n    handleExpression(expr, metricExpr, context);\n  }\n\n  return op;\n}\n\nconst operatorToOpName = binaryScalarDefs.reduce<Record<string, { id: string; comparison?: boolean }>>((acc, def) => {\n  acc[def.sign] = {\n    id: def.id,\n    comparison: def.comparison,\n  };\n  return acc;\n}, {});\n\n/**\n * Right now binary expressions can be represented in 2 way in visual query. As additional operation in case it is\n * just operation with scalar or it creates a binaryQuery when it's 2 queries.\n * @param expr\n * @param node\n * @param context\n */\nfunction handleBinary(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n  const left = node.firstChild!;\n  const op = getString(expr, left.nextSibling);\n  const binModifier = getBinaryModifier(expr, node.getChild(BinOpModifier));\n\n  const right = node.lastChild!;\n\n  const opDef = operatorToOpName[op];\n\n  const leftNumber = getLastChildWithSelector(left, 'MetricExpr.LiteralExpr.Number');\n  const rightNumber = getLastChildWithSelector(right, 'MetricExpr.LiteralExpr.Number');\n\n  const rightBinary = right.getChild(BinOpExpr);\n\n  if (leftNumber) {\n    // TODO: this should be already handled in case parent is binary expression as it has to be added to parent\n    //  if query starts with a number that isn't handled now.\n  } else {\n    // If this is binary we don't really know if there is a query or just chained scalars. So\n    // we have to traverse a bit deeper to know\n    handleExpression(expr, left, context);\n  }\n\n  if (rightNumber) {\n    visQuery.operations.push(makeBinOp(opDef, expr, right, !!binModifier?.isBool));\n  } else if (rightBinary) {\n    // Due to the way binary ops are parsed we can get a binary operation on the right that starts with a number which\n    // is a factor for a current binary operation. So we have to add it as an operation now.\n    const leftMostChild = getLeftMostChild(right);\n    if (leftMostChild?.type.id === NumberLezer) {\n      visQuery.operations.push(makeBinOp(opDef, expr, leftMostChild, !!binModifier?.isBool));\n    }\n\n    // If we added the first number literal as operation here we still can continue and handle the rest as the first\n    // number will be just skipped.\n    handleExpression(expr, right, context);\n  } else {\n    visQuery.binaryQueries = visQuery.binaryQueries || [];\n    const binQuery: LokiVisualQueryBinary = {\n      operator: op,\n      query: {\n        labels: [],\n        operations: [],\n      },\n    };\n    if (binModifier?.isMatcher) {\n      binQuery.vectorMatchesType = binModifier.matchType;\n      binQuery.vectorMatches = binModifier.matches;\n    }\n    visQuery.binaryQueries.push(binQuery);\n    handleExpression(expr, right, {\n      query: binQuery.query,\n      errors: context.errors,\n    });\n  }\n}\n\nfunction getBinaryModifier(\n  expr: string,\n  node: SyntaxNode | null\n):\n  | { isBool: true; isMatcher: false }\n  | { isBool: boolean; isMatcher: true; matches: string; matchType: 'ignoring' | 'on' }\n  | undefined {\n  if (!node) {\n    return undefined;\n  }\n  const matcher = node.getChild(OnOrIgnoringModifier);\n  const boolMatcher = node.getChild(Bool);\n\n  if (!matcher && boolMatcher) {\n    return { isBool: true, isMatcher: false };\n  } else {\n    if (!matcher) {\n      // Not sure what this could be, maybe should be an error.\n      return undefined;\n    }\n    const labels = getString(expr, matcher.getChild(GroupingLabels)?.getChild(GroupingLabelList));\n    return {\n      isMatcher: true,\n      isBool: !!boolMatcher,\n      matches: labels,\n      matchType: matcher.getChild(On) ? 'on' : 'ignoring',\n    };\n  }\n}\n\nfunction isIntervalVariableError(node: SyntaxNode) {\n  return node?.parent?.type.id === Range;\n}\n\nexport function handleQuotes(string: string) {\n  if (string[0] === `\"` && string[string.length - 1] === `\"`) {\n    return string\n      .substring(1, string.length - 1)\n      .replace(/\\\\\"/g, '\"')\n      .replace(/\\\\\\\\/g, '\\\\');\n  }\n  return string.replace(/`/g, '');\n}\n\n/**\n * Simple helper to traverse the syntax tree. Instead of node.getChild('foo')?.getChild('bar')?.getChild('baz') you\n * can write getChildWithSelector(node, 'foo.bar.baz')\n * @param node\n * @param selector\n */\nfunction getLastChildWithSelector(node: SyntaxNode, selector: string) {\n  let child: SyntaxNode | null = node;\n  const children = selector.split('.');\n  for (const s of children) {\n    child = child.getChild(s);\n    if (!child) {\n      return null;\n    }\n  }\n  return child;\n}\n\n/**\n * Helper function to enrich error text with information that visual query builder doesn't support that logQL\n * @param expr\n * @param node\n * @param error\n */\nfunction createNotSupportedError(expr: string, node: SyntaxNode, error: string) {\n  const err = makeError(expr, node);\n  err.text = `${error}: ${err.text}`;\n  return err;\n}\n\nfunction isEmptyQuery(query: LokiVisualQuery) {\n  if (query.labels.length === 0 && query.operations.length === 0) {\n    return true;\n  }\n  return false;\n}\n\nfunction handleDropFilter(expr: string, node: SyntaxNode, context: Context): QueryBuilderOperation {\n  const labels: string[] = [];\n  let exploringNode = node.getChild(DropLabels);\n  while (exploringNode) {\n    const label = getString(expr, exploringNode.getChild(DropLabel));\n    if (label) {\n      labels.push(label);\n    }\n    exploringNode = exploringNode?.getChild(DropLabels);\n  }\n  labels.reverse();\n  return {\n    id: LokiOperationId.Drop,\n    params: labels,\n  };\n}\n\nfunction handleKeepFilter(expr: string, node: SyntaxNode, context: Context): QueryBuilderOperation {\n  const labels: string[] = [];\n  let exploringNode = node.getChild(KeepLabels);\n  while (exploringNode) {\n    const label = getString(expr, exploringNode.getChild(KeepLabel));\n    if (label) {\n      labels.push(label);\n    }\n    exploringNode = exploringNode?.getChild(KeepLabels);\n  }\n  labels.reverse();\n  return {\n    id: LokiOperationId.Keep,\n    params: labels,\n  };\n}\n","import { SyntaxNode, TreeCursor } from '@lezer/common';\n\nimport { QueryBuilderOperation, QueryBuilderOperationParamValue } from '@grafana/plugin-ui';\n\n// Although 0 isn't explicitly provided in the @grafana/lezer-logql library as the error node ID, it does appear to be the ID of error nodes within lezer.\nexport const ErrorId = 0;\n\nexport function getLeftMostChild(cur: SyntaxNode): SyntaxNode {\n  return cur.firstChild ? getLeftMostChild(cur.firstChild) : cur;\n}\n\nexport function makeError(expr: string, node: SyntaxNode) {\n  return {\n    text: getString(expr, node),\n    // TODO: this are positions in the string with the replaced variables. Means it cannot be used to show exact\n    //  placement of the error for the user. We need some translation table to positions before the variable\n    //  replace.\n    from: node.from,\n    to: node.to,\n    parentType: node.parent?.name,\n  };\n}\n\n// Taken from template_srv, but copied so to not mess with the regex.index which is manipulated in the service\n/*\n * This regex matches 3 types of variable reference with an optional format specifier\n * \\$(\\w+)                          $var1\n * \\[\\[([\\s\\S]+?)(?::(\\w+))?\\]\\]    [[var2]] or [[var2:fmt2]]\n * \\${(\\w+)(?::(\\w+))?}             ${var3} or ${var3:fmt3}\n */\nexport const variableRegex = /\\$(\\w+)|\\[\\[([\\s\\S]+?)(?::(\\w+))?\\]\\]|\\${(\\w+)(?:\\.([^:^\\}]+))?(?::([^\\}]+))?}/g;\n\n/**\n * As variables with $ are creating parsing errors, we first replace them with magic string that is parsable and at\n * the same time we can get the variable and its format back from it.\n * @param expr\n */\nexport function replaceVariables(expr: string) {\n  return expr.replace(variableRegex, (match, var1, var2, fmt2, var3, fieldPath, fmt3) => {\n    const fmt = fmt2 || fmt3;\n    let variable = var1;\n    let varType = '0';\n\n    if (var2) {\n      variable = var2;\n      varType = '1';\n    }\n\n    if (var3) {\n      variable = var3;\n      varType = '2';\n    }\n\n    return `__V_${varType}__` + variable + '__V__' + (fmt ? '__F__' + fmt + '__F__' : '');\n  });\n}\n\nconst varTypeFunc = [\n  (v: string, f?: string) => `\\$${v}`,\n  (v: string, f?: string) => `[[${v}${f ? `:${f}` : ''}]]`,\n  (v: string, f?: string) => `\\$\\{${v}${f ? `:${f}` : ''}\\}`,\n];\n\n/**\n * Get back the text with variables in their original format.\n * @param expr\n */\nexport function returnVariables(expr: string) {\n  return expr.replace(/__V_(\\d)__(.+?)__V__(?:__F__(\\w+)__F__)?/g, (match, type, v, f) => {\n    return varTypeFunc[parseInt(type, 10)](v, f);\n  });\n}\n\n/**\n * Get the actual string of the expression. That is not stored in the tree so we have to get the indexes from the node\n * and then based on that get it from the expression.\n * @param expr\n * @param node\n */\nexport function getString(expr: string, node: SyntaxNode | TreeCursor | null | undefined) {\n  if (!node) {\n    return '';\n  }\n  return returnVariables(expr.substring(node.from, node.to));\n}\n\n/**\n * Create simple scalar binary op object.\n * @param opDef - definition of the op to be created\n * @param expr\n * @param numberNode - the node for the scalar\n * @param hasBool - whether operation has a bool modifier. Is used only for ops for which it makes sense.\n */\nexport function makeBinOp(\n  opDef: { id: string; comparison?: boolean },\n  expr: string,\n  numberNode: SyntaxNode,\n  hasBool: boolean\n): QueryBuilderOperation {\n  const params: QueryBuilderOperationParamValue[] = [parseFloat(getString(expr, numberNode))];\n  if (opDef.comparison) {\n    params.push(hasBool);\n  }\n  return {\n    id: opDef.id,\n    params,\n  };\n}\n\n/**\n * Get all nodes with type in the tree. This traverses the tree so it is safe only when you know there shouldn't be\n * too much nesting but you just want to skip some of the wrappers. For example getting function args this way would\n * not be safe is it would also find arguments of nested functions.\n * @param expr\n * @param cur\n * @param type - can be string or number, some data-sources (loki) haven't migrated over to using numeric constants defined in the lezer parsing library (e.g. lezer-promql).\n * @todo Remove string type definition when all data-sources have migrated to numeric constants\n */\nexport function getAllByType(expr: string, cur: SyntaxNode, type: number | string): string[] {\n  if (cur.type.id === type || cur.name === type) {\n    return [getString(expr, cur)];\n  }\n  const values: string[] = [];\n  let pos = 0;\n  let child = cur.childAfter(pos);\n  while (child) {\n    values.push(...getAllByType(expr, child, type));\n    pos = child.to;\n    child = cur.childAfter(pos);\n  }\n  return values;\n}\n\n/**\n * There aren't any spaces in the metric names, so let's introduce a wildcard into the regex for each space to better facilitate a fuzzy search\n */\nexport const regexifyLabelValuesQueryString = (query: string) => {\n  const queryArray = query.split(' ');\n  return queryArray.map((query) => `${query}.*`).join('');\n};\n","import {\n  VisualQueryBinary,\n  QueryBuilderLabelFilter,\n  QueryBuilderOperation,\n  BINARY_OPERATIONS_KEY,\n} from '@grafana/plugin-ui';\n\n/**\n * Visual query model\n */\nexport interface LokiVisualQuery {\n  labels: QueryBuilderLabelFilter[];\n  operations: QueryBuilderOperation[];\n  binaryQueries?: LokiVisualQueryBinary[];\n}\n\nexport type LokiVisualQueryBinary = VisualQueryBinary<LokiVisualQuery>;\nexport enum LokiQueryPatternType {\n  Log = 'log',\n  Metric = 'metric',\n}\n\nexport interface LokiQueryPattern {\n  name: string;\n  operations: QueryBuilderOperation[];\n  type: LokiQueryPatternType;\n}\n\nexport enum LokiVisualQueryOperationCategory {\n  Aggregations = 'Aggregations',\n  RangeFunctions = 'Range functions',\n  Functions = 'Functions',\n  Formats = 'Formats',\n  LineFilters = 'Line filters',\n  LabelFilters = 'Label filters',\n  BinaryOps = `${BINARY_OPERATIONS_KEY}`,\n}\n\nexport enum LokiOperationId {\n  Json = 'json',\n  Logfmt = 'logfmt',\n  Regexp = 'regexp',\n  Pattern = 'pattern',\n  Unpack = 'unpack',\n  LineFormat = 'line_format',\n  LabelFormat = 'label_format',\n  Decolorize = 'decolorize',\n  Drop = 'drop',\n  Keep = 'keep',\n  Rate = 'rate',\n  RateCounter = 'rate_counter',\n  CountOverTime = 'count_over_time',\n  SumOverTime = 'sum_over_time',\n  AvgOverTime = 'avg_over_time',\n  MaxOverTime = 'max_over_time',\n  MinOverTime = 'min_over_time',\n  FirstOverTime = 'first_over_time',\n  LastOverTime = 'last_over_time',\n  StdvarOverTime = 'stdvar_over_time',\n  StddevOverTime = 'stddev_over_time',\n  QuantileOverTime = 'quantile_over_time',\n  BytesRate = 'bytes_rate',\n  BytesOverTime = 'bytes_over_time',\n  AbsentOverTime = 'absent_over_time',\n  Sum = 'sum',\n  Avg = 'avg',\n  Min = 'min',\n  Max = 'max',\n  Stddev = 'stddev',\n  Stdvar = 'stdvar',\n  Count = 'count',\n  TopK = 'topk',\n  BottomK = 'bottomk',\n  LineContains = '__line_contains',\n  LineContainsNot = '__line_contains_not',\n  LineContainsCaseInsensitive = '__line_contains_case_insensitive',\n  LineContainsNotCaseInsensitive = '__line_contains_not_case_insensitive',\n  LineMatchesRegex = '__line_matches_regex',\n  LineMatchesRegexNot = '__line_matches_regex_not',\n  LineFilterIpMatches = '__line_filter_ip_matches',\n  LabelFilter = '__label_filter',\n  LabelFilterNoErrors = '__label_filter_no_errors',\n  LabelFilterIpMatches = '__label_filter_ip_marches',\n  Unwrap = 'unwrap',\n  SumBy = '__sum_by',\n  SumWithout = '__sum_without',\n  // Binary ops\n  Addition = '__addition',\n  Subtraction = '__subtraction',\n  MultiplyBy = '__multiply_by',\n  DivideBy = '__divide_by',\n  Modulo = '__modulo',\n  Exponent = '__exponent',\n  NestedQuery = '__nested_query',\n  EqualTo = '__equal_to',\n  NotEqualTo = '__not_equal_to',\n  GreaterThan = '__greater_than',\n  LessThan = '__less_than',\n  GreaterOrEqual = '__greater_or_equal',\n  LessOrEqual = '__less_or_equal',\n}\n\nexport enum LokiOperationOrder {\n  LineFilters = 1,\n  Parsers = 2,\n  PipeOperations = 3,\n  // Unwrap is a special case, as it is usually the last operation, so the order is after pipeOperations\n  Unwrap = 4,\n  NoErrors = 5,\n  RangeVectorFunction = 5,\n  Last = 6,\n}\n\nexport const lokiOperators = {\n  equals: { label: '=', value: '=', description: 'Equals', isMultiValue: false },\n  doesNotEqual: { label: '!=', value: '!=', description: 'Does not equal', isMultiValue: false },\n  matchesRegex: { label: '=~', value: '=~', description: 'Matches regex', isMultiValue: true },\n  doesNotMatchRegex: { label: '!~', value: '!~', description: 'Does not match regex', isMultiValue: true },\n  greaterThan: { label: '>', value: '>', description: 'Greater than', isMultiValue: false },\n  greaterThanOrEqual: { label: '>=', value: '>=', description: 'Greater than or equal to', isMultiValue: false },\n  lessThan: { label: '<', value: '<', description: 'Less than', isMultiValue: false },\n  lessThanOrEqual: { label: '<=', value: '<=', description: 'Less than or equal to', isMultiValue: false },\n  contains: { label: '|=', value: '|=', description: 'Contains', isMultiValue: false },\n  doesNotContain: { label: '!=', value: '!=', description: 'Does not contain', isMultiValue: false },\n};\n","export function isLogLineJSON(line: string): boolean {\n  let parsed;\n  try {\n    parsed = JSON.parse(line);\n  } catch (error) {}\n  // The JSON parser should only be used for log lines that are valid serialized JSON objects.\n  return typeof parsed === 'object';\n}\n\n// This matches:\n// first a label from start of the string or first white space, then any word chars until \"=\"\n// second either an empty quotes, or anything that starts with quote and ends with unescaped quote,\n// or any non whitespace chars that do not start with quote\nconst LOGFMT_REGEXP = /(?:^|\\s)([\\w\\(\\)\\[\\]\\{\\}]+)=(\"\"|(?:\".*?[^\\\\]\"|[^\"\\s]\\S*))/;\n\nexport function isLogLineLogfmt(line: string): boolean {\n  return LOGFMT_REGEXP.test(line);\n}\n\nexport function isLogLinePacked(line: string): boolean {\n  let parsed;\n  try {\n    parsed = JSON.parse(line);\n    return parsed.hasOwnProperty('_entry');\n  } catch (error) {\n    return false;\n  }\n}\n","import { DataFrame, DataQueryResponse, FieldType, isValidGoDuration, Labels } from '@grafana/data';\n\nimport { isBytesString, processLabels } from './languageUtils';\nimport { isLogLineJSON, isLogLineLogfmt, isLogLinePacked } from './lineParser';\nimport { LabelType } from './types';\n\nexport function dataFrameHasLokiError(frame: DataFrame): boolean {\n  const labelSets: Labels[] = frame.fields.find((f) => f.name === 'labels')?.values ?? [];\n  return labelSets.some((labels) => labels.__error__ !== undefined);\n}\n\nexport function dataFrameHasLevelLabel(frame: DataFrame): boolean {\n  const labelSets: Labels[] = frame.fields.find((f) => f.name === 'labels')?.values ?? [];\n  return labelSets.some((labels) => labels.level !== undefined);\n}\n\nexport function extractLogParserFromDataFrame(frame: DataFrame): {\n  hasLogfmt: boolean;\n  hasJSON: boolean;\n  hasPack: boolean;\n} {\n  const lineField = frame.fields.find((field) => field.type === FieldType.string);\n  if (lineField == null) {\n    return { hasJSON: false, hasLogfmt: false, hasPack: false };\n  }\n\n  const logLines: string[] = lineField.values;\n\n  let hasJSON = false;\n  let hasLogfmt = false;\n  let hasPack = false;\n\n  logLines.forEach((line) => {\n    if (isLogLineJSON(line)) {\n      hasJSON = true;\n\n      hasPack = isLogLinePacked(line);\n    }\n    if (isLogLineLogfmt(line)) {\n      hasLogfmt = true;\n    }\n  });\n\n  return { hasLogfmt, hasJSON, hasPack };\n}\n\nexport function extractLabelKeysFromDataFrame(frame: DataFrame, type: LabelType = LabelType.Indexed): string[] {\n  const labelsArray: Array<{ [key: string]: string }> | undefined =\n    frame?.fields?.find((field) => field.name === 'labels')?.values ?? [];\n  const labelTypeArray: Array<{ [key: string]: string }> | undefined =\n    frame?.fields?.find((field) => field.name === 'labelTypes')?.values ?? [];\n\n  if (!labelsArray?.length) {\n    return [];\n  }\n\n  // if there are no label types and type is LabelType.Indexed return all label keys\n  if (!labelTypeArray?.length) {\n    if (type === LabelType.Indexed) {\n      const { keys: labelKeys } = processLabels(labelsArray);\n      return labelKeys;\n    }\n    return [];\n  }\n\n  // If we have label types, we can return only label keys that match type\n  let labelsSet = new Set<string>();\n  for (let i = 0; i < labelsArray.length; i++) {\n    const labels = labelsArray[i];\n    const labelsType = labelTypeArray[i];\n\n    const allLabelKeys = Object.keys(labels).filter((key) => labelsType[key] === type);\n    labelsSet = new Set([...labelsSet, ...allLabelKeys]);\n  }\n\n  return Array.from(labelsSet);\n}\n\nexport function extractUnwrapLabelKeysFromDataFrame(frame: DataFrame): string[] {\n  const labelsArray: Array<{ [key: string]: string }> | undefined =\n    frame?.fields?.find((field) => field.name === 'labels')?.values ?? [];\n\n  if (!labelsArray?.length) {\n    return [];\n  }\n\n  // We do this only for first label object, because we want to consider only labels that are present in all log lines\n  // possibleUnwrapLabels are labels with 1. number value OR 2. value that is valid go duration OR 3. bytes string value\n  const possibleUnwrapLabels = Object.keys(labelsArray[0]).filter((key) => {\n    const value = labelsArray[0][key];\n    if (!value) {\n      return false;\n    }\n    return !isNaN(Number(value)) || isValidGoDuration(value) || isBytesString(value);\n  });\n\n  // Add only labels that are present in every line to unwrapLabels\n  return possibleUnwrapLabels.filter((label) => labelsArray.every((obj) => obj[label]));\n}\n\nexport function extractHasErrorLabelFromDataFrame(frame: DataFrame): boolean {\n  const labelField = frame.fields.find((field) => field.name === 'labels' && field.type === FieldType.other);\n  if (labelField == null) {\n    return false;\n  }\n\n  const labels: Array<{ [key: string]: string }> = labelField.values;\n  return labels.some((label) => label['__error__']);\n}\n\nexport function extractLevelLikeLabelFromDataFrame(frame: DataFrame): string | null {\n  const labelField = frame.fields.find((field) => field.name === 'labels' && field.type === FieldType.other);\n  if (labelField == null) {\n    return null;\n  }\n\n  // Depending on number of labels, this can be pretty heavy operation.\n  // Let's just look at first 2 lines If needed, we can introduce more later.\n  const labelsArray: Array<{ [key: string]: string }> = labelField.values.slice(0, 2);\n  let levelLikeLabel: string | null = null;\n\n  // Find first level-like label\n  for (let labels of labelsArray) {\n    const label = Object.keys(labels).find(\n      (label) => label === 'level' || label === 'detected_level' || label === 'lvl' || label.includes('level')\n    );\n    if (label) {\n      levelLikeLabel = label;\n      break;\n    }\n  }\n  return levelLikeLabel;\n}\n\nexport function isRetriableError(errorResponse: DataQueryResponse) {\n  const message = errorResponse.errors\n    ? (errorResponse.errors[0].message ?? '').toLowerCase()\n    : (errorResponse.error?.message ?? '');\n  if (message.includes('timeout')) {\n    return true;\n  } else if (errorResponse.data.length > 0 && errorResponse.data[0].fields.length > 0) {\n    // Error response but we're receiving data, continue querying.\n    return false;\n  }\n  throw new Error(message);\n}\n","import { Grammar } from 'prismjs';\n\nimport { CompletionItem } from '@grafana/ui';\n\nexport const AGGREGATION_OPERATORS: CompletionItem[] = [\n  {\n    label: 'avg',\n    insertText: 'avg',\n    documentation: 'Calculate the average over dimensions',\n  },\n  {\n    label: 'bottomk',\n    insertText: 'bottomk',\n    documentation: 'Smallest k elements by sample value',\n  },\n  {\n    label: 'count',\n    insertText: 'count',\n    documentation: 'Count number of elements in the vector',\n  },\n  {\n    label: 'max',\n    insertText: 'max',\n    documentation: 'Select maximum over dimensions',\n  },\n  {\n    label: 'min',\n    insertText: 'min',\n    documentation: 'Select minimum over dimensions',\n  },\n  {\n    label: 'stddev',\n    insertText: 'stddev',\n    documentation: 'Calculate population standard deviation over dimensions',\n  },\n  {\n    label: 'stdvar',\n    insertText: 'stdvar',\n    documentation: 'Calculate population standard variance over dimensions',\n  },\n  {\n    label: 'sum',\n    insertText: 'sum',\n    documentation: 'Calculate sum over dimensions',\n  },\n  {\n    label: 'topk',\n    insertText: 'topk',\n    documentation: 'Largest k elements by sample value',\n  },\n];\n\nexport const PIPE_PARSERS: CompletionItem[] = [\n  {\n    label: 'json',\n    insertText: 'json',\n    documentation: 'Extracting labels from the log line using json parser.',\n  },\n  {\n    label: 'regexp',\n    insertText: 'regexp \"\"',\n    documentation: 'Extracting labels from the log line using regexp parser.',\n    move: -1,\n  },\n  {\n    label: 'logfmt',\n    insertText: 'logfmt',\n    documentation: 'Extracting labels from the log line using logfmt parser.',\n  },\n  {\n    label: 'pattern',\n    insertText: 'pattern',\n    documentation: 'Extracting labels from the log line using pattern parser. Only available in Loki 2.3+.',\n  },\n  {\n    label: 'unpack',\n    insertText: 'unpack',\n    detail: 'unpack identifier',\n    documentation:\n      'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property \"_entry\" will also be used to replace the original log line. Only available in Loki 2.2+.',\n  },\n];\n\nexport const PIPE_OPERATORS: CompletionItem[] = [\n  {\n    label: 'unwrap',\n    insertText: 'unwrap',\n    detail: 'unwrap identifier',\n    documentation: 'Take labels and use the values as sample data for metric aggregations.',\n  },\n  {\n    label: 'label_format',\n    insertText: 'label_format',\n    documentation: 'Use to rename, modify or add labels. For example, | label_format foo=bar .',\n  },\n  {\n    label: 'line_format',\n    insertText: 'line_format',\n    documentation: 'Rewrites log line content. For example, | line_format \"{{.query}} {{.duration}}\" .',\n  },\n];\n\nexport const RANGE_VEC_FUNCTIONS = [\n  {\n    insertText: 'avg_over_time',\n    label: 'avg_over_time',\n    detail: 'avg_over_time(range-vector)',\n    documentation: 'The average of all values in the specified interval.',\n  },\n  {\n    insertText: 'bytes_over_time',\n    label: 'bytes_over_time',\n    detail: 'bytes_over_time(range-vector)',\n    documentation: 'Counts the amount of bytes used by each log stream for a given range',\n  },\n  {\n    insertText: 'bytes_rate',\n    label: 'bytes_rate',\n    detail: 'bytes_rate(range-vector)',\n    documentation: 'Calculates the number of bytes per second for each stream.',\n  },\n  {\n    insertText: 'first_over_time',\n    label: 'first_over_time',\n    detail: 'first_over_time(range-vector)',\n    documentation: 'The first of all values in the specified interval. Only available in Loki 2.3+.',\n  },\n  {\n    insertText: 'last_over_time',\n    label: 'last_over_time',\n    detail: 'last_over_time(range-vector)',\n    documentation: 'The last of all values in the specified interval. Only available in Loki 2.3+.',\n  },\n  {\n    insertText: 'sum_over_time',\n    label: 'sum_over_time',\n    detail: 'sum_over_time(range-vector)',\n    documentation: 'The sum of all values in the specified interval.',\n  },\n  {\n    insertText: 'count_over_time',\n    label: 'count_over_time',\n    detail: 'count_over_time(range-vector)',\n    documentation: 'The count of all values in the specified interval.',\n  },\n  {\n    insertText: 'max_over_time',\n    label: 'max_over_time',\n    detail: 'max_over_time(range-vector)',\n    documentation: 'The maximum of all values in the specified interval.',\n  },\n  {\n    insertText: 'min_over_time',\n    label: 'min_over_time',\n    detail: 'min_over_time(range-vector)',\n    documentation: 'The minimum of all values in the specified interval.',\n  },\n  {\n    insertText: 'quantile_over_time',\n    label: 'quantile_over_time',\n    detail: 'quantile_over_time(scalar, range-vector)',\n    documentation: 'The -quantile (0    1) of the values in the specified interval.',\n  },\n  {\n    insertText: 'rate',\n    label: 'rate',\n    detail: 'rate(v range-vector)',\n    documentation: 'Calculates the number of entries per second.',\n  },\n  {\n    insertText: 'stddev_over_time',\n    label: 'stddev_over_time',\n    detail: 'stddev_over_time(range-vector)',\n    documentation: 'The population standard deviation of the values in the specified interval.',\n  },\n  {\n    insertText: 'stdvar_over_time',\n    label: 'stdvar_over_time',\n    detail: 'stdvar_over_time(range-vector)',\n    documentation: 'The population standard variance of the values in the specified interval.',\n  },\n];\n\nexport const BUILT_IN_FUNCTIONS = [\n  {\n    insertText: 'vector',\n    label: 'vector',\n    detail: 'vector(scalar)',\n    documentation: 'Returns the scalar as a vector with no labels.',\n  },\n];\n\nexport const FUNCTIONS = [...AGGREGATION_OPERATORS, ...RANGE_VEC_FUNCTIONS, ...BUILT_IN_FUNCTIONS];\n\n// Loki grammar is used for query highlight in query previews outside of code editor\nexport const lokiGrammar: Grammar = {\n  comment: {\n    pattern: /#.*/,\n  },\n  'context-aggregation': {\n    pattern: /((without|by)\\s*)\\([^)]*\\)/, // by ()\n    lookbehind: true,\n    inside: {\n      'label-key': {\n        pattern: /[^(),\\s][^,)]*[^),\\s]*/,\n        alias: 'attr-name',\n      },\n      punctuation: /[()]/,\n    },\n  },\n  'context-labels': {\n    pattern: /\\{[^}]*(?=}?)/,\n    greedy: true,\n    inside: {\n      comment: {\n        pattern: /#.*/,\n      },\n      'label-key': {\n        pattern: /[a-zA-Z_]\\w*(?=\\s*(=|!=|=~|!~))/,\n        alias: 'attr-name',\n        greedy: true,\n      },\n      'label-value': {\n        pattern: /\"(?:\\\\.|[^\\\\\"])*\"/,\n        greedy: true,\n        alias: 'attr-value',\n      },\n      punctuation: /[{]/,\n    },\n  },\n  'context-pipe': {\n    pattern: /\\s\\|[^=~]\\s?\\w*/i,\n    inside: {\n      'pipe-operator': {\n        pattern: /\\|/i,\n        alias: 'operator',\n      },\n      'pipe-operations': {\n        pattern: new RegExp(`${[...PIPE_PARSERS, ...PIPE_OPERATORS].map((f) => f.label).join('|')}`, 'i'),\n        alias: 'keyword',\n      },\n    },\n  },\n  function: new RegExp(`\\\\b(?:${FUNCTIONS.map((f) => f.label).join('|')})(?=\\\\s*\\\\()`, 'i'),\n  'context-range': [\n    {\n      pattern: /\\[[^\\]]*(?=\\])/, // [1m]\n      inside: {\n        'range-duration': {\n          pattern: /\\b\\d+[smhdwy]\\b/i,\n          alias: 'number',\n        },\n      },\n    },\n    {\n      pattern: /(offset\\s+)\\w+/, // offset 1m\n      lookbehind: true,\n      inside: {\n        'range-duration': {\n          pattern: /\\b\\d+[smhdwy]\\b/i,\n          alias: 'number',\n        },\n      },\n    },\n  ],\n  quote: {\n    pattern: /\"(?:\\\\.|[^\\\\\"])*\"/,\n    alias: 'string',\n    greedy: true,\n  },\n  backticks: {\n    pattern: /`(?:\\\\.|[^\\\\`])*`/,\n    alias: 'string',\n    greedy: true,\n  },\n  number: /\\b-?\\d+((\\.\\d*)?([eE][+-]?\\d+)?)?\\b/,\n  operator: /\\s?(\\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\\s?/i,\n  punctuation: /[{}(),.]/,\n};\n\nexport default lokiGrammar;\n","import { CoreApp, DashboardLoadedEvent, DataQueryRequest, DataQueryResponse } from '@grafana/data';\nimport { QueryEditorMode } from '@grafana/plugin-ui';\nimport { reportInteraction, config } from '@grafana/runtime';\n\nimport {\n  REF_ID_STARTER_ANNOTATION,\n  REF_ID_DATA_SAMPLES,\n  REF_ID_STARTER_LOG_ROW_CONTEXT,\n  REF_ID_STARTER_LOG_VOLUME,\n  REF_ID_STARTER_LOG_SAMPLE,\n} from './datasource';\nimport pluginJson from './plugin.json';\nimport { getNormalizedLokiQuery, isLogsQuery, obfuscate } from './queryUtils';\nimport { variableRegex } from './querybuilder/parsingUtils';\nimport { LokiGroupedRequest, LokiQuery, LokiQueryType } from './types';\n\ntype LokiOnDashboardLoadedTrackingEvent = {\n  grafana_version?: string;\n  dashboard_id?: string;\n  org_id?: number;\n\n  /* The number of Loki queries present in the dashboard*/\n  queries_count: number;\n\n  /* The number of Loki logs queries present in the dashboard*/\n  logs_queries_count: number;\n\n  /* The number of Loki metric queries present in the dashboard*/\n  metric_queries_count: number;\n\n  /* The number of Loki instant queries present in the dashboard*/\n  instant_queries_count: number;\n\n  /* The number of Loki range queries present in the dashboard*/\n  range_queries_count: number;\n\n  /* The number of Loki queries created in builder mode present in the dashboard*/\n  builder_mode_queries_count: number;\n\n  /* The number of Loki queries created in code mode present in the dashboard*/\n  code_mode_queries_count: number;\n\n  /* The number of Loki queries with used template variables present in the dashboard*/\n  queries_with_template_variables_count: number;\n\n  /* The number of Loki queries with changed resolution present in the dashboard*/\n  queries_with_changed_resolution_count: number;\n\n  /* The number of Loki queries with changed line limit present in the dashboard*/\n  queries_with_changed_line_limit_count: number;\n\n  /* The number of Loki queries with changed legend present in the dashboard*/\n  queries_with_changed_legend_count: number;\n};\n\nexport const onDashboardLoadedHandler = ({\n  payload: { dashboardId, orgId, grafanaVersion, queries },\n}: DashboardLoadedEvent<LokiQuery>) => {\n  try {\n    // We only want to track visible Loki queries\n    const lokiQueries = queries[pluginJson.id]\n      ?.filter((query) => !query.hide)\n      ?.map((query) => getNormalizedLokiQuery(query));\n\n    if (!lokiQueries?.length) {\n      return;\n    }\n\n    const logsQueries = lokiQueries.filter((query) => isLogsQuery(query.expr));\n    const metricQueries = lokiQueries.filter((query) => !isLogsQuery(query.expr));\n    const instantQueries = lokiQueries.filter((query) => query.queryType === LokiQueryType.Instant);\n    const rangeQueries = lokiQueries.filter((query) => query.queryType === LokiQueryType.Range);\n    const builderModeQueries = lokiQueries.filter((query) => query.editorMode === QueryEditorMode.Builder);\n    const codeModeQueries = lokiQueries.filter((query) => query.editorMode === QueryEditorMode.Code);\n    const queriesWithTemplateVariables = lokiQueries.filter(isQueryWithTemplateVariables);\n    const queriesWithChangedResolution = lokiQueries.filter(isQueryWithChangedResolution);\n    const queriesWithChangedLineLimit = lokiQueries.filter(isQueryWithChangedLineLimit);\n    const queriesWithChangedLegend = lokiQueries.filter(isQueryWithChangedLegend);\n\n    const event: LokiOnDashboardLoadedTrackingEvent = {\n      grafana_version: grafanaVersion,\n      dashboard_id: dashboardId,\n      org_id: orgId,\n      queries_count: lokiQueries.length,\n      logs_queries_count: logsQueries.length,\n      metric_queries_count: metricQueries.length,\n      instant_queries_count: instantQueries.length,\n      range_queries_count: rangeQueries.length,\n      builder_mode_queries_count: builderModeQueries.length,\n      code_mode_queries_count: codeModeQueries.length,\n      queries_with_template_variables_count: queriesWithTemplateVariables.length,\n      queries_with_changed_resolution_count: queriesWithChangedResolution.length,\n      queries_with_changed_line_limit_count: queriesWithChangedLineLimit.length,\n      queries_with_changed_legend_count: queriesWithChangedLegend.length,\n    };\n\n    reportInteraction('grafana_loki_dashboard_loaded', event);\n  } catch (error) {\n    console.error('error in loki tracking handler', error);\n  }\n};\n\nconst isQueryWithTemplateVariables = (query: LokiQuery): boolean => {\n  return variableRegex.test(query.expr);\n};\n\nconst isQueryWithChangedResolution = (query: LokiQuery): boolean => {\n  if (!query.resolution) {\n    return false;\n  }\n  // 1 is the default resolution\n  return query.resolution !== 1;\n};\n\nconst isQueryWithChangedLineLimit = (query: LokiQuery): boolean => {\n  return query.maxLines !== null && query.maxLines !== undefined;\n};\n\nconst isQueryWithChangedLegend = (query: LokiQuery): boolean => {\n  if (!query.legendFormat) {\n    return false;\n  }\n  return query.legendFormat !== '';\n};\n\nconst shouldNotReportBasedOnRefId = (refId: string): boolean => {\n  const starters = [\n    REF_ID_STARTER_ANNOTATION,\n    REF_ID_STARTER_LOG_ROW_CONTEXT,\n    REF_ID_STARTER_LOG_VOLUME,\n    REF_ID_STARTER_LOG_SAMPLE,\n    REF_ID_DATA_SAMPLES,\n  ];\n\n  if (starters.some((starter) => refId.startsWith(starter))) {\n    return true;\n  }\n  return false;\n};\n\nconst calculateTotalBytes = (response: DataQueryResponse): number => {\n  let totalBytes = 0;\n  for (const frame of response.data) {\n    const byteKey = frame.meta?.custom?.lokiQueryStatKey;\n    if (byteKey) {\n      totalBytes +=\n        frame.meta?.stats?.find((stat: { displayName: string }) => stat.displayName === byteKey)?.value ?? 0;\n    }\n  }\n  return totalBytes;\n};\n\nexport function trackQuery(\n  response: DataQueryResponse,\n  request: DataQueryRequest<LokiQuery>,\n  startTime: Date,\n  extraPayload: Record<string, unknown> = {}\n): void {\n  // We only want to track usage for these specific apps\n  const { app, targets: queries } = request;\n\n  if (app !== CoreApp.Explore) {\n    return;\n  }\n\n  let totalBytes = calculateTotalBytes(response);\n\n  for (const query of queries) {\n    if (shouldNotReportBasedOnRefId(query.refId)) {\n      return;\n    }\n\n    reportInteraction('grafana_explore_loki_query_executed', {\n      grafana_version: config.buildInfo.version,\n      editor_mode: query.editorMode,\n      has_data: response.data.some((frame) => frame.length > 0),\n      has_error: response.error !== undefined,\n      legend: query.legendFormat,\n      line_limit: query.maxLines,\n      obfuscated_query: obfuscate(query.expr),\n      query_type: isLogsQuery(query.expr) ? 'logs' : 'metric',\n      query_vector_type: query.queryType,\n      resolution: query.resolution,\n      simultaneously_executed_query_count: queries.filter((query) => !query.hide).length,\n      simultaneously_hidden_query_count: queries.filter((query) => query.hide).length,\n      time_range_from: request?.range?.from?.toISOString(),\n      time_range_to: request?.range?.to?.toISOString(),\n      time_taken: Date.now() - startTime.getTime(),\n      bytes_processed: totalBytes,\n      is_split: false,\n      ...extraPayload,\n    });\n  }\n}\n\nexport function trackGroupedQueries(\n  response: DataQueryResponse,\n  groupedRequests: LokiGroupedRequest[],\n  originalRequest: DataQueryRequest<LokiQuery>,\n  startTime: Date\n): void {\n  const splittingPayload = {\n    split_query_group_count: groupedRequests.length,\n    split_query_largest_partition_size: Math.max(...groupedRequests.map(({ partition }) => partition.length)),\n    split_query_total_request_count: groupedRequests.reduce((total, { partition }) => total + partition.length, 0),\n    is_split: true,\n    simultaneously_executed_query_count: originalRequest.targets.filter((query) => !query.hide).length,\n    simultaneously_hidden_query_count: originalRequest.targets.filter((query) => query.hide).length,\n  };\n\n  for (const group of groupedRequests) {\n    const split_query_partition_size = group.partition.length;\n    trackQuery(response, group.request, startTime, {\n      ...splittingPayload,\n      split_query_partition_size,\n    });\n  }\n}\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTsTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nimport * as common from '@grafana/schema';\n\nexport enum QueryEditorMode {\n  Builder = 'builder',\n  Code = 'code',\n}\n\nexport enum LokiQueryType {\n  Instant = 'instant',\n  Range = 'range',\n  Stream = 'stream',\n}\n\nexport enum SupportingQueryType {\n  DataSample = 'dataSample',\n  InfiniteScroll = 'infiniteScroll',\n  LogsSample = 'logsSample',\n  LogsVolume = 'logsVolume',\n}\n\nexport enum LokiQueryDirection {\n  Backward = 'backward',\n  Forward = 'forward',\n  Scan = 'scan',\n}\n\nexport interface LokiDataQuery extends common.DataQuery {\n  editorMode?: QueryEditorMode;\n  /**\n   * The LogQL query.\n   */\n  expr: string;\n  /**\n   * @deprecated, now use queryType.\n   */\n  instant?: boolean;\n  /**\n   * Used to override the name of the series.\n   */\n  legendFormat?: string;\n  /**\n   * Used to limit the number of log rows returned.\n   */\n  maxLines?: number;\n  /**\n   * @deprecated, now use queryType.\n   */\n  range?: boolean;\n  /**\n   * @deprecated, now use step.\n   */\n  resolution?: number;\n  /**\n   * Used to set step value for range queries.\n   */\n  step?: string;\n}\n","import { DataQuery, DataQueryRequest, DataSourceJsonData, TimeRange } from '@grafana/data';\n\nimport {\n  LokiDataQuery as LokiQueryFromSchema,\n  LokiQueryType,\n  SupportingQueryType,\n  LokiQueryDirection,\n} from './dataquery.gen';\n\nexport { LokiQueryDirection, LokiQueryType, SupportingQueryType };\n\nexport enum LokiResultType {\n  Stream = 'streams',\n  Vector = 'vector',\n  Matrix = 'matrix',\n}\n\nexport enum LabelType {\n  Indexed = 'I',\n  StructuredMetadata = 'S',\n  Parsed = 'P',\n}\n\nexport interface LokiQuery extends LokiQueryFromSchema {\n  direction?: LokiQueryDirection;\n  /** Used only to identify supporting queries, e.g. logs volume, logs sample and data sample */\n  supportingQueryType?: SupportingQueryType;\n  // CUE autogenerates `queryType` as `?string`, as that's how it is defined\n  // in the parent-interface (in DataQuery).\n  // the temporary fix (until this gets improved in the codegen), is to\n  // override it here\n  queryType?: LokiQueryType;\n}\n\nexport interface LokiOptions extends DataSourceJsonData {\n  maxLines?: string;\n  derivedFields?: DerivedFieldConfig[];\n  alertmanager?: string;\n  keepCookies?: string[];\n}\n\nexport interface LokiStreamResult {\n  stream: Record<string, string>;\n  values: Array<[string, string]>;\n}\n\nexport interface LokiTailResponse {\n  streams: LokiStreamResult[];\n  dropped_entries?: Array<{\n    labels: Record<string, string>;\n    timestamp: string;\n  }> | null;\n}\n\nexport type DerivedFieldConfig = {\n  matcherRegex: string;\n  name: string;\n  url?: string;\n  urlDisplayLabel?: string;\n  datasourceUid?: string;\n  matcherType?: 'label' | 'regex';\n  targetBlank?: boolean;\n};\n\nexport enum LokiVariableQueryType {\n  LabelNames,\n  LabelValues,\n}\n\nexport interface LokiVariableQuery extends DataQuery {\n  type: LokiVariableQueryType;\n  label?: string;\n  stream?: string;\n}\n\nexport interface QueryStats {\n  streams: number;\n  chunks: number;\n  bytes: number;\n  entries: number;\n  // The error message displayed in the UI when we cant estimate the size of the query.\n  message?: string;\n}\n\nexport interface ContextFilter {\n  enabled: boolean;\n  label: string;\n  value: string;\n  nonIndexed: boolean;\n}\n\nexport interface ParserAndLabelKeysResult {\n  extractedLabelKeys: string[];\n  structuredMetadataKeys: string[];\n  hasJSON: boolean;\n  hasLogfmt: boolean;\n  hasPack: boolean;\n  unwrapLabelKeys: string[];\n}\n\nexport interface DetectedFieldsResult {\n  fields: Array<{\n    label: string;\n    type: 'bytes' | 'float' | 'int' | 'string' | 'duration';\n    cardinality: number;\n    parsers: Array<'logfmt' | 'json'> | null;\n  }>;\n  limit: number;\n}\n\nexport type LokiGroupedRequest = { request: DataQueryRequest<LokiQuery>; partition: TimeRange[] };\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6089__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2007__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3241__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1308__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8146__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8398__;","module.exports = __WEBPACK_EXTERNAL_MODULE__200__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7694__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1269__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3059__;","/**\nThe default maximum length of a `TreeBuffer` node.\n*/\nconst DefaultBufferLength = 1024;\nlet nextPropID = 0;\nclass Range {\n    constructor(from, to) {\n        this.from = from;\n        this.to = to;\n    }\n}\n/**\nEach [node type](#common.NodeType) or [individual tree](#common.Tree)\ncan have metadata associated with it in props. Instances of this\nclass represent prop names.\n*/\nclass NodeProp {\n    /**\n    Create a new node prop type.\n    */\n    constructor(config = {}) {\n        this.id = nextPropID++;\n        this.perNode = !!config.perNode;\n        this.deserialize = config.deserialize || (() => {\n            throw new Error(\"This node type doesn't define a deserialize function\");\n        });\n    }\n    /**\n    This is meant to be used with\n    [`NodeSet.extend`](#common.NodeSet.extend) or\n    [`LRParser.configure`](#lr.ParserConfig.props) to compute\n    prop values for each node type in the set. Takes a [match\n    object](#common.NodeType^match) or function that returns undefined\n    if the node type doesn't get this prop, and the prop's value if\n    it does.\n    */\n    add(match) {\n        if (this.perNode)\n            throw new RangeError(\"Can't add per-node props to node types\");\n        if (typeof match != \"function\")\n            match = NodeType.match(match);\n        return (type) => {\n            let result = match(type);\n            return result === undefined ? null : [this, result];\n        };\n    }\n}\n/**\nProp that is used to describe matching delimiters. For opening\ndelimiters, this holds an array of node names (written as a\nspace-separated string when declaring this prop in a grammar)\nfor the node types of closing delimiters that match it.\n*/\nNodeProp.closedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nThe inverse of [`closedBy`](#common.NodeProp^closedBy). This is\nattached to closing delimiters, holding an array of node names\nof types of matching opening delimiters.\n*/\nNodeProp.openedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nUsed to assign node types to groups (for example, all node\ntypes that represent an expression could be tagged with an\n`\"Expression\"` group).\n*/\nNodeProp.group = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nAttached to nodes to indicate these should be\n[displayed](https://codemirror.net/docs/ref/#language.syntaxTree)\nin a bidirectional text isolate, so that direction-neutral\ncharacters on their sides don't incorrectly get associated with\nsurrounding text. You'll generally want to set this for nodes\nthat contain arbitrary text, like strings and comments, and for\nnodes that appear _inside_ arbitrary text, like HTML tags. When\nnot given a value, in a grammar declaration, defaults to\n`\"auto\"`.\n*/\nNodeProp.isolate = new NodeProp({ deserialize: value => {\n        if (value && value != \"rtl\" && value != \"ltr\" && value != \"auto\")\n            throw new RangeError(\"Invalid value for isolate: \" + value);\n        return value || \"auto\";\n    } });\n/**\nThe hash of the [context](#lr.ContextTracker.constructor)\nthat the node was parsed in, if any. Used to limit reuse of\ncontextual nodes.\n*/\nNodeProp.contextHash = new NodeProp({ perNode: true });\n/**\nThe distance beyond the end of the node that the tokenizer\nlooked ahead for any of the tokens inside the node. (The LR\nparser only stores this when it is larger than 25, for\nefficiency reasons.)\n*/\nNodeProp.lookAhead = new NodeProp({ perNode: true });\n/**\nThis per-node prop is used to replace a given node, or part of a\nnode, with another tree. This is useful to include trees from\ndifferent languages in mixed-language parsers.\n*/\nNodeProp.mounted = new NodeProp({ perNode: true });\n/**\nA mounted tree, which can be [stored](#common.NodeProp^mounted) on\na tree node to indicate that parts of its content are\nrepresented by another tree.\n*/\nclass MountedTree {\n    constructor(\n    /**\n    The inner tree.\n    */\n    tree, \n    /**\n    If this is null, this tree replaces the entire node (it will\n    be included in the regular iteration instead of its host\n    node). If not, only the given ranges are considered to be\n    covered by this tree. This is used for trees that are mixed in\n    a way that isn't strictly hierarchical. Such mounted trees are\n    only entered by [`resolveInner`](#common.Tree.resolveInner)\n    and [`enter`](#common.SyntaxNode.enter).\n    */\n    overlay, \n    /**\n    The parser used to create this subtree.\n    */\n    parser) {\n        this.tree = tree;\n        this.overlay = overlay;\n        this.parser = parser;\n    }\n    /**\n    @internal\n    */\n    static get(tree) {\n        return tree && tree.props && tree.props[NodeProp.mounted.id];\n    }\n}\nconst noProps = Object.create(null);\n/**\nEach node in a syntax tree has a node type associated with it.\n*/\nclass NodeType {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The name of the node type. Not necessarily unique, but if the\n    grammar was written properly, different node types with the\n    same name within a node set should play the same semantic\n    role.\n    */\n    name, \n    /**\n    @internal\n    */\n    props, \n    /**\n    The id of this node in its set. Corresponds to the term ids\n    used in the parser.\n    */\n    id, \n    /**\n    @internal\n    */\n    flags = 0) {\n        this.name = name;\n        this.props = props;\n        this.id = id;\n        this.flags = flags;\n    }\n    /**\n    Define a node type.\n    */\n    static define(spec) {\n        let props = spec.props && spec.props.length ? Object.create(null) : noProps;\n        let flags = (spec.top ? 1 /* NodeFlag.Top */ : 0) | (spec.skipped ? 2 /* NodeFlag.Skipped */ : 0) |\n            (spec.error ? 4 /* NodeFlag.Error */ : 0) | (spec.name == null ? 8 /* NodeFlag.Anonymous */ : 0);\n        let type = new NodeType(spec.name || \"\", props, spec.id, flags);\n        if (spec.props)\n            for (let src of spec.props) {\n                if (!Array.isArray(src))\n                    src = src(type);\n                if (src) {\n                    if (src[0].perNode)\n                        throw new RangeError(\"Can't store a per-node prop on a node type\");\n                    props[src[0].id] = src[1];\n                }\n            }\n        return type;\n    }\n    /**\n    Retrieves a node prop for this type. Will return `undefined` if\n    the prop isn't present on this node.\n    */\n    prop(prop) { return this.props[prop.id]; }\n    /**\n    True when this is the top node of a grammar.\n    */\n    get isTop() { return (this.flags & 1 /* NodeFlag.Top */) > 0; }\n    /**\n    True when this node is produced by a skip rule.\n    */\n    get isSkipped() { return (this.flags & 2 /* NodeFlag.Skipped */) > 0; }\n    /**\n    Indicates whether this is an error node.\n    */\n    get isError() { return (this.flags & 4 /* NodeFlag.Error */) > 0; }\n    /**\n    When true, this node type doesn't correspond to a user-declared\n    named node, for example because it is used to cache repetition.\n    */\n    get isAnonymous() { return (this.flags & 8 /* NodeFlag.Anonymous */) > 0; }\n    /**\n    Returns true when this node's name or one of its\n    [groups](#common.NodeProp^group) matches the given string.\n    */\n    is(name) {\n        if (typeof name == 'string') {\n            if (this.name == name)\n                return true;\n            let group = this.prop(NodeProp.group);\n            return group ? group.indexOf(name) > -1 : false;\n        }\n        return this.id == name;\n    }\n    /**\n    Create a function from node types to arbitrary values by\n    specifying an object whose property names are node or\n    [group](#common.NodeProp^group) names. Often useful with\n    [`NodeProp.add`](#common.NodeProp.add). You can put multiple\n    names, separated by spaces, in a single property name to map\n    multiple node names to a single value.\n    */\n    static match(map) {\n        let direct = Object.create(null);\n        for (let prop in map)\n            for (let name of prop.split(\" \"))\n                direct[name] = map[prop];\n        return (node) => {\n            for (let groups = node.prop(NodeProp.group), i = -1; i < (groups ? groups.length : 0); i++) {\n                let found = direct[i < 0 ? node.name : groups[i]];\n                if (found)\n                    return found;\n            }\n        };\n    }\n}\n/**\nAn empty dummy node type to use when no actual type is available.\n*/\nNodeType.none = new NodeType(\"\", Object.create(null), 0, 8 /* NodeFlag.Anonymous */);\n/**\nA node set holds a collection of node types. It is used to\ncompactly represent trees by storing their type ids, rather than a\nfull pointer to the type object, in a numeric array. Each parser\n[has](#lr.LRParser.nodeSet) a node set, and [tree\nbuffers](#common.TreeBuffer) can only store collections of nodes\nfrom the same set. A set can have a maximum of 2**16 (65536) node\ntypes in it, so that the ids fit into 16-bit typed array slots.\n*/\nclass NodeSet {\n    /**\n    Create a set with the given types. The `id` property of each\n    type should correspond to its position within the array.\n    */\n    constructor(\n    /**\n    The node types in this set, by id.\n    */\n    types) {\n        this.types = types;\n        for (let i = 0; i < types.length; i++)\n            if (types[i].id != i)\n                throw new RangeError(\"Node type ids should correspond to array positions when creating a node set\");\n    }\n    /**\n    Create a copy of this set with some node properties added. The\n    arguments to this method can be created with\n    [`NodeProp.add`](#common.NodeProp.add).\n    */\n    extend(...props) {\n        let newTypes = [];\n        for (let type of this.types) {\n            let newProps = null;\n            for (let source of props) {\n                let add = source(type);\n                if (add) {\n                    if (!newProps)\n                        newProps = Object.assign({}, type.props);\n                    newProps[add[0].id] = add[1];\n                }\n            }\n            newTypes.push(newProps ? new NodeType(type.name, newProps, type.id, type.flags) : type);\n        }\n        return new NodeSet(newTypes);\n    }\n}\nconst CachedNode = new WeakMap(), CachedInnerNode = new WeakMap();\n/**\nOptions that control iteration. Can be combined with the `|`\noperator to enable multiple ones.\n*/\nvar IterMode;\n(function (IterMode) {\n    /**\n    When enabled, iteration will only visit [`Tree`](#common.Tree)\n    objects, not nodes packed into\n    [`TreeBuffer`](#common.TreeBuffer)s.\n    */\n    IterMode[IterMode[\"ExcludeBuffers\"] = 1] = \"ExcludeBuffers\";\n    /**\n    Enable this to make iteration include anonymous nodes (such as\n    the nodes that wrap repeated grammar constructs into a balanced\n    tree).\n    */\n    IterMode[IterMode[\"IncludeAnonymous\"] = 2] = \"IncludeAnonymous\";\n    /**\n    By default, regular [mounted](#common.NodeProp^mounted) nodes\n    replace their base node in iteration. Enable this to ignore them\n    instead.\n    */\n    IterMode[IterMode[\"IgnoreMounts\"] = 4] = \"IgnoreMounts\";\n    /**\n    This option only applies in\n    [`enter`](#common.SyntaxNode.enter)-style methods. It tells the\n    library to not enter mounted overlays if one covers the given\n    position.\n    */\n    IterMode[IterMode[\"IgnoreOverlays\"] = 8] = \"IgnoreOverlays\";\n})(IterMode || (IterMode = {}));\n/**\nA piece of syntax tree. There are two ways to approach these\ntrees: the way they are actually stored in memory, and the\nconvenient way.\n\nSyntax trees are stored as a tree of `Tree` and `TreeBuffer`\nobjects. By packing detail information into `TreeBuffer` leaf\nnodes, the representation is made a lot more memory-efficient.\n\nHowever, when you want to actually work with tree nodes, this\nrepresentation is very awkward, so most client code will want to\nuse the [`TreeCursor`](#common.TreeCursor) or\n[`SyntaxNode`](#common.SyntaxNode) interface instead, which provides\na view on some part of this data structure, and can be used to\nmove around to adjacent nodes.\n*/\nclass Tree {\n    /**\n    Construct a new tree. See also [`Tree.build`](#common.Tree^build).\n    */\n    constructor(\n    /**\n    The type of the top node.\n    */\n    type, \n    /**\n    This node's child nodes.\n    */\n    children, \n    /**\n    The positions (offsets relative to the start of this tree) of\n    the children.\n    */\n    positions, \n    /**\n    The total length of this tree\n    */\n    length, \n    /**\n    Per-node [node props](#common.NodeProp) to associate with this node.\n    */\n    props) {\n        this.type = type;\n        this.children = children;\n        this.positions = positions;\n        this.length = length;\n        /**\n        @internal\n        */\n        this.props = null;\n        if (props && props.length) {\n            this.props = Object.create(null);\n            for (let [prop, value] of props)\n                this.props[typeof prop == \"number\" ? prop : prop.id] = value;\n        }\n    }\n    /**\n    @internal\n    */\n    toString() {\n        let mounted = MountedTree.get(this);\n        if (mounted && !mounted.overlay)\n            return mounted.tree.toString();\n        let children = \"\";\n        for (let ch of this.children) {\n            let str = ch.toString();\n            if (str) {\n                if (children)\n                    children += \",\";\n                children += str;\n            }\n        }\n        return !this.type.name ? children :\n            (/\\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) +\n                (children.length ? \"(\" + children + \")\" : \"\");\n    }\n    /**\n    Get a [tree cursor](#common.TreeCursor) positioned at the top of\n    the tree. Mode can be used to [control](#common.IterMode) which\n    nodes the cursor visits.\n    */\n    cursor(mode = 0) {\n        return new TreeCursor(this.topNode, mode);\n    }\n    /**\n    Get a [tree cursor](#common.TreeCursor) pointing into this tree\n    at the given position and side (see\n    [`moveTo`](#common.TreeCursor.moveTo).\n    */\n    cursorAt(pos, side = 0, mode = 0) {\n        let scope = CachedNode.get(this) || this.topNode;\n        let cursor = new TreeCursor(scope);\n        cursor.moveTo(pos, side);\n        CachedNode.set(this, cursor._tree);\n        return cursor;\n    }\n    /**\n    Get a [syntax node](#common.SyntaxNode) object for the top of the\n    tree.\n    */\n    get topNode() {\n        return new TreeNode(this, 0, 0, null);\n    }\n    /**\n    Get the [syntax node](#common.SyntaxNode) at the given position.\n    If `side` is -1, this will move into nodes that end at the\n    position. If 1, it'll move into nodes that start at the\n    position. With 0, it'll only enter nodes that cover the position\n    from both sides.\n    \n    Note that this will not enter\n    [overlays](#common.MountedTree.overlay), and you often want\n    [`resolveInner`](#common.Tree.resolveInner) instead.\n    */\n    resolve(pos, side = 0) {\n        let node = resolveNode(CachedNode.get(this) || this.topNode, pos, side, false);\n        CachedNode.set(this, node);\n        return node;\n    }\n    /**\n    Like [`resolve`](#common.Tree.resolve), but will enter\n    [overlaid](#common.MountedTree.overlay) nodes, producing a syntax node\n    pointing into the innermost overlaid tree at the given position\n    (with parent links going through all parent structure, including\n    the host trees).\n    */\n    resolveInner(pos, side = 0) {\n        let node = resolveNode(CachedInnerNode.get(this) || this.topNode, pos, side, true);\n        CachedInnerNode.set(this, node);\n        return node;\n    }\n    /**\n    In some situations, it can be useful to iterate through all\n    nodes around a position, including those in overlays that don't\n    directly cover the position. This method gives you an iterator\n    that will produce all nodes, from small to big, around the given\n    position.\n    */\n    resolveStack(pos, side = 0) {\n        return stackIterator(this, pos, side);\n    }\n    /**\n    Iterate over the tree and its children, calling `enter` for any\n    node that touches the `from`/`to` region (if given) before\n    running over such a node's children, and `leave` (if given) when\n    leaving the node. When `enter` returns `false`, that node will\n    not have its children iterated over (or `leave` called).\n    */\n    iterate(spec) {\n        let { enter, leave, from = 0, to = this.length } = spec;\n        let mode = spec.mode || 0, anon = (mode & IterMode.IncludeAnonymous) > 0;\n        for (let c = this.cursor(mode | IterMode.IncludeAnonymous);;) {\n            let entered = false;\n            if (c.from <= to && c.to >= from && (!anon && c.type.isAnonymous || enter(c) !== false)) {\n                if (c.firstChild())\n                    continue;\n                entered = true;\n            }\n            for (;;) {\n                if (entered && leave && (anon || !c.type.isAnonymous))\n                    leave(c);\n                if (c.nextSibling())\n                    break;\n                if (!c.parent())\n                    return;\n                entered = true;\n            }\n        }\n    }\n    /**\n    Get the value of the given [node prop](#common.NodeProp) for this\n    node. Works with both per-node and per-type props.\n    */\n    prop(prop) {\n        return !prop.perNode ? this.type.prop(prop) : this.props ? this.props[prop.id] : undefined;\n    }\n    /**\n    Returns the node's [per-node props](#common.NodeProp.perNode) in a\n    format that can be passed to the [`Tree`](#common.Tree)\n    constructor.\n    */\n    get propValues() {\n        let result = [];\n        if (this.props)\n            for (let id in this.props)\n                result.push([+id, this.props[id]]);\n        return result;\n    }\n    /**\n    Balance the direct children of this tree, producing a copy of\n    which may have children grouped into subtrees with type\n    [`NodeType.none`](#common.NodeType^none).\n    */\n    balance(config = {}) {\n        return this.children.length <= 8 /* Balance.BranchFactor */ ? this :\n            balanceRange(NodeType.none, this.children, this.positions, 0, this.children.length, 0, this.length, (children, positions, length) => new Tree(this.type, children, positions, length, this.propValues), config.makeTree || ((children, positions, length) => new Tree(NodeType.none, children, positions, length)));\n    }\n    /**\n    Build a tree from a postfix-ordered buffer of node information,\n    or a cursor over such a buffer.\n    */\n    static build(data) { return buildTree(data); }\n}\n/**\nThe empty tree\n*/\nTree.empty = new Tree(NodeType.none, [], [], 0);\nclass FlatBufferCursor {\n    constructor(buffer, index) {\n        this.buffer = buffer;\n        this.index = index;\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    get pos() { return this.index; }\n    next() { this.index -= 4; }\n    fork() { return new FlatBufferCursor(this.buffer, this.index); }\n}\n/**\nTree buffers contain (type, start, end, endIndex) quads for each\nnode. In such a buffer, nodes are stored in prefix order (parents\nbefore children, with the endIndex of the parent indicating which\nchildren belong to it).\n*/\nclass TreeBuffer {\n    /**\n    Create a tree buffer.\n    */\n    constructor(\n    /**\n    The buffer's content.\n    */\n    buffer, \n    /**\n    The total length of the group of nodes in the buffer.\n    */\n    length, \n    /**\n    The node set used in this buffer.\n    */\n    set) {\n        this.buffer = buffer;\n        this.length = length;\n        this.set = set;\n    }\n    /**\n    @internal\n    */\n    get type() { return NodeType.none; }\n    /**\n    @internal\n    */\n    toString() {\n        let result = [];\n        for (let index = 0; index < this.buffer.length;) {\n            result.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result.join(\",\");\n    }\n    /**\n    @internal\n    */\n    childString(index) {\n        let id = this.buffer[index], endIndex = this.buffer[index + 3];\n        let type = this.set.types[id], result = type.name;\n        if (/\\W/.test(result) && !type.isError)\n            result = JSON.stringify(result);\n        index += 4;\n        if (endIndex == index)\n            return result;\n        let children = [];\n        while (index < endIndex) {\n            children.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result + \"(\" + children.join(\",\") + \")\";\n    }\n    /**\n    @internal\n    */\n    findChild(startIndex, endIndex, dir, pos, side) {\n        let { buffer } = this, pick = -1;\n        for (let i = startIndex; i != endIndex; i = buffer[i + 3]) {\n            if (checkSide(side, pos, buffer[i + 1], buffer[i + 2])) {\n                pick = i;\n                if (dir > 0)\n                    break;\n            }\n        }\n        return pick;\n    }\n    /**\n    @internal\n    */\n    slice(startI, endI, from) {\n        let b = this.buffer;\n        let copy = new Uint16Array(endI - startI), len = 0;\n        for (let i = startI, j = 0; i < endI;) {\n            copy[j++] = b[i++];\n            copy[j++] = b[i++] - from;\n            let to = copy[j++] = b[i++] - from;\n            copy[j++] = b[i++] - startI;\n            len = Math.max(len, to);\n        }\n        return new TreeBuffer(copy, len, this.set);\n    }\n}\nfunction checkSide(side, pos, from, to) {\n    switch (side) {\n        case -2 /* Side.Before */: return from < pos;\n        case -1 /* Side.AtOrBefore */: return to >= pos && from < pos;\n        case 0 /* Side.Around */: return from < pos && to > pos;\n        case 1 /* Side.AtOrAfter */: return from <= pos && to > pos;\n        case 2 /* Side.After */: return to > pos;\n        case 4 /* Side.DontCare */: return true;\n    }\n}\nfunction resolveNode(node, pos, side, overlays) {\n    var _a;\n    // Move up to a node that actually holds the position, if possible\n    while (node.from == node.to ||\n        (side < 1 ? node.from >= pos : node.from > pos) ||\n        (side > -1 ? node.to <= pos : node.to < pos)) {\n        let parent = !overlays && node instanceof TreeNode && node.index < 0 ? null : node.parent;\n        if (!parent)\n            return node;\n        node = parent;\n    }\n    let mode = overlays ? 0 : IterMode.IgnoreOverlays;\n    // Must go up out of overlays when those do not overlap with pos\n    if (overlays)\n        for (let scan = node, parent = scan.parent; parent; scan = parent, parent = scan.parent) {\n            if (scan instanceof TreeNode && scan.index < 0 && ((_a = parent.enter(pos, side, mode)) === null || _a === void 0 ? void 0 : _a.from) != scan.from)\n                node = parent;\n        }\n    for (;;) {\n        let inner = node.enter(pos, side, mode);\n        if (!inner)\n            return node;\n        node = inner;\n    }\n}\nclass BaseNode {\n    cursor(mode = 0) { return new TreeCursor(this, mode); }\n    getChild(type, before = null, after = null) {\n        let r = getChildren(this, type, before, after);\n        return r.length ? r[0] : null;\n    }\n    getChildren(type, before = null, after = null) {\n        return getChildren(this, type, before, after);\n    }\n    resolve(pos, side = 0) {\n        return resolveNode(this, pos, side, false);\n    }\n    resolveInner(pos, side = 0) {\n        return resolveNode(this, pos, side, true);\n    }\n    matchContext(context) {\n        return matchNodeContext(this.parent, context);\n    }\n    enterUnfinishedNodesBefore(pos) {\n        let scan = this.childBefore(pos), node = this;\n        while (scan) {\n            let last = scan.lastChild;\n            if (!last || last.to != scan.to)\n                break;\n            if (last.type.isError && last.from == last.to) {\n                node = scan;\n                scan = last.prevSibling;\n            }\n            else {\n                scan = last;\n            }\n        }\n        return node;\n    }\n    get node() { return this; }\n    get next() { return this.parent; }\n}\nclass TreeNode extends BaseNode {\n    constructor(_tree, from, \n    // Index in parent node, set to -1 if the node is not a direct child of _parent.node (overlay)\n    index, _parent) {\n        super();\n        this._tree = _tree;\n        this.from = from;\n        this.index = index;\n        this._parent = _parent;\n    }\n    get type() { return this._tree.type; }\n    get name() { return this._tree.type.name; }\n    get to() { return this.from + this._tree.length; }\n    nextChild(i, dir, pos, side, mode = 0) {\n        for (let parent = this;;) {\n            for (let { children, positions } = parent._tree, e = dir > 0 ? children.length : -1; i != e; i += dir) {\n                let next = children[i], start = positions[i] + parent.from;\n                if (!checkSide(side, pos, start, start + next.length))\n                    continue;\n                if (next instanceof TreeBuffer) {\n                    if (mode & IterMode.ExcludeBuffers)\n                        continue;\n                    let index = next.findChild(0, next.buffer.length, dir, pos - start, side);\n                    if (index > -1)\n                        return new BufferNode(new BufferContext(parent, next, i, start), null, index);\n                }\n                else if ((mode & IterMode.IncludeAnonymous) || (!next.type.isAnonymous || hasChild(next))) {\n                    let mounted;\n                    if (!(mode & IterMode.IgnoreMounts) && (mounted = MountedTree.get(next)) && !mounted.overlay)\n                        return new TreeNode(mounted.tree, start, i, parent);\n                    let inner = new TreeNode(next, start, i, parent);\n                    return (mode & IterMode.IncludeAnonymous) || !inner.type.isAnonymous ? inner\n                        : inner.nextChild(dir < 0 ? next.children.length - 1 : 0, dir, pos, side);\n                }\n            }\n            if ((mode & IterMode.IncludeAnonymous) || !parent.type.isAnonymous)\n                return null;\n            if (parent.index >= 0)\n                i = parent.index + dir;\n            else\n                i = dir < 0 ? -1 : parent._parent._tree.children.length;\n            parent = parent._parent;\n            if (!parent)\n                return null;\n        }\n    }\n    get firstChild() { return this.nextChild(0, 1, 0, 4 /* Side.DontCare */); }\n    get lastChild() { return this.nextChild(this._tree.children.length - 1, -1, 0, 4 /* Side.DontCare */); }\n    childAfter(pos) { return this.nextChild(0, 1, pos, 2 /* Side.After */); }\n    childBefore(pos) { return this.nextChild(this._tree.children.length - 1, -1, pos, -2 /* Side.Before */); }\n    enter(pos, side, mode = 0) {\n        let mounted;\n        if (!(mode & IterMode.IgnoreOverlays) && (mounted = MountedTree.get(this._tree)) && mounted.overlay) {\n            let rPos = pos - this.from;\n            for (let { from, to } of mounted.overlay) {\n                if ((side > 0 ? from <= rPos : from < rPos) &&\n                    (side < 0 ? to >= rPos : to > rPos))\n                    return new TreeNode(mounted.tree, mounted.overlay[0].from + this.from, -1, this);\n            }\n        }\n        return this.nextChild(0, 1, pos, side, mode);\n    }\n    nextSignificantParent() {\n        let val = this;\n        while (val.type.isAnonymous && val._parent)\n            val = val._parent;\n        return val;\n    }\n    get parent() {\n        return this._parent ? this._parent.nextSignificantParent() : null;\n    }\n    get nextSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4 /* Side.DontCare */) : null;\n    }\n    get prevSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4 /* Side.DontCare */) : null;\n    }\n    get tree() { return this._tree; }\n    toTree() { return this._tree; }\n    /**\n    @internal\n    */\n    toString() { return this._tree.toString(); }\n}\nfunction getChildren(node, type, before, after) {\n    let cur = node.cursor(), result = [];\n    if (!cur.firstChild())\n        return result;\n    if (before != null)\n        for (let found = false; !found;) {\n            found = cur.type.is(before);\n            if (!cur.nextSibling())\n                return result;\n        }\n    for (;;) {\n        if (after != null && cur.type.is(after))\n            return result;\n        if (cur.type.is(type))\n            result.push(cur.node);\n        if (!cur.nextSibling())\n            return after == null ? result : [];\n    }\n}\nfunction matchNodeContext(node, context, i = context.length - 1) {\n    for (let p = node; i >= 0; p = p.parent) {\n        if (!p)\n            return false;\n        if (!p.type.isAnonymous) {\n            if (context[i] && context[i] != p.name)\n                return false;\n            i--;\n        }\n    }\n    return true;\n}\nclass BufferContext {\n    constructor(parent, buffer, index, start) {\n        this.parent = parent;\n        this.buffer = buffer;\n        this.index = index;\n        this.start = start;\n    }\n}\nclass BufferNode extends BaseNode {\n    get name() { return this.type.name; }\n    get from() { return this.context.start + this.context.buffer.buffer[this.index + 1]; }\n    get to() { return this.context.start + this.context.buffer.buffer[this.index + 2]; }\n    constructor(context, _parent, index) {\n        super();\n        this.context = context;\n        this._parent = _parent;\n        this.index = index;\n        this.type = context.buffer.set.types[context.buffer.buffer[index]];\n    }\n    child(dir, pos, side) {\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get firstChild() { return this.child(1, 0, 4 /* Side.DontCare */); }\n    get lastChild() { return this.child(-1, 0, 4 /* Side.DontCare */); }\n    childAfter(pos) { return this.child(1, pos, 2 /* Side.After */); }\n    childBefore(pos) { return this.child(-1, pos, -2 /* Side.Before */); }\n    enter(pos, side, mode = 0) {\n        if (mode & IterMode.ExcludeBuffers)\n            return null;\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], side > 0 ? 1 : -1, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get parent() {\n        return this._parent || this.context.parent.nextSignificantParent();\n    }\n    externalSibling(dir) {\n        return this._parent ? null : this.context.parent.nextChild(this.context.index + dir, dir, 0, 4 /* Side.DontCare */);\n    }\n    get nextSibling() {\n        let { buffer } = this.context;\n        let after = buffer.buffer[this.index + 3];\n        if (after < (this._parent ? buffer.buffer[this._parent.index + 3] : buffer.buffer.length))\n            return new BufferNode(this.context, this._parent, after);\n        return this.externalSibling(1);\n    }\n    get prevSibling() {\n        let { buffer } = this.context;\n        let parentStart = this._parent ? this._parent.index + 4 : 0;\n        if (this.index == parentStart)\n            return this.externalSibling(-1);\n        return new BufferNode(this.context, this._parent, buffer.findChild(parentStart, this.index, -1, 0, 4 /* Side.DontCare */));\n    }\n    get tree() { return null; }\n    toTree() {\n        let children = [], positions = [];\n        let { buffer } = this.context;\n        let startI = this.index + 4, endI = buffer.buffer[this.index + 3];\n        if (endI > startI) {\n            let from = buffer.buffer[this.index + 1];\n            children.push(buffer.slice(startI, endI, from));\n            positions.push(0);\n        }\n        return new Tree(this.type, children, positions, this.to - this.from);\n    }\n    /**\n    @internal\n    */\n    toString() { return this.context.buffer.childString(this.index); }\n}\nfunction iterStack(heads) {\n    if (!heads.length)\n        return null;\n    let pick = 0, picked = heads[0];\n    for (let i = 1; i < heads.length; i++) {\n        let node = heads[i];\n        if (node.from > picked.from || node.to < picked.to) {\n            picked = node;\n            pick = i;\n        }\n    }\n    let next = picked instanceof TreeNode && picked.index < 0 ? null : picked.parent;\n    let newHeads = heads.slice();\n    if (next)\n        newHeads[pick] = next;\n    else\n        newHeads.splice(pick, 1);\n    return new StackIterator(newHeads, picked);\n}\nclass StackIterator {\n    constructor(heads, node) {\n        this.heads = heads;\n        this.node = node;\n    }\n    get next() { return iterStack(this.heads); }\n}\nfunction stackIterator(tree, pos, side) {\n    let inner = tree.resolveInner(pos, side), layers = null;\n    for (let scan = inner instanceof TreeNode ? inner : inner.context.parent; scan; scan = scan.parent) {\n        if (scan.index < 0) { // This is an overlay root\n            let parent = scan.parent;\n            (layers || (layers = [inner])).push(parent.resolve(pos, side));\n            scan = parent;\n        }\n        else {\n            let mount = MountedTree.get(scan.tree);\n            // Relevant overlay branching off\n            if (mount && mount.overlay && mount.overlay[0].from <= pos && mount.overlay[mount.overlay.length - 1].to >= pos) {\n                let root = new TreeNode(mount.tree, mount.overlay[0].from + scan.from, -1, scan);\n                (layers || (layers = [inner])).push(resolveNode(root, pos, side, false));\n            }\n        }\n    }\n    return layers ? iterStack(layers) : inner;\n}\n/**\nA tree cursor object focuses on a given node in a syntax tree, and\nallows you to move to adjacent nodes.\n*/\nclass TreeCursor {\n    /**\n    Shorthand for `.type.name`.\n    */\n    get name() { return this.type.name; }\n    /**\n    @internal\n    */\n    constructor(node, \n    /**\n    @internal\n    */\n    mode = 0) {\n        this.mode = mode;\n        /**\n        @internal\n        */\n        this.buffer = null;\n        this.stack = [];\n        /**\n        @internal\n        */\n        this.index = 0;\n        this.bufferNode = null;\n        if (node instanceof TreeNode) {\n            this.yieldNode(node);\n        }\n        else {\n            this._tree = node.context.parent;\n            this.buffer = node.context;\n            for (let n = node._parent; n; n = n._parent)\n                this.stack.unshift(n.index);\n            this.bufferNode = node;\n            this.yieldBuf(node.index);\n        }\n    }\n    yieldNode(node) {\n        if (!node)\n            return false;\n        this._tree = node;\n        this.type = node.type;\n        this.from = node.from;\n        this.to = node.to;\n        return true;\n    }\n    yieldBuf(index, type) {\n        this.index = index;\n        let { start, buffer } = this.buffer;\n        this.type = type || buffer.set.types[buffer.buffer[index]];\n        this.from = start + buffer.buffer[index + 1];\n        this.to = start + buffer.buffer[index + 2];\n        return true;\n    }\n    /**\n    @internal\n    */\n    yield(node) {\n        if (!node)\n            return false;\n        if (node instanceof TreeNode) {\n            this.buffer = null;\n            return this.yieldNode(node);\n        }\n        this.buffer = node.context;\n        return this.yieldBuf(node.index, node.type);\n    }\n    /**\n    @internal\n    */\n    toString() {\n        return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();\n    }\n    /**\n    @internal\n    */\n    enterChild(dir, pos, side) {\n        if (!this.buffer)\n            return this.yield(this._tree.nextChild(dir < 0 ? this._tree._tree.children.length - 1 : 0, dir, pos, side, this.mode));\n        let { buffer } = this.buffer;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.buffer.start, side);\n        if (index < 0)\n            return false;\n        this.stack.push(this.index);\n        return this.yieldBuf(index);\n    }\n    /**\n    Move the cursor to this node's first child. When this returns\n    false, the node has no child, and the cursor has not been moved.\n    */\n    firstChild() { return this.enterChild(1, 0, 4 /* Side.DontCare */); }\n    /**\n    Move the cursor to this node's last child.\n    */\n    lastChild() { return this.enterChild(-1, 0, 4 /* Side.DontCare */); }\n    /**\n    Move the cursor to the first child that ends after `pos`.\n    */\n    childAfter(pos) { return this.enterChild(1, pos, 2 /* Side.After */); }\n    /**\n    Move to the last child that starts before `pos`.\n    */\n    childBefore(pos) { return this.enterChild(-1, pos, -2 /* Side.Before */); }\n    /**\n    Move the cursor to the child around `pos`. If side is -1 the\n    child may end at that position, when 1 it may start there. This\n    will also enter [overlaid](#common.MountedTree.overlay)\n    [mounted](#common.NodeProp^mounted) trees unless `overlays` is\n    set to false.\n    */\n    enter(pos, side, mode = this.mode) {\n        if (!this.buffer)\n            return this.yield(this._tree.enter(pos, side, mode));\n        return mode & IterMode.ExcludeBuffers ? false : this.enterChild(1, pos, side);\n    }\n    /**\n    Move to the node's parent node, if this isn't the top node.\n    */\n    parent() {\n        if (!this.buffer)\n            return this.yieldNode((this.mode & IterMode.IncludeAnonymous) ? this._tree._parent : this._tree.parent);\n        if (this.stack.length)\n            return this.yieldBuf(this.stack.pop());\n        let parent = (this.mode & IterMode.IncludeAnonymous) ? this.buffer.parent : this.buffer.parent.nextSignificantParent();\n        this.buffer = null;\n        return this.yieldNode(parent);\n    }\n    /**\n    @internal\n    */\n    sibling(dir) {\n        if (!this.buffer)\n            return !this._tree._parent ? false\n                : this.yield(this._tree.index < 0 ? null\n                    : this._tree._parent.nextChild(this._tree.index + dir, dir, 0, 4 /* Side.DontCare */, this.mode));\n        let { buffer } = this.buffer, d = this.stack.length - 1;\n        if (dir < 0) {\n            let parentStart = d < 0 ? 0 : this.stack[d] + 4;\n            if (this.index != parentStart)\n                return this.yieldBuf(buffer.findChild(parentStart, this.index, -1, 0, 4 /* Side.DontCare */));\n        }\n        else {\n            let after = buffer.buffer[this.index + 3];\n            if (after < (d < 0 ? buffer.buffer.length : buffer.buffer[this.stack[d] + 3]))\n                return this.yieldBuf(after);\n        }\n        return d < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + dir, dir, 0, 4 /* Side.DontCare */, this.mode)) : false;\n    }\n    /**\n    Move to this node's next sibling, if any.\n    */\n    nextSibling() { return this.sibling(1); }\n    /**\n    Move to this node's previous sibling, if any.\n    */\n    prevSibling() { return this.sibling(-1); }\n    atLastNode(dir) {\n        let index, parent, { buffer } = this;\n        if (buffer) {\n            if (dir > 0) {\n                if (this.index < buffer.buffer.buffer.length)\n                    return false;\n            }\n            else {\n                for (let i = 0; i < this.index; i++)\n                    if (buffer.buffer.buffer[i + 3] < this.index)\n                        return false;\n            }\n            ({ index, parent } = buffer);\n        }\n        else {\n            ({ index, _parent: parent } = this._tree);\n        }\n        for (; parent; { index, _parent: parent } = parent) {\n            if (index > -1)\n                for (let i = index + dir, e = dir < 0 ? -1 : parent._tree.children.length; i != e; i += dir) {\n                    let child = parent._tree.children[i];\n                    if ((this.mode & IterMode.IncludeAnonymous) ||\n                        child instanceof TreeBuffer ||\n                        !child.type.isAnonymous ||\n                        hasChild(child))\n                        return false;\n                }\n        }\n        return true;\n    }\n    move(dir, enter) {\n        if (enter && this.enterChild(dir, 0, 4 /* Side.DontCare */))\n            return true;\n        for (;;) {\n            if (this.sibling(dir))\n                return true;\n            if (this.atLastNode(dir) || !this.parent())\n                return false;\n        }\n    }\n    /**\n    Move to the next node in a\n    [pre-order](https://en.wikipedia.org/wiki/Tree_traversal#Pre-order,_NLR)\n    traversal, going from a node to its first child or, if the\n    current node is empty or `enter` is false, its next sibling or\n    the next sibling of the first parent node that has one.\n    */\n    next(enter = true) { return this.move(1, enter); }\n    /**\n    Move to the next node in a last-to-first pre-order traversal. A\n    node is followed by its last child or, if it has none, its\n    previous sibling or the previous sibling of the first parent\n    node that has one.\n    */\n    prev(enter = true) { return this.move(-1, enter); }\n    /**\n    Move the cursor to the innermost node that covers `pos`. If\n    `side` is -1, it will enter nodes that end at `pos`. If it is 1,\n    it will enter nodes that start at `pos`.\n    */\n    moveTo(pos, side = 0) {\n        // Move up to a node that actually holds the position, if possible\n        while (this.from == this.to ||\n            (side < 1 ? this.from >= pos : this.from > pos) ||\n            (side > -1 ? this.to <= pos : this.to < pos))\n            if (!this.parent())\n                break;\n        // Then scan down into child nodes as far as possible\n        while (this.enterChild(1, pos, side)) { }\n        return this;\n    }\n    /**\n    Get a [syntax node](#common.SyntaxNode) at the cursor's current\n    position.\n    */\n    get node() {\n        if (!this.buffer)\n            return this._tree;\n        let cache = this.bufferNode, result = null, depth = 0;\n        if (cache && cache.context == this.buffer) {\n            scan: for (let index = this.index, d = this.stack.length; d >= 0;) {\n                for (let c = cache; c; c = c._parent)\n                    if (c.index == index) {\n                        if (index == this.index)\n                            return c;\n                        result = c;\n                        depth = d + 1;\n                        break scan;\n                    }\n                index = this.stack[--d];\n            }\n        }\n        for (let i = depth; i < this.stack.length; i++)\n            result = new BufferNode(this.buffer, result, this.stack[i]);\n        return this.bufferNode = new BufferNode(this.buffer, result, this.index);\n    }\n    /**\n    Get the [tree](#common.Tree) that represents the current node, if\n    any. Will return null when the node is in a [tree\n    buffer](#common.TreeBuffer).\n    */\n    get tree() {\n        return this.buffer ? null : this._tree._tree;\n    }\n    /**\n    Iterate over the current node and all its descendants, calling\n    `enter` when entering a node and `leave`, if given, when leaving\n    one. When `enter` returns `false`, any children of that node are\n    skipped, and `leave` isn't called for it.\n    */\n    iterate(enter, leave) {\n        for (let depth = 0;;) {\n            let mustLeave = false;\n            if (this.type.isAnonymous || enter(this) !== false) {\n                if (this.firstChild()) {\n                    depth++;\n                    continue;\n                }\n                if (!this.type.isAnonymous)\n                    mustLeave = true;\n            }\n            for (;;) {\n                if (mustLeave && leave)\n                    leave(this);\n                mustLeave = this.type.isAnonymous;\n                if (!depth)\n                    return;\n                if (this.nextSibling())\n                    break;\n                this.parent();\n                depth--;\n                mustLeave = true;\n            }\n        }\n    }\n    /**\n    Test whether the current node matches a given contexta sequence\n    of direct parent node names. Empty strings in the context array\n    are treated as wildcards.\n    */\n    matchContext(context) {\n        if (!this.buffer)\n            return matchNodeContext(this.node.parent, context);\n        let { buffer } = this.buffer, { types } = buffer.set;\n        for (let i = context.length - 1, d = this.stack.length - 1; i >= 0; d--) {\n            if (d < 0)\n                return matchNodeContext(this._tree, context, i);\n            let type = types[buffer.buffer[this.stack[d]]];\n            if (!type.isAnonymous) {\n                if (context[i] && context[i] != type.name)\n                    return false;\n                i--;\n            }\n        }\n        return true;\n    }\n}\nfunction hasChild(tree) {\n    return tree.children.some(ch => ch instanceof TreeBuffer || !ch.type.isAnonymous || hasChild(ch));\n}\nfunction buildTree(data) {\n    var _a;\n    let { buffer, nodeSet, maxBufferLength = DefaultBufferLength, reused = [], minRepeatType = nodeSet.types.length } = data;\n    let cursor = Array.isArray(buffer) ? new FlatBufferCursor(buffer, buffer.length) : buffer;\n    let types = nodeSet.types;\n    let contextHash = 0, lookAhead = 0;\n    function takeNode(parentStart, minPos, children, positions, inRepeat, depth) {\n        let { id, start, end, size } = cursor;\n        let lookAheadAtStart = lookAhead, contextAtStart = contextHash;\n        while (size < 0) {\n            cursor.next();\n            if (size == -1 /* SpecialRecord.Reuse */) {\n                let node = reused[id];\n                children.push(node);\n                positions.push(start - parentStart);\n                return;\n            }\n            else if (size == -3 /* SpecialRecord.ContextChange */) { // Context change\n                contextHash = id;\n                return;\n            }\n            else if (size == -4 /* SpecialRecord.LookAhead */) {\n                lookAhead = id;\n                return;\n            }\n            else {\n                throw new RangeError(`Unrecognized record size: ${size}`);\n            }\n        }\n        let type = types[id], node, buffer;\n        let startPos = start - parentStart;\n        if (end - start <= maxBufferLength && (buffer = findBufferSize(cursor.pos - minPos, inRepeat))) {\n            // Small enough for a buffer, and no reused nodes inside\n            let data = new Uint16Array(buffer.size - buffer.skip);\n            let endPos = cursor.pos - buffer.size, index = data.length;\n            while (cursor.pos > endPos)\n                index = copyToBuffer(buffer.start, data, index);\n            node = new TreeBuffer(data, end - buffer.start, nodeSet);\n            startPos = buffer.start - parentStart;\n        }\n        else { // Make it a node\n            let endPos = cursor.pos - size;\n            cursor.next();\n            let localChildren = [], localPositions = [];\n            let localInRepeat = id >= minRepeatType ? id : -1;\n            let lastGroup = 0, lastEnd = end;\n            while (cursor.pos > endPos) {\n                if (localInRepeat >= 0 && cursor.id == localInRepeat && cursor.size >= 0) {\n                    if (cursor.end <= lastEnd - maxBufferLength) {\n                        makeRepeatLeaf(localChildren, localPositions, start, lastGroup, cursor.end, lastEnd, localInRepeat, lookAheadAtStart, contextAtStart);\n                        lastGroup = localChildren.length;\n                        lastEnd = cursor.end;\n                    }\n                    cursor.next();\n                }\n                else if (depth > 2500 /* CutOff.Depth */) {\n                    takeFlatNode(start, endPos, localChildren, localPositions);\n                }\n                else {\n                    takeNode(start, endPos, localChildren, localPositions, localInRepeat, depth + 1);\n                }\n            }\n            if (localInRepeat >= 0 && lastGroup > 0 && lastGroup < localChildren.length)\n                makeRepeatLeaf(localChildren, localPositions, start, lastGroup, start, lastEnd, localInRepeat, lookAheadAtStart, contextAtStart);\n            localChildren.reverse();\n            localPositions.reverse();\n            if (localInRepeat > -1 && lastGroup > 0) {\n                let make = makeBalanced(type, contextAtStart);\n                node = balanceRange(type, localChildren, localPositions, 0, localChildren.length, 0, end - start, make, make);\n            }\n            else {\n                node = makeTree(type, localChildren, localPositions, end - start, lookAheadAtStart - end, contextAtStart);\n            }\n        }\n        children.push(node);\n        positions.push(startPos);\n    }\n    function takeFlatNode(parentStart, minPos, children, positions) {\n        let nodes = []; // Temporary, inverted array of leaf nodes found, with absolute positions\n        let nodeCount = 0, stopAt = -1;\n        while (cursor.pos > minPos) {\n            let { id, start, end, size } = cursor;\n            if (size > 4) { // Not a leaf\n                cursor.next();\n            }\n            else if (stopAt > -1 && start < stopAt) {\n                break;\n            }\n            else {\n                if (stopAt < 0)\n                    stopAt = end - maxBufferLength;\n                nodes.push(id, start, end);\n                nodeCount++;\n                cursor.next();\n            }\n        }\n        if (nodeCount) {\n            let buffer = new Uint16Array(nodeCount * 4);\n            let start = nodes[nodes.length - 2];\n            for (let i = nodes.length - 3, j = 0; i >= 0; i -= 3) {\n                buffer[j++] = nodes[i];\n                buffer[j++] = nodes[i + 1] - start;\n                buffer[j++] = nodes[i + 2] - start;\n                buffer[j++] = j;\n            }\n            children.push(new TreeBuffer(buffer, nodes[2] - start, nodeSet));\n            positions.push(start - parentStart);\n        }\n    }\n    function makeBalanced(type, contextHash) {\n        return (children, positions, length) => {\n            let lookAhead = 0, lastI = children.length - 1, last, lookAheadProp;\n            if (lastI >= 0 && (last = children[lastI]) instanceof Tree) {\n                if (!lastI && last.type == type && last.length == length)\n                    return last;\n                if (lookAheadProp = last.prop(NodeProp.lookAhead))\n                    lookAhead = positions[lastI] + last.length + lookAheadProp;\n            }\n            return makeTree(type, children, positions, length, lookAhead, contextHash);\n        };\n    }\n    function makeRepeatLeaf(children, positions, base, i, from, to, type, lookAhead, contextHash) {\n        let localChildren = [], localPositions = [];\n        while (children.length > i) {\n            localChildren.push(children.pop());\n            localPositions.push(positions.pop() + base - from);\n        }\n        children.push(makeTree(nodeSet.types[type], localChildren, localPositions, to - from, lookAhead - to, contextHash));\n        positions.push(from - base);\n    }\n    function makeTree(type, children, positions, length, lookAhead, contextHash, props) {\n        if (contextHash) {\n            let pair = [NodeProp.contextHash, contextHash];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        if (lookAhead > 25) {\n            let pair = [NodeProp.lookAhead, lookAhead];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        return new Tree(type, children, positions, length, props);\n    }\n    function findBufferSize(maxSize, inRepeat) {\n        // Scan through the buffer to find previous siblings that fit\n        // together in a TreeBuffer, and don't contain any reused nodes\n        // (which can't be stored in a buffer).\n        // If `inRepeat` is > -1, ignore node boundaries of that type for\n        // nesting, but make sure the end falls either at the start\n        // (`maxSize`) or before such a node.\n        let fork = cursor.fork();\n        let size = 0, start = 0, skip = 0, minStart = fork.end - maxBufferLength;\n        let result = { size: 0, start: 0, skip: 0 };\n        scan: for (let minPos = fork.pos - maxSize; fork.pos > minPos;) {\n            let nodeSize = fork.size;\n            // Pretend nested repeat nodes of the same type don't exist\n            if (fork.id == inRepeat && nodeSize >= 0) {\n                // Except that we store the current state as a valid return\n                // value.\n                result.size = size;\n                result.start = start;\n                result.skip = skip;\n                skip += 4;\n                size += 4;\n                fork.next();\n                continue;\n            }\n            let startPos = fork.pos - nodeSize;\n            if (nodeSize < 0 || startPos < minPos || fork.start < minStart)\n                break;\n            let localSkipped = fork.id >= minRepeatType ? 4 : 0;\n            let nodeStart = fork.start;\n            fork.next();\n            while (fork.pos > startPos) {\n                if (fork.size < 0) {\n                    if (fork.size == -3 /* SpecialRecord.ContextChange */)\n                        localSkipped += 4;\n                    else\n                        break scan;\n                }\n                else if (fork.id >= minRepeatType) {\n                    localSkipped += 4;\n                }\n                fork.next();\n            }\n            start = nodeStart;\n            size += nodeSize;\n            skip += localSkipped;\n        }\n        if (inRepeat < 0 || size == maxSize) {\n            result.size = size;\n            result.start = start;\n            result.skip = skip;\n        }\n        return result.size > 4 ? result : undefined;\n    }\n    function copyToBuffer(bufferStart, buffer, index) {\n        let { id, start, end, size } = cursor;\n        cursor.next();\n        if (size >= 0 && id < minRepeatType) {\n            let startIndex = index;\n            if (size > 4) {\n                let endPos = cursor.pos - (size - 4);\n                while (cursor.pos > endPos)\n                    index = copyToBuffer(bufferStart, buffer, index);\n            }\n            buffer[--index] = startIndex;\n            buffer[--index] = end - bufferStart;\n            buffer[--index] = start - bufferStart;\n            buffer[--index] = id;\n        }\n        else if (size == -3 /* SpecialRecord.ContextChange */) {\n            contextHash = id;\n        }\n        else if (size == -4 /* SpecialRecord.LookAhead */) {\n            lookAhead = id;\n        }\n        return index;\n    }\n    let children = [], positions = [];\n    while (cursor.pos > 0)\n        takeNode(data.start || 0, data.bufferStart || 0, children, positions, -1, 0);\n    let length = (_a = data.length) !== null && _a !== void 0 ? _a : (children.length ? positions[0] + children[0].length : 0);\n    return new Tree(types[data.topID], children.reverse(), positions.reverse(), length);\n}\nconst nodeSizeCache = new WeakMap;\nfunction nodeSize(balanceType, node) {\n    if (!balanceType.isAnonymous || node instanceof TreeBuffer || node.type != balanceType)\n        return 1;\n    let size = nodeSizeCache.get(node);\n    if (size == null) {\n        size = 1;\n        for (let child of node.children) {\n            if (child.type != balanceType || !(child instanceof Tree)) {\n                size = 1;\n                break;\n            }\n            size += nodeSize(balanceType, child);\n        }\n        nodeSizeCache.set(node, size);\n    }\n    return size;\n}\nfunction balanceRange(\n// The type the balanced tree's inner nodes.\nbalanceType, \n// The direct children and their positions\nchildren, positions, \n// The index range in children/positions to use\nfrom, to, \n// The start position of the nodes, relative to their parent.\nstart, \n// Length of the outer node\nlength, \n// Function to build the top node of the balanced tree\nmkTop, \n// Function to build internal nodes for the balanced tree\nmkTree) {\n    let total = 0;\n    for (let i = from; i < to; i++)\n        total += nodeSize(balanceType, children[i]);\n    let maxChild = Math.ceil((total * 1.5) / 8 /* Balance.BranchFactor */);\n    let localChildren = [], localPositions = [];\n    function divide(children, positions, from, to, offset) {\n        for (let i = from; i < to;) {\n            let groupFrom = i, groupStart = positions[i], groupSize = nodeSize(balanceType, children[i]);\n            i++;\n            for (; i < to; i++) {\n                let nextSize = nodeSize(balanceType, children[i]);\n                if (groupSize + nextSize >= maxChild)\n                    break;\n                groupSize += nextSize;\n            }\n            if (i == groupFrom + 1) {\n                if (groupSize > maxChild) {\n                    let only = children[groupFrom]; // Only trees can have a size > 1\n                    divide(only.children, only.positions, 0, only.children.length, positions[groupFrom] + offset);\n                    continue;\n                }\n                localChildren.push(children[groupFrom]);\n            }\n            else {\n                let length = positions[i - 1] + children[i - 1].length - groupStart;\n                localChildren.push(balanceRange(balanceType, children, positions, groupFrom, i, groupStart, length, null, mkTree));\n            }\n            localPositions.push(groupStart + offset - start);\n        }\n    }\n    divide(children, positions, from, to, 0);\n    return (mkTop || mkTree)(localChildren, localPositions, length);\n}\n/**\nProvides a way to associate values with pieces of trees. As long\nas that part of the tree is reused, the associated values can be\nretrieved from an updated tree.\n*/\nclass NodeWeakMap {\n    constructor() {\n        this.map = new WeakMap();\n    }\n    setBuffer(buffer, index, value) {\n        let inner = this.map.get(buffer);\n        if (!inner)\n            this.map.set(buffer, inner = new Map);\n        inner.set(index, value);\n    }\n    getBuffer(buffer, index) {\n        let inner = this.map.get(buffer);\n        return inner && inner.get(index);\n    }\n    /**\n    Set the value for this syntax node.\n    */\n    set(node, value) {\n        if (node instanceof BufferNode)\n            this.setBuffer(node.context.buffer, node.index, value);\n        else if (node instanceof TreeNode)\n            this.map.set(node.tree, value);\n    }\n    /**\n    Retrieve value for this syntax node, if it exists in the map.\n    */\n    get(node) {\n        return node instanceof BufferNode ? this.getBuffer(node.context.buffer, node.index)\n            : node instanceof TreeNode ? this.map.get(node.tree) : undefined;\n    }\n    /**\n    Set the value for the node that a cursor currently points to.\n    */\n    cursorSet(cursor, value) {\n        if (cursor.buffer)\n            this.setBuffer(cursor.buffer.buffer, cursor.index, value);\n        else\n            this.map.set(cursor.tree, value);\n    }\n    /**\n    Retrieve the value for the node that a cursor currently points\n    to.\n    */\n    cursorGet(cursor) {\n        return cursor.buffer ? this.getBuffer(cursor.buffer.buffer, cursor.index) : this.map.get(cursor.tree);\n    }\n}\n\n/**\nTree fragments are used during [incremental\nparsing](#common.Parser.startParse) to track parts of old trees\nthat can be reused in a new parse. An array of fragments is used\nto track regions of an old tree whose nodes might be reused in new\nparses. Use the static\n[`applyChanges`](#common.TreeFragment^applyChanges) method to\nupdate fragments for document changes.\n*/\nclass TreeFragment {\n    /**\n    Construct a tree fragment. You'll usually want to use\n    [`addTree`](#common.TreeFragment^addTree) and\n    [`applyChanges`](#common.TreeFragment^applyChanges) instead of\n    calling this directly.\n    */\n    constructor(\n    /**\n    The start of the unchanged range pointed to by this fragment.\n    This refers to an offset in the _updated_ document (as opposed\n    to the original tree).\n    */\n    from, \n    /**\n    The end of the unchanged range.\n    */\n    to, \n    /**\n    The tree that this fragment is based on.\n    */\n    tree, \n    /**\n    The offset between the fragment's tree and the document that\n    this fragment can be used against. Add this when going from\n    document to tree positions, subtract it to go from tree to\n    document positions.\n    */\n    offset, openStart = false, openEnd = false) {\n        this.from = from;\n        this.to = to;\n        this.tree = tree;\n        this.offset = offset;\n        this.open = (openStart ? 1 /* Open.Start */ : 0) | (openEnd ? 2 /* Open.End */ : 0);\n    }\n    /**\n    Whether the start of the fragment represents the start of a\n    parse, or the end of a change. (In the second case, it may not\n    be safe to reuse some nodes at the start, depending on the\n    parsing algorithm.)\n    */\n    get openStart() { return (this.open & 1 /* Open.Start */) > 0; }\n    /**\n    Whether the end of the fragment represents the end of a\n    full-document parse, or the start of a change.\n    */\n    get openEnd() { return (this.open & 2 /* Open.End */) > 0; }\n    /**\n    Create a set of fragments from a freshly parsed tree, or update\n    an existing set of fragments by replacing the ones that overlap\n    with a tree with content from the new tree. When `partial` is\n    true, the parse is treated as incomplete, and the resulting\n    fragment has [`openEnd`](#common.TreeFragment.openEnd) set to\n    true.\n    */\n    static addTree(tree, fragments = [], partial = false) {\n        let result = [new TreeFragment(0, tree.length, tree, 0, false, partial)];\n        for (let f of fragments)\n            if (f.to > tree.length)\n                result.push(f);\n        return result;\n    }\n    /**\n    Apply a set of edits to an array of fragments, removing or\n    splitting fragments as necessary to remove edited ranges, and\n    adjusting offsets for fragments that moved.\n    */\n    static applyChanges(fragments, changes, minGap = 128) {\n        if (!changes.length)\n            return fragments;\n        let result = [];\n        let fI = 1, nextF = fragments.length ? fragments[0] : null;\n        for (let cI = 0, pos = 0, off = 0;; cI++) {\n            let nextC = cI < changes.length ? changes[cI] : null;\n            let nextPos = nextC ? nextC.fromA : 1e9;\n            if (nextPos - pos >= minGap)\n                while (nextF && nextF.from < nextPos) {\n                    let cut = nextF;\n                    if (pos >= cut.from || nextPos <= cut.to || off) {\n                        let fFrom = Math.max(cut.from, pos) - off, fTo = Math.min(cut.to, nextPos) - off;\n                        cut = fFrom >= fTo ? null : new TreeFragment(fFrom, fTo, cut.tree, cut.offset + off, cI > 0, !!nextC);\n                    }\n                    if (cut)\n                        result.push(cut);\n                    if (nextF.to > nextPos)\n                        break;\n                    nextF = fI < fragments.length ? fragments[fI++] : null;\n                }\n            if (!nextC)\n                break;\n            pos = nextC.toA;\n            off = nextC.toA - nextC.toB;\n        }\n        return result;\n    }\n}\n/**\nA superclass that parsers should extend.\n*/\nclass Parser {\n    /**\n    Start a parse, returning a [partial parse](#common.PartialParse)\n    object. [`fragments`](#common.TreeFragment) can be passed in to\n    make the parse incremental.\n    \n    By default, the entire input is parsed. You can pass `ranges`,\n    which should be a sorted array of non-empty, non-overlapping\n    ranges, to parse only those ranges. The tree returned in that\n    case will start at `ranges[0].from`.\n    */\n    startParse(input, fragments, ranges) {\n        if (typeof input == \"string\")\n            input = new StringInput(input);\n        ranges = !ranges ? [new Range(0, input.length)] : ranges.length ? ranges.map(r => new Range(r.from, r.to)) : [new Range(0, 0)];\n        return this.createParse(input, fragments || [], ranges);\n    }\n    /**\n    Run a full parse, returning the resulting tree.\n    */\n    parse(input, fragments, ranges) {\n        let parse = this.startParse(input, fragments, ranges);\n        for (;;) {\n            let done = parse.advance();\n            if (done)\n                return done;\n        }\n    }\n}\nclass StringInput {\n    constructor(string) {\n        this.string = string;\n    }\n    get length() { return this.string.length; }\n    chunk(from) { return this.string.slice(from); }\n    get lineChunks() { return false; }\n    read(from, to) { return this.string.slice(from, to); }\n}\n\n/**\nCreate a parse wrapper that, after the inner parse completes,\nscans its tree for mixed language regions with the `nest`\nfunction, runs the resulting [inner parses](#common.NestedParse),\nand then [mounts](#common.NodeProp^mounted) their results onto the\ntree.\n*/\nfunction parseMixed(nest) {\n    return (parse, input, fragments, ranges) => new MixedParse(parse, nest, input, fragments, ranges);\n}\nclass InnerParse {\n    constructor(parser, parse, overlay, target, from) {\n        this.parser = parser;\n        this.parse = parse;\n        this.overlay = overlay;\n        this.target = target;\n        this.from = from;\n    }\n}\nfunction checkRanges(ranges) {\n    if (!ranges.length || ranges.some(r => r.from >= r.to))\n        throw new RangeError(\"Invalid inner parse ranges given: \" + JSON.stringify(ranges));\n}\nclass ActiveOverlay {\n    constructor(parser, predicate, mounts, index, start, target, prev) {\n        this.parser = parser;\n        this.predicate = predicate;\n        this.mounts = mounts;\n        this.index = index;\n        this.start = start;\n        this.target = target;\n        this.prev = prev;\n        this.depth = 0;\n        this.ranges = [];\n    }\n}\nconst stoppedInner = new NodeProp({ perNode: true });\nclass MixedParse {\n    constructor(base, nest, input, fragments, ranges) {\n        this.nest = nest;\n        this.input = input;\n        this.fragments = fragments;\n        this.ranges = ranges;\n        this.inner = [];\n        this.innerDone = 0;\n        this.baseTree = null;\n        this.stoppedAt = null;\n        this.baseParse = base;\n    }\n    advance() {\n        if (this.baseParse) {\n            let done = this.baseParse.advance();\n            if (!done)\n                return null;\n            this.baseParse = null;\n            this.baseTree = done;\n            this.startInner();\n            if (this.stoppedAt != null)\n                for (let inner of this.inner)\n                    inner.parse.stopAt(this.stoppedAt);\n        }\n        if (this.innerDone == this.inner.length) {\n            let result = this.baseTree;\n            if (this.stoppedAt != null)\n                result = new Tree(result.type, result.children, result.positions, result.length, result.propValues.concat([[stoppedInner, this.stoppedAt]]));\n            return result;\n        }\n        let inner = this.inner[this.innerDone], done = inner.parse.advance();\n        if (done) {\n            this.innerDone++;\n            // This is a somewhat dodgy but super helpful hack where we\n            // patch up nodes created by the inner parse (and thus\n            // presumably not aliased anywhere else) to hold the information\n            // about the inner parse.\n            let props = Object.assign(Object.create(null), inner.target.props);\n            props[NodeProp.mounted.id] = new MountedTree(done, inner.overlay, inner.parser);\n            inner.target.props = props;\n        }\n        return null;\n    }\n    get parsedPos() {\n        if (this.baseParse)\n            return 0;\n        let pos = this.input.length;\n        for (let i = this.innerDone; i < this.inner.length; i++) {\n            if (this.inner[i].from < pos)\n                pos = Math.min(pos, this.inner[i].parse.parsedPos);\n        }\n        return pos;\n    }\n    stopAt(pos) {\n        this.stoppedAt = pos;\n        if (this.baseParse)\n            this.baseParse.stopAt(pos);\n        else\n            for (let i = this.innerDone; i < this.inner.length; i++)\n                this.inner[i].parse.stopAt(pos);\n    }\n    startInner() {\n        let fragmentCursor = new FragmentCursor(this.fragments);\n        let overlay = null;\n        let covered = null;\n        let cursor = new TreeCursor(new TreeNode(this.baseTree, this.ranges[0].from, 0, null), IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n        scan: for (let nest, isCovered;;) {\n            let enter = true, range;\n            if (this.stoppedAt != null && cursor.from >= this.stoppedAt) {\n                enter = false;\n            }\n            else if (fragmentCursor.hasNode(cursor)) {\n                if (overlay) {\n                    let match = overlay.mounts.find(m => m.frag.from <= cursor.from && m.frag.to >= cursor.to && m.mount.overlay);\n                    if (match)\n                        for (let r of match.mount.overlay) {\n                            let from = r.from + match.pos, to = r.to + match.pos;\n                            if (from >= cursor.from && to <= cursor.to && !overlay.ranges.some(r => r.from < to && r.to > from))\n                                overlay.ranges.push({ from, to });\n                        }\n                }\n                enter = false;\n            }\n            else if (covered && (isCovered = checkCover(covered.ranges, cursor.from, cursor.to))) {\n                enter = isCovered != 2 /* Cover.Full */;\n            }\n            else if (!cursor.type.isAnonymous && (nest = this.nest(cursor, this.input)) &&\n                (cursor.from < cursor.to || !nest.overlay)) {\n                if (!cursor.tree)\n                    materialize(cursor);\n                let oldMounts = fragmentCursor.findMounts(cursor.from, nest.parser);\n                if (typeof nest.overlay == \"function\") {\n                    overlay = new ActiveOverlay(nest.parser, nest.overlay, oldMounts, this.inner.length, cursor.from, cursor.tree, overlay);\n                }\n                else {\n                    let ranges = punchRanges(this.ranges, nest.overlay ||\n                        (cursor.from < cursor.to ? [new Range(cursor.from, cursor.to)] : []));\n                    if (ranges.length)\n                        checkRanges(ranges);\n                    if (ranges.length || !nest.overlay)\n                        this.inner.push(new InnerParse(nest.parser, ranges.length ? nest.parser.startParse(this.input, enterFragments(oldMounts, ranges), ranges)\n                            : nest.parser.startParse(\"\"), nest.overlay ? nest.overlay.map(r => new Range(r.from - cursor.from, r.to - cursor.from)) : null, cursor.tree, ranges.length ? ranges[0].from : cursor.from));\n                    if (!nest.overlay)\n                        enter = false;\n                    else if (ranges.length)\n                        covered = { ranges, depth: 0, prev: covered };\n                }\n            }\n            else if (overlay && (range = overlay.predicate(cursor))) {\n                if (range === true)\n                    range = new Range(cursor.from, cursor.to);\n                if (range.from < range.to) {\n                    let last = overlay.ranges.length - 1;\n                    if (last >= 0 && overlay.ranges[last].to == range.from)\n                        overlay.ranges[last] = { from: overlay.ranges[last].from, to: range.to };\n                    else\n                        overlay.ranges.push(range);\n                }\n            }\n            if (enter && cursor.firstChild()) {\n                if (overlay)\n                    overlay.depth++;\n                if (covered)\n                    covered.depth++;\n            }\n            else {\n                for (;;) {\n                    if (cursor.nextSibling())\n                        break;\n                    if (!cursor.parent())\n                        break scan;\n                    if (overlay && !--overlay.depth) {\n                        let ranges = punchRanges(this.ranges, overlay.ranges);\n                        if (ranges.length) {\n                            checkRanges(ranges);\n                            this.inner.splice(overlay.index, 0, new InnerParse(overlay.parser, overlay.parser.startParse(this.input, enterFragments(overlay.mounts, ranges), ranges), overlay.ranges.map(r => new Range(r.from - overlay.start, r.to - overlay.start)), overlay.target, ranges[0].from));\n                        }\n                        overlay = overlay.prev;\n                    }\n                    if (covered && !--covered.depth)\n                        covered = covered.prev;\n                }\n            }\n        }\n    }\n}\nfunction checkCover(covered, from, to) {\n    for (let range of covered) {\n        if (range.from >= to)\n            break;\n        if (range.to > from)\n            return range.from <= from && range.to >= to ? 2 /* Cover.Full */ : 1 /* Cover.Partial */;\n    }\n    return 0 /* Cover.None */;\n}\n// Take a piece of buffer and convert it into a stand-alone\n// TreeBuffer.\nfunction sliceBuf(buf, startI, endI, nodes, positions, off) {\n    if (startI < endI) {\n        let from = buf.buffer[startI + 1];\n        nodes.push(buf.slice(startI, endI, from));\n        positions.push(from - off);\n    }\n}\n// This function takes a node that's in a buffer, and converts it, and\n// its parent buffer nodes, into a Tree. This is again acting on the\n// assumption that the trees and buffers have been constructed by the\n// parse that was ran via the mix parser, and thus aren't shared with\n// any other code, making violations of the immutability safe.\nfunction materialize(cursor) {\n    let { node } = cursor, stack = [];\n    let buffer = node.context.buffer;\n    // Scan up to the nearest tree\n    do {\n        stack.push(cursor.index);\n        cursor.parent();\n    } while (!cursor.tree);\n    // Find the index of the buffer in that tree\n    let base = cursor.tree, i = base.children.indexOf(buffer);\n    let buf = base.children[i], b = buf.buffer, newStack = [i];\n    // Split a level in the buffer, putting the nodes before and after\n    // the child that contains `node` into new buffers.\n    function split(startI, endI, type, innerOffset, length, stackPos) {\n        let targetI = stack[stackPos];\n        let children = [], positions = [];\n        sliceBuf(buf, startI, targetI, children, positions, innerOffset);\n        let from = b[targetI + 1], to = b[targetI + 2];\n        newStack.push(children.length);\n        let child = stackPos\n            ? split(targetI + 4, b[targetI + 3], buf.set.types[b[targetI]], from, to - from, stackPos - 1)\n            : node.toTree();\n        children.push(child);\n        positions.push(from - innerOffset);\n        sliceBuf(buf, b[targetI + 3], endI, children, positions, innerOffset);\n        return new Tree(type, children, positions, length);\n    }\n    base.children[i] = split(0, b.length, NodeType.none, 0, buf.length, stack.length - 1);\n    // Move the cursor back to the target node\n    for (let index of newStack) {\n        let tree = cursor.tree.children[index], pos = cursor.tree.positions[index];\n        cursor.yield(new TreeNode(tree, pos + cursor.from, index, cursor._tree));\n    }\n}\nclass StructureCursor {\n    constructor(root, offset) {\n        this.offset = offset;\n        this.done = false;\n        this.cursor = root.cursor(IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n    }\n    // Move to the first node (in pre-order) that starts at or after `pos`.\n    moveTo(pos) {\n        let { cursor } = this, p = pos - this.offset;\n        while (!this.done && cursor.from < p) {\n            if (cursor.to >= pos && cursor.enter(p, 1, IterMode.IgnoreOverlays | IterMode.ExcludeBuffers)) ;\n            else if (!cursor.next(false))\n                this.done = true;\n        }\n    }\n    hasNode(cursor) {\n        this.moveTo(cursor.from);\n        if (!this.done && this.cursor.from + this.offset == cursor.from && this.cursor.tree) {\n            for (let tree = this.cursor.tree;;) {\n                if (tree == cursor.tree)\n                    return true;\n                if (tree.children.length && tree.positions[0] == 0 && tree.children[0] instanceof Tree)\n                    tree = tree.children[0];\n                else\n                    break;\n            }\n        }\n        return false;\n    }\n}\nclass FragmentCursor {\n    constructor(fragments) {\n        var _a;\n        this.fragments = fragments;\n        this.curTo = 0;\n        this.fragI = 0;\n        if (fragments.length) {\n            let first = this.curFrag = fragments[0];\n            this.curTo = (_a = first.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : first.to;\n            this.inner = new StructureCursor(first.tree, -first.offset);\n        }\n        else {\n            this.curFrag = this.inner = null;\n        }\n    }\n    hasNode(node) {\n        while (this.curFrag && node.from >= this.curTo)\n            this.nextFrag();\n        return this.curFrag && this.curFrag.from <= node.from && this.curTo >= node.to && this.inner.hasNode(node);\n    }\n    nextFrag() {\n        var _a;\n        this.fragI++;\n        if (this.fragI == this.fragments.length) {\n            this.curFrag = this.inner = null;\n        }\n        else {\n            let frag = this.curFrag = this.fragments[this.fragI];\n            this.curTo = (_a = frag.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : frag.to;\n            this.inner = new StructureCursor(frag.tree, -frag.offset);\n        }\n    }\n    findMounts(pos, parser) {\n        var _a;\n        let result = [];\n        if (this.inner) {\n            this.inner.cursor.moveTo(pos, 1);\n            for (let pos = this.inner.cursor.node; pos; pos = pos.parent) {\n                let mount = (_a = pos.tree) === null || _a === void 0 ? void 0 : _a.prop(NodeProp.mounted);\n                if (mount && mount.parser == parser) {\n                    for (let i = this.fragI; i < this.fragments.length; i++) {\n                        let frag = this.fragments[i];\n                        if (frag.from >= pos.to)\n                            break;\n                        if (frag.tree == this.curFrag.tree)\n                            result.push({\n                                frag,\n                                pos: pos.from - frag.offset,\n                                mount\n                            });\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}\nfunction punchRanges(outer, ranges) {\n    let copy = null, current = ranges;\n    for (let i = 1, j = 0; i < outer.length; i++) {\n        let gapFrom = outer[i - 1].to, gapTo = outer[i].from;\n        for (; j < current.length; j++) {\n            let r = current[j];\n            if (r.from >= gapTo)\n                break;\n            if (r.to <= gapFrom)\n                continue;\n            if (!copy)\n                current = copy = ranges.slice();\n            if (r.from < gapFrom) {\n                copy[j] = new Range(r.from, gapFrom);\n                if (r.to > gapTo)\n                    copy.splice(j + 1, 0, new Range(gapTo, r.to));\n            }\n            else if (r.to > gapTo) {\n                copy[j--] = new Range(gapTo, r.to);\n            }\n            else {\n                copy.splice(j--, 1);\n            }\n        }\n    }\n    return current;\n}\nfunction findCoverChanges(a, b, from, to) {\n    let iA = 0, iB = 0, inA = false, inB = false, pos = -1e9;\n    let result = [];\n    for (;;) {\n        let nextA = iA == a.length ? 1e9 : inA ? a[iA].to : a[iA].from;\n        let nextB = iB == b.length ? 1e9 : inB ? b[iB].to : b[iB].from;\n        if (inA != inB) {\n            let start = Math.max(pos, from), end = Math.min(nextA, nextB, to);\n            if (start < end)\n                result.push(new Range(start, end));\n        }\n        pos = Math.min(nextA, nextB);\n        if (pos == 1e9)\n            break;\n        if (nextA == pos) {\n            if (!inA)\n                inA = true;\n            else {\n                inA = false;\n                iA++;\n            }\n        }\n        if (nextB == pos) {\n            if (!inB)\n                inB = true;\n            else {\n                inB = false;\n                iB++;\n            }\n        }\n    }\n    return result;\n}\n// Given a number of fragments for the outer tree, and a set of ranges\n// to parse, find fragments for inner trees mounted around those\n// ranges, if any.\nfunction enterFragments(mounts, ranges) {\n    let result = [];\n    for (let { pos, mount, frag } of mounts) {\n        let startPos = pos + (mount.overlay ? mount.overlay[0].from : 0), endPos = startPos + mount.tree.length;\n        let from = Math.max(frag.from, startPos), to = Math.min(frag.to, endPos);\n        if (mount.overlay) {\n            let overlay = mount.overlay.map(r => new Range(r.from + pos, r.to + pos));\n            let changes = findCoverChanges(ranges, overlay, from, to);\n            for (let i = 0, pos = from;; i++) {\n                let last = i == changes.length, end = last ? to : changes[i].from;\n                if (end > pos)\n                    result.push(new TreeFragment(pos, end, mount.tree, -startPos, frag.from >= pos || frag.openStart, frag.to <= end || frag.openEnd));\n                if (last)\n                    break;\n                pos = changes[i].to;\n            }\n        }\n        else {\n            result.push(new TreeFragment(from, to, mount.tree, -startPos, frag.from >= startPos || frag.openStart, frag.to <= endPos || frag.openEnd));\n        }\n    }\n    return result;\n}\n\nexport { DefaultBufferLength, IterMode, MountedTree, NodeProp, NodeSet, NodeType, NodeWeakMap, Parser, Tree, TreeBuffer, TreeCursor, TreeFragment, parseMixed };\n","import { Parser, NodeProp, NodeSet, NodeType, DefaultBufferLength, Tree, IterMode } from '@lezer/common';\n\n/**\nA parse stack. These are used internally by the parser to track\nparsing progress. They also provide some properties and methods\nthat external code such as a tokenizer can use to get information\nabout the parse state.\n*/\nclass Stack {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The parse that this stack is part of @internal\n    */\n    p, \n    /**\n    Holds state, input pos, buffer index triplets for all but the\n    top state @internal\n    */\n    stack, \n    /**\n    The current parse state @internal\n    */\n    state, \n    // The position at which the next reduce should take place. This\n    // can be less than `this.pos` when skipped expressions have been\n    // added to the stack (which should be moved outside of the next\n    // reduction)\n    /**\n    @internal\n    */\n    reducePos, \n    /**\n    The input position up to which this stack has parsed.\n    */\n    pos, \n    /**\n    The dynamic score of the stack, including dynamic precedence\n    and error-recovery penalties\n    @internal\n    */\n    score, \n    // The output buffer. Holds (type, start, end, size) quads\n    // representing nodes created by the parser, where `size` is\n    // amount of buffer array entries covered by this node.\n    /**\n    @internal\n    */\n    buffer, \n    // The base offset of the buffer. When stacks are split, the split\n    // instance shared the buffer history with its parent up to\n    // `bufferBase`, which is the absolute offset (including the\n    // offset of previous splits) into the buffer at which this stack\n    // starts writing.\n    /**\n    @internal\n    */\n    bufferBase, \n    /**\n    @internal\n    */\n    curContext, \n    /**\n    @internal\n    */\n    lookAhead = 0, \n    // A parent stack from which this was split off, if any. This is\n    // set up so that it always points to a stack that has some\n    // additional buffer content, never to a stack with an equal\n    // `bufferBase`.\n    /**\n    @internal\n    */\n    parent) {\n        this.p = p;\n        this.stack = stack;\n        this.state = state;\n        this.reducePos = reducePos;\n        this.pos = pos;\n        this.score = score;\n        this.buffer = buffer;\n        this.bufferBase = bufferBase;\n        this.curContext = curContext;\n        this.lookAhead = lookAhead;\n        this.parent = parent;\n    }\n    /**\n    @internal\n    */\n    toString() {\n        return `[${this.stack.filter((_, i) => i % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? \"!\" + this.score : \"\"}`;\n    }\n    // Start an empty stack\n    /**\n    @internal\n    */\n    static start(p, state, pos = 0) {\n        let cx = p.parser.context;\n        return new Stack(p, [], state, pos, pos, 0, [], 0, cx ? new StackContext(cx, cx.start) : null, 0, null);\n    }\n    /**\n    The stack's current [context](#lr.ContextTracker) value, if\n    any. Its type will depend on the context tracker's type\n    parameter, or it will be `null` if there is no context\n    tracker.\n    */\n    get context() { return this.curContext ? this.curContext.context : null; }\n    // Push a state onto the stack, tracking its start position as well\n    // as the buffer base at that point.\n    /**\n    @internal\n    */\n    pushState(state, start) {\n        this.stack.push(this.state, start, this.bufferBase + this.buffer.length);\n        this.state = state;\n    }\n    // Apply a reduce action\n    /**\n    @internal\n    */\n    reduce(action) {\n        var _a;\n        let depth = action >> 19 /* Action.ReduceDepthShift */, type = action & 65535 /* Action.ValueMask */;\n        let { parser } = this.p;\n        let lookaheadRecord = this.reducePos < this.pos - 25 /* Lookahead.Margin */;\n        if (lookaheadRecord)\n            this.setLookAhead(this.pos);\n        let dPrec = parser.dynamicPrecedence(type);\n        if (dPrec)\n            this.score += dPrec;\n        if (depth == 0) {\n            this.pushState(parser.getGoto(this.state, type, true), this.reducePos);\n            // Zero-depth reductions are a special casethey add stuff to\n            // the stack without popping anything off.\n            if (type < parser.minRepeatTerm)\n                this.storeNode(type, this.reducePos, this.reducePos, lookaheadRecord ? 8 : 4, true);\n            this.reduceContext(type, this.reducePos);\n            return;\n        }\n        // Find the base index into `this.stack`, content after which will\n        // be dropped. Note that with `StayFlag` reductions we need to\n        // consume two extra frames (the dummy parent node for the skipped\n        // expression and the state that we'll be staying in, which should\n        // be moved to `this.state`).\n        let base = this.stack.length - ((depth - 1) * 3) - (action & 262144 /* Action.StayFlag */ ? 6 : 0);\n        let start = base ? this.stack[base - 2] : this.p.ranges[0].from, size = this.reducePos - start;\n        // This is a kludge to try and detect overly deep left-associative\n        // trees, which will not increase the parse stack depth and thus\n        // won't be caught by the regular stack-depth limit check.\n        if (size >= 2000 /* Recover.MinBigReduction */ && !((_a = this.p.parser.nodeSet.types[type]) === null || _a === void 0 ? void 0 : _a.isAnonymous)) {\n            if (start == this.p.lastBigReductionStart) {\n                this.p.bigReductionCount++;\n                this.p.lastBigReductionSize = size;\n            }\n            else if (this.p.lastBigReductionSize < size) {\n                this.p.bigReductionCount = 1;\n                this.p.lastBigReductionStart = start;\n                this.p.lastBigReductionSize = size;\n            }\n        }\n        let bufferBase = base ? this.stack[base - 1] : 0, count = this.bufferBase + this.buffer.length - bufferBase;\n        // Store normal terms or `R -> R R` repeat reductions\n        if (type < parser.minRepeatTerm || (action & 131072 /* Action.RepeatFlag */)) {\n            let pos = parser.stateFlag(this.state, 1 /* StateFlag.Skipped */) ? this.pos : this.reducePos;\n            this.storeNode(type, start, pos, count + 4, true);\n        }\n        if (action & 262144 /* Action.StayFlag */) {\n            this.state = this.stack[base];\n        }\n        else {\n            let baseStateID = this.stack[base - 3];\n            this.state = parser.getGoto(baseStateID, type, true);\n        }\n        while (this.stack.length > base)\n            this.stack.pop();\n        this.reduceContext(type, start);\n    }\n    // Shift a value into the buffer\n    /**\n    @internal\n    */\n    storeNode(term, start, end, size = 4, mustSink = false) {\n        if (term == 0 /* Term.Err */ &&\n            (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {\n            // Try to omit/merge adjacent error nodes\n            let cur = this, top = this.buffer.length;\n            if (top == 0 && cur.parent) {\n                top = cur.bufferBase - cur.parent.bufferBase;\n                cur = cur.parent;\n            }\n            if (top > 0 && cur.buffer[top - 4] == 0 /* Term.Err */ && cur.buffer[top - 1] > -1) {\n                if (start == end)\n                    return;\n                if (cur.buffer[top - 2] >= start) {\n                    cur.buffer[top - 2] = end;\n                    return;\n                }\n            }\n        }\n        if (!mustSink || this.pos == end) { // Simple case, just append\n            this.buffer.push(term, start, end, size);\n        }\n        else { // There may be skipped nodes that have to be moved forward\n            let index = this.buffer.length;\n            if (index > 0 && this.buffer[index - 4] != 0 /* Term.Err */) {\n                let mustMove = false;\n                for (let scan = index; scan > 0 && this.buffer[scan - 2] > end; scan -= 4) {\n                    if (this.buffer[scan - 1] >= 0) {\n                        mustMove = true;\n                        break;\n                    }\n                }\n                if (mustMove)\n                    while (index > 0 && this.buffer[index - 2] > end) {\n                        // Move this record forward\n                        this.buffer[index] = this.buffer[index - 4];\n                        this.buffer[index + 1] = this.buffer[index - 3];\n                        this.buffer[index + 2] = this.buffer[index - 2];\n                        this.buffer[index + 3] = this.buffer[index - 1];\n                        index -= 4;\n                        if (size > 4)\n                            size -= 4;\n                    }\n            }\n            this.buffer[index] = term;\n            this.buffer[index + 1] = start;\n            this.buffer[index + 2] = end;\n            this.buffer[index + 3] = size;\n        }\n    }\n    // Apply a shift action\n    /**\n    @internal\n    */\n    shift(action, type, start, end) {\n        if (action & 131072 /* Action.GotoFlag */) {\n            this.pushState(action & 65535 /* Action.ValueMask */, this.pos);\n        }\n        else if ((action & 262144 /* Action.StayFlag */) == 0) { // Regular shift\n            let nextState = action, { parser } = this.p;\n            if (end > this.pos || type <= parser.maxNode) {\n                this.pos = end;\n                if (!parser.stateFlag(nextState, 1 /* StateFlag.Skipped */))\n                    this.reducePos = end;\n            }\n            this.pushState(nextState, start);\n            this.shiftContext(type, start);\n            if (type <= parser.maxNode)\n                this.buffer.push(type, start, end, 4);\n        }\n        else { // Shift-and-stay, which means this is a skipped token\n            this.pos = end;\n            this.shiftContext(type, start);\n            if (type <= this.p.parser.maxNode)\n                this.buffer.push(type, start, end, 4);\n        }\n    }\n    // Apply an action\n    /**\n    @internal\n    */\n    apply(action, next, nextStart, nextEnd) {\n        if (action & 65536 /* Action.ReduceFlag */)\n            this.reduce(action);\n        else\n            this.shift(action, next, nextStart, nextEnd);\n    }\n    // Add a prebuilt (reused) node into the buffer.\n    /**\n    @internal\n    */\n    useNode(value, next) {\n        let index = this.p.reused.length - 1;\n        if (index < 0 || this.p.reused[index] != value) {\n            this.p.reused.push(value);\n            index++;\n        }\n        let start = this.pos;\n        this.reducePos = this.pos = start + value.length;\n        this.pushState(next, start);\n        this.buffer.push(index, start, this.reducePos, -1 /* size == -1 means this is a reused value */);\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.reuse(this.curContext.context, value, this, this.p.stream.reset(this.pos - value.length)));\n    }\n    // Split the stack. Due to the buffer sharing and the fact\n    // that `this.stack` tends to stay quite shallow, this isn't very\n    // expensive.\n    /**\n    @internal\n    */\n    split() {\n        let parent = this;\n        let off = parent.buffer.length;\n        // Because the top of the buffer (after this.pos) may be mutated\n        // to reorder reductions and skipped tokens, and shared buffers\n        // should be immutable, this copies any outstanding skipped tokens\n        // to the new buffer, and puts the base pointer before them.\n        while (off > 0 && parent.buffer[off - 2] > parent.reducePos)\n            off -= 4;\n        let buffer = parent.buffer.slice(off), base = parent.bufferBase + off;\n        // Make sure parent points to an actual parent with content, if there is such a parent.\n        while (parent && base == parent.bufferBase)\n            parent = parent.parent;\n        return new Stack(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, buffer, base, this.curContext, this.lookAhead, parent);\n    }\n    // Try to recover from an error by 'deleting' (ignoring) one token.\n    /**\n    @internal\n    */\n    recoverByDelete(next, nextEnd) {\n        let isNode = next <= this.p.parser.maxNode;\n        if (isNode)\n            this.storeNode(next, this.pos, nextEnd, 4);\n        this.storeNode(0 /* Term.Err */, this.pos, nextEnd, isNode ? 8 : 4);\n        this.pos = this.reducePos = nextEnd;\n        this.score -= 190 /* Recover.Delete */;\n    }\n    /**\n    Check if the given term would be able to be shifted (optionally\n    after some reductions) on this stack. This can be useful for\n    external tokenizers that want to make sure they only provide a\n    given token when it applies.\n    */\n    canShift(term) {\n        for (let sim = new SimulatedStack(this);;) {\n            let action = this.p.parser.stateSlot(sim.state, 4 /* ParseState.DefaultReduce */) || this.p.parser.hasAction(sim.state, term);\n            if (action == 0)\n                return false;\n            if ((action & 65536 /* Action.ReduceFlag */) == 0)\n                return true;\n            sim.reduce(action);\n        }\n    }\n    // Apply up to Recover.MaxNext recovery actions that conceptually\n    // inserts some missing token or rule.\n    /**\n    @internal\n    */\n    recoverByInsert(next) {\n        if (this.stack.length >= 300 /* Recover.MaxInsertStackDepth */)\n            return [];\n        let nextStates = this.p.parser.nextStates(this.state);\n        if (nextStates.length > 4 /* Recover.MaxNext */ << 1 || this.stack.length >= 120 /* Recover.DampenInsertStackDepth */) {\n            let best = [];\n            for (let i = 0, s; i < nextStates.length; i += 2) {\n                if ((s = nextStates[i + 1]) != this.state && this.p.parser.hasAction(s, next))\n                    best.push(nextStates[i], s);\n            }\n            if (this.stack.length < 120 /* Recover.DampenInsertStackDepth */)\n                for (let i = 0; best.length < 4 /* Recover.MaxNext */ << 1 && i < nextStates.length; i += 2) {\n                    let s = nextStates[i + 1];\n                    if (!best.some((v, i) => (i & 1) && v == s))\n                        best.push(nextStates[i], s);\n                }\n            nextStates = best;\n        }\n        let result = [];\n        for (let i = 0; i < nextStates.length && result.length < 4 /* Recover.MaxNext */; i += 2) {\n            let s = nextStates[i + 1];\n            if (s == this.state)\n                continue;\n            let stack = this.split();\n            stack.pushState(s, this.pos);\n            stack.storeNode(0 /* Term.Err */, stack.pos, stack.pos, 4, true);\n            stack.shiftContext(nextStates[i], this.pos);\n            stack.reducePos = this.pos;\n            stack.score -= 200 /* Recover.Insert */;\n            result.push(stack);\n        }\n        return result;\n    }\n    // Force a reduce, if possible. Return false if that can't\n    // be done.\n    /**\n    @internal\n    */\n    forceReduce() {\n        let { parser } = this.p;\n        let reduce = parser.stateSlot(this.state, 5 /* ParseState.ForcedReduce */);\n        if ((reduce & 65536 /* Action.ReduceFlag */) == 0)\n            return false;\n        if (!parser.validAction(this.state, reduce)) {\n            let depth = reduce >> 19 /* Action.ReduceDepthShift */, term = reduce & 65535 /* Action.ValueMask */;\n            let target = this.stack.length - depth * 3;\n            if (target < 0 || parser.getGoto(this.stack[target], term, false) < 0) {\n                let backup = this.findForcedReduction();\n                if (backup == null)\n                    return false;\n                reduce = backup;\n            }\n            this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n            this.score -= 100 /* Recover.Reduce */;\n        }\n        this.reducePos = this.pos;\n        this.reduce(reduce);\n        return true;\n    }\n    /**\n    Try to scan through the automaton to find some kind of reduction\n    that can be applied. Used when the regular ForcedReduce field\n    isn't a valid action. @internal\n    */\n    findForcedReduction() {\n        let { parser } = this.p, seen = [];\n        let explore = (state, depth) => {\n            if (seen.includes(state))\n                return;\n            seen.push(state);\n            return parser.allActions(state, (action) => {\n                if (action & (262144 /* Action.StayFlag */ | 131072 /* Action.GotoFlag */)) ;\n                else if (action & 65536 /* Action.ReduceFlag */) {\n                    let rDepth = (action >> 19 /* Action.ReduceDepthShift */) - depth;\n                    if (rDepth > 1) {\n                        let term = action & 65535 /* Action.ValueMask */, target = this.stack.length - rDepth * 3;\n                        if (target >= 0 && parser.getGoto(this.stack[target], term, false) >= 0)\n                            return (rDepth << 19 /* Action.ReduceDepthShift */) | 65536 /* Action.ReduceFlag */ | term;\n                    }\n                }\n                else {\n                    let found = explore(action, depth + 1);\n                    if (found != null)\n                        return found;\n                }\n            });\n        };\n        return explore(this.state, 0);\n    }\n    /**\n    @internal\n    */\n    forceAll() {\n        while (!this.p.parser.stateFlag(this.state, 2 /* StateFlag.Accepting */)) {\n            if (!this.forceReduce()) {\n                this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n                break;\n            }\n        }\n        return this;\n    }\n    /**\n    Check whether this state has no further actions (assumed to be a direct descendant of the\n    top state, since any other states must be able to continue\n    somehow). @internal\n    */\n    get deadEnd() {\n        if (this.stack.length != 3)\n            return false;\n        let { parser } = this.p;\n        return parser.data[parser.stateSlot(this.state, 1 /* ParseState.Actions */)] == 65535 /* Seq.End */ &&\n            !parser.stateSlot(this.state, 4 /* ParseState.DefaultReduce */);\n    }\n    /**\n    Restart the stack (put it back in its start state). Only safe\n    when this.stack.length == 3 (state is directly below the top\n    state). @internal\n    */\n    restart() {\n        this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n        this.state = this.stack[0];\n        this.stack.length = 0;\n    }\n    /**\n    @internal\n    */\n    sameState(other) {\n        if (this.state != other.state || this.stack.length != other.stack.length)\n            return false;\n        for (let i = 0; i < this.stack.length; i += 3)\n            if (this.stack[i] != other.stack[i])\n                return false;\n        return true;\n    }\n    /**\n    Get the parser used by this stack.\n    */\n    get parser() { return this.p.parser; }\n    /**\n    Test whether a given dialect (by numeric ID, as exported from\n    the terms file) is enabled.\n    */\n    dialectEnabled(dialectID) { return this.p.parser.dialect.flags[dialectID]; }\n    shiftContext(term, start) {\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.shift(this.curContext.context, term, this, this.p.stream.reset(start)));\n    }\n    reduceContext(term, start) {\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.reduce(this.curContext.context, term, this, this.p.stream.reset(start)));\n    }\n    /**\n    @internal\n    */\n    emitContext() {\n        let last = this.buffer.length - 1;\n        if (last < 0 || this.buffer[last] != -3)\n            this.buffer.push(this.curContext.hash, this.pos, this.pos, -3);\n    }\n    /**\n    @internal\n    */\n    emitLookAhead() {\n        let last = this.buffer.length - 1;\n        if (last < 0 || this.buffer[last] != -4)\n            this.buffer.push(this.lookAhead, this.pos, this.pos, -4);\n    }\n    updateContext(context) {\n        if (context != this.curContext.context) {\n            let newCx = new StackContext(this.curContext.tracker, context);\n            if (newCx.hash != this.curContext.hash)\n                this.emitContext();\n            this.curContext = newCx;\n        }\n    }\n    /**\n    @internal\n    */\n    setLookAhead(lookAhead) {\n        if (lookAhead > this.lookAhead) {\n            this.emitLookAhead();\n            this.lookAhead = lookAhead;\n        }\n    }\n    /**\n    @internal\n    */\n    close() {\n        if (this.curContext && this.curContext.tracker.strict)\n            this.emitContext();\n        if (this.lookAhead > 0)\n            this.emitLookAhead();\n    }\n}\nclass StackContext {\n    constructor(tracker, context) {\n        this.tracker = tracker;\n        this.context = context;\n        this.hash = tracker.strict ? tracker.hash(context) : 0;\n    }\n}\n// Used to cheaply run some reductions to scan ahead without mutating\n// an entire stack\nclass SimulatedStack {\n    constructor(start) {\n        this.start = start;\n        this.state = start.state;\n        this.stack = start.stack;\n        this.base = this.stack.length;\n    }\n    reduce(action) {\n        let term = action & 65535 /* Action.ValueMask */, depth = action >> 19 /* Action.ReduceDepthShift */;\n        if (depth == 0) {\n            if (this.stack == this.start.stack)\n                this.stack = this.stack.slice();\n            this.stack.push(this.state, 0, 0);\n            this.base += 3;\n        }\n        else {\n            this.base -= (depth - 1) * 3;\n        }\n        let goto = this.start.p.parser.getGoto(this.stack[this.base - 3], term, true);\n        this.state = goto;\n    }\n}\n// This is given to `Tree.build` to build a buffer, and encapsulates\n// the parent-stack-walking necessary to read the nodes.\nclass StackBufferCursor {\n    constructor(stack, pos, index) {\n        this.stack = stack;\n        this.pos = pos;\n        this.index = index;\n        this.buffer = stack.buffer;\n        if (this.index == 0)\n            this.maybeNext();\n    }\n    static create(stack, pos = stack.bufferBase + stack.buffer.length) {\n        return new StackBufferCursor(stack, pos, pos - stack.bufferBase);\n    }\n    maybeNext() {\n        let next = this.stack.parent;\n        if (next != null) {\n            this.index = this.stack.bufferBase - next.bufferBase;\n            this.stack = next;\n            this.buffer = next.buffer;\n        }\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    next() {\n        this.index -= 4;\n        this.pos -= 4;\n        if (this.index == 0)\n            this.maybeNext();\n    }\n    fork() {\n        return new StackBufferCursor(this.stack, this.pos, this.index);\n    }\n}\n\n// See lezer-generator/src/encode.ts for comments about the encoding\n// used here\nfunction decodeArray(input, Type = Uint16Array) {\n    if (typeof input != \"string\")\n        return input;\n    let array = null;\n    for (let pos = 0, out = 0; pos < input.length;) {\n        let value = 0;\n        for (;;) {\n            let next = input.charCodeAt(pos++), stop = false;\n            if (next == 126 /* Encode.BigValCode */) {\n                value = 65535 /* Encode.BigVal */;\n                break;\n            }\n            if (next >= 92 /* Encode.Gap2 */)\n                next--;\n            if (next >= 34 /* Encode.Gap1 */)\n                next--;\n            let digit = next - 32 /* Encode.Start */;\n            if (digit >= 46 /* Encode.Base */) {\n                digit -= 46 /* Encode.Base */;\n                stop = true;\n            }\n            value += digit;\n            if (stop)\n                break;\n            value *= 46 /* Encode.Base */;\n        }\n        if (array)\n            array[out++] = value;\n        else\n            array = new Type(value);\n    }\n    return array;\n}\n\nclass CachedToken {\n    constructor() {\n        this.start = -1;\n        this.value = -1;\n        this.end = -1;\n        this.extended = -1;\n        this.lookAhead = 0;\n        this.mask = 0;\n        this.context = 0;\n    }\n}\nconst nullToken = new CachedToken;\n/**\n[Tokenizers](#lr.ExternalTokenizer) interact with the input\nthrough this interface. It presents the input as a stream of\ncharacters, tracking lookahead and hiding the complexity of\n[ranges](#common.Parser.parse^ranges) from tokenizer code.\n*/\nclass InputStream {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    @internal\n    */\n    input, \n    /**\n    @internal\n    */\n    ranges) {\n        this.input = input;\n        this.ranges = ranges;\n        /**\n        @internal\n        */\n        this.chunk = \"\";\n        /**\n        @internal\n        */\n        this.chunkOff = 0;\n        /**\n        Backup chunk\n        */\n        this.chunk2 = \"\";\n        this.chunk2Pos = 0;\n        /**\n        The character code of the next code unit in the input, or -1\n        when the stream is at the end of the input.\n        */\n        this.next = -1;\n        /**\n        @internal\n        */\n        this.token = nullToken;\n        this.rangeIndex = 0;\n        this.pos = this.chunkPos = ranges[0].from;\n        this.range = ranges[0];\n        this.end = ranges[ranges.length - 1].to;\n        this.readNext();\n    }\n    /**\n    @internal\n    */\n    resolveOffset(offset, assoc) {\n        let range = this.range, index = this.rangeIndex;\n        let pos = this.pos + offset;\n        while (pos < range.from) {\n            if (!index)\n                return null;\n            let next = this.ranges[--index];\n            pos -= range.from - next.to;\n            range = next;\n        }\n        while (assoc < 0 ? pos > range.to : pos >= range.to) {\n            if (index == this.ranges.length - 1)\n                return null;\n            let next = this.ranges[++index];\n            pos += next.from - range.to;\n            range = next;\n        }\n        return pos;\n    }\n    /**\n    @internal\n    */\n    clipPos(pos) {\n        if (pos >= this.range.from && pos < this.range.to)\n            return pos;\n        for (let range of this.ranges)\n            if (range.to > pos)\n                return Math.max(pos, range.from);\n        return this.end;\n    }\n    /**\n    Look at a code unit near the stream position. `.peek(0)` equals\n    `.next`, `.peek(-1)` gives you the previous character, and so\n    on.\n    \n    Note that looking around during tokenizing creates dependencies\n    on potentially far-away content, which may reduce the\n    effectiveness incremental parsingwhen looking forwardor even\n    cause invalid reparses when looking backward more than 25 code\n    units, since the library does not track lookbehind.\n    */\n    peek(offset) {\n        let idx = this.chunkOff + offset, pos, result;\n        if (idx >= 0 && idx < this.chunk.length) {\n            pos = this.pos + offset;\n            result = this.chunk.charCodeAt(idx);\n        }\n        else {\n            let resolved = this.resolveOffset(offset, 1);\n            if (resolved == null)\n                return -1;\n            pos = resolved;\n            if (pos >= this.chunk2Pos && pos < this.chunk2Pos + this.chunk2.length) {\n                result = this.chunk2.charCodeAt(pos - this.chunk2Pos);\n            }\n            else {\n                let i = this.rangeIndex, range = this.range;\n                while (range.to <= pos)\n                    range = this.ranges[++i];\n                this.chunk2 = this.input.chunk(this.chunk2Pos = pos);\n                if (pos + this.chunk2.length > range.to)\n                    this.chunk2 = this.chunk2.slice(0, range.to - pos);\n                result = this.chunk2.charCodeAt(0);\n            }\n        }\n        if (pos >= this.token.lookAhead)\n            this.token.lookAhead = pos + 1;\n        return result;\n    }\n    /**\n    Accept a token. By default, the end of the token is set to the\n    current stream position, but you can pass an offset (relative to\n    the stream position) to change that.\n    */\n    acceptToken(token, endOffset = 0) {\n        let end = endOffset ? this.resolveOffset(endOffset, -1) : this.pos;\n        if (end == null || end < this.token.start)\n            throw new RangeError(\"Token end out of bounds\");\n        this.token.value = token;\n        this.token.end = end;\n    }\n    /**\n    Accept a token ending at a specific given position.\n    */\n    acceptTokenTo(token, endPos) {\n        this.token.value = token;\n        this.token.end = endPos;\n    }\n    getChunk() {\n        if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {\n            let { chunk, chunkPos } = this;\n            this.chunk = this.chunk2;\n            this.chunkPos = this.chunk2Pos;\n            this.chunk2 = chunk;\n            this.chunk2Pos = chunkPos;\n            this.chunkOff = this.pos - this.chunkPos;\n        }\n        else {\n            this.chunk2 = this.chunk;\n            this.chunk2Pos = this.chunkPos;\n            let nextChunk = this.input.chunk(this.pos);\n            let end = this.pos + nextChunk.length;\n            this.chunk = end > this.range.to ? nextChunk.slice(0, this.range.to - this.pos) : nextChunk;\n            this.chunkPos = this.pos;\n            this.chunkOff = 0;\n        }\n    }\n    readNext() {\n        if (this.chunkOff >= this.chunk.length) {\n            this.getChunk();\n            if (this.chunkOff == this.chunk.length)\n                return this.next = -1;\n        }\n        return this.next = this.chunk.charCodeAt(this.chunkOff);\n    }\n    /**\n    Move the stream forward N (defaults to 1) code units. Returns\n    the new value of [`next`](#lr.InputStream.next).\n    */\n    advance(n = 1) {\n        this.chunkOff += n;\n        while (this.pos + n >= this.range.to) {\n            if (this.rangeIndex == this.ranges.length - 1)\n                return this.setDone();\n            n -= this.range.to - this.pos;\n            this.range = this.ranges[++this.rangeIndex];\n            this.pos = this.range.from;\n        }\n        this.pos += n;\n        if (this.pos >= this.token.lookAhead)\n            this.token.lookAhead = this.pos + 1;\n        return this.readNext();\n    }\n    setDone() {\n        this.pos = this.chunkPos = this.end;\n        this.range = this.ranges[this.rangeIndex = this.ranges.length - 1];\n        this.chunk = \"\";\n        return this.next = -1;\n    }\n    /**\n    @internal\n    */\n    reset(pos, token) {\n        if (token) {\n            this.token = token;\n            token.start = pos;\n            token.lookAhead = pos + 1;\n            token.value = token.extended = -1;\n        }\n        else {\n            this.token = nullToken;\n        }\n        if (this.pos != pos) {\n            this.pos = pos;\n            if (pos == this.end) {\n                this.setDone();\n                return this;\n            }\n            while (pos < this.range.from)\n                this.range = this.ranges[--this.rangeIndex];\n            while (pos >= this.range.to)\n                this.range = this.ranges[++this.rangeIndex];\n            if (pos >= this.chunkPos && pos < this.chunkPos + this.chunk.length) {\n                this.chunkOff = pos - this.chunkPos;\n            }\n            else {\n                this.chunk = \"\";\n                this.chunkOff = 0;\n            }\n            this.readNext();\n        }\n        return this;\n    }\n    /**\n    @internal\n    */\n    read(from, to) {\n        if (from >= this.chunkPos && to <= this.chunkPos + this.chunk.length)\n            return this.chunk.slice(from - this.chunkPos, to - this.chunkPos);\n        if (from >= this.chunk2Pos && to <= this.chunk2Pos + this.chunk2.length)\n            return this.chunk2.slice(from - this.chunk2Pos, to - this.chunk2Pos);\n        if (from >= this.range.from && to <= this.range.to)\n            return this.input.read(from, to);\n        let result = \"\";\n        for (let r of this.ranges) {\n            if (r.from >= to)\n                break;\n            if (r.to > from)\n                result += this.input.read(Math.max(r.from, from), Math.min(r.to, to));\n        }\n        return result;\n    }\n}\n/**\n@internal\n*/\nclass TokenGroup {\n    constructor(data, id) {\n        this.data = data;\n        this.id = id;\n    }\n    token(input, stack) {\n        let { parser } = stack.p;\n        readToken(this.data, input, stack, this.id, parser.data, parser.tokenPrecTable);\n    }\n}\nTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;\n/**\n@hide\n*/\nclass LocalTokenGroup {\n    constructor(data, precTable, elseToken) {\n        this.precTable = precTable;\n        this.elseToken = elseToken;\n        this.data = typeof data == \"string\" ? decodeArray(data) : data;\n    }\n    token(input, stack) {\n        let start = input.pos, skipped = 0;\n        for (;;) {\n            let atEof = input.next < 0, nextPos = input.resolveOffset(1, 1);\n            readToken(this.data, input, stack, 0, this.data, this.precTable);\n            if (input.token.value > -1)\n                break;\n            if (this.elseToken == null)\n                return;\n            if (!atEof)\n                skipped++;\n            if (nextPos == null)\n                break;\n            input.reset(nextPos, input.token);\n        }\n        if (skipped) {\n            input.reset(start, input.token);\n            input.acceptToken(this.elseToken, skipped);\n        }\n    }\n}\nLocalTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;\n/**\n`@external tokens` declarations in the grammar should resolve to\nan instance of this class.\n*/\nclass ExternalTokenizer {\n    /**\n    Create a tokenizer. The first argument is the function that,\n    given an input stream, scans for the types of tokens it\n    recognizes at the stream's position, and calls\n    [`acceptToken`](#lr.InputStream.acceptToken) when it finds\n    one.\n    */\n    constructor(\n    /**\n    @internal\n    */\n    token, options = {}) {\n        this.token = token;\n        this.contextual = !!options.contextual;\n        this.fallback = !!options.fallback;\n        this.extend = !!options.extend;\n    }\n}\n// Tokenizer data is stored a big uint16 array containing, for each\n// state:\n//\n//  - A group bitmask, indicating what token groups are reachable from\n//    this state, so that paths that can only lead to tokens not in\n//    any of the current groups can be cut off early.\n//\n//  - The position of the end of the state's sequence of accepting\n//    tokens\n//\n//  - The number of outgoing edges for the state\n//\n//  - The accepting tokens, as (token id, group mask) pairs\n//\n//  - The outgoing edges, as (start character, end character, state\n//    index) triples, with end character being exclusive\n//\n// This function interprets that data, running through a stream as\n// long as new states with the a matching group mask can be reached,\n// and updating `input.token` when it matches a token.\nfunction readToken(data, input, stack, group, precTable, precOffset) {\n    let state = 0, groupMask = 1 << group, { dialect } = stack.p.parser;\n    scan: for (;;) {\n        if ((groupMask & data[state]) == 0)\n            break;\n        let accEnd = data[state + 1];\n        // Check whether this state can lead to a token in the current group\n        // Accept tokens in this state, possibly overwriting\n        // lower-precedence / shorter tokens\n        for (let i = state + 3; i < accEnd; i += 2)\n            if ((data[i + 1] & groupMask) > 0) {\n                let term = data[i];\n                if (dialect.allows(term) &&\n                    (input.token.value == -1 || input.token.value == term ||\n                        overrides(term, input.token.value, precTable, precOffset))) {\n                    input.acceptToken(term);\n                    break;\n                }\n            }\n        let next = input.next, low = 0, high = data[state + 2];\n        // Special case for EOF\n        if (input.next < 0 && high > low && data[accEnd + high * 3 - 3] == 65535 /* Seq.End */) {\n            state = data[accEnd + high * 3 - 1];\n            continue scan;\n        }\n        // Do a binary search on the state's edges\n        for (; low < high;) {\n            let mid = (low + high) >> 1;\n            let index = accEnd + mid + (mid << 1);\n            let from = data[index], to = data[index + 1] || 0x10000;\n            if (next < from)\n                high = mid;\n            else if (next >= to)\n                low = mid + 1;\n            else {\n                state = data[index + 2];\n                input.advance();\n                continue scan;\n            }\n        }\n        break;\n    }\n}\nfunction findOffset(data, start, term) {\n    for (let i = start, next; (next = data[i]) != 65535 /* Seq.End */; i++)\n        if (next == term)\n            return i - start;\n    return -1;\n}\nfunction overrides(token, prev, tableData, tableOffset) {\n    let iPrev = findOffset(tableData, tableOffset, prev);\n    return iPrev < 0 || findOffset(tableData, tableOffset, token) < iPrev;\n}\n\n// Environment variable used to control console output\nconst verbose = typeof process != \"undefined\" && process.env && /\\bparse\\b/.test(process.env.LOG);\nlet stackIDs = null;\nfunction cutAt(tree, pos, side) {\n    let cursor = tree.cursor(IterMode.IncludeAnonymous);\n    cursor.moveTo(pos);\n    for (;;) {\n        if (!(side < 0 ? cursor.childBefore(pos) : cursor.childAfter(pos)))\n            for (;;) {\n                if ((side < 0 ? cursor.to < pos : cursor.from > pos) && !cursor.type.isError)\n                    return side < 0 ? Math.max(0, Math.min(cursor.to - 1, pos - 25 /* Lookahead.Margin */))\n                        : Math.min(tree.length, Math.max(cursor.from + 1, pos + 25 /* Lookahead.Margin */));\n                if (side < 0 ? cursor.prevSibling() : cursor.nextSibling())\n                    break;\n                if (!cursor.parent())\n                    return side < 0 ? 0 : tree.length;\n            }\n    }\n}\nclass FragmentCursor {\n    constructor(fragments, nodeSet) {\n        this.fragments = fragments;\n        this.nodeSet = nodeSet;\n        this.i = 0;\n        this.fragment = null;\n        this.safeFrom = -1;\n        this.safeTo = -1;\n        this.trees = [];\n        this.start = [];\n        this.index = [];\n        this.nextFragment();\n    }\n    nextFragment() {\n        let fr = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];\n        if (fr) {\n            this.safeFrom = fr.openStart ? cutAt(fr.tree, fr.from + fr.offset, 1) - fr.offset : fr.from;\n            this.safeTo = fr.openEnd ? cutAt(fr.tree, fr.to + fr.offset, -1) - fr.offset : fr.to;\n            while (this.trees.length) {\n                this.trees.pop();\n                this.start.pop();\n                this.index.pop();\n            }\n            this.trees.push(fr.tree);\n            this.start.push(-fr.offset);\n            this.index.push(0);\n            this.nextStart = this.safeFrom;\n        }\n        else {\n            this.nextStart = 1e9;\n        }\n    }\n    // `pos` must be >= any previously given `pos` for this cursor\n    nodeAt(pos) {\n        if (pos < this.nextStart)\n            return null;\n        while (this.fragment && this.safeTo <= pos)\n            this.nextFragment();\n        if (!this.fragment)\n            return null;\n        for (;;) {\n            let last = this.trees.length - 1;\n            if (last < 0) { // End of tree\n                this.nextFragment();\n                return null;\n            }\n            let top = this.trees[last], index = this.index[last];\n            if (index == top.children.length) {\n                this.trees.pop();\n                this.start.pop();\n                this.index.pop();\n                continue;\n            }\n            let next = top.children[index];\n            let start = this.start[last] + top.positions[index];\n            if (start > pos) {\n                this.nextStart = start;\n                return null;\n            }\n            if (next instanceof Tree) {\n                if (start == pos) {\n                    if (start < this.safeFrom)\n                        return null;\n                    let end = start + next.length;\n                    if (end <= this.safeTo) {\n                        let lookAhead = next.prop(NodeProp.lookAhead);\n                        if (!lookAhead || end + lookAhead < this.fragment.to)\n                            return next;\n                    }\n                }\n                this.index[last]++;\n                if (start + next.length >= Math.max(this.safeFrom, pos)) { // Enter this node\n                    this.trees.push(next);\n                    this.start.push(start);\n                    this.index.push(0);\n                }\n            }\n            else {\n                this.index[last]++;\n                this.nextStart = start + next.length;\n            }\n        }\n    }\n}\nclass TokenCache {\n    constructor(parser, stream) {\n        this.stream = stream;\n        this.tokens = [];\n        this.mainToken = null;\n        this.actions = [];\n        this.tokens = parser.tokenizers.map(_ => new CachedToken);\n    }\n    getActions(stack) {\n        let actionIndex = 0;\n        let main = null;\n        let { parser } = stack.p, { tokenizers } = parser;\n        let mask = parser.stateSlot(stack.state, 3 /* ParseState.TokenizerMask */);\n        let context = stack.curContext ? stack.curContext.hash : 0;\n        let lookAhead = 0;\n        for (let i = 0; i < tokenizers.length; i++) {\n            if (((1 << i) & mask) == 0)\n                continue;\n            let tokenizer = tokenizers[i], token = this.tokens[i];\n            if (main && !tokenizer.fallback)\n                continue;\n            if (tokenizer.contextual || token.start != stack.pos || token.mask != mask || token.context != context) {\n                this.updateCachedToken(token, tokenizer, stack);\n                token.mask = mask;\n                token.context = context;\n            }\n            if (token.lookAhead > token.end + 25 /* Lookahead.Margin */)\n                lookAhead = Math.max(token.lookAhead, lookAhead);\n            if (token.value != 0 /* Term.Err */) {\n                let startIndex = actionIndex;\n                if (token.extended > -1)\n                    actionIndex = this.addActions(stack, token.extended, token.end, actionIndex);\n                actionIndex = this.addActions(stack, token.value, token.end, actionIndex);\n                if (!tokenizer.extend) {\n                    main = token;\n                    if (actionIndex > startIndex)\n                        break;\n                }\n            }\n        }\n        while (this.actions.length > actionIndex)\n            this.actions.pop();\n        if (lookAhead)\n            stack.setLookAhead(lookAhead);\n        if (!main && stack.pos == this.stream.end) {\n            main = new CachedToken;\n            main.value = stack.p.parser.eofTerm;\n            main.start = main.end = stack.pos;\n            actionIndex = this.addActions(stack, main.value, main.end, actionIndex);\n        }\n        this.mainToken = main;\n        return this.actions;\n    }\n    getMainToken(stack) {\n        if (this.mainToken)\n            return this.mainToken;\n        let main = new CachedToken, { pos, p } = stack;\n        main.start = pos;\n        main.end = Math.min(pos + 1, p.stream.end);\n        main.value = pos == p.stream.end ? p.parser.eofTerm : 0 /* Term.Err */;\n        return main;\n    }\n    updateCachedToken(token, tokenizer, stack) {\n        let start = this.stream.clipPos(stack.pos);\n        tokenizer.token(this.stream.reset(start, token), stack);\n        if (token.value > -1) {\n            let { parser } = stack.p;\n            for (let i = 0; i < parser.specialized.length; i++)\n                if (parser.specialized[i] == token.value) {\n                    let result = parser.specializers[i](this.stream.read(token.start, token.end), stack);\n                    if (result >= 0 && stack.p.parser.dialect.allows(result >> 1)) {\n                        if ((result & 1) == 0 /* Specialize.Specialize */)\n                            token.value = result >> 1;\n                        else\n                            token.extended = result >> 1;\n                        break;\n                    }\n                }\n        }\n        else {\n            token.value = 0 /* Term.Err */;\n            token.end = this.stream.clipPos(start + 1);\n        }\n    }\n    putAction(action, token, end, index) {\n        // Don't add duplicate actions\n        for (let i = 0; i < index; i += 3)\n            if (this.actions[i] == action)\n                return index;\n        this.actions[index++] = action;\n        this.actions[index++] = token;\n        this.actions[index++] = end;\n        return index;\n    }\n    addActions(stack, token, end, index) {\n        let { state } = stack, { parser } = stack.p, { data } = parser;\n        for (let set = 0; set < 2; set++) {\n            for (let i = parser.stateSlot(state, set ? 2 /* ParseState.Skip */ : 1 /* ParseState.Actions */);; i += 3) {\n                if (data[i] == 65535 /* Seq.End */) {\n                    if (data[i + 1] == 1 /* Seq.Next */) {\n                        i = pair(data, i + 2);\n                    }\n                    else {\n                        if (index == 0 && data[i + 1] == 2 /* Seq.Other */)\n                            index = this.putAction(pair(data, i + 2), token, end, index);\n                        break;\n                    }\n                }\n                if (data[i] == token)\n                    index = this.putAction(pair(data, i + 1), token, end, index);\n            }\n        }\n        return index;\n    }\n}\nclass Parse {\n    constructor(parser, input, fragments, ranges) {\n        this.parser = parser;\n        this.input = input;\n        this.ranges = ranges;\n        this.recovering = 0;\n        this.nextStackID = 0x2654; // , , , , , , , , , , , , , \n        this.minStackPos = 0;\n        this.reused = [];\n        this.stoppedAt = null;\n        this.lastBigReductionStart = -1;\n        this.lastBigReductionSize = 0;\n        this.bigReductionCount = 0;\n        this.stream = new InputStream(input, ranges);\n        this.tokens = new TokenCache(parser, this.stream);\n        this.topTerm = parser.top[1];\n        let { from } = ranges[0];\n        this.stacks = [Stack.start(this, parser.top[0], from)];\n        this.fragments = fragments.length && this.stream.end - from > parser.bufferLength * 4\n            ? new FragmentCursor(fragments, parser.nodeSet) : null;\n    }\n    get parsedPos() {\n        return this.minStackPos;\n    }\n    // Move the parser forward. This will process all parse stacks at\n    // `this.pos` and try to advance them to a further position. If no\n    // stack for such a position is found, it'll start error-recovery.\n    //\n    // When the parse is finished, this will return a syntax tree. When\n    // not, it returns `null`.\n    advance() {\n        let stacks = this.stacks, pos = this.minStackPos;\n        // This will hold stacks beyond `pos`.\n        let newStacks = this.stacks = [];\n        let stopped, stoppedTokens;\n        // If a large amount of reductions happened with the same start\n        // position, force the stack out of that production in order to\n        // avoid creating a tree too deep to recurse through.\n        // (This is an ugly kludge, because unfortunately there is no\n        // straightforward, cheap way to check for this happening, due to\n        // the history of reductions only being available in an\n        // expensive-to-access format in the stack buffers.)\n        if (this.bigReductionCount > 300 /* Rec.MaxLeftAssociativeReductionCount */ && stacks.length == 1) {\n            let [s] = stacks;\n            while (s.forceReduce() && s.stack.length && s.stack[s.stack.length - 2] >= this.lastBigReductionStart) { }\n            this.bigReductionCount = this.lastBigReductionSize = 0;\n        }\n        // Keep advancing any stacks at `pos` until they either move\n        // forward or can't be advanced. Gather stacks that can't be\n        // advanced further in `stopped`.\n        for (let i = 0; i < stacks.length; i++) {\n            let stack = stacks[i];\n            for (;;) {\n                this.tokens.mainToken = null;\n                if (stack.pos > pos) {\n                    newStacks.push(stack);\n                }\n                else if (this.advanceStack(stack, newStacks, stacks)) {\n                    continue;\n                }\n                else {\n                    if (!stopped) {\n                        stopped = [];\n                        stoppedTokens = [];\n                    }\n                    stopped.push(stack);\n                    let tok = this.tokens.getMainToken(stack);\n                    stoppedTokens.push(tok.value, tok.end);\n                }\n                break;\n            }\n        }\n        if (!newStacks.length) {\n            let finished = stopped && findFinished(stopped);\n            if (finished) {\n                if (verbose)\n                    console.log(\"Finish with \" + this.stackID(finished));\n                return this.stackToTree(finished);\n            }\n            if (this.parser.strict) {\n                if (verbose && stopped)\n                    console.log(\"Stuck with token \" + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : \"none\"));\n                throw new SyntaxError(\"No parse at \" + pos);\n            }\n            if (!this.recovering)\n                this.recovering = 5 /* Rec.Distance */;\n        }\n        if (this.recovering && stopped) {\n            let finished = this.stoppedAt != null && stopped[0].pos > this.stoppedAt ? stopped[0]\n                : this.runRecovery(stopped, stoppedTokens, newStacks);\n            if (finished) {\n                if (verbose)\n                    console.log(\"Force-finish \" + this.stackID(finished));\n                return this.stackToTree(finished.forceAll());\n            }\n        }\n        if (this.recovering) {\n            let maxRemaining = this.recovering == 1 ? 1 : this.recovering * 3 /* Rec.MaxRemainingPerStep */;\n            if (newStacks.length > maxRemaining) {\n                newStacks.sort((a, b) => b.score - a.score);\n                while (newStacks.length > maxRemaining)\n                    newStacks.pop();\n            }\n            if (newStacks.some(s => s.reducePos > pos))\n                this.recovering--;\n        }\n        else if (newStacks.length > 1) {\n            // Prune stacks that are in the same state, or that have been\n            // running without splitting for a while, to avoid getting stuck\n            // with multiple successful stacks running endlessly on.\n            outer: for (let i = 0; i < newStacks.length - 1; i++) {\n                let stack = newStacks[i];\n                for (let j = i + 1; j < newStacks.length; j++) {\n                    let other = newStacks[j];\n                    if (stack.sameState(other) ||\n                        stack.buffer.length > 500 /* Rec.MinBufferLengthPrune */ && other.buffer.length > 500 /* Rec.MinBufferLengthPrune */) {\n                        if (((stack.score - other.score) || (stack.buffer.length - other.buffer.length)) > 0) {\n                            newStacks.splice(j--, 1);\n                        }\n                        else {\n                            newStacks.splice(i--, 1);\n                            continue outer;\n                        }\n                    }\n                }\n            }\n            if (newStacks.length > 12 /* Rec.MaxStackCount */)\n                newStacks.splice(12 /* Rec.MaxStackCount */, newStacks.length - 12 /* Rec.MaxStackCount */);\n        }\n        this.minStackPos = newStacks[0].pos;\n        for (let i = 1; i < newStacks.length; i++)\n            if (newStacks[i].pos < this.minStackPos)\n                this.minStackPos = newStacks[i].pos;\n        return null;\n    }\n    stopAt(pos) {\n        if (this.stoppedAt != null && this.stoppedAt < pos)\n            throw new RangeError(\"Can't move stoppedAt forward\");\n        this.stoppedAt = pos;\n    }\n    // Returns an updated version of the given stack, or null if the\n    // stack can't advance normally. When `split` and `stacks` are\n    // given, stacks split off by ambiguous operations will be pushed to\n    // `split`, or added to `stacks` if they move `pos` forward.\n    advanceStack(stack, stacks, split) {\n        let start = stack.pos, { parser } = this;\n        let base = verbose ? this.stackID(stack) + \" -> \" : \"\";\n        if (this.stoppedAt != null && start > this.stoppedAt)\n            return stack.forceReduce() ? stack : null;\n        if (this.fragments) {\n            let strictCx = stack.curContext && stack.curContext.tracker.strict, cxHash = strictCx ? stack.curContext.hash : 0;\n            for (let cached = this.fragments.nodeAt(start); cached;) {\n                let match = this.parser.nodeSet.types[cached.type.id] == cached.type ? parser.getGoto(stack.state, cached.type.id) : -1;\n                if (match > -1 && cached.length && (!strictCx || (cached.prop(NodeProp.contextHash) || 0) == cxHash)) {\n                    stack.useNode(cached, match);\n                    if (verbose)\n                        console.log(base + this.stackID(stack) + ` (via reuse of ${parser.getName(cached.type.id)})`);\n                    return true;\n                }\n                if (!(cached instanceof Tree) || cached.children.length == 0 || cached.positions[0] > 0)\n                    break;\n                let inner = cached.children[0];\n                if (inner instanceof Tree && cached.positions[0] == 0)\n                    cached = inner;\n                else\n                    break;\n            }\n        }\n        let defaultReduce = parser.stateSlot(stack.state, 4 /* ParseState.DefaultReduce */);\n        if (defaultReduce > 0) {\n            stack.reduce(defaultReduce);\n            if (verbose)\n                console.log(base + this.stackID(stack) + ` (via always-reduce ${parser.getName(defaultReduce & 65535 /* Action.ValueMask */)})`);\n            return true;\n        }\n        if (stack.stack.length >= 8400 /* Rec.CutDepth */) {\n            while (stack.stack.length > 6000 /* Rec.CutTo */ && stack.forceReduce()) { }\n        }\n        let actions = this.tokens.getActions(stack);\n        for (let i = 0; i < actions.length;) {\n            let action = actions[i++], term = actions[i++], end = actions[i++];\n            let last = i == actions.length || !split;\n            let localStack = last ? stack : stack.split();\n            let main = this.tokens.mainToken;\n            localStack.apply(action, term, main ? main.start : localStack.pos, end);\n            if (verbose)\n                console.log(base + this.stackID(localStack) + ` (via ${(action & 65536 /* Action.ReduceFlag */) == 0 ? \"shift\"\n                    : `reduce of ${parser.getName(action & 65535 /* Action.ValueMask */)}`} for ${parser.getName(term)} @ ${start}${localStack == stack ? \"\" : \", split\"})`);\n            if (last)\n                return true;\n            else if (localStack.pos > start)\n                stacks.push(localStack);\n            else\n                split.push(localStack);\n        }\n        return false;\n    }\n    // Advance a given stack forward as far as it will go. Returns the\n    // (possibly updated) stack if it got stuck, or null if it moved\n    // forward and was given to `pushStackDedup`.\n    advanceFully(stack, newStacks) {\n        let pos = stack.pos;\n        for (;;) {\n            if (!this.advanceStack(stack, null, null))\n                return false;\n            if (stack.pos > pos) {\n                pushStackDedup(stack, newStacks);\n                return true;\n            }\n        }\n    }\n    runRecovery(stacks, tokens, newStacks) {\n        let finished = null, restarted = false;\n        for (let i = 0; i < stacks.length; i++) {\n            let stack = stacks[i], token = tokens[i << 1], tokenEnd = tokens[(i << 1) + 1];\n            let base = verbose ? this.stackID(stack) + \" -> \" : \"\";\n            if (stack.deadEnd) {\n                if (restarted)\n                    continue;\n                restarted = true;\n                stack.restart();\n                if (verbose)\n                    console.log(base + this.stackID(stack) + \" (restarted)\");\n                let done = this.advanceFully(stack, newStacks);\n                if (done)\n                    continue;\n            }\n            let force = stack.split(), forceBase = base;\n            for (let j = 0; force.forceReduce() && j < 10 /* Rec.ForceReduceLimit */; j++) {\n                if (verbose)\n                    console.log(forceBase + this.stackID(force) + \" (via force-reduce)\");\n                let done = this.advanceFully(force, newStacks);\n                if (done)\n                    break;\n                if (verbose)\n                    forceBase = this.stackID(force) + \" -> \";\n            }\n            for (let insert of stack.recoverByInsert(token)) {\n                if (verbose)\n                    console.log(base + this.stackID(insert) + \" (via recover-insert)\");\n                this.advanceFully(insert, newStacks);\n            }\n            if (this.stream.end > stack.pos) {\n                if (tokenEnd == stack.pos) {\n                    tokenEnd++;\n                    token = 0 /* Term.Err */;\n                }\n                stack.recoverByDelete(token, tokenEnd);\n                if (verbose)\n                    console.log(base + this.stackID(stack) + ` (via recover-delete ${this.parser.getName(token)})`);\n                pushStackDedup(stack, newStacks);\n            }\n            else if (!finished || finished.score < stack.score) {\n                finished = stack;\n            }\n        }\n        return finished;\n    }\n    // Convert the stack's buffer to a syntax tree.\n    stackToTree(stack) {\n        stack.close();\n        return Tree.build({ buffer: StackBufferCursor.create(stack),\n            nodeSet: this.parser.nodeSet,\n            topID: this.topTerm,\n            maxBufferLength: this.parser.bufferLength,\n            reused: this.reused,\n            start: this.ranges[0].from,\n            length: stack.pos - this.ranges[0].from,\n            minRepeatType: this.parser.minRepeatTerm });\n    }\n    stackID(stack) {\n        let id = (stackIDs || (stackIDs = new WeakMap)).get(stack);\n        if (!id)\n            stackIDs.set(stack, id = String.fromCodePoint(this.nextStackID++));\n        return id + stack;\n    }\n}\nfunction pushStackDedup(stack, newStacks) {\n    for (let i = 0; i < newStacks.length; i++) {\n        let other = newStacks[i];\n        if (other.pos == stack.pos && other.sameState(stack)) {\n            if (newStacks[i].score < stack.score)\n                newStacks[i] = stack;\n            return;\n        }\n    }\n    newStacks.push(stack);\n}\nclass Dialect {\n    constructor(source, flags, disabled) {\n        this.source = source;\n        this.flags = flags;\n        this.disabled = disabled;\n    }\n    allows(term) { return !this.disabled || this.disabled[term] == 0; }\n}\nconst id = x => x;\n/**\nContext trackers are used to track stateful context (such as\nindentation in the Python grammar, or parent elements in the XML\ngrammar) needed by external tokenizers. You declare them in a\ngrammar file as `@context exportName from \"module\"`.\n\nContext values should be immutable, and can be updated (replaced)\non shift or reduce actions.\n\nThe export used in a `@context` declaration should be of this\ntype.\n*/\nclass ContextTracker {\n    /**\n    Define a context tracker.\n    */\n    constructor(spec) {\n        this.start = spec.start;\n        this.shift = spec.shift || id;\n        this.reduce = spec.reduce || id;\n        this.reuse = spec.reuse || id;\n        this.hash = spec.hash || (() => 0);\n        this.strict = spec.strict !== false;\n    }\n}\n/**\nHolds the parse tables for a given grammar, as generated by\n`lezer-generator`, and provides [methods](#common.Parser) to parse\ncontent with.\n*/\nclass LRParser extends Parser {\n    /**\n    @internal\n    */\n    constructor(spec) {\n        super();\n        /**\n        @internal\n        */\n        this.wrappers = [];\n        if (spec.version != 14 /* File.Version */)\n            throw new RangeError(`Parser version (${spec.version}) doesn't match runtime version (${14 /* File.Version */})`);\n        let nodeNames = spec.nodeNames.split(\" \");\n        this.minRepeatTerm = nodeNames.length;\n        for (let i = 0; i < spec.repeatNodeCount; i++)\n            nodeNames.push(\"\");\n        let topTerms = Object.keys(spec.topRules).map(r => spec.topRules[r][1]);\n        let nodeProps = [];\n        for (let i = 0; i < nodeNames.length; i++)\n            nodeProps.push([]);\n        function setProp(nodeID, prop, value) {\n            nodeProps[nodeID].push([prop, prop.deserialize(String(value))]);\n        }\n        if (spec.nodeProps)\n            for (let propSpec of spec.nodeProps) {\n                let prop = propSpec[0];\n                if (typeof prop == \"string\")\n                    prop = NodeProp[prop];\n                for (let i = 1; i < propSpec.length;) {\n                    let next = propSpec[i++];\n                    if (next >= 0) {\n                        setProp(next, prop, propSpec[i++]);\n                    }\n                    else {\n                        let value = propSpec[i + -next];\n                        for (let j = -next; j > 0; j--)\n                            setProp(propSpec[i++], prop, value);\n                        i++;\n                    }\n                }\n            }\n        this.nodeSet = new NodeSet(nodeNames.map((name, i) => NodeType.define({\n            name: i >= this.minRepeatTerm ? undefined : name,\n            id: i,\n            props: nodeProps[i],\n            top: topTerms.indexOf(i) > -1,\n            error: i == 0,\n            skipped: spec.skippedNodes && spec.skippedNodes.indexOf(i) > -1\n        })));\n        if (spec.propSources)\n            this.nodeSet = this.nodeSet.extend(...spec.propSources);\n        this.strict = false;\n        this.bufferLength = DefaultBufferLength;\n        let tokenArray = decodeArray(spec.tokenData);\n        this.context = spec.context;\n        this.specializerSpecs = spec.specialized || [];\n        this.specialized = new Uint16Array(this.specializerSpecs.length);\n        for (let i = 0; i < this.specializerSpecs.length; i++)\n            this.specialized[i] = this.specializerSpecs[i].term;\n        this.specializers = this.specializerSpecs.map(getSpecializer);\n        this.states = decodeArray(spec.states, Uint32Array);\n        this.data = decodeArray(spec.stateData);\n        this.goto = decodeArray(spec.goto);\n        this.maxTerm = spec.maxTerm;\n        this.tokenizers = spec.tokenizers.map(value => typeof value == \"number\" ? new TokenGroup(tokenArray, value) : value);\n        this.topRules = spec.topRules;\n        this.dialects = spec.dialects || {};\n        this.dynamicPrecedences = spec.dynamicPrecedences || null;\n        this.tokenPrecTable = spec.tokenPrec;\n        this.termNames = spec.termNames || null;\n        this.maxNode = this.nodeSet.types.length - 1;\n        this.dialect = this.parseDialect();\n        this.top = this.topRules[Object.keys(this.topRules)[0]];\n    }\n    createParse(input, fragments, ranges) {\n        let parse = new Parse(this, input, fragments, ranges);\n        for (let w of this.wrappers)\n            parse = w(parse, input, fragments, ranges);\n        return parse;\n    }\n    /**\n    Get a goto table entry @internal\n    */\n    getGoto(state, term, loose = false) {\n        let table = this.goto;\n        if (term >= table[0])\n            return -1;\n        for (let pos = table[term + 1];;) {\n            let groupTag = table[pos++], last = groupTag & 1;\n            let target = table[pos++];\n            if (last && loose)\n                return target;\n            for (let end = pos + (groupTag >> 1); pos < end; pos++)\n                if (table[pos] == state)\n                    return target;\n            if (last)\n                return -1;\n        }\n    }\n    /**\n    Check if this state has an action for a given terminal @internal\n    */\n    hasAction(state, terminal) {\n        let data = this.data;\n        for (let set = 0; set < 2; set++) {\n            for (let i = this.stateSlot(state, set ? 2 /* ParseState.Skip */ : 1 /* ParseState.Actions */), next;; i += 3) {\n                if ((next = data[i]) == 65535 /* Seq.End */) {\n                    if (data[i + 1] == 1 /* Seq.Next */)\n                        next = data[i = pair(data, i + 2)];\n                    else if (data[i + 1] == 2 /* Seq.Other */)\n                        return pair(data, i + 2);\n                    else\n                        break;\n                }\n                if (next == terminal || next == 0 /* Term.Err */)\n                    return pair(data, i + 1);\n            }\n        }\n        return 0;\n    }\n    /**\n    @internal\n    */\n    stateSlot(state, slot) {\n        return this.states[(state * 6 /* ParseState.Size */) + slot];\n    }\n    /**\n    @internal\n    */\n    stateFlag(state, flag) {\n        return (this.stateSlot(state, 0 /* ParseState.Flags */) & flag) > 0;\n    }\n    /**\n    @internal\n    */\n    validAction(state, action) {\n        return !!this.allActions(state, a => a == action ? true : null);\n    }\n    /**\n    @internal\n    */\n    allActions(state, action) {\n        let deflt = this.stateSlot(state, 4 /* ParseState.DefaultReduce */);\n        let result = deflt ? action(deflt) : undefined;\n        for (let i = this.stateSlot(state, 1 /* ParseState.Actions */); result == null; i += 3) {\n            if (this.data[i] == 65535 /* Seq.End */) {\n                if (this.data[i + 1] == 1 /* Seq.Next */)\n                    i = pair(this.data, i + 2);\n                else\n                    break;\n            }\n            result = action(pair(this.data, i + 1));\n        }\n        return result;\n    }\n    /**\n    Get the states that can follow this one through shift actions or\n    goto jumps. @internal\n    */\n    nextStates(state) {\n        let result = [];\n        for (let i = this.stateSlot(state, 1 /* ParseState.Actions */);; i += 3) {\n            if (this.data[i] == 65535 /* Seq.End */) {\n                if (this.data[i + 1] == 1 /* Seq.Next */)\n                    i = pair(this.data, i + 2);\n                else\n                    break;\n            }\n            if ((this.data[i + 2] & (65536 /* Action.ReduceFlag */ >> 16)) == 0) {\n                let value = this.data[i + 1];\n                if (!result.some((v, i) => (i & 1) && v == value))\n                    result.push(this.data[i], value);\n            }\n        }\n        return result;\n    }\n    /**\n    Configure the parser. Returns a new parser instance that has the\n    given settings modified. Settings not provided in `config` are\n    kept from the original parser.\n    */\n    configure(config) {\n        // Hideous reflection-based kludge to make it easy to create a\n        // slightly modified copy of a parser.\n        let copy = Object.assign(Object.create(LRParser.prototype), this);\n        if (config.props)\n            copy.nodeSet = this.nodeSet.extend(...config.props);\n        if (config.top) {\n            let info = this.topRules[config.top];\n            if (!info)\n                throw new RangeError(`Invalid top rule name ${config.top}`);\n            copy.top = info;\n        }\n        if (config.tokenizers)\n            copy.tokenizers = this.tokenizers.map(t => {\n                let found = config.tokenizers.find(r => r.from == t);\n                return found ? found.to : t;\n            });\n        if (config.specializers) {\n            copy.specializers = this.specializers.slice();\n            copy.specializerSpecs = this.specializerSpecs.map((s, i) => {\n                let found = config.specializers.find(r => r.from == s.external);\n                if (!found)\n                    return s;\n                let spec = Object.assign(Object.assign({}, s), { external: found.to });\n                copy.specializers[i] = getSpecializer(spec);\n                return spec;\n            });\n        }\n        if (config.contextTracker)\n            copy.context = config.contextTracker;\n        if (config.dialect)\n            copy.dialect = this.parseDialect(config.dialect);\n        if (config.strict != null)\n            copy.strict = config.strict;\n        if (config.wrap)\n            copy.wrappers = copy.wrappers.concat(config.wrap);\n        if (config.bufferLength != null)\n            copy.bufferLength = config.bufferLength;\n        return copy;\n    }\n    /**\n    Tells you whether any [parse wrappers](#lr.ParserConfig.wrap)\n    are registered for this parser.\n    */\n    hasWrappers() {\n        return this.wrappers.length > 0;\n    }\n    /**\n    Returns the name associated with a given term. This will only\n    work for all terms when the parser was generated with the\n    `--names` option. By default, only the names of tagged terms are\n    stored.\n    */\n    getName(term) {\n        return this.termNames ? this.termNames[term] : String(term <= this.maxNode && this.nodeSet.types[term].name || term);\n    }\n    /**\n    The eof term id is always allocated directly after the node\n    types. @internal\n    */\n    get eofTerm() { return this.maxNode + 1; }\n    /**\n    The type of top node produced by the parser.\n    */\n    get topNode() { return this.nodeSet.types[this.top[1]]; }\n    /**\n    @internal\n    */\n    dynamicPrecedence(term) {\n        let prec = this.dynamicPrecedences;\n        return prec == null ? 0 : prec[term] || 0;\n    }\n    /**\n    @internal\n    */\n    parseDialect(dialect) {\n        let values = Object.keys(this.dialects), flags = values.map(() => false);\n        if (dialect)\n            for (let part of dialect.split(\" \")) {\n                let id = values.indexOf(part);\n                if (id >= 0)\n                    flags[id] = true;\n            }\n        let disabled = null;\n        for (let i = 0; i < values.length; i++)\n            if (!flags[i]) {\n                for (let j = this.dialects[values[i]], id; (id = this.data[j++]) != 65535 /* Seq.End */;)\n                    (disabled || (disabled = new Uint8Array(this.maxTerm + 1)))[id] = 1;\n            }\n        return new Dialect(dialect, flags, disabled);\n    }\n    /**\n    Used by the output of the parser generator. Not available to\n    user code. @hide\n    */\n    static deserialize(spec) {\n        return new LRParser(spec);\n    }\n}\nfunction pair(data, off) { return data[off] | (data[off + 1] << 16); }\nfunction findFinished(stacks) {\n    let best = null;\n    for (let stack of stacks) {\n        let stopped = stack.p.stoppedAt;\n        if ((stack.pos == stack.p.stream.end || stopped != null && stack.pos > stopped) &&\n            stack.p.parser.stateFlag(stack.state, 2 /* StateFlag.Accepting */) &&\n            (!best || best.score < stack.score))\n            best = stack;\n    }\n    return best;\n}\nfunction getSpecializer(spec) {\n    if (spec.external) {\n        let mask = spec.extend ? 1 /* Specialize.Extend */ : 0 /* Specialize.Specialize */;\n        return (value, stack) => (spec.external(value, stack) << 1) | mask;\n    }\n    return spec.get;\n}\n\nexport { ContextTracker, ExternalTokenizer, InputStream, LRParser, LocalTokenGroup, Stack };\n","import { LRParser } from '@lezer/lr';\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst Json$1 = 1,\n  Logfmt$1 = 2,\n  Unpack$1 = 3,\n  Pattern$1 = 4,\n  Regexp$1 = 5,\n  Unwrap$1 = 6,\n  LabelFormat$1 = 7,\n  LineFormat$1 = 8,\n  LabelReplace$1 = 9,\n  Vector$1 = 10,\n  Offset$1 = 11,\n  Bool$1 = 12,\n  On$1 = 13,\n  Ignoring$1 = 14,\n  GroupLeft$1 = 15,\n  GroupRight$1 = 16,\n  Decolorize$1 = 17,\n  Drop$1 = 18,\n  Keep$1 = 19,\n  By$1 = 20,\n  Without$1 = 21,\n  And$1 = 22,\n  Or$1 = 23,\n  Unless$1 = 24,\n  Sum$1 = 25,\n  Avg$1 = 26,\n  Count$1 = 27,\n  Max$1 = 28,\n  Min$1 = 29,\n  Stddev$1 = 30,\n  Stdvar$1 = 31,\n  Bottomk$1 = 32,\n  Topk$1 = 33,\n  Sort$1 = 34,\n  Sort_Desc$1 = 35;\n\nconst keywordTokens = {\n  json: Json$1,\n  logfmt: Logfmt$1,\n  unpack: Unpack$1,\n  pattern: Pattern$1,\n  regexp: Regexp$1,\n  label_format: LabelFormat$1,\n  line_format: LineFormat$1,\n  label_replace: LabelReplace$1,\n  vector: Vector$1,\n  offset: Offset$1,\n  bool: Bool$1,\n  on: On$1,\n  ignoring: Ignoring$1,\n  group_left: GroupLeft$1,\n  group_right: GroupRight$1,\n  unwrap: Unwrap$1,\n  decolorize: Decolorize$1,\n  drop: Drop$1,\n  keep: Keep$1,\n};\n\nconst specializeIdentifier = (value) => {\n  return keywordTokens[value.toLowerCase()] || -1;\n};\n\nconst contextualKeywordTokens = {\n  by: By$1,\n  without: Without$1,\n  and: And$1,\n  or: Or$1,\n  unless: Unless$1,\n  sum: Sum$1,\n  avg: Avg$1,\n  count: Count$1,\n  max: Max$1,\n  min: Min$1,\n  stddev: Stddev$1,\n  stdvar: Stdvar$1,\n  bottomk: Bottomk$1,\n  topk: Topk$1,\n  sort: Sort$1,\n  sort_desc: Sort_Desc$1,\n};\n\nconst extendIdentifier = (value) => {\n  return contextualKeywordTokens[value.toLowerCase()] || -1;\n};\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst spec_Identifier = {__proto__:null,ip:295, count_over_time:301, rate:303, rate_counter:305, bytes_over_time:307, bytes_rate:309, avg_over_time:311, sum_over_time:313, min_over_time:315, max_over_time:317, stddev_over_time:319, stdvar_over_time:321, quantile_over_time:323, first_over_time:325, last_over_time:327, absent_over_time:329, bytes:335, duration:337, duration_seconds:339};\nconst parser = LRParser.deserialize({\n  version: 14,\n  states: \"EtOYQPOOO#cQPO'#DUOOQO'#ER'#ERO#hQPO'#ERO$}QPO'#DTOYQPO'#DTOOQO'#Ed'#EdO%[QPO'#EcOOQO'#FP'#FPO%aQPO'#FOQ%lQPOOO&mQPO'#F]O&rQPO'#F^OOQO'#Eb'#EbOOQO'#DS'#DSOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsO&wQPO'#DWOOQO'#DV'#DVO'VQPO,59pOOQO,5:m,5:mOOQO'#Dc'#DcO'_QPO'#DbO'gQPO'#DaO)lQPO'#D`O*{QPO'#D`OOQO'#D_'#D_O+sQPO,59oO-}QPO,59oO.UQPO,5:|O.]QPO,5:}O.hQPO'#E|O0sQPO,5;jO0zQPO,5;jO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lOYQPO,5;wO3cQPO,5;xO3hQPO,59rO#cQPO,59qOOQO1G/[1G/[OOQO'#Dh'#DhO3mQPO,59|O5^QPO,59|OOQO'#Di'#DiO5cQPO,59{OOQO,59{,59{O5kQPO'#DWO6YQPO'#DlO8PQPO'#DoO9sQPO'#DoOOQO'#Do'#DoOOQO'#Dv'#DvOOQO'#Dt'#DtO+kQPO'#DtO9xQPO,59zO;iQPO'#EVO;nQPO'#EWOOQO'#EZ'#EZO;sQPO'#E[O;xQPO'#E_OOQO,59z,59zOOQO,59y,59yOOQO1G/Z1G/ZOOQO1G0h1G0hO;}QPO'#EtO.`QPO'#EtO<XQPO1G0iO<^QPO1G0iO<cQPO,5;hO=oQPO1G1UO=vQPO1G1UO=}QPO1G1UO>UQPO'#FSO@dQPO'#FRO@nQPO'#FROYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO@xQPO1G1cOAPQPO1G1dOOQO1G/^1G/^OOQO1G/]1G/]O5cQPO1G/hOAUQPO1G/hOAZQPO'#DjOBzQPO'#DjOOQO1G/g1G/gOCbQPO,59rOCPQPO,5:cOOQO'#Dm'#DmOClQPO,5:WOEcQPO'#DrOOQO'#Dq'#DqOGVQPO,5:_OHvQPO,5:[OOQO,5:Z,5:ZOJgQPO,5:`O+kQPO,5:`O+kQPO,5:`OOQO,5:q,5:qOJuQPO'#EYOOQO'#EX'#EXOJzQPO,5:rOLkQPO'#E^OOQO'#E^'#E^OOQO'#E]'#E]ONbQPO,5:vO!!RQPO'#EaOOQO'#Ea'#EaOOQO'#E`'#E`O!#xQPO,5:yO!%iQPO'#D`O;}QPO,5;`O!%pQPO'#EuO!%uQPO,5;`O!%}QPO,5;`O!&[QPO,5;`O!&iQPO,5;`O!&nQPO7+&TO.`QPO7+&TOOQO'#E}'#E}O!(OQPO1G1SOOQO1G1S1G1SOYQPO7+&pO!(WQPO7+&pO!)hQPO7+&pO!)oQPO7+&pO!)vQQO'#FTOOQO,5;n,5;nO!,UQPO,5;mO!,]QPO,5;mO!-nQPO7+&rO!-uQPO7+&rOOQO7+&r7+&rO!.SQPO7+&rO!.ZQPO7+&rO!/`QPO7+&rO!/pQPO7+&}OOQO7+'O7+'OOOQO7+%S7+%SO!/uQPO7+%SO5cQPO,5:UO!/zQPO,5:UO!0PQPO1G/{OOQO1G/}1G/}OOQO1G0U1G0UOOQO1G0W1G0WOOQO,5:X,5:XO!0UQPO1G/yO!1uQPO,5:^O!1zQPO,5:]OOQO1G/z1G/zO!2PQPO1G/zO!3pQPO,5:tO;nQPO,5:sO;sQPO,5:wO;xQPO,5:zO!3xQPO,5;cO!%uQPO1G0zO!4WQPO1G0zO!4`QPO,5;aO+kQPO,5;cO!4eQPO1G0zO!4oQPO'#EvO!4tQPO1G0zO!4eQPO1G0zO!4|QPO1G0zO!5ZQPO1G0zO!%xQPO1G0zOOQO1G0z1G0zOOQO<<Io<<IoO!5fQPO<<IoO!5kQPO,5;iOOQO7+&n7+&nO!5pQPO<<J[OOQO<<J[<<J[OYQPO<<J[OOQO'#FV'#FVO!5wQPO,5;oOOQO'#FU'#FUOOQO,5;o,5;oOOQO1G1X1G1XO!6PQPO1G1XO!8YQPO<<JiOOQO<<Hn<<HnOOQO1G/p1G/pO!8_QPO1G/pO!8dQPO7+%gOOQO1G/x1G/xOOQO1G/w1G/wOOQO1G0`1G0`OOQO1G0_1G0_OOQO1G0c1G0cOOQO1G0f1G0fOOQO'#Ex'#ExOOQO1G0}1G0}O!8iQPO1G0}OOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{OOQO7+&f7+&fOOQO1G0{1G0{O!8nQPO1G0}O!9SQPO7+&fOOQO,5;b,5;bO!9[QPO7+&fO!%xQPO7+&fO!9fQPO7+&fO!9qQPOAN?ZOOQO1G1T1G1TO!;RQPOAN?vO!<cQPOAN?vO!<jQQO1G1ZOOQO1G1Z1G1ZOOQO7+&s7+&sO!<rQPOAN@TOOQO7+%[7+%[O!<wQPO<<IRO!<|QPO7+&iO!=RQPO<<JQO!=ZQPO<<JQO!=cQPO'#EwO!=hQPO<<JQOOQOG24uG24uOOQOG25bG25bOOQO1G1[1G1[OOQO7+&u7+&uO!=pQPOG25oOOQOAN>mAN>mO!=uQPO<<JTOOQOAN?lAN?lO!=zQPOAN?lO!>SQPOLD+ZOOQOAN?oAN?oOOQO,5:r,5:rO!>XQPO!$'NuO!>^QPO!)9DaO!>cQPO!.K9{OOQO!4//g!4//gO;nQPO'#EWO!>hQPO'#D`O!?`QPO,59oO!@fQPO'#DTOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO!AqQPO7+&rO!AxQPO7+&rO!BVQPO7+&rO!C_QPO7+&rO!CfQPO7+&rO!B^QPO'#FQ\",\n  stateData: \"!Cs~O$TOStOS~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!vQO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O{nO~O!vqO~O!OrO!QrO!WrO!XrO!YrO!ZrOfwXgwXhwX!lwX!nwX!owX!pwX!qwX!wwX!xwX#{wX#|wX#}wX$OwX~O!_vO$RwX$ZwX~P#mO$Y{O~Od|Oe|O$Y}O~Of!QOg!POh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{!SO#|!SO#}!SO$O!TO~O$Y!VO~O$Y!WO~O|!XO!O!XO!P!XO!Q!XO~O$V!YO$W!ZO~O}!]O$X!_O~Og!`Of!TXh!TX!O!TX!Q!TX!W!TX!X!TX!Y!TX!Z!TX!_!TX!l!TX!n!TX!o!TX!p!TX!q!TX!w!TX!x!TX#{!TX#|!TX#}!TX$O!TX$R!TX$Z!TX$k!TX$V!TX~O!OrO!QrO!WrO!XrO!YrO!ZrO~Of!SXg!SXh!SX!_!SX!l!SX!n!SX!o!SX!p!SX!q!SX!w!SX!x!SX#{!SX#|!SX#}!SX$O!SX$R!SX$Z!SX$k!SX$V!SX~P)WOP!dOQ!cOR!fOS!eOT!eOV!lOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_vOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Rwa$Zwa~P)WOfvXgvXhvX!OvX!lvX!nvX!ovX!pvX!qvX!wvX!xvX#{vX#|vX#}vX$OvX~O$Z!rO~P,|O$Z!sO~P,|O!v!wO$UPO$Y!uO~O$Y!xO~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O!v!yO~P.mO$Y!{O~O[#OO]!|O^!|OX#uPY#uPi#uPj#uPk#uPl#uPm#uPn#uPo#uPp#uPq#uPr#uPs#uP!v#uP!w#uP!x#uP$U#uP$Y#uP$[#uP$]#uP$^#uP$_#uP$`#uP$a#uP$b#uP$c#uP$d#uP$e#uP$f#uP$g#uP$h#uP$i#uP$j#uP~O!v#WO~O}#XO~Og#ZOf!Uah!Ua!O!Ua!Q!Ua!W!Ua!X!Ua!Y!Ua!Z!Ua!_!Ua!l!Ua!n!Ua!o!Ua!p!Ua!q!Ua!w!Ua!x!Ua#{!Ua#|!Ua#}!Ua$O!Ua$R!Ua$Z!Ua$k!Ua$V!Ua~O$Y#[O~O}#]O$X!_O~O|#`O!O#`O!P!XO!Q!XO!l#aO!n#aO!o#aO!p#aO!q#aO~O{#dO!b#bOf!`Xg!`Xh!`X!O!`X!Q!`X!W!`X!X!`X!Y!`X!Z!`X!_!`X!l!`X!n!`X!o!`X!p!`X!q!`X!w!`X!x!`X#{!`X#|!`X#}!`X$O!`X$R!`X$Z!`X$k!`X$V!`X~O{#dOf!cXg!cXh!cX!O!cX!Q!cX!W!cX!X!cX!Y!cX!Z!cX!_!cX!l!cX!n!cX!o!cX!p!cX!q!cX!w!cX!x!cX#{!cX#|!cX#}!cX$O!cX$R!cX$Z!cX$k!cX$V!cX~O}#hO~Of#jOg#kO$V#jOh!Sa!O!Sa!Q!Sa!W!Sa!X!Sa!Y!Sa!Z!Sa!_!Sa!l!Sa!n!Sa!o!Sa!p!Sa!q!Sa!w!Sa!x!Sa#{!Sa#|!Sa#}!Sa$O!Sa$R!Sa$Z!Sa$k!Sa~O}#lO~O{#mO~O{#pO~O{#tO~O!_#xO$k#zO~P)WO$Z$PO~O$V$QO~O{$RO$Z$TO~Of!uXg!uXh!uX!O!uX!l!uX!n!uX!o!uX!p!uX!q!uX!w!uX!x!uX#{!uX#|!uX#}!uX$O!uX$Z!uX~O$V$UO~P<kO$Z$VO~P,|O!v$WO~P.mO$Y$YO~OX#uXY#uXi#uXj#uXk#uXl#uXm#uXn#uXo#uXp#uXq#uXr#uXs#uX!v#uX!w#uX!x#uX$U#uX$Y#uX$[#uX$]#uX$^#uX$_#uX$`#uX$a#uX$b#uX$c#uX$d#uX$e#uX$f#uX$g#uX$h#uX$i#uX$j#uX~O_$[O`$[O~P>ZO]!|O^!|O~P>ZO$V$dO~P,|O$Z$eO~O}$gO~Og$hOf!^Xh!^X!O!^X!Q!^X!W!^X!X!^X!Y!^X!Z!^X!_!^X!l!^X!n!^X!o!^X!p!^X!q!^X!w!^X!x!^X#{!^X#|!^X#}!^X$O!^X$R!^X$Z!^X$k!^X$V!^X~O$Y$iO~O!m$kO!s$lO!vQO!wRO!xRO~O}#XO$X!_O~PCPO{#dO!b$nOf!`ag!`ah!`a!O!`a!Q!`a!W!`a!X!`a!Y!`a!Z!`a!_!`a!l!`a!n!`a!o!`a!p!`a!q!`a!w!`a!x!`a#{!`a#|!`a#}!`a$O!`a$R!`a$Z!`a$k!`a$V!`a~O|$pOf!fXg!fXh!fX!O!fX!Q!fX!W!fX!X!fX!Y!fX!Z!fX!_!fX!l!fX!n!fX!o!fX!p!fX!q!fX!w!fX!x!fX#{!fX#|!fX#}!fX$O!fX$R!fX$V!fX$Z!fX$k!fX~O$V$qOf!gag!gah!ga!O!ga!Q!ga!W!ga!X!ga!Y!ga!Z!ga!_!ga!l!ga!n!ga!o!ga!p!ga!q!ga!w!ga!x!ga#{!ga#|!ga#}!ga$O!ga$R!ga$Z!ga$k!ga~O$V$qOf!dag!dah!da!O!da!Q!da!W!da!X!da!Y!da!Z!da!_!da!l!da!n!da!o!da!p!da!q!da!w!da!x!da#{!da#|!da#}!da$O!da$R!da$Z!da$k!da~Of#jOg#kO$V#jO$Z$rO~O|$tO~O$V$uOf!zag!zah!za!O!za!Q!za!W!za!X!za!Y!za!Z!za!_!za!l!za!n!za!o!za!p!za!q!za!w!za!x!za#{!za#|!za#}!za$O!za$R!za$Z!za$k!za~O|!XO!O!XO!P!XO!Q!XOf#QXg#QXh#QX!W#QX!X#QX!Y#QX!Z#QX!_#QX!l#QX!n#QX!o#QX!p#QX!q#QX!w#QX!x#QX#{#QX#|#QX#}#QX$O#QX$R#QX$V#QX$Z#QX$k#QX~O$V$vOf#Oag#Oah#Oa!O#Oa!Q#Oa!W#Oa!X#Oa!Y#Oa!Z#Oa!_#Oa!l#Oa!n#Oa!o#Oa!p#Oa!q#Oa!w#Oa!x#Oa#{#Oa#|#Oa#}#Oa$O#Oa$R#Oa$Z#Oa$k#Oa~O|!XO!O!XO!P!XO!Q!XOf#TXg#TXh#TX!W#TX!X#TX!Y#TX!Z#TX!_#TX!l#TX!n#TX!o#TX!p#TX!q#TX!w#TX!x#TX#{#TX#|#TX#}#TX$O#TX$R#TX$V#TX$Z#TX$k#TX~O$V$wOf#Rag#Rah#Ra!O#Ra!Q#Ra!W#Ra!X#Ra!Y#Ra!Z#Ra!_#Ra!l#Ra!n#Ra!o#Ra!p#Ra!q#Ra!w#Ra!x#Ra#{#Ra#|#Ra#}#Ra$O#Ra$R#Ra$Z#Ra$k#Ra~OU$xO~P*{O!m${O~O!_$|O$k#zO~OZ%OO!_#xO$Z#ha~P)WO!_#xO$Z%TO$k#zO~P)WO$Z%UO~Od|Oe|Of#Vqg#Vqh#Vq!O#Vq!l#Vq!n#Vq!o#Vq!p#Vq!q#Vq!w#Vq!x#Vq#{#Vq#|#Vq#}#Vq$O#Vq$R#Vq$Z#Vq$V#Vq~O$V%XO$Z%YO~Od|Oe|Of#rqg#rqh#rq!O#rq!l#rq!n#rq!o#rq!p#rq!q#rq!w#rq!x#rq#{#rq#|#rq#}#rq$O#rq$R#rq$Z#rq$V#rq~O$V%]O~P<kO$Z%[O~P,|O#z%^O$Z%aO~OX#uaY#uai#uaj#uak#ual#uam#uan#uao#uap#uaq#uar#uas#ua!v#ua!w#ua!x#ua$U#ua$[#ua$]#ua$^#ua$_#ua$`#ua$a#ua$b#ua$c#ua$d#ua$e#ua$f#ua$g#ua$h#ua$i#ua$j#ua~O$Y$YO~P!*OO_%cO`%cO$Y#ua~P!*OOf!QOh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{#tq#|#tq#}#tq$O#tq$R#tq$Z#tq~Og#tq~P!,jOf#tqg#tqh#tq~P!,pOg!PO~P!,jO$R#tq$Z#tq~P%lOf#tqg#tqh#tq!O#tq!l#tq!n#tq!o#tq!p#tq!q#tq#{#tq#|#tq#}#tq$O#tq~O!w!RO!x!RO$R#tq$Z#tq~P!.eO}%dO~O$Z%eO~O}%gO~O$Y%hO~O$V$qOf!gig!gih!gi!O!gi!Q!gi!W!gi!X!gi!Y!gi!Z!gi!_!gi!l!gi!n!gi!o!gi!p!gi!q!gi!w!gi!x!gi#{!gi#|!gi#}!gi$O!gi$R!gi$Z!gi$k!gi~O}%iO~O{#dO~Of#jO$V#jOg!hih!hi!O!hi!Q!hi!W!hi!X!hi!Y!hi!Z!hi!_!hi!l!hi!n!hi!o!hi!p!hi!q!hi!w!hi!x!hi#{!hi#|!hi#}!hi$O!hi$R!hi$Z!hi$k!hi~O{%kO}%kO~O{%pO$m%rO$n%sO$o%tO~OZ%OO$Z#hi~O$l%vO~O!_#xO$Z#hi~P)WO!m%yO~O!_$|O$Z#hi~O!_#xO$Z%{O$k#zO~P)WO!_$|O$Z%{O$k#zO~O$Z%}O~O{&OO~O$Z&PO~P,|O$V&RO$Z&SO~O$Y$YOX#uiY#uii#uij#uik#uil#uim#uin#uio#uip#uiq#uir#uis#ui!v#ui!w#ui!x#ui$U#ui$[#ui$]#ui$^#ui$_#ui$`#ui$a#ui$b#ui$c#ui$d#ui$e#ui$f#ui$g#ui$h#ui$i#ui$j#ui~O$V&UO~O$Z&VO~O}&WO~O$Y&XO~Of#jOg#kO$V#jO!_#ki$k#ki$Z#ki~O!_$|O$Z#hq~O!_#xO$Z#hq~P)WOZ%OO!_&[O$Z#hq~Od|Oe|Of#V!Rg#V!Rh#V!R!O#V!R!l#V!R!n#V!R!o#V!R!p#V!R!q#V!R!w#V!R!x#V!R#{#V!R#|#V!R#}#V!R$O#V!R$R#V!R$Z#V!R$V#V!R~Od|Oe|Of#r!Rg#r!Rh#r!R!O#r!R!l#r!R!n#r!R!o#r!R!p#r!R!q#r!R!w#r!R!x#r!R#{#r!R#|#r!R#}#r!R$O#r!R$R#r!R$Z#r!R$V#r!R~O$Z&_O~P,|O#z%^O$Z&aO~O}&bO~O$Z&cO~O{&dO~O!_$|O$Z#hy~OZ%OO$Z#hy~OU$xO~O!_&[O$Z#hy~O$V&gO~O$Z&hO~O!_$|O$Z#h!R~O}&jO~O$V&kO~O}&lO~O$Z&mO~OP!dOQ!cOR!fOS!eOT!eOV&nOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_&oOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Vwa~P)WO!_&oO$VwX~P#mOf&yOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{#tq#|#tq#}#tq$O#tq$V#tq~Og#tq~P!@pOf#tqg#tqh#tq~P!@vOg&xO~P!@pOf&yOg&xOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{&{O#|&{O#}&{O$O&|O~O$V#tq~P!B^O!w&zO!x&zO$V#tq~P!.eO\",\n  goto: \"1l$RPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$S%R%j&Y&]PPPPPP&t'W'h'v(XPPPP(h(p(yP)S)XP)S)S)[)e)S)m*O*O*XPPPPPP*XP*O*bPPP)S)S*{+R)S)S+Y+])S+c+f+l,_,t-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-p-y.^.j/S/V/V/V/Y/i,_/l,_0R0w1Y1c1fPPPPP,_,_[YOT}!{$U%]Q$^#PQ$_#QS$`#R&tQ$a#SQ$b#TQ$c#UQ'O&rQ'P&sQ'Q&uQ'R&vQ'S&wR'T!Vt^O}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wRyTjSOT}!V!{#P#Q#R#S#T#U$U%]S!t{$QQ#}!u]&q&r&s&t&u&v&wRpPQoP^!hv!i#j#k#x$|&oQ#Y!YS#q!n$vT#u!o$wQxSQ#y!tQ$}#|Q%R#}Q%z%QR&p&q[wS!t#|#}%Q&q]!qx#y$}%R%z&piuSx!t#y#|#}$}%Q%R%z&p&qhtSx!t#y#|#}$}%Q%R%z&p&qR!auksSux!t#y#|#}$}%Q%R%z&p&qQ!^sV#^!`#Z$hW![s!`#Z$hR$j#`Q#_!`Q$f#ZR%f$hV!pv#x&oR#c!cQ#f!cQ#g!dR$o#cU#e!c!d#cR%j$qU!jv#x&oQ#i!iQ$r#jQ$s#kR%w$|_!hv!i#j#k#x$|&o_!gv!i#j#k#x$|&ov]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wT$m#`#aQ#o!lR&i&nS#n!l&nR%l$uR#s!nQ#r!nR%m$vR#w!oQ#v!oR%n$wj^O#P#Q#R#S#T#U&r&s&t&u&v&wQzTQ!z}Q#V!VQ$X!{Q%Z$UR&Q%]w]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwVOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwUOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ!v{Q$O!uR%W$QS#|!t#}W$z#y#{%R%SQ%u$yQ%|%TR&Z%{Q%Q#|Q%u$zQ&]%|R&e&ZQ#{!tS$y#y%RQ%P#|Q%S#}S%x$}%QS&Y%z%|R&f&]R%q$xR%o$xQ!OXQ%V$PQ%[$VQ&^%}R&_&PR$S!xwXOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ#P!PQ#Q!QQ#R!RQ#S!SQ#T!TQ#U!UQ&r&xQ&s&yQ&t&zQ&u&{Q&v&|R&w&}h!}!P!Q!R!S!T!U&x&y&z&{&|&}R$]#OQ$Z!|Q%b$[R&T%cR%_$YQ%`$YR&`&R\",\n  nodeNames: \" Json Logfmt Unpack Pattern Regexp Unwrap LabelFormat LineFormat LabelReplace Vector Offset Bool On Ignoring GroupLeft GroupRight Decolorize Drop Keep By Without And Or Unless Sum Avg Count Max Min Stddev Stdvar Bottomk Topk Sort Sort_Desc LineComment LogQL Expr LogExpr Selector Matchers Matcher Identifier Eq String Neq Re Nre PipelineExpr PipelineStage LineFilters LineFilter Filter PipeExact PipeMatch PipePattern Npa FilterOp Ip OrFilter Pipe LogfmtParser LogfmtParserFlags ParserFlag LabelParser JsonExpressionParser LabelExtractionExpressionList LabelExtractionExpression LogfmtExpressionParser LabelFilter IpLabelFilter UnitFilter DurationFilter Gtr Duration Gte Lss Lte Eql BytesFilter Bytes NumberFilter LiteralExpr Number Add Sub LineFormatExpr LabelFormatExpr LabelsFormat LabelFormatMatcher DecolorizeExpr DropLabelsExpr DropLabels DropLabel KeepLabelsExpr KeepLabels KeepLabel MetricExpr RangeAggregationExpr RangeOp CountOverTime Rate RateCounter BytesOverTime BytesRate AvgOverTime SumOverTime MinOverTime MaxOverTime StddevOverTime StdvarOverTime QuantileOverTime FirstOverTime LastOverTime AbsentOverTime LogRangeExpr Range OffsetExpr UnwrapExpr ConvOp BytesConv DurationConv DurationSecondsConv Grouping Labels VectorAggregationExpr VectorOp BinOpExpr BinOpModifier OnOrIgnoringModifier GroupingLabels GroupingLabelList GroupingLabel LabelName Mul Div Mod Pow LabelReplaceExpr VectorExpr\",\n  maxTerm: 169,\n  skippedNodes: [0,36],\n  repeatNodeCount: 0,\n  tokenData: \"<n~RvX^#ipq#iqr$^rs$yst%kuv%vxy%{yz&Qz{&V{|&[|}&a}!O&f!O!P2v!P!Q3v!Q!R3{!R![7^![!]9]!^!_9q!_!`:O!`!a:e!c!}:r!}#O;Y#P#Q;_#Q#R;d#R#S:r#S#T;i#T#o:r#o#p;u#p#q;z#q#r<i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY$T~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aR!_!`$j!`!a$o#r#s$t~$oO!O~~$tO!Z~~$yO!Q~~$|UOY$yZr$yrs%`s#O$y#O#P%e#P~$y~%eO}~~%hPO~$y~%pQt~OY%kZ~%k~%{O#}~~&QO$Y~~&VO$Z~~&[O#{~~&aO!w~~&fO$V~~&kQ!x~}!O&q!Q![(w~&tQ#_#`&z#g#h(X~&}P#X#Y'Q~'TP#X#Y'W~'ZP#d#e'^~'aP}!O'd~'gP#X#Y'j~'mP#a#b'p~'sP#d#e'v~'yP#h#i'|~(PP#m#n(S~(XO!b~~([P#h#i(_~(bP#f#g(e~(hP#]#^(k~(nP#V#W(q~(tP#h#i(S~(zZ!O!P)m!Q![(w#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~)pP!Q![)s~)vV!Q![)s#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~*bP!m~!Q![*e~*hV!O!P*}!Q![*e#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+QP!Q![+T~+WU!Q![+T#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+oQ!m~!Q![+u#g#h-Q~+xV!O!P,_!Q![+u#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,bP!Q![,e~,hU!Q![,e#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,}P#g#h-Q~-VP!m~!Q![-Y~-]T!O!P-l!Q![-Y#b#c.R#i#j.^${$|.^~-oP!Q![-r~-uS!Q![-r#b#c.R#i#j.^${$|.^~.UP#g#h.X~.^O!m~~.aP#g#h.d~.iP!m~!Q![.l~.oR!O!P.x!Q![.l#b#c.R~.{P!Q![/O~/RQ!Q![/O#b#c.R~/^P!m~!Q![/a~/dU!O!P/v!Q![/a#a#b,z#b#c.R#i#j.^${$|.^~/yP!Q![/|~0PT!Q![/|#a#b,z#b#c.R#i#j.^${$|.^~0eP!m~!Q![0h~0kW!O!P)m!Q![0h#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~1YP!m~!Q![1]~1`X!O!P)m!Q![1]#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~2QP!m~!Q![2T~2WY!O!P)m!Q![2T#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T${$|.^~2yP!Q![2|~3RR!v~!Q![2|!g!h3[#X#Y3[~3_R{|3h}!O3h!Q![3n~3kP!Q![3n~3sP!v~!Q![3n~3{O#|~~4Qe!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#l#m8q#m#n1{${$|.^~5hR!v~!Q![5q!g!h3[#X#Y3[~5v`!v~!Q![5q!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~6}O!s~~7QQ!d!e6x#]#^7W~7ZP!d!e6x~7cd!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~8tR!Q![8}!c!i8}#T#Z8}~9SR!v~!Q![8}!c!i8}#T#Z8}P9bT{P!Q![9]![!]9]!c!}9]#R#S9]#T#o9]~9vP!o~!_!`9y~:OO!p~~:TQ|~!_!`:Z#r#s:`~:`O!q~~:eO!P~~:jP!l~!_!`:m~:rO!n~R:yT{P#zQ!Q![:r![!]9]!c!}:r#R#S:r#T#o:r~;_O$k~~;dO$l~~;iO$O~~;lRO#S;i#S#T%`#T~;i~;zO$U~~<PR!_~!_!`<Y!`!a<_#r#s<d~<_O!W~~<dO!Y~~<iO!X~~<nO$W~\",\n  tokenizers: [0, 1],\n  topRules: {\"LogQL\":[0,37]},\n  specialized: [{term: 43, get: (value, stack) => (specializeIdentifier(value) << 1)},{term: 43, get: (value, stack) => (extendIdentifier(value) << 1) | 1},{term: 43, get: value => spec_Identifier[value] || -1}],\n  tokenPrec: 0\n});\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst Json = 1,\n  Logfmt = 2,\n  Unpack = 3,\n  Pattern = 4,\n  Regexp = 5,\n  Unwrap = 6,\n  LabelFormat = 7,\n  LineFormat = 8,\n  LabelReplace = 9,\n  Vector = 10,\n  Offset = 11,\n  Bool = 12,\n  On = 13,\n  Ignoring = 14,\n  GroupLeft = 15,\n  GroupRight = 16,\n  Decolorize = 17,\n  Drop = 18,\n  Keep = 19,\n  By = 20,\n  Without = 21,\n  And = 22,\n  Or = 23,\n  Unless = 24,\n  Sum = 25,\n  Avg = 26,\n  Count = 27,\n  Max = 28,\n  Min = 29,\n  Stddev = 30,\n  Stdvar = 31,\n  Bottomk = 32,\n  Topk = 33,\n  Sort = 34,\n  Sort_Desc = 35,\n  LineComment = 36,\n  LogQL = 37,\n  Expr = 38,\n  LogExpr = 39,\n  Selector = 40,\n  Matchers = 41,\n  Matcher = 42,\n  Identifier = 43,\n  Eq = 44,\n  String = 45,\n  Neq = 46,\n  Re = 47,\n  Nre = 48,\n  PipelineExpr = 49,\n  PipelineStage = 50,\n  LineFilters = 51,\n  LineFilter = 52,\n  Filter = 53,\n  PipeExact = 54,\n  PipeMatch = 55,\n  PipePattern = 56,\n  Npa = 57,\n  FilterOp = 58,\n  Ip = 59,\n  OrFilter = 60,\n  Pipe = 61,\n  LogfmtParser = 62,\n  LogfmtParserFlags = 63,\n  ParserFlag = 64,\n  LabelParser = 65,\n  JsonExpressionParser = 66,\n  LabelExtractionExpressionList = 67,\n  LabelExtractionExpression = 68,\n  LogfmtExpressionParser = 69,\n  LabelFilter = 70,\n  IpLabelFilter = 71,\n  UnitFilter = 72,\n  DurationFilter = 73,\n  Gtr = 74,\n  Duration = 75,\n  Gte = 76,\n  Lss = 77,\n  Lte = 78,\n  Eql = 79,\n  BytesFilter = 80,\n  Bytes = 81,\n  NumberFilter = 82,\n  LiteralExpr = 83,\n  Number = 84,\n  Add = 85,\n  Sub = 86,\n  LineFormatExpr = 87,\n  LabelFormatExpr = 88,\n  LabelsFormat = 89,\n  LabelFormatMatcher = 90,\n  DecolorizeExpr = 91,\n  DropLabelsExpr = 92,\n  DropLabels = 93,\n  DropLabel = 94,\n  KeepLabelsExpr = 95,\n  KeepLabels = 96,\n  KeepLabel = 97,\n  MetricExpr = 98,\n  RangeAggregationExpr = 99,\n  RangeOp = 100,\n  CountOverTime = 101,\n  Rate = 102,\n  RateCounter = 103,\n  BytesOverTime = 104,\n  BytesRate = 105,\n  AvgOverTime = 106,\n  SumOverTime = 107,\n  MinOverTime = 108,\n  MaxOverTime = 109,\n  StddevOverTime = 110,\n  StdvarOverTime = 111,\n  QuantileOverTime = 112,\n  FirstOverTime = 113,\n  LastOverTime = 114,\n  AbsentOverTime = 115,\n  LogRangeExpr = 116,\n  Range = 117,\n  OffsetExpr = 118,\n  UnwrapExpr = 119,\n  ConvOp = 120,\n  BytesConv = 121,\n  DurationConv = 122,\n  DurationSecondsConv = 123,\n  Grouping = 124,\n  Labels = 125,\n  VectorAggregationExpr = 126,\n  VectorOp = 127,\n  BinOpExpr = 128,\n  BinOpModifier = 129,\n  OnOrIgnoringModifier = 130,\n  GroupingLabels = 131,\n  GroupingLabelList = 132,\n  GroupingLabel = 133,\n  LabelName = 134,\n  Mul = 135,\n  Div = 136,\n  Mod = 137,\n  Pow = 138,\n  LabelReplaceExpr = 139,\n  VectorExpr = 140;\n\nexport { AbsentOverTime, Add, And, Avg, AvgOverTime, BinOpExpr, BinOpModifier, Bool, Bottomk, By, Bytes, BytesConv, BytesFilter, BytesOverTime, BytesRate, ConvOp, Count, CountOverTime, Decolorize, DecolorizeExpr, Div, Drop, DropLabel, DropLabels, DropLabelsExpr, Duration, DurationConv, DurationFilter, DurationSecondsConv, Eq, Eql, Expr, Filter, FilterOp, FirstOverTime, GroupLeft, GroupRight, Grouping, GroupingLabel, GroupingLabelList, GroupingLabels, Gte, Gtr, Identifier, Ignoring, Ip, IpLabelFilter, Json, JsonExpressionParser, Keep, KeepLabel, KeepLabels, KeepLabelsExpr, LabelExtractionExpression, LabelExtractionExpressionList, LabelFilter, LabelFormat, LabelFormatExpr, LabelFormatMatcher, LabelName, LabelParser, LabelReplace, LabelReplaceExpr, Labels, LabelsFormat, LastOverTime, LineComment, LineFilter, LineFilters, LineFormat, LineFormatExpr, LiteralExpr, LogExpr, LogQL, LogRangeExpr, Logfmt, LogfmtExpressionParser, LogfmtParser, LogfmtParserFlags, Lss, Lte, Matcher, Matchers, Max, MaxOverTime, MetricExpr, Min, MinOverTime, Mod, Mul, Neq, Npa, Nre, Number, NumberFilter, Offset, OffsetExpr, On, OnOrIgnoringModifier, Or, OrFilter, ParserFlag, Pattern, Pipe, PipeExact, PipeMatch, PipePattern, PipelineExpr, PipelineStage, Pow, QuantileOverTime, Range, RangeAggregationExpr, RangeOp, Rate, RateCounter, Re, Regexp, Selector, Sort, Sort_Desc, Stddev, StddevOverTime, Stdvar, StdvarOverTime, String, Sub, Sum, SumOverTime, Topk, UnitFilter, Unless, Unpack, Unwrap, UnwrapExpr, Vector, VectorAggregationExpr, VectorExpr, VectorOp, Without, parser };\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport '@grafana/data';\nimport { useStyles2, ReactUtils, Tooltip, Icon, Space, Field } from '@grafana/ui';\n\nconst EditorField = (props) => {\n  var _a;\n  const { label, optional, tooltip, tooltipInteractive, children, width, ...fieldProps } = props;\n  const styles = useStyles2(getStyles, width);\n  const childInputId = (fieldProps == null ? undefined : fieldProps.htmlFor) || ((_a = ReactUtils) == null ? undefined : _a.getChildId(children));\n  const labelEl = /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(\"label\", { className: styles.label, htmlFor: childInputId }, label, optional && /* @__PURE__ */ React__default.createElement(\"span\", { className: styles.optional }, \" - optional\"), tooltip && /* @__PURE__ */ React__default.createElement(Tooltip, { placement: \"top\", content: tooltip, theme: \"info\", interactive: tooltipInteractive }, /* @__PURE__ */ React__default.createElement(Icon, { tabIndex: 0, name: \"info-circle\", size: \"sm\", className: styles.icon }))), /* @__PURE__ */ React__default.createElement(Space, { v: 0.5 }));\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React__default.createElement(Field, { className: styles.field, label: labelEl, ...fieldProps }, children));\n};\nconst getStyles = (theme, width) => {\n  return {\n    root: css({\n      minWidth: theme.spacing(width != null ? width : 0)\n    }),\n    label: css({\n      fontSize: 12,\n      fontWeight: theme.typography.fontWeightMedium\n    }),\n    optional: css({\n      fontStyle: \"italic\",\n      color: theme.colors.text.secondary\n    }),\n    field: css({\n      marginBottom: 0\n      // GrafanaUI/Field has a bottom margin which we must remove\n    }),\n    icon: css({\n      color: theme.colors.text.secondary,\n      marginLeft: theme.spacing(1),\n      \":hover\": {\n        color: theme.colors.text.primary\n      }\n    })\n  };\n};\n\nexport { EditorField };\n//# sourceMappingURL=EditorField.js.map\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { EditorStack } from './EditorStack.js';\n\nconst EditorRow = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 2 }, children));\n};\nconst getStyles = (theme) => {\n  return {\n    root: css({\n      padding: theme.spacing(1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.radius.default\n    })\n  };\n};\n\nexport { EditorRow };\n//# sourceMappingURL=EditorRow.js.map\n","import React__default from 'react';\nimport { Stack } from '@grafana/ui';\nimport '@grafana/data';\n\nconst EditorStack = ({ children, wrap: wrapItems = true, ...props }) => {\n  var _a, _b;\n  return /* @__PURE__ */ React__default.createElement(Stack, { wrap: wrapItems ? \"wrap\" : undefined, direction: (_a = props.direction) != null ? _a : \"row\", gap: (_b = props.gap) != null ? _b : 2, ...props }, children);\n};\n\nexport { EditorStack };\n//# sourceMappingURL=EditorStack.js.map\n","import { cx, css } from '@emotion/css';\nimport Prism from 'prismjs';\nimport React__default from 'react';\nimport { textUtil } from '@grafana/data';\nimport { useTheme2 } from '@grafana/ui';\n\nfunction RawQuery({ query, language, className }) {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const highlighted = Prism.highlight(query, language.grammar, language.name);\n  return /* @__PURE__ */ React__default.createElement(\n    \"div\",\n    {\n      className: cx(styles.editorField, \"prism-syntax-highlight\", className),\n      \"aria-label\": \"selector\",\n      dangerouslySetInnerHTML: { __html: textUtil.sanitize(highlighted) }\n    }\n  );\n}\nconst getStyles = (theme) => {\n  return {\n    editorField: css({\n      fontFamily: theme.typography.fontFamilyMonospace,\n      fontSize: theme.typography.bodySmall.fontSize\n    })\n  };\n};\n\nexport { RawQuery };\n//# sourceMappingURL=RawQuery.js.map\n","import 'react';\nimport '@grafana/data';\n\nvar QueryEditorMode = /* @__PURE__ */ ((QueryEditorMode2) => {\n  QueryEditorMode2[\"Code\"] = \"code\";\n  QueryEditorMode2[\"Builder\"] = \"builder\";\n  return QueryEditorMode2;\n})(QueryEditorMode || {});\nconst BINARY_OPERATIONS_KEY = \"Binary operations\";\n\nexport { BINARY_OPERATIONS_KEY, QueryEditorMode };\n//# sourceMappingURL=types.js.map\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + \"loki-query-field\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"public/plugins/loki/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t231: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkloki\"] = globalThis[\"webpackChunkloki\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","\n  import amdMetaModule from 'amd-module';\n\n  __webpack_public_path__ =\n    amdMetaModule && amdMetaModule.uri\n      ? amdMetaModule.uri.slice(0, amdMetaModule.uri.lastIndexOf('/') + 1)\n      : 'public/plugins/loki/';\n  ","import { css } from '@emotion/css';\nimport { shuffle } from 'lodash';\nimport { PureComponent } from 'react';\n\nimport { GrafanaTheme2, QueryEditorHelpProps } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Themeable2, withTheme2 } from '@grafana/ui';\n\nimport LokiLanguageProvider from '../LanguageProvider';\nimport { escapeLabelValueInExactSelector } from '../languageUtils';\nimport { LokiQuery } from '../types';\n\nconst DEFAULT_EXAMPLES = ['{job=\"default/prometheus\"}'];\nconst PREFERRED_LABELS = ['job', 'app', 'k8s_app'];\nconst EXAMPLES_LIMIT = 5;\n\nconst LOGQL_EXAMPLES = [\n  {\n    title: 'Log pipeline',\n    expression: '{job=\"mysql\"} |= \"metrics\" | logfmt | duration > 10s',\n    label:\n      'This query targets the MySQL job, keeps logs that contain the substring \"metrics\", and then parses and filters the logs further.',\n  },\n  {\n    title: 'Count over time',\n    expression: 'count_over_time({job=\"mysql\"}[5m])',\n    label: 'This query counts all the log lines within the last five minutes for the MySQL job.',\n  },\n  {\n    title: 'Rate',\n    expression: 'rate(({job=\"mysql\"} |= \"error\" != \"timeout\")[10s])',\n    label:\n      'This query gets the per-second rate of all non-timeout errors within the last ten seconds for the MySQL job.',\n  },\n  {\n    title: 'Aggregate, count, and group',\n    expression: 'sum(count_over_time({job=\"mysql\"}[5m])) by (level)',\n    label: 'Get the count of logs during the last five minutes, grouping by level.',\n  },\n];\n\nclass UnthemedLokiCheatSheet extends PureComponent<\n  QueryEditorHelpProps<LokiQuery> & Themeable2,\n  { userExamples: string[] }\n> {\n  declare userLabelTimer: ReturnType<typeof setTimeout>;\n  state = {\n    userExamples: [],\n  };\n\n  componentDidMount() {\n    this.scheduleUserLabelChecking();\n    reportInteraction('grafana_loki_cheatsheet_opened', {});\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.userLabelTimer);\n  }\n\n  scheduleUserLabelChecking() {\n    this.userLabelTimer = setTimeout(this.checkUserLabels, 1000);\n  }\n\n  checkUserLabels = async () => {\n    // Set example from user labels\n    const provider: LokiLanguageProvider = this.props.datasource?.languageProvider;\n    if (provider.started) {\n      const labels = provider.getLabelKeys() || [];\n      const preferredLabel = PREFERRED_LABELS.find((l) => labels.includes(l));\n      if (preferredLabel) {\n        const values = await provider.fetchLabelValues(preferredLabel);\n        const userExamples = shuffle(values)\n          .slice(0, EXAMPLES_LIMIT)\n          .map((value) => `{${preferredLabel}=\"${escapeLabelValueInExactSelector(value)}\"}`);\n        this.setState({ userExamples });\n      }\n    } else {\n      this.scheduleUserLabelChecking();\n    }\n  };\n\n  renderExpression(expr: string) {\n    const { onClickExample, theme } = this.props;\n    const styles = getStyles(theme);\n    const onClick = (query: LokiQuery) => {\n      onClickExample(query);\n      reportInteraction('grafana_loki_cheatsheet_example_clicked', {});\n    };\n\n    return (\n      <button\n        type=\"button\"\n        className={styles.cheatSheetExample}\n        key={expr}\n        onClick={() => onClick({ refId: 'A', expr })}\n      >\n        <code>{expr}</code>\n      </button>\n    );\n  }\n\n  render() {\n    const { userExamples } = this.state;\n    const { theme } = this.props;\n    const hasUserExamples = userExamples.length > 0;\n    const styles = getStyles(theme);\n\n    return (\n      <div>\n        <h2>Loki Cheat Sheet</h2>\n        <div className={styles.cheatSheetItem}>\n          <div className={styles.cheatSheetItemTitle}>See your logs</div>\n          Start by selecting a log stream from the Label browser, or alternatively you can write a stream selector into\n          the query field.\n          {hasUserExamples ? (\n            <div>\n              Here are some example streams from your logs:\n              {userExamples.map((example) => this.renderExpression(example))}\n            </div>\n          ) : (\n            <div>\n              Here is an example of a log stream:\n              {this.renderExpression(DEFAULT_EXAMPLES[0])}\n            </div>\n          )}\n        </div>\n        <div className={styles.cheatSheetItem}>\n          <div className={styles.cheatSheetItemTitle}>Combine stream selectors</div>\n          {this.renderExpression('{app=\"cassandra\",namespace=\"prod\"}')}\n          Returns all log lines from streams that have both labels.\n        </div>\n\n        <div className={styles.cheatSheetItem}>\n          <div className={styles.cheatSheetItemTitle}>Filtering for search terms.</div>\n          {this.renderExpression('{app=\"cassandra\"} |~ \"(duration|latency)s*(=|is|of)s*[d.]+\"')}\n          {this.renderExpression('{app=\"cassandra\"} |= \"exact match\"')}\n          {this.renderExpression('{app=\"cassandra\"} != \"do not match\"')}\n          <a href=\"https://grafana.com/docs/loki/latest/logql/#log-pipeline\" target=\"logql\">\n            LogQL\n          </a>{' '}\n          supports exact and regular expression filters.\n        </div>\n        {LOGQL_EXAMPLES.map((item) => (\n          <div className={styles.cheatSheetItem} key={item.expression}>\n            <div className={styles.cheatSheetItemTitle}>{item.title}</div>\n            {this.renderExpression(item.expression)}\n            {item.label}\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default withTheme2(UnthemedLokiCheatSheet);\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  cheatSheetItem: css({\n    margin: theme.spacing(3, 0),\n  }),\n  cheatSheetItemTitle: css({\n    fontSize: theme.typography.h3.fontSize,\n  }),\n  cheatSheetExample: css({\n    margin: theme.spacing(0.5, 0),\n    // element is interactive, clear button styles\n    textAlign: 'left',\n    border: 'none',\n    background: 'transparent',\n    display: 'block',\n  }),\n});\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nconst EditorHeader = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, children);\n};\nconst getStyles = (theme) => ({\n  root: css({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n    gap: theme.spacing(3),\n    minHeight: theme.spacing(4)\n  })\n});\n\nexport { EditorHeader };\n//# sourceMappingURL=EditorHeader.js.map\n","import { Component, createElement } from 'react';\n\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n * 5) Use 'export' statement over 'module.exports' assignment\n **/\n\n// Check `document` and `window` in case of server-side rendering\nlet windowObject;\nif (typeof window !== \"undefined\") {\n  windowObject = window;\n\n  // eslint-disable-next-line no-restricted-globals\n} else if (typeof self !== \"undefined\") {\n  // eslint-disable-next-line no-restricted-globals\n  windowObject = self;\n} else {\n  windowObject = global;\n}\nlet cancelFrame = null;\nlet requestFrame = null;\nconst TIMEOUT_DURATION = 20;\nconst clearTimeoutFn = windowObject.clearTimeout;\nconst setTimeoutFn = windowObject.setTimeout;\nconst cancelAnimationFrameFn = windowObject.cancelAnimationFrame || windowObject.mozCancelAnimationFrame || windowObject.webkitCancelAnimationFrame;\nconst requestAnimationFrameFn = windowObject.requestAnimationFrame || windowObject.mozRequestAnimationFrame || windowObject.webkitRequestAnimationFrame;\nif (cancelAnimationFrameFn == null || requestAnimationFrameFn == null) {\n  // For environments that don't support animation frame,\n  // fallback to a setTimeout based approach.\n  cancelFrame = clearTimeoutFn;\n  requestFrame = function requestAnimationFrameViaSetTimeout(callback) {\n    return setTimeoutFn(callback, TIMEOUT_DURATION);\n  };\n} else {\n  // Counter intuitively, environments that support animation frames can be trickier.\n  // Chrome's \"Throttle non-visible cross-origin iframes\" flag can prevent rAFs from being called.\n  // In this case, we should fallback to a setTimeout() implementation.\n  cancelFrame = function cancelFrame([animationFrameID, timeoutID]) {\n    cancelAnimationFrameFn(animationFrameID);\n    clearTimeoutFn(timeoutID);\n  };\n  requestFrame = function requestAnimationFrameWithSetTimeoutFallback(callback) {\n    const animationFrameID = requestAnimationFrameFn(function animationFrameCallback() {\n      clearTimeoutFn(timeoutID);\n      callback();\n    });\n    const timeoutID = setTimeoutFn(function timeoutCallback() {\n      cancelAnimationFrameFn(animationFrameID);\n      callback();\n    }, TIMEOUT_DURATION);\n    return [animationFrameID, timeoutID];\n  };\n}\nfunction createDetectElementResize(nonce) {\n  let animationKeyframes;\n  let animationName;\n  let animationStartEvent;\n  let animationStyle;\n  let checkTriggers;\n  let resetTriggers;\n  let scrollListener;\n  const attachEvent = typeof document !== \"undefined\" && document.attachEvent;\n  if (!attachEvent) {\n    resetTriggers = function (element) {\n      const triggers = element.__resizeTriggers__,\n        expand = triggers.firstElementChild,\n        contract = triggers.lastElementChild,\n        expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + \"px\";\n      expandChild.style.height = expand.offsetHeight + 1 + \"px\";\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n    checkTriggers = function (element) {\n      return element.offsetWidth !== element.__resizeLast__.width || element.offsetHeight !== element.__resizeLast__.height;\n    };\n    scrollListener = function (e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className && typeof e.target.className.indexOf === \"function\" && e.target.className.indexOf(\"contract-trigger\") < 0 && e.target.className.indexOf(\"expand-trigger\") < 0) {\n        return;\n      }\n      const element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function animationFrame() {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function forEachResizeListener(fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    let animation = false;\n    let keyframeprefix = \"\";\n    animationStartEvent = \"animationstart\";\n    const domPrefixes = \"Webkit Moz O ms\".split(\" \");\n    let startEvents = \"webkitAnimationStart animationstart oAnimationStart MSAnimationStart\".split(\" \");\n    let pfx = \"\";\n    {\n      const elm = document.createElement(\"fakeelement\");\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n      if (animation === false) {\n        for (let i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + \"AnimationName\"] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = \"-\" + pfx.toLowerCase() + \"-\";\n            animationStartEvent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n    animationName = \"resizeanim\";\n    animationKeyframes = \"@\" + keyframeprefix + \"keyframes \" + animationName + \" { from { opacity: 0; } to { opacity: 0; } } \";\n    animationStyle = keyframeprefix + \"animation: 1ms \" + animationName + \"; \";\n  }\n  const createStyles = function (doc) {\n    if (!doc.getElementById(\"detectElementResize\")) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      const css = (animationKeyframes ? animationKeyframes : \"\") + \".resize-triggers { \" + (animationStyle ? animationStyle : \"\") + \"visibility: hidden; opacity: 0; } \" + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n        head = doc.head || doc.getElementsByTagName(\"head\")[0],\n        style = doc.createElement(\"style\");\n      style.id = \"detectElementResize\";\n      style.type = \"text/css\";\n      if (nonce != null) {\n        style.setAttribute(\"nonce\", nonce);\n      }\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n      head.appendChild(style);\n    }\n  };\n  const addResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.attachEvent(\"onresize\", fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        const doc = element.ownerDocument;\n        const elementStyle = windowObject.getComputedStyle(element);\n        if (elementStyle && elementStyle.position === \"static\") {\n          element.style.position = \"relative\";\n        }\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement(\"div\")).className = \"resize-triggers\";\n        const expandTrigger = doc.createElement(\"div\");\n        expandTrigger.className = \"expand-trigger\";\n        expandTrigger.appendChild(doc.createElement(\"div\"));\n        const contractTrigger = doc.createElement(\"div\");\n        contractTrigger.className = \"contract-trigger\";\n        element.__resizeTriggers__.appendChild(expandTrigger);\n        element.__resizeTriggers__.appendChild(contractTrigger);\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener(\"scroll\", scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationStartEvent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName === animationName) {\n              resetTriggers(element);\n            }\n          };\n          element.__resizeTriggers__.addEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n  const removeResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.detachEvent(\"onresize\", fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener(\"scroll\", scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n  return {\n    addResizeListener,\n    removeResizeListener\n  };\n}\n\nclass AutoSizer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      height: this.props.defaultHeight || 0,\n      scaledHeight: this.props.defaultHeight || 0,\n      scaledWidth: this.props.defaultWidth || 0,\n      width: this.props.defaultWidth || 0\n    };\n    this._autoSizer = null;\n    this._detectElementResize = null;\n    this._parentNode = null;\n    this._resizeObserver = null;\n    this._timeoutId = null;\n    this._onResize = () => {\n      this._timeoutId = null;\n      const {\n        disableHeight,\n        disableWidth,\n        onResize\n      } = this.props;\n      if (this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n\n        const style = window.getComputedStyle(this._parentNode) || {};\n        const paddingLeft = parseFloat(style.paddingLeft || \"0\");\n        const paddingRight = parseFloat(style.paddingRight || \"0\");\n        const paddingTop = parseFloat(style.paddingTop || \"0\");\n        const paddingBottom = parseFloat(style.paddingBottom || \"0\");\n        const rect = this._parentNode.getBoundingClientRect();\n        const scaledHeight = rect.height - paddingTop - paddingBottom;\n        const scaledWidth = rect.width - paddingLeft - paddingRight;\n        const height = this._parentNode.offsetHeight - paddingTop - paddingBottom;\n        const width = this._parentNode.offsetWidth - paddingLeft - paddingRight;\n        if (!disableHeight && (this.state.height !== height || this.state.scaledHeight !== scaledHeight) || !disableWidth && (this.state.width !== width || this.state.scaledWidth !== scaledWidth)) {\n          this.setState({\n            height,\n            width,\n            scaledHeight,\n            scaledWidth\n          });\n          if (typeof onResize === \"function\") {\n            onResize({\n              height,\n              scaledHeight,\n              scaledWidth,\n              width\n            });\n          }\n        }\n      }\n    };\n    this._setRef = autoSizer => {\n      this._autoSizer = autoSizer;\n    };\n  }\n  componentDidMount() {\n    const {\n      nonce\n    } = this.props;\n    const parentNode = this._autoSizer ? this._autoSizer.parentNode : null;\n    if (parentNode != null && parentNode.ownerDocument && parentNode.ownerDocument.defaultView && parentNode instanceof parentNode.ownerDocument.defaultView.HTMLElement) {\n      // Delay access of parentNode until mount.\n      // This handles edge-cases where the component has already been unmounted before its ref has been set,\n      // As well as libraries like react-lite which have a slightly different lifecycle.\n      this._parentNode = parentNode;\n\n      // Use ResizeObserver from the same context where parentNode (which we will observe) was defined\n      // Using just global can result into onResize events not being emitted in cases with multiple realms\n      const ResizeObserverInstance = parentNode.ownerDocument.defaultView.ResizeObserver;\n      if (ResizeObserverInstance != null) {\n        this._resizeObserver = new ResizeObserverInstance(() => {\n          // Guard against \"ResizeObserver loop limit exceeded\" error;\n          // could be triggered if the state update causes the ResizeObserver handler to run long.\n          // See https://github.com/bvaughn/react-virtualized-auto-sizer/issues/55\n          this._timeoutId = setTimeout(this._onResize, 0);\n        });\n        this._resizeObserver.observe(parentNode);\n      } else {\n        // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n        this._detectElementResize = createDetectElementResize(nonce);\n        this._detectElementResize.addResizeListener(parentNode, this._onResize);\n      }\n      this._onResize();\n    }\n  }\n  componentWillUnmount() {\n    if (this._parentNode) {\n      if (this._detectElementResize) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n      if (this._timeoutId !== null) {\n        clearTimeout(this._timeoutId);\n      }\n      if (this._resizeObserver) {\n        this._resizeObserver.disconnect();\n      }\n    }\n  }\n  render() {\n    const {\n      children,\n      defaultHeight,\n      defaultWidth,\n      disableHeight = false,\n      disableWidth = false,\n      doNotBailOutOnEmptyChildren = false,\n      nonce,\n      onResize,\n      style = {},\n      tagName = \"div\",\n      ...rest\n    } = this.props;\n    const {\n      height,\n      scaledHeight,\n      scaledWidth,\n      width\n    } = this.state;\n\n    // Outer div should not force width/height since that may prevent containers from shrinking.\n    // Inner component should overflow and use calculated width/height.\n    // See issue #68 for more information.\n    const outerStyle = {\n      overflow: \"visible\"\n    };\n    const childParams = {};\n\n    // Avoid rendering children before the initial measurements have been collected.\n    // At best this would just be wasting cycles.\n    let bailoutOnChildren = false;\n    if (!disableHeight) {\n      if (height === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.height = 0;\n      childParams.height = height;\n      childParams.scaledHeight = scaledHeight;\n    }\n    if (!disableWidth) {\n      if (width === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.width = 0;\n      childParams.width = width;\n      childParams.scaledWidth = scaledWidth;\n    }\n    if (doNotBailOutOnEmptyChildren) {\n      bailoutOnChildren = false;\n    }\n    return createElement(tagName, {\n      ref: this._setRef,\n      style: {\n        ...outerStyle,\n        ...style\n      },\n      ...rest\n    }, !bailoutOnChildren && children(childParams));\n  }\n}\n\nfunction isHeightAndWidthProps(props) {\n  return props && props.disableHeight !== true && props.disableWidth !== true;\n}\nfunction isHeightOnlyProps(props) {\n  return props && props.disableHeight !== true && props.disableWidth === true;\n}\nfunction isWidthOnlyProps(props) {\n  return props && props.disableHeight === true && props.disableWidth !== true;\n}\n\nexport { AutoSizer as default, isHeightAndWidthProps, isHeightOnlyProps, isWidthOnlyProps };\n","import { css } from '@emotion/css';\nimport { uniqueId } from 'lodash';\nimport React__default, { useRef } from 'react';\nimport '@grafana/data';\nimport { useStyles2, Switch } from '@grafana/ui';\nimport '../../QueryEditor/types.js';\nimport '../../QueryEditor/EditorList.js';\nimport { EditorStack } from '../../QueryEditor/EditorStack.js';\nimport '../../QueryEditor/Space.js';\nimport 'react-use';\nimport '../../QueryEditor/QueryHeader.js';\nimport 'react-virtualized-auto-sizer';\nimport 'sql-formatter-plus';\nimport '../../SQLEditor/standardSql/language.js';\nimport 'uuid';\nimport '@grafana/runtime';\nimport '../../SQLEditor/utils/debugger.js';\nimport '../../SQLEditor/standardSql/macros.js';\nimport '../../QueryEditor/visual-query-builder/AwesomeQueryBuilder.js';\nimport '../../QueryEditor/visual-query-builder/WhereRow.js';\nimport '../../QueryEditor/visual-query-builder/EditorField.js';\nimport 'rxjs';\nimport 'rxjs/operators';\n\nfunction QueryHeaderSwitch({ label, ...inputProps }) {\n  const dashedLabel = label.replace(\" \", \"-\");\n  const switchIdRef = useRef(uniqueId(`switch-${dashedLabel}`));\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 1 }, /* @__PURE__ */ React__default.createElement(\"label\", { htmlFor: switchIdRef.current, className: styles.switchLabel }, label), /* @__PURE__ */ React__default.createElement(Switch, { ...inputProps, id: switchIdRef.current }));\n}\nconst getStyles = (theme) => {\n  return {\n    switchLabel: css({\n      color: theme.colors.text.secondary,\n      cursor: \"pointer\",\n      fontSize: theme.typography.bodySmall.fontSize,\n      \"&:hover\": {\n        color: theme.colors.text.primary\n      }\n    })\n  };\n};\n\nexport { QueryHeaderSwitch };\n//# sourceMappingURL=QueryHeaderSwitch.js.map\n","import React__default from 'react';\n\nconst FlexItem = ({ grow, shrink }) => {\n  return /* @__PURE__ */ React__default.createElement(\"div\", { style: { display: \"block\", flexGrow: grow, flexShrink: shrink } });\n};\n\nexport { FlexItem };\n//# sourceMappingURL=FlexItem.js.map\n","import React__default from 'react';\nimport { RadioButtonGroup } from '@grafana/ui';\nimport { QueryEditorMode } from '../types.js';\n\nconst editorModes = [\n  { label: \"Builder\", value: QueryEditorMode.Builder },\n  { label: \"Code\", value: QueryEditorMode.Code }\n];\nfunction QueryEditorModeToggle({ mode, onChange }) {\n  return /* @__PURE__ */ React__default.createElement(\"div\", { \"data-testid\": \"QueryEditorModeToggle\" }, /* @__PURE__ */ React__default.createElement(RadioButtonGroup, { options: editorModes, size: \"sm\", value: mode, onChange }));\n}\n\nexport { QueryEditorModeToggle };\n//# sourceMappingURL=QueryEditorModeToggle.js.map\n","import React__default from 'react';\nimport { EditorStack } from './EditorStack.js';\n\nconst EditorRows = ({ children }) => {\n  return /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 0.5, direction: \"column\" }, children);\n};\n\nexport { EditorRows };\n//# sourceMappingURL=EditorRows.js.map\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport memoizeOne from 'memoize-one';\nimport { createElement, PureComponent } from 'react';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\n// Animation frame based implementation of setTimeout.\n// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js\nvar hasNativePerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\nvar now = hasNativePerformanceNow ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nfunction cancelTimeout(timeoutID) {\n  cancelAnimationFrame(timeoutID.id);\n}\nfunction requestTimeout(callback, delay) {\n  var start = now();\n\n  function tick() {\n    if (now() - start >= delay) {\n      callback.call(null);\n    } else {\n      timeoutID.id = requestAnimationFrame(tick);\n    }\n  }\n\n  var timeoutID = {\n    id: requestAnimationFrame(tick)\n  };\n  return timeoutID;\n}\n\nvar size = -1; // This utility copied from \"dom-helpers\" package.\n\nfunction getScrollbarSize(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (size === -1 || recalculate) {\n    var div = document.createElement('div');\n    var style = div.style;\n    style.width = '50px';\n    style.height = '50px';\n    style.overflow = 'scroll';\n    document.body.appendChild(div);\n    size = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n  }\n\n  return size;\n}\nvar cachedRTLResult = null; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\n\nfunction getRTLOffsetType(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (cachedRTLResult === null || recalculate) {\n    var outerDiv = document.createElement('div');\n    var outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n    var innerDiv = document.createElement('div');\n    var innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n    outerDiv.appendChild(innerDiv);\n    document.body.appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    document.body.removeChild(outerDiv);\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL = 150;\n\nvar defaultItemKey = function defaultItemKey(_ref) {\n  var columnIndex = _ref.columnIndex,\n      data = _ref.data,\n      rowIndex = _ref.rowIndex;\n  return rowIndex + \":\" + columnIndex;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsOverscanCount = null;\nvar devWarningsOverscanRowsColumnsCount = null;\nvar devWarningsTagName = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsOverscanCount = /*#__PURE__*/new WeakSet();\n    devWarningsOverscanRowsColumnsCount = /*#__PURE__*/new WeakSet();\n    devWarningsTagName = /*#__PURE__*/new WeakSet();\n  }\n}\n\nfunction createGridComponent(_ref2) {\n  var _class;\n\n  var getColumnOffset = _ref2.getColumnOffset,\n      getColumnStartIndexForOffset = _ref2.getColumnStartIndexForOffset,\n      getColumnStopIndexForStartIndex = _ref2.getColumnStopIndexForStartIndex,\n      getColumnWidth = _ref2.getColumnWidth,\n      getEstimatedTotalHeight = _ref2.getEstimatedTotalHeight,\n      getEstimatedTotalWidth = _ref2.getEstimatedTotalWidth,\n      getOffsetForColumnAndAlignment = _ref2.getOffsetForColumnAndAlignment,\n      getOffsetForRowAndAlignment = _ref2.getOffsetForRowAndAlignment,\n      getRowHeight = _ref2.getRowHeight,\n      getRowOffset = _ref2.getRowOffset,\n      getRowStartIndexForOffset = _ref2.getRowStartIndexForOffset,\n      getRowStopIndexForStartIndex = _ref2.getRowStopIndexForStartIndex,\n      initInstanceProps = _ref2.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref2.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref2.validateProps;\n  return _class = /*#__PURE__*/function (_PureComponent) {\n    _inheritsLoose(Grid, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function Grid(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_this));\n      _this._resetIsScrollingTimeoutId = null;\n      _this._outerRef = void 0;\n      _this.state = {\n        instance: _assertThisInitialized(_this),\n        isScrolling: false,\n        horizontalScrollDirection: 'forward',\n        scrollLeft: typeof _this.props.initialScrollLeft === 'number' ? _this.props.initialScrollLeft : 0,\n        scrollTop: typeof _this.props.initialScrollTop === 'number' ? _this.props.initialScrollTop : 0,\n        scrollUpdateWasRequested: false,\n        verticalScrollDirection: 'forward'\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanColumnStartIndex, overscanColumnStopIndex, overscanRowStartIndex, overscanRowStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanColumnStartIndex: overscanColumnStartIndex,\n          overscanColumnStopIndex: overscanColumnStopIndex,\n          overscanRowStartIndex: overscanRowStartIndex,\n          overscanRowStopIndex: overscanRowStopIndex,\n          visibleColumnStartIndex: visibleColumnStartIndex,\n          visibleColumnStopIndex: visibleColumnStopIndex,\n          visibleRowStartIndex: visibleRowStartIndex,\n          visibleRowStopIndex: visibleRowStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollLeft, scrollTop, horizontalScrollDirection, verticalScrollDirection, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          horizontalScrollDirection: horizontalScrollDirection,\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          verticalScrollDirection: verticalScrollDirection,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (rowIndex, columnIndex) {\n        var _this$props = _this.props,\n            columnWidth = _this$props.columnWidth,\n            direction = _this$props.direction,\n            rowHeight = _this$props.rowHeight;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && columnWidth, shouldResetStyleCacheOnItemSizeChange && direction, shouldResetStyleCacheOnItemSizeChange && rowHeight);\n\n        var key = rowIndex + \":\" + columnIndex;\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(key)) {\n          style = itemStyleCache[key];\n        } else {\n          var _offset = getColumnOffset(_this.props, columnIndex, _this._instanceProps);\n\n          var isRtl = direction === 'rtl';\n          itemStyleCache[key] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : _offset,\n            right: isRtl ? _offset : undefined,\n            top: getRowOffset(_this.props, rowIndex, _this._instanceProps),\n            height: getRowHeight(_this.props, rowIndex, _this._instanceProps),\n            width: getColumnWidth(_this.props, columnIndex, _this._instanceProps)\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScroll = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientHeight = _event$currentTarget.clientHeight,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollTop = _event$currentTarget.scrollTop,\n            scrollHeight = _event$currentTarget.scrollHeight,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n\n          var calculatedScrollLeft = scrollLeft;\n\n          if (direction === 'rtl') {\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                calculatedScrollLeft = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          calculatedScrollLeft = Math.max(0, Math.min(calculatedScrollLeft, scrollWidth - clientWidth));\n          var calculatedScrollTop = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n            scrollLeft: calculatedScrollLeft,\n            scrollTop: calculatedScrollTop,\n            verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward',\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1);\n        });\n      };\n\n      return _this;\n    }\n\n    Grid.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = Grid.prototype;\n\n    _proto.scrollTo = function scrollTo(_ref3) {\n      var scrollLeft = _ref3.scrollLeft,\n          scrollTop = _ref3.scrollTop;\n\n      if (scrollLeft !== undefined) {\n        scrollLeft = Math.max(0, scrollLeft);\n      }\n\n      if (scrollTop !== undefined) {\n        scrollTop = Math.max(0, scrollTop);\n      }\n\n      this.setState(function (prevState) {\n        if (scrollLeft === undefined) {\n          scrollLeft = prevState.scrollLeft;\n        }\n\n        if (scrollTop === undefined) {\n          scrollTop = prevState.scrollTop;\n        }\n\n        if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n          return null;\n        }\n\n        return {\n          horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          scrollUpdateWasRequested: true,\n          verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward'\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(_ref4) {\n      var _ref4$align = _ref4.align,\n          align = _ref4$align === void 0 ? 'auto' : _ref4$align,\n          columnIndex = _ref4.columnIndex,\n          rowIndex = _ref4.rowIndex;\n      var _this$props2 = this.props,\n          columnCount = _this$props2.columnCount,\n          height = _this$props2.height,\n          rowCount = _this$props2.rowCount,\n          width = _this$props2.width;\n      var _this$state = this.state,\n          scrollLeft = _this$state.scrollLeft,\n          scrollTop = _this$state.scrollTop;\n      var scrollbarSize = getScrollbarSize();\n\n      if (columnIndex !== undefined) {\n        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));\n      }\n\n      if (rowIndex !== undefined) {\n        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));\n      }\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps); // The scrollbar size should be considered when scrolling an item into view,\n      // to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n\n      var horizontalScrollbarSize = estimatedTotalWidth > width ? scrollbarSize : 0;\n      var verticalScrollbarSize = estimatedTotalHeight > height ? scrollbarSize : 0;\n      this.scrollTo({\n        scrollLeft: columnIndex !== undefined ? getOffsetForColumnAndAlignment(this.props, columnIndex, align, scrollLeft, this._instanceProps, verticalScrollbarSize) : scrollLeft,\n        scrollTop: rowIndex !== undefined ? getOffsetForRowAndAlignment(this.props, rowIndex, align, scrollTop, this._instanceProps, horizontalScrollbarSize) : scrollTop\n      });\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          initialScrollLeft = _this$props3.initialScrollLeft,\n          initialScrollTop = _this$props3.initialScrollTop;\n\n      if (this._outerRef != null) {\n        var outerRef = this._outerRef;\n\n        if (typeof initialScrollLeft === 'number') {\n          outerRef.scrollLeft = initialScrollLeft;\n        }\n\n        if (typeof initialScrollTop === 'number') {\n          outerRef.scrollTop = initialScrollTop;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var direction = this.props.direction;\n      var _this$state2 = this.state,\n          scrollLeft = _this$state2.scrollLeft,\n          scrollTop = _this$state2.scrollTop,\n          scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n        // So we need to determine which browser behavior we're dealing with, and mimic it.\n        var outerRef = this._outerRef;\n\n        if (direction === 'rtl') {\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              outerRef.scrollLeft = -scrollLeft;\n              break;\n\n            case 'positive-ascending':\n              outerRef.scrollLeft = scrollLeft;\n              break;\n\n            default:\n              var clientWidth = outerRef.clientWidth,\n                  scrollWidth = outerRef.scrollWidth;\n              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        } else {\n          outerRef.scrollLeft = Math.max(0, scrollLeft);\n        }\n\n        outerRef.scrollTop = Math.max(0, scrollTop);\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          columnCount = _this$props4.columnCount,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey : _this$props4$itemKey,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          rowCount = _this$props4.rowCount,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling;\n\n      var _this$_getHorizontalR = this._getHorizontalRangeToRender(),\n          columnStartIndex = _this$_getHorizontalR[0],\n          columnStopIndex = _this$_getHorizontalR[1];\n\n      var _this$_getVerticalRan = this._getVerticalRangeToRender(),\n          rowStartIndex = _this$_getVerticalRan[0],\n          rowStopIndex = _this$_getVerticalRan[1];\n\n      var items = [];\n\n      if (columnCount > 0 && rowCount) {\n        for (var _rowIndex = rowStartIndex; _rowIndex <= rowStopIndex; _rowIndex++) {\n          for (var _columnIndex = columnStartIndex; _columnIndex <= columnStopIndex; _columnIndex++) {\n            items.push(createElement(children, {\n              columnIndex: _columnIndex,\n              data: itemData,\n              isScrolling: useIsScrolling ? isScrolling : undefined,\n              key: itemKey({\n                columnIndex: _columnIndex,\n                data: itemData,\n                rowIndex: _rowIndex\n              }),\n              rowIndex: _rowIndex,\n              style: this._getItemStyle(_rowIndex, _columnIndex)\n            }));\n          }\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: this._onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: estimatedTotalHeight,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: estimatedTotalWidth\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      var _this$props5 = this.props,\n          columnCount = _this$props5.columnCount,\n          onItemsRendered = _this$props5.onItemsRendered,\n          onScroll = _this$props5.onScroll,\n          rowCount = _this$props5.rowCount;\n\n      if (typeof onItemsRendered === 'function') {\n        if (columnCount > 0 && rowCount > 0) {\n          var _this$_getHorizontalR2 = this._getHorizontalRangeToRender(),\n              _overscanColumnStartIndex = _this$_getHorizontalR2[0],\n              _overscanColumnStopIndex = _this$_getHorizontalR2[1],\n              _visibleColumnStartIndex = _this$_getHorizontalR2[2],\n              _visibleColumnStopIndex = _this$_getHorizontalR2[3];\n\n          var _this$_getVerticalRan2 = this._getVerticalRangeToRender(),\n              _overscanRowStartIndex = _this$_getVerticalRan2[0],\n              _overscanRowStopIndex = _this$_getVerticalRan2[1],\n              _visibleRowStartIndex = _this$_getVerticalRan2[2],\n              _visibleRowStopIndex = _this$_getVerticalRan2[3];\n\n          this._callOnItemsRendered(_overscanColumnStartIndex, _overscanColumnStopIndex, _overscanRowStartIndex, _overscanRowStopIndex, _visibleColumnStartIndex, _visibleColumnStopIndex, _visibleRowStartIndex, _visibleRowStopIndex);\n        }\n      }\n\n      if (typeof onScroll === 'function') {\n        var _this$state3 = this.state,\n            _horizontalScrollDirection = _this$state3.horizontalScrollDirection,\n            _scrollLeft = _this$state3.scrollLeft,\n            _scrollTop = _this$state3.scrollTop,\n            _scrollUpdateWasRequested = _this$state3.scrollUpdateWasRequested,\n            _verticalScrollDirection = _this$state3.verticalScrollDirection;\n\n        this._callOnScroll(_scrollLeft, _scrollTop, _horizontalScrollDirection, _verticalScrollDirection, _scrollUpdateWasRequested);\n      }\n    } // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    ;\n\n    _proto._getHorizontalRangeToRender = function _getHorizontalRangeToRender() {\n      var _this$props6 = this.props,\n          columnCount = _this$props6.columnCount,\n          overscanColumnCount = _this$props6.overscanColumnCount,\n          overscanColumnsCount = _this$props6.overscanColumnsCount,\n          overscanCount = _this$props6.overscanCount,\n          rowCount = _this$props6.rowCount;\n      var _this$state4 = this.state,\n          horizontalScrollDirection = _this$state4.horizontalScrollDirection,\n          isScrolling = _this$state4.isScrolling,\n          scrollLeft = _this$state4.scrollLeft;\n      var overscanCountResolved = overscanColumnCount || overscanColumnsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getColumnStartIndexForOffset(this.props, scrollLeft, this._instanceProps);\n      var stopIndex = getColumnStopIndexForStartIndex(this.props, startIndex, scrollLeft, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || horizontalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || horizontalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    _proto._getVerticalRangeToRender = function _getVerticalRangeToRender() {\n      var _this$props7 = this.props,\n          columnCount = _this$props7.columnCount,\n          overscanCount = _this$props7.overscanCount,\n          overscanRowCount = _this$props7.overscanRowCount,\n          overscanRowsCount = _this$props7.overscanRowsCount,\n          rowCount = _this$props7.rowCount;\n      var _this$state5 = this.state,\n          isScrolling = _this$state5.isScrolling,\n          verticalScrollDirection = _this$state5.verticalScrollDirection,\n          scrollTop = _this$state5.scrollTop;\n      var overscanCountResolved = overscanRowCount || overscanRowsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getRowStartIndexForOffset(this.props, scrollTop, this._instanceProps);\n      var stopIndex = getRowStopIndexForStartIndex(this.props, startIndex, scrollTop, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || verticalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || verticalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return Grid;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    useIsScrolling: false\n  }, _class;\n}\n\nvar validateSharedProps = function validateSharedProps(_ref5, _ref6) {\n  var children = _ref5.children,\n      direction = _ref5.direction,\n      height = _ref5.height,\n      innerTagName = _ref5.innerTagName,\n      outerTagName = _ref5.outerTagName,\n      overscanColumnsCount = _ref5.overscanColumnsCount,\n      overscanCount = _ref5.overscanCount,\n      overscanRowsCount = _ref5.overscanRowsCount,\n      width = _ref5.width;\n  var instance = _ref6.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof overscanCount === 'number') {\n      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {\n        devWarningsOverscanCount.add(instance);\n        console.warn('The overscanCount prop has been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (typeof overscanColumnsCount === 'number' || typeof overscanRowsCount === 'number') {\n      if (devWarningsOverscanRowsColumnsCount && !devWarningsOverscanRowsColumnsCount.has(instance)) {\n        devWarningsOverscanRowsColumnsCount.add(instance);\n        console.warn('The overscanColumnsCount and overscanRowsCount props have been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName && !devWarningsTagName.has(instance)) {\n        devWarningsTagName.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    switch (direction) {\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    if (typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Grids must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    }\n\n    if (typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Grids must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE = 50;\n\nvar getEstimatedTotalHeight = function getEstimatedTotalHeight(_ref, _ref2) {\n  var rowCount = _ref.rowCount;\n  var rowMetadataMap = _ref2.rowMetadataMap,\n      estimatedRowHeight = _ref2.estimatedRowHeight,\n      lastMeasuredRowIndex = _ref2.lastMeasuredRowIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredRowIndex >= rowCount) {\n    lastMeasuredRowIndex = rowCount - 1;\n  }\n\n  if (lastMeasuredRowIndex >= 0) {\n    var itemMetadata = rowMetadataMap[lastMeasuredRowIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = rowCount - lastMeasuredRowIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedRowHeight;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getEstimatedTotalWidth = function getEstimatedTotalWidth(_ref3, _ref4) {\n  var columnCount = _ref3.columnCount;\n  var columnMetadataMap = _ref4.columnMetadataMap,\n      estimatedColumnWidth = _ref4.estimatedColumnWidth,\n      lastMeasuredColumnIndex = _ref4.lastMeasuredColumnIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredColumnIndex >= columnCount) {\n    lastMeasuredColumnIndex = columnCount - 1;\n  }\n\n  if (lastMeasuredColumnIndex >= 0) {\n    var itemMetadata = columnMetadataMap[lastMeasuredColumnIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = columnCount - lastMeasuredColumnIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedColumnWidth;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getItemMetadata = function getItemMetadata(itemType, props, index, instanceProps) {\n  var itemMetadataMap, itemSize, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    itemSize = props.columnWidth;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    itemSize = props.rowHeight;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    if (itemType === 'column') {\n      instanceProps.lastMeasuredColumnIndex = index;\n    } else {\n      instanceProps.lastMeasuredRowIndex = index;\n    }\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem = function findNearestItem(itemType, props, instanceProps, offset) {\n  var itemMetadataMap, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch(itemType, props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch(itemType, props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch = function findNearestItemBinarySearch(itemType, props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata(itemType, props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch = function findNearestItemExponentialSearch(itemType, props, instanceProps, index, offset) {\n  var itemCount = itemType === 'column' ? props.columnCount : props.rowCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata(itemType, props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch(itemType, props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(itemType, props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n  var size = itemType === 'column' ? props.width : props.height;\n  var itemMetadata = getItemMetadata(itemType, props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n  // To ensure it reflects actual measurements instead of just estimates.\n\n  var estimatedTotalSize = itemType === 'column' ? getEstimatedTotalWidth(props, instanceProps) : getEstimatedTotalHeight(props, instanceProps);\n  var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n  var minOffset = Math.max(0, itemMetadata.offset - size + scrollbarSize + itemMetadata.size);\n\n  if (align === 'smart') {\n    if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n      align = 'auto';\n    } else {\n      align = 'center';\n    }\n  }\n\n  switch (align) {\n    case 'start':\n      return maxOffset;\n\n    case 'end':\n      return minOffset;\n\n    case 'center':\n      return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n    case 'auto':\n    default:\n      if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n        return scrollOffset;\n      } else if (minOffset > maxOffset) {\n        // Because we only take into account the scrollbar size when calculating minOffset\n        // this value can be larger than maxOffset when at the end of the list\n        return minOffset;\n      } else if (scrollOffset < minOffset) {\n        return minOffset;\n      } else {\n        return maxOffset;\n      }\n\n  }\n};\n\nvar VariableSizeGrid = /*#__PURE__*/createGridComponent({\n  getColumnOffset: function getColumnOffset(props, index, instanceProps) {\n    return getItemMetadata('column', props, index, instanceProps).offset;\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(props, scrollLeft, instanceProps) {\n    return findNearestItem('column', props, instanceProps, scrollLeft);\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(props, startIndex, scrollLeft, instanceProps) {\n    var columnCount = props.columnCount,\n        width = props.width;\n    var itemMetadata = getItemMetadata('column', props, startIndex, instanceProps);\n    var maxOffset = scrollLeft + width;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < columnCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('column', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  getColumnWidth: function getColumnWidth(props, index, instanceProps) {\n    return instanceProps.columnMetadataMap[index].size;\n  },\n  getEstimatedTotalHeight: getEstimatedTotalHeight,\n  getEstimatedTotalWidth: getEstimatedTotalWidth,\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('column', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('row', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getRowOffset: function getRowOffset(props, index, instanceProps) {\n    return getItemMetadata('row', props, index, instanceProps).offset;\n  },\n  getRowHeight: function getRowHeight(props, index, instanceProps) {\n    return instanceProps.rowMetadataMap[index].size;\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(props, scrollTop, instanceProps) {\n    return findNearestItem('row', props, instanceProps, scrollTop);\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(props, startIndex, scrollTop, instanceProps) {\n    var rowCount = props.rowCount,\n        height = props.height;\n    var itemMetadata = getItemMetadata('row', props, startIndex, instanceProps);\n    var maxOffset = scrollTop + height;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < rowCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('row', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref5 = props,\n        estimatedColumnWidth = _ref5.estimatedColumnWidth,\n        estimatedRowHeight = _ref5.estimatedRowHeight;\n    var instanceProps = {\n      columnMetadataMap: {},\n      estimatedColumnWidth: estimatedColumnWidth || DEFAULT_ESTIMATED_ITEM_SIZE,\n      estimatedRowHeight: estimatedRowHeight || DEFAULT_ESTIMATED_ITEM_SIZE,\n      lastMeasuredColumnIndex: -1,\n      lastMeasuredRowIndex: -1,\n      rowMetadataMap: {}\n    };\n\n    instance.resetAfterColumnIndex = function (columnIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        columnIndex: columnIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterRowIndex = function (rowIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        rowIndex: rowIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterIndices = function (_ref6) {\n      var columnIndex = _ref6.columnIndex,\n          rowIndex = _ref6.rowIndex,\n          _ref6$shouldForceUpda = _ref6.shouldForceUpdate,\n          shouldForceUpdate = _ref6$shouldForceUpda === void 0 ? true : _ref6$shouldForceUpda;\n\n      if (typeof columnIndex === 'number') {\n        instanceProps.lastMeasuredColumnIndex = Math.min(instanceProps.lastMeasuredColumnIndex, columnIndex - 1);\n      }\n\n      if (typeof rowIndex === 'number') {\n        instanceProps.lastMeasuredRowIndex = Math.min(instanceProps.lastMeasuredRowIndex, rowIndex - 1);\n      } // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref7) {\n    var columnWidth = _ref7.columnWidth,\n        rowHeight = _ref7.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'function') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      } else if (typeof rowHeight !== 'function') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL$1 = 150;\n\nvar defaultItemKey$1 = function defaultItemKey(index, data) {\n  return index;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsDirection = null;\nvar devWarningsTagName$1 = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsDirection = /*#__PURE__*/new WeakSet();\n    devWarningsTagName$1 = /*#__PURE__*/new WeakSet();\n  }\n}\n\nfunction createListComponent(_ref) {\n  var _class;\n\n  var getItemOffset = _ref.getItemOffset,\n      getEstimatedTotalSize = _ref.getEstimatedTotalSize,\n      getItemSize = _ref.getItemSize,\n      getOffsetForIndexAndAlignment = _ref.getOffsetForIndexAndAlignment,\n      getStartIndexForOffset = _ref.getStartIndexForOffset,\n      getStopIndexForStartIndex = _ref.getStopIndexForStartIndex,\n      initInstanceProps = _ref.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref.validateProps;\n  return _class = /*#__PURE__*/function (_PureComponent) {\n    _inheritsLoose(List, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function List(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_this));\n      _this._outerRef = void 0;\n      _this._resetIsScrollingTimeoutId = null;\n      _this.state = {\n        instance: _assertThisInitialized(_this),\n        isScrolling: false,\n        scrollDirection: 'forward',\n        scrollOffset: typeof _this.props.initialScrollOffset === 'number' ? _this.props.initialScrollOffset : 0,\n        scrollUpdateWasRequested: false\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanStartIndex: overscanStartIndex,\n          overscanStopIndex: overscanStopIndex,\n          visibleStartIndex: visibleStartIndex,\n          visibleStopIndex: visibleStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollDirection, scrollOffset, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          scrollDirection: scrollDirection,\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (index) {\n        var _this$props = _this.props,\n            direction = _this$props.direction,\n            itemSize = _this$props.itemSize,\n            layout = _this$props.layout;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && itemSize, shouldResetStyleCacheOnItemSizeChange && layout, shouldResetStyleCacheOnItemSizeChange && direction);\n\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(index)) {\n          style = itemStyleCache[index];\n        } else {\n          var _offset = getItemOffset(_this.props, index, _this._instanceProps);\n\n          var size = getItemSize(_this.props, index, _this._instanceProps); // TODO Deprecate direction \"horizontal\"\n\n          var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n          var isRtl = direction === 'rtl';\n          var offsetHorizontal = isHorizontal ? _offset : 0;\n          itemStyleCache[index] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : offsetHorizontal,\n            right: isRtl ? offsetHorizontal : undefined,\n            top: !isHorizontal ? _offset : 0,\n            height: !isHorizontal ? size : '100%',\n            width: isHorizontal ? size : '100%'\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScrollHorizontal = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollLeft) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction;\n          var scrollOffset = scrollLeft;\n\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n            // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                scrollOffset = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                scrollOffset = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          scrollOffset = Math.max(0, Math.min(scrollOffset, scrollWidth - clientWidth));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._onScrollVertical = function (event) {\n        var _event$currentTarget2 = event.currentTarget,\n            clientHeight = _event$currentTarget2.clientHeight,\n            scrollHeight = _event$currentTarget2.scrollHeight,\n            scrollTop = _event$currentTarget2.scrollTop;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          var scrollOffset = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL$1);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1, null);\n        });\n      };\n\n      return _this;\n    }\n\n    List.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps$1(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = List.prototype;\n\n    _proto.scrollTo = function scrollTo(scrollOffset) {\n      scrollOffset = Math.max(0, scrollOffset);\n      this.setState(function (prevState) {\n        if (prevState.scrollOffset === scrollOffset) {\n          return null;\n        }\n\n        return {\n          scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: true\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(index, align) {\n      if (align === void 0) {\n        align = 'auto';\n      }\n\n      var _this$props2 = this.props,\n          itemCount = _this$props2.itemCount,\n          layout = _this$props2.layout;\n      var scrollOffset = this.state.scrollOffset;\n      index = Math.max(0, Math.min(index, itemCount - 1)); // The scrollbar size should be considered when scrolling an item into view, to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n      // This is an edge case for lists; normally they only scroll in the dominant direction.\n\n      var scrollbarSize = 0;\n\n      if (this._outerRef) {\n        var outerRef = this._outerRef;\n\n        if (layout === 'vertical') {\n          scrollbarSize = outerRef.scrollWidth > outerRef.clientWidth ? getScrollbarSize() : 0;\n        } else {\n          scrollbarSize = outerRef.scrollHeight > outerRef.clientHeight ? getScrollbarSize() : 0;\n        }\n      }\n\n      this.scrollTo(getOffsetForIndexAndAlignment(this.props, index, align, scrollOffset, this._instanceProps, scrollbarSize));\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          direction = _this$props3.direction,\n          initialScrollOffset = _this$props3.initialScrollOffset,\n          layout = _this$props3.layout;\n\n      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          outerRef.scrollLeft = initialScrollOffset;\n        } else {\n          outerRef.scrollTop = initialScrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var _this$props4 = this.props,\n          direction = _this$props4.direction,\n          layout = _this$props4.layout;\n      var _this$state = this.state,\n          scrollOffset = _this$state.scrollOffset,\n          scrollUpdateWasRequested = _this$state.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // So we need to determine which browser behavior we're dealing with, and mimic it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                outerRef.scrollLeft = -scrollOffset;\n                break;\n\n              case 'positive-ascending':\n                outerRef.scrollLeft = scrollOffset;\n                break;\n\n              default:\n                var clientWidth = outerRef.clientWidth,\n                    scrollWidth = outerRef.scrollWidth;\n                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;\n                break;\n            }\n          } else {\n            outerRef.scrollLeft = scrollOffset;\n          }\n        } else {\n          outerRef.scrollTop = scrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props5 = this.props,\n          children = _this$props5.children,\n          className = _this$props5.className,\n          direction = _this$props5.direction,\n          height = _this$props5.height,\n          innerRef = _this$props5.innerRef,\n          innerElementType = _this$props5.innerElementType,\n          innerTagName = _this$props5.innerTagName,\n          itemCount = _this$props5.itemCount,\n          itemData = _this$props5.itemData,\n          _this$props5$itemKey = _this$props5.itemKey,\n          itemKey = _this$props5$itemKey === void 0 ? defaultItemKey$1 : _this$props5$itemKey,\n          layout = _this$props5.layout,\n          outerElementType = _this$props5.outerElementType,\n          outerTagName = _this$props5.outerTagName,\n          style = _this$props5.style,\n          useIsScrolling = _this$props5.useIsScrolling,\n          width = _this$props5.width;\n      var isScrolling = this.state.isScrolling; // TODO Deprecate direction \"horizontal\"\n\n      var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n      var onScroll = isHorizontal ? this._onScrollHorizontal : this._onScrollVertical;\n\n      var _this$_getRangeToRend = this._getRangeToRender(),\n          startIndex = _this$_getRangeToRend[0],\n          stopIndex = _this$_getRangeToRend[1];\n\n      var items = [];\n\n      if (itemCount > 0) {\n        for (var _index = startIndex; _index <= stopIndex; _index++) {\n          items.push(createElement(children, {\n            data: itemData,\n            key: itemKey(_index, itemData),\n            index: _index,\n            isScrolling: useIsScrolling ? isScrolling : undefined,\n            style: this._getItemStyle(_index)\n          }));\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalSize = getEstimatedTotalSize(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: isHorizontal ? '100%' : estimatedTotalSize,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: isHorizontal ? estimatedTotalSize : '100%'\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      if (typeof this.props.onItemsRendered === 'function') {\n        var itemCount = this.props.itemCount;\n\n        if (itemCount > 0) {\n          var _this$_getRangeToRend2 = this._getRangeToRender(),\n              _overscanStartIndex = _this$_getRangeToRend2[0],\n              _overscanStopIndex = _this$_getRangeToRend2[1],\n              _visibleStartIndex = _this$_getRangeToRend2[2],\n              _visibleStopIndex = _this$_getRangeToRend2[3];\n\n          this._callOnItemsRendered(_overscanStartIndex, _overscanStopIndex, _visibleStartIndex, _visibleStopIndex);\n        }\n      }\n\n      if (typeof this.props.onScroll === 'function') {\n        var _this$state2 = this.state,\n            _scrollDirection = _this$state2.scrollDirection,\n            _scrollOffset = _this$state2.scrollOffset,\n            _scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n        this._callOnScroll(_scrollDirection, _scrollOffset, _scrollUpdateWasRequested);\n      }\n    } // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    ;\n\n    _proto._getRangeToRender = function _getRangeToRender() {\n      var _this$props6 = this.props,\n          itemCount = _this$props6.itemCount,\n          overscanCount = _this$props6.overscanCount;\n      var _this$state3 = this.state,\n          isScrolling = _this$state3.isScrolling,\n          scrollDirection = _this$state3.scrollDirection,\n          scrollOffset = _this$state3.scrollOffset;\n\n      if (itemCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getStartIndexForOffset(this.props, scrollOffset, this._instanceProps);\n      var stopIndex = getStopIndexForStartIndex(this.props, startIndex, scrollOffset, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || scrollDirection === 'backward' ? Math.max(1, overscanCount) : 1;\n      var overscanForward = !isScrolling || scrollDirection === 'forward' ? Math.max(1, overscanCount) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return List;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    layout: 'vertical',\n    overscanCount: 2,\n    useIsScrolling: false\n  }, _class;\n} // NOTE: I considered further wrapping individual items with a pure ListItem component.\n// This would avoid ever calling the render function for the same index more than once,\n// But it would also add the overhead of a lot of components/fibers.\n// I assume people already do this (render function returning a class component),\n// So my doing it would just unnecessarily double the wrappers.\n\nvar validateSharedProps$1 = function validateSharedProps(_ref2, _ref3) {\n  var children = _ref2.children,\n      direction = _ref2.direction,\n      height = _ref2.height,\n      layout = _ref2.layout,\n      innerTagName = _ref2.innerTagName,\n      outerTagName = _ref2.outerTagName,\n      width = _ref2.width;\n  var instance = _ref3.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName$1 && !devWarningsTagName$1.has(instance)) {\n        devWarningsTagName$1.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    } // TODO Deprecate direction \"horizontal\"\n\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n\n    switch (direction) {\n      case 'horizontal':\n      case 'vertical':\n        if (devWarningsDirection && !devWarningsDirection.has(instance)) {\n          devWarningsDirection.add(instance);\n          console.warn('The direction prop should be either \"ltr\" (default) or \"rtl\". ' + 'Please use the layout prop to specify \"vertical\" (default) or \"horizontal\" orientation.');\n        }\n\n        break;\n\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    switch (layout) {\n      case 'horizontal':\n      case 'vertical':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"layout\" prop has been specified. ' + 'Value should be either \"horizontal\" or \"vertical\". ' + (\"\\\"\" + layout + \"\\\" was specified.\"));\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    if (isHorizontal && typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Horizontal lists must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    } else if (!isHorizontal && typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Vertical lists must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE$1 = 50;\n\nvar getItemMetadata$1 = function getItemMetadata(props, index, instanceProps) {\n  var _ref = props,\n      itemSize = _ref.itemSize;\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    instanceProps.lastMeasuredIndex = index;\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem$1 = function findNearestItem(props, instanceProps, offset) {\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch$1(props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch$1(props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch$1 = function findNearestItemBinarySearch(props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata$1(props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch$1 = function findNearestItemExponentialSearch(props, instanceProps, index, offset) {\n  var itemCount = props.itemCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata$1(props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch$1(props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getEstimatedTotalSize = function getEstimatedTotalSize(_ref2, _ref3) {\n  var itemCount = _ref2.itemCount;\n  var itemMetadataMap = _ref3.itemMetadataMap,\n      estimatedItemSize = _ref3.estimatedItemSize,\n      lastMeasuredIndex = _ref3.lastMeasuredIndex;\n  var totalSizeOfMeasuredItems = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredIndex >= itemCount) {\n    lastMeasuredIndex = itemCount - 1;\n  }\n\n  if (lastMeasuredIndex >= 0) {\n    var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;\n  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;\n};\n\nvar VariableSizeList = /*#__PURE__*/createListComponent({\n  getItemOffset: function getItemOffset(props, index, instanceProps) {\n    return getItemMetadata$1(props, index, instanceProps).offset;\n  },\n  getItemSize: function getItemSize(props, index, instanceProps) {\n    return instanceProps.itemMetadataMap[index].size;\n  },\n  getEstimatedTotalSize: getEstimatedTotalSize,\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    var direction = props.direction,\n        height = props.height,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n    // To ensure it reflects actual measurements instead of just estimates.\n\n    var estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);\n    var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n    var minOffset = Math.max(0, itemMetadata.offset - size + itemMetadata.size + scrollbarSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(props, offset, instanceProps) {\n    return findNearestItem$1(props, instanceProps, offset);\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(props, startIndex, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        itemCount = props.itemCount,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, startIndex, instanceProps);\n    var maxOffset = scrollOffset + size;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < itemCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata$1(props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref4 = props,\n        estimatedItemSize = _ref4.estimatedItemSize;\n    var instanceProps = {\n      itemMetadataMap: {},\n      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE$1,\n      lastMeasuredIndex: -1\n    };\n\n    instance.resetAfterIndex = function (index, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instanceProps.lastMeasuredIndex = Math.min(instanceProps.lastMeasuredIndex, index - 1); // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref5) {\n    var itemSize = _ref5.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'function') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeGrid = /*#__PURE__*/createGridComponent({\n  getColumnOffset: function getColumnOffset(_ref, index) {\n    var columnWidth = _ref.columnWidth;\n    return index * columnWidth;\n  },\n  getColumnWidth: function getColumnWidth(_ref2, index) {\n    var columnWidth = _ref2.columnWidth;\n    return columnWidth;\n  },\n  getRowOffset: function getRowOffset(_ref3, index) {\n    var rowHeight = _ref3.rowHeight;\n    return index * rowHeight;\n  },\n  getRowHeight: function getRowHeight(_ref4, index) {\n    var rowHeight = _ref4.rowHeight;\n    return rowHeight;\n  },\n  getEstimatedTotalHeight: function getEstimatedTotalHeight(_ref5) {\n    var rowCount = _ref5.rowCount,\n        rowHeight = _ref5.rowHeight;\n    return rowHeight * rowCount;\n  },\n  getEstimatedTotalWidth: function getEstimatedTotalWidth(_ref6) {\n    var columnCount = _ref6.columnCount,\n        columnWidth = _ref6.columnWidth;\n    return columnWidth * columnCount;\n  },\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(_ref7, columnIndex, align, scrollLeft, instanceProps, scrollbarSize) {\n    var columnCount = _ref7.columnCount,\n        columnWidth = _ref7.columnWidth,\n        width = _ref7.width;\n    var lastColumnOffset = Math.max(0, columnCount * columnWidth - width);\n    var maxOffset = Math.min(lastColumnOffset, columnIndex * columnWidth);\n    var minOffset = Math.max(0, columnIndex * columnWidth - width + scrollbarSize + columnWidth);\n\n    if (align === 'smart') {\n      if (scrollLeft >= minOffset - width && scrollLeft <= maxOffset + width) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(width / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastColumnOffset + Math.floor(width / 2)) {\n          return lastColumnOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollLeft >= minOffset && scrollLeft <= maxOffset) {\n          return scrollLeft;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollLeft < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(_ref8, rowIndex, align, scrollTop, instanceProps, scrollbarSize) {\n    var rowHeight = _ref8.rowHeight,\n        height = _ref8.height,\n        rowCount = _ref8.rowCount;\n    var lastRowOffset = Math.max(0, rowCount * rowHeight - height);\n    var maxOffset = Math.min(lastRowOffset, rowIndex * rowHeight);\n    var minOffset = Math.max(0, rowIndex * rowHeight - height + scrollbarSize + rowHeight);\n\n    if (align === 'smart') {\n      if (scrollTop >= minOffset - height && scrollTop <= maxOffset + height) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(height / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastRowOffset + Math.floor(height / 2)) {\n          return lastRowOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollTop >= minOffset && scrollTop <= maxOffset) {\n          return scrollTop;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollTop < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(_ref9, scrollLeft) {\n    var columnWidth = _ref9.columnWidth,\n        columnCount = _ref9.columnCount;\n    return Math.max(0, Math.min(columnCount - 1, Math.floor(scrollLeft / columnWidth)));\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(_ref10, startIndex, scrollLeft) {\n    var columnWidth = _ref10.columnWidth,\n        columnCount = _ref10.columnCount,\n        width = _ref10.width;\n    var left = startIndex * columnWidth;\n    var numVisibleColumns = Math.ceil((width + scrollLeft - left) / columnWidth);\n    return Math.max(0, Math.min(columnCount - 1, startIndex + numVisibleColumns - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(_ref11, scrollTop) {\n    var rowHeight = _ref11.rowHeight,\n        rowCount = _ref11.rowCount;\n    return Math.max(0, Math.min(rowCount - 1, Math.floor(scrollTop / rowHeight)));\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(_ref12, startIndex, scrollTop) {\n    var rowHeight = _ref12.rowHeight,\n        rowCount = _ref12.rowCount,\n        height = _ref12.height;\n    var top = startIndex * rowHeight;\n    var numVisibleRows = Math.ceil((height + scrollTop - top) / rowHeight);\n    return Math.max(0, Math.min(rowCount - 1, startIndex + numVisibleRows - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref13) {\n    var columnWidth = _ref13.columnWidth,\n        rowHeight = _ref13.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'number') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      }\n\n      if (typeof rowHeight !== 'number') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeList = /*#__PURE__*/createListComponent({\n  getItemOffset: function getItemOffset(_ref, index) {\n    var itemSize = _ref.itemSize;\n    return index * itemSize;\n  },\n  getItemSize: function getItemSize(_ref2, index) {\n    var itemSize = _ref2.itemSize;\n    return itemSize;\n  },\n  getEstimatedTotalSize: function getEstimatedTotalSize(_ref3) {\n    var itemCount = _ref3.itemCount,\n        itemSize = _ref3.itemSize;\n    return itemSize * itemCount;\n  },\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(_ref4, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    var direction = _ref4.direction,\n        height = _ref4.height,\n        itemCount = _ref4.itemCount,\n        itemSize = _ref4.itemSize,\n        layout = _ref4.layout,\n        width = _ref4.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var lastItemOffset = Math.max(0, itemCount * itemSize - size);\n    var maxOffset = Math.min(lastItemOffset, index * itemSize);\n    var minOffset = Math.max(0, index * itemSize - size + itemSize + scrollbarSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        {\n          // \"Centered\" offset is usually the average of the min and max.\n          // But near the edges of the list, this doesn't hold true.\n          var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n          if (middleOffset < Math.ceil(size / 2)) {\n            return 0; // near the beginning\n          } else if (middleOffset > lastItemOffset + Math.floor(size / 2)) {\n            return lastItemOffset; // near the end\n          } else {\n            return middleOffset;\n          }\n        }\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(_ref5, offset) {\n    var itemCount = _ref5.itemCount,\n        itemSize = _ref5.itemSize;\n    return Math.max(0, Math.min(itemCount - 1, Math.floor(offset / itemSize)));\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(_ref6, startIndex, scrollOffset) {\n    var direction = _ref6.direction,\n        height = _ref6.height,\n        itemCount = _ref6.itemCount,\n        itemSize = _ref6.itemSize,\n        layout = _ref6.layout,\n        width = _ref6.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var offset = startIndex * itemSize;\n    var size = isHorizontal ? width : height;\n    var numVisibleItems = Math.ceil((size + scrollOffset - offset) / itemSize);\n    return Math.max(0, Math.min(itemCount - 1, startIndex + numVisibleItems - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref7) {\n    var itemSize = _ref7.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'number') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\n// Pulled from react-compat\n// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349\nfunction shallowDiffers(prev, next) {\n  for (var attribute in prev) {\n    if (!(attribute in next)) {\n      return true;\n    }\n  }\n\n  for (var _attribute in next) {\n    if (prev[_attribute] !== next[_attribute]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar _excluded = [\"style\"],\n    _excluded2 = [\"style\"];\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-api.html#reactmemo\n\nfunction areEqual(prevProps, nextProps) {\n  var prevStyle = prevProps.style,\n      prevRest = _objectWithoutPropertiesLoose(prevProps, _excluded);\n\n  var nextStyle = nextProps.style,\n      nextRest = _objectWithoutPropertiesLoose(nextProps, _excluded2);\n\n  return !shallowDiffers(prevStyle, nextStyle) && !shallowDiffers(prevRest, nextRest);\n}\n\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-component.html#shouldcomponentupdate\n\nfunction shouldComponentUpdate(nextProps, nextState) {\n  return !areEqual(this.props, nextProps) || shallowDiffers(this.state, nextState);\n}\n\nexport { FixedSizeGrid, FixedSizeList, VariableSizeGrid, VariableSizeList, areEqual, shouldComponentUpdate };\n//# sourceMappingURL=index.esm.js.map\n","import { css, cx } from '@emotion/css';\nimport { sortBy } from 'lodash';\nimport { ChangeEvent } from 'react';\nimport * as React from 'react';\nimport { FixedSizeList } from 'react-window';\n\nimport { CoreApp, GrafanaTheme2, TimeRange } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport {\n  Button,\n  HighlightPart,\n  Input,\n  Label,\n  LoadingPlaceholder,\n  withTheme2,\n  BrowserLabel as LokiLabel,\n  fuzzyMatch,\n  Stack,\n} from '@grafana/ui';\n\nimport LokiLanguageProvider from '../LanguageProvider';\nimport { escapeLabelValueInExactSelector, escapeLabelValueInRegexSelector } from '../languageUtils';\n\n// Hard limit on labels to render\nconst MAX_LABEL_COUNT = 1000;\nconst MAX_VALUE_COUNT = 10000;\nconst MAX_AUTO_SELECT = 4;\nconst EMPTY_SELECTOR = '{}';\nconst collator = new Intl.Collator('en', { sensitivity: 'accent' });\n\nexport interface BrowserProps {\n  languageProvider: LokiLanguageProvider;\n  onChange: (selector: string) => void;\n  theme: GrafanaTheme2;\n  app?: CoreApp;\n  autoSelect?: number;\n  timeRange?: TimeRange;\n  hide?: () => void;\n  lastUsedLabels: string[];\n  storeLastUsedLabels: (labels: string[]) => void;\n  deleteLastUsedLabels: () => void;\n}\n\ninterface BrowserState {\n  labels: SelectableLabel[];\n  searchTerm: string;\n  status: string;\n  error: string;\n  validationStatus: string;\n}\n\ninterface FacettableValue {\n  name: string;\n  selected?: boolean;\n  highlightParts?: HighlightPart[];\n  order?: number;\n}\n\nexport interface SelectableLabel {\n  name: string;\n  selected?: boolean;\n  loading?: boolean;\n  values?: FacettableValue[];\n  hidden?: boolean;\n  facets?: number;\n}\n\nexport function buildSelector(labels: SelectableLabel[]): string {\n  const selectedLabels = [];\n  for (const label of labels) {\n    if (label.selected && label.values && label.values.length > 0) {\n      const selectedValues = label.values\n        .filter((value) => value.selected)\n        .map((value) => value.name)\n        .sort(collator.compare); // sort selected values alphabetically\n      if (selectedValues.length > 1) {\n        selectedLabels.push(`${label.name}=~\"${selectedValues.map(escapeLabelValueInRegexSelector).join('|')}\"`);\n      } else if (selectedValues.length === 1) {\n        selectedLabels.push(`${label.name}=\"${escapeLabelValueInExactSelector(selectedValues[0])}\"`);\n      }\n    }\n  }\n  return ['{', selectedLabels.join(','), '}'].join('');\n}\n\nexport function facetLabels(\n  labels: SelectableLabel[],\n  possibleLabels: Record<string, string[]>,\n  lastFacetted?: string\n): SelectableLabel[] {\n  return labels.map((label) => {\n    const possibleValues = possibleLabels[label.name];\n    if (possibleValues) {\n      let existingValues: FacettableValue[];\n      if (label.name === lastFacetted && label.values) {\n        // Facetting this label, show all values\n        existingValues = label.values;\n      } else {\n        // Keep selection in other facets\n        const selectedValues: Set<string> = new Set(\n          label.values?.filter((value) => value.selected).map((value) => value.name) || []\n        );\n        // Values for this label have not been requested yet, let's use the facetted ones as the initial values\n        existingValues = possibleValues\n          .slice()\n          .sort(collator.compare) // sort raw label values alphabetically\n          .map((value) => ({\n            name: value,\n            selected: selectedValues.has(value),\n          }));\n      }\n      return { ...label, loading: false, values: existingValues, facets: existingValues.length };\n    }\n\n    // Label is facetted out, hide all values\n    return { ...label, loading: false, hidden: !possibleValues, values: undefined, facets: 0 };\n  });\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    backgroundColor: theme.colors.background.secondary,\n    width: '100%',\n  }),\n  wrapperPadding: css({\n    padding: theme.spacing(2),\n  }),\n  list: css({\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexWrap: 'wrap',\n    maxHeight: '200px',\n    overflow: 'auto',\n  }),\n  section: css({\n    '& + &': {\n      margin: theme.spacing(2, 0),\n    },\n\n    position: 'relative',\n  }),\n  footerSectionStyles: css({\n    padding: theme.spacing(1),\n    backgroundColor: theme.colors.background.primary,\n    position: 'sticky',\n    bottom: theme.spacing(-3) /* offset the padding on modal */,\n    left: 0,\n  }),\n  selector: css({\n    fontFamily: theme.typography.fontFamilyMonospace,\n    marginBottom: theme.spacing(1),\n    width: '100%',\n  }),\n  status: css({\n    marginBottom: theme.spacing(1),\n    color: theme.colors.text.secondary,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    [theme.transitions.handleMotion('no-preference', 'reduce')]: {\n      transition: 'opacity 100ms linear',\n    },\n    opacity: 0,\n    fontSize: theme.typography.bodySmall.fontSize,\n    height: `calc(${theme.typography.bodySmall.fontSize} + 10px)`,\n  }),\n  statusShowing: css({\n    opacity: 1,\n  }),\n  error: css({\n    color: theme.colors.error.main,\n  }),\n  valueList: css({\n    marginRight: theme.spacing(1),\n    resize: 'horizontal',\n  }),\n  valueListWrapper: css({\n    borderLeft: `1px solid ${theme.colors.border.medium}`,\n    margin: theme.spacing(1, 0),\n    padding: theme.spacing(1, 0, 1, 1),\n  }),\n  valueListArea: css({\n    display: 'flex',\n    flexWrap: 'wrap',\n    marginTop: theme.spacing(1),\n  }),\n  valueTitle: css({\n    marginLeft: theme.spacing(-0.5),\n    marginBottom: theme.spacing(1),\n  }),\n  validationStatus: css({\n    padding: theme.spacing(0.5),\n    marginBottom: theme.spacing(1),\n    color: theme.colors.text.maxContrast,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  }),\n});\n\nexport class UnthemedLokiLabelBrowser extends React.Component<BrowserProps, BrowserState> {\n  state: BrowserState = {\n    labels: [],\n    searchTerm: '',\n    status: 'Ready',\n    error: '',\n    validationStatus: '',\n  };\n\n  onChangeSearch = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ searchTerm: event.target.value });\n  };\n\n  onClickRunLogsQuery = () => {\n    reportInteraction('grafana_loki_label_browser_closed', {\n      app: this.props.app,\n      closeType: 'showLogsButton',\n    });\n    const selector = buildSelector(this.state.labels);\n    this.props.onChange(selector);\n  };\n\n  onClickRunMetricsQuery = () => {\n    reportInteraction('grafana_loki_label_browser_closed', {\n      app: this.props.app,\n      closeType: 'showLogsRateButton',\n    });\n    const selector = buildSelector(this.state.labels);\n    const query = `rate(${selector}[$__auto])`;\n    this.props.onChange(query);\n  };\n\n  onClickClear = () => {\n    this.setState((state) => {\n      const labels: SelectableLabel[] = state.labels.map((label) => ({\n        ...label,\n        values: undefined,\n        selected: false,\n        loading: false,\n        hidden: false,\n        facets: undefined,\n      }));\n      return { labels, searchTerm: '', status: '', error: '', validationStatus: '' };\n    });\n    this.props.deleteLastUsedLabels();\n  };\n\n  onClickLabel = (name: string, value: string | undefined, event: React.MouseEvent<HTMLElement>) => {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label) {\n      return;\n    }\n    // Toggle selected state\n    const selected = !label.selected;\n    let nextValue: Partial<SelectableLabel> = { selected };\n    if (label.values && !selected) {\n      // Deselect all values if label was deselected\n      const values = label.values.map((value) => ({ ...value, selected: false }));\n      nextValue = { ...nextValue, facets: 0, values };\n    }\n    // Resetting search to prevent empty results\n    this.setState({ searchTerm: '' });\n    this.updateLabelState(name, nextValue, '', () => this.doFacettingForLabel(name));\n  };\n\n  onClickValue = (name: string, value: string | undefined, event: React.MouseEvent<HTMLElement>) => {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label || !label.values) {\n      return;\n    }\n    // Resetting search to prevent empty results\n    this.setState({ searchTerm: '' });\n    // Toggling value for selected label, leaving other values intact\n    const values = label.values.map((v) => ({ ...v, selected: v.name === value ? !v.selected : v.selected }));\n    this.updateLabelState(name, { values }, '', () => this.doFacetting(name));\n  };\n\n  onClickValidate = () => {\n    const selector = buildSelector(this.state.labels);\n    this.validateSelector(selector);\n  };\n\n  updateLabelState(name: string, updatedFields: Partial<SelectableLabel>, status = '', cb?: () => void) {\n    this.setState((state) => {\n      const labels: SelectableLabel[] = state.labels.map((label) => {\n        if (label.name === name) {\n          return { ...label, ...updatedFields };\n        }\n        return label;\n      });\n      // New status overrides errors\n      const error = status ? '' : state.error;\n      return { labels, status, error, validationStatus: '' };\n    }, cb);\n  }\n\n  componentDidMount() {\n    const { languageProvider, autoSelect = MAX_AUTO_SELECT, lastUsedLabels, timeRange } = this.props;\n    if (languageProvider) {\n      const selectedLabels: string[] = lastUsedLabels;\n      languageProvider.start(timeRange).then(() => {\n        let rawLabels: string[] = languageProvider.getLabelKeys();\n        if (rawLabels.length > MAX_LABEL_COUNT) {\n          const error = `Too many labels found (showing only ${MAX_LABEL_COUNT} of ${rawLabels.length})`;\n          rawLabels = rawLabels.slice(0, MAX_LABEL_COUNT);\n          this.setState({ error });\n        }\n        // Auto-select all labels if label list is small enough\n        const labels: SelectableLabel[] = rawLabels.map((label, i, arr) => ({\n          name: label,\n          selected: (arr.length <= autoSelect && selectedLabels.length === 0) || selectedLabels.includes(label),\n          loading: false,\n        }));\n        // Pre-fetch values for selected labels\n        this.setState({ labels }, () => {\n          this.state.labels.forEach((label) => {\n            if (label.selected) {\n              this.fetchValues(label.name, EMPTY_SELECTOR);\n            }\n          });\n        });\n      });\n    }\n  }\n\n  doFacettingForLabel(name: string) {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label) {\n      return;\n    }\n    const selectedLabels = this.state.labels.filter((label) => label.selected).map((label) => label.name);\n    this.props.storeLastUsedLabels(selectedLabels);\n    if (label.selected) {\n      // Refetch values for newly selected label...\n      if (!label.values) {\n        this.fetchValues(name, buildSelector(this.state.labels));\n      }\n    } else {\n      // Only need to facet when deselecting labels\n      this.doFacetting();\n    }\n  }\n\n  doFacetting = (lastFacetted?: string) => {\n    const selector = buildSelector(this.state.labels);\n    if (selector === EMPTY_SELECTOR) {\n      // Clear up facetting\n      const labels: SelectableLabel[] = this.state.labels.map((label) => {\n        return { ...label, facets: 0, values: undefined, hidden: false };\n      });\n      this.setState({ labels }, () => {\n        // Get fresh set of values\n        this.state.labels.forEach((label) => label.selected && this.fetchValues(label.name, selector));\n      });\n    } else {\n      // Do facetting\n      this.fetchSeries(selector, lastFacetted);\n    }\n  };\n\n  async fetchValues(name: string, selector: string) {\n    const { languageProvider, timeRange } = this.props;\n    this.updateLabelState(name, { loading: true }, `Fetching values for ${name}`);\n    try {\n      let rawValues = await languageProvider.fetchLabelValues(name, { timeRange });\n      // If selector changed, clear loading state and discard result by returning early\n      if (selector !== buildSelector(this.state.labels)) {\n        this.updateLabelState(name, { loading: false }, '');\n        return;\n      }\n      if (rawValues.length > MAX_VALUE_COUNT) {\n        const error = `Too many values for ${name} (showing only ${MAX_VALUE_COUNT} of ${rawValues.length})`;\n        rawValues = rawValues.slice(0, MAX_VALUE_COUNT);\n        this.setState({ error });\n      }\n      const values: FacettableValue[] = rawValues.map((value) => ({ name: value }));\n      this.updateLabelState(name, { values, loading: false });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async fetchSeries(selector: string, lastFacetted?: string) {\n    const { languageProvider, timeRange } = this.props;\n    if (lastFacetted) {\n      this.updateLabelState(lastFacetted, { loading: true }, `Loading labels for ${selector}`);\n    }\n    try {\n      const possibleLabels = await languageProvider.fetchSeriesLabels(selector, { timeRange });\n      // If selector changed, clear loading state and discard result by returning early\n      if (selector !== buildSelector(this.state.labels)) {\n        if (lastFacetted) {\n          this.updateLabelState(lastFacetted, { loading: false });\n        }\n        return;\n      }\n      if (Object.keys(possibleLabels).length === 0) {\n        this.setState({ error: `Empty results, no matching label for ${selector}` });\n        return;\n      }\n      const labels: SelectableLabel[] = facetLabels(this.state.labels, possibleLabels, lastFacetted);\n      this.setState({ labels, error: '' });\n      if (lastFacetted) {\n        this.updateLabelState(lastFacetted, { loading: false });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async validateSelector(selector: string) {\n    const { languageProvider, timeRange } = this.props;\n    this.setState({ validationStatus: `Validating selector ${selector}`, error: '' });\n    const streams = await languageProvider.fetchSeries(selector, { timeRange });\n    this.setState({ validationStatus: `Selector is valid (${streams.length} streams found)` });\n  }\n\n  render() {\n    const { theme } = this.props;\n    const { labels, searchTerm, status, error, validationStatus } = this.state;\n    if (labels.length === 0) {\n      return <LoadingPlaceholder text=\"Loading labels...\" />;\n    }\n    const styles = getStyles(theme);\n    const selector = buildSelector(this.state.labels);\n    const empty = selector === EMPTY_SELECTOR;\n\n    let selectedLabels = labels.filter((label) => label.selected && label.values);\n    if (searchTerm) {\n      selectedLabels = selectedLabels.map((label) => {\n        const searchResults = label.values!.filter((value) => {\n          // Always return selected values\n          if (value.selected) {\n            value.highlightParts = undefined;\n            return true;\n          }\n          const fuzzyMatchResult = fuzzyMatch(value.name.toLowerCase(), searchTerm.toLowerCase());\n          if (fuzzyMatchResult.found) {\n            value.highlightParts = fuzzyMatchResult.ranges;\n            value.order = fuzzyMatchResult.distance;\n            return true;\n          } else {\n            return false;\n          }\n        });\n        return {\n          ...label,\n          values: sortBy(searchResults, (value) => (value.selected ? -Infinity : value.order)),\n        };\n      });\n    } else {\n      // Clear highlight parts when searchTerm is cleared\n      selectedLabels = this.state.labels\n        .filter((label) => label.selected && label.values)\n        .map((label) => ({\n          ...label,\n          values: label?.values ? label.values.map((value) => ({ ...value, highlightParts: undefined })) : [],\n        }));\n    }\n\n    return (\n      <>\n        <div className={styles.wrapper}>\n          <div className={cx(styles.section, styles.wrapperPadding)}>\n            <Label description=\"Which labels would you like to consider for your search?\">\n              1. Select labels to search in\n            </Label>\n            <div className={styles.list}>\n              {labels.map((label) => (\n                <LokiLabel\n                  key={label.name}\n                  name={label.name}\n                  loading={label.loading}\n                  active={label.selected}\n                  hidden={label.hidden}\n                  facets={label.facets}\n                  onClick={this.onClickLabel}\n                />\n              ))}\n            </div>\n          </div>\n          <div className={cx(styles.section, styles.wrapperPadding)}>\n            <Label description=\"Choose the label values that you would like to use for the query. Use the search field to find values across selected labels.\">\n              2. Find values for the selected labels\n            </Label>\n            <div>\n              <Input\n                onChange={this.onChangeSearch}\n                aria-label=\"Filter expression for values\"\n                value={searchTerm}\n                placeholder={'Enter a label value'}\n              />\n            </div>\n            <div className={styles.valueListArea}>\n              {selectedLabels.map((label) => (\n                <div role=\"list\" key={label.name} className={styles.valueListWrapper}>\n                  <div className={styles.valueTitle} aria-label={`Values for ${label.name}`}>\n                    <LokiLabel\n                      name={label.name}\n                      loading={label.loading}\n                      active={label.selected}\n                      hidden={label.hidden}\n                      //If no facets, we want to show number of all label values\n                      facets={label.facets || label.values?.length}\n                      onClick={this.onClickLabel}\n                    />\n                  </div>\n                  <FixedSizeList\n                    height={200}\n                    itemCount={label.values?.length || 0}\n                    itemSize={28}\n                    itemKey={(i) => label.values?.[i].name ?? i}\n                    width={200}\n                    className={styles.valueList}\n                  >\n                    {({ index, style }) => {\n                      const value = label.values?.[index];\n                      if (!value) {\n                        return null;\n                      }\n                      return (\n                        <div style={style}>\n                          <LokiLabel\n                            name={label.name}\n                            value={value?.name}\n                            active={value?.selected}\n                            highlightParts={value?.highlightParts}\n                            onClick={this.onClickValue}\n                            searchTerm={searchTerm}\n                          />\n                        </div>\n                      );\n                    }}\n                  </FixedSizeList>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n        <div className={styles.footerSectionStyles}>\n          <Label>3. Resulting selector</Label>\n          <pre aria-label=\"selector\" className={styles.selector}>\n            {selector}\n          </pre>\n          {validationStatus && <div className={styles.validationStatus}>{validationStatus}</div>}\n          <div className={cx(styles.status, (status || error) && styles.statusShowing)}>\n            <span className={error ? styles.error : ''}>{error || status}</span>\n          </div>\n          <Stack gap={1}>\n            <Button aria-label=\"Use selector as logs button\" disabled={empty} onClick={this.onClickRunLogsQuery}>\n              Show logs\n            </Button>\n            <Button\n              aria-label=\"Use selector as metrics button\"\n              variant=\"secondary\"\n              disabled={empty}\n              onClick={this.onClickRunMetricsQuery}\n            >\n              Show logs rate\n            </Button>\n            <Button\n              aria-label=\"Validate submit button\"\n              variant=\"secondary\"\n              disabled={empty}\n              onClick={this.onClickValidate}\n            >\n              Validate selector\n            </Button>\n            <Button aria-label=\"Selector clear button\" variant=\"secondary\" onClick={this.onClickClear}>\n              Clear\n            </Button>\n          </Stack>\n        </div>\n      </>\n    );\n  }\n}\n\nexport const LokiLabelBrowser = withTheme2(UnthemedLokiLabelBrowser);\n","import { css } from '@emotion/css';\nimport { useState, useEffect } from 'react';\n\nimport { CoreApp, GrafanaTheme2, LocalStorageValueProvider, TimeRange } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { LoadingPlaceholder, Modal, useStyles2 } from '@grafana/ui';\n\nimport { LokiLabelBrowser } from '../../components/LokiLabelBrowser';\nimport { LokiDatasource } from '../../datasource';\nimport { LokiQuery } from '../../types';\n\nexport interface Props {\n  isOpen: boolean;\n  datasource: LokiDatasource;\n  query: LokiQuery;\n  app?: CoreApp;\n  timeRange?: TimeRange;\n  onClose: () => void;\n  onChange: (query: LokiQuery) => void;\n  onRunQuery: () => void;\n}\n\nexport const LabelBrowserModal = (props: Props) => {\n  const { isOpen, onClose, datasource, app, timeRange } = props;\n  const [labelsLoaded, setLabelsLoaded] = useState(false);\n  const [hasLogLabels, setHasLogLabels] = useState(false);\n  const LAST_USED_LABELS_KEY = 'grafana.datasources.loki.browser.labels';\n\n  const styles = useStyles2(getStyles);\n\n  useEffect(() => {\n    if (!isOpen) {\n      return;\n    }\n\n    datasource.languageProvider.fetchLabels({ timeRange }).then((labels) => {\n      setLabelsLoaded(true);\n      setHasLogLabels(labels.length > 0);\n    });\n  }, [datasource, isOpen, timeRange]);\n\n  const changeQuery = (value: string) => {\n    const { query, onChange, onRunQuery } = props;\n    const nextQuery = { ...query, expr: value };\n    onChange(nextQuery);\n    onRunQuery();\n  };\n\n  const onChange = (selector: string) => {\n    changeQuery(selector);\n    onClose();\n  };\n\n  const reportInteractionAndClose = () => {\n    reportInteraction('grafana_loki_label_browser_closed', {\n      app,\n      closeType: 'modalClose',\n    });\n    onClose();\n  };\n\n  return (\n    <Modal isOpen={isOpen} title=\"Label browser\" onDismiss={reportInteractionAndClose} className={styles.modal}>\n      {!labelsLoaded && <LoadingPlaceholder text=\"Loading labels...\" />}\n      {labelsLoaded && !hasLogLabels && <p>No labels found.</p>}\n      {labelsLoaded && hasLogLabels && (\n        <LocalStorageValueProvider<string[]> storageKey={LAST_USED_LABELS_KEY} defaultValue={[]}>\n          {(lastUsedLabels, onLastUsedLabelsSave, onLastUsedLabelsDelete) => {\n            return (\n              <LokiLabelBrowser\n                languageProvider={datasource.languageProvider}\n                onChange={onChange}\n                lastUsedLabels={lastUsedLabels}\n                storeLastUsedLabels={onLastUsedLabelsSave}\n                deleteLastUsedLabels={onLastUsedLabelsDelete}\n                app={app}\n                timeRange={timeRange}\n              />\n            );\n          }}\n        </LocalStorageValueProvider>\n      )}\n    </Modal>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    modal: css({\n      width: '85vw',\n      [theme.breakpoints.down('md')]: {\n        width: '100%',\n      },\n    }),\n  };\n};\n","// src/utils/env.ts\nvar NOTHING = Symbol.for(\"immer-nothing\");\nvar DRAFTABLE = Symbol.for(\"immer-draftable\");\nvar DRAFT_STATE = Symbol.for(\"immer-state\");\n\n// src/utils/errors.ts\nvar errors = process.env.NODE_ENV !== \"production\" ? [\n  // All error codes, starting by 0:\n  function(plugin) {\n    return `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`;\n  },\n  function(thing) {\n    return `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`;\n  },\n  \"This object has been frozen and should not be mutated\",\n  function(data) {\n    return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + data;\n  },\n  \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n  \"Immer forbids circular references\",\n  \"The first or second argument to `produce` must be a function\",\n  \"The third argument to `produce` must be a function or undefined\",\n  \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n  \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n  function(thing) {\n    return `'current' expects a draft, got: ${thing}`;\n  },\n  \"Object.defineProperty() cannot be used on an Immer draft\",\n  \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n  \"Immer only supports deleting array indices\",\n  \"Immer only supports setting array indices and the 'length' property\",\n  function(thing) {\n    return `'original' expects a draft, got: ${thing}`;\n  }\n  // Note: if more errors are added, the errorOffset in Patches.ts should be increased\n  // See Patches.ts for additional errors\n] : [];\nfunction die(error, ...args) {\n  if (process.env.NODE_ENV !== \"production\") {\n    const e = errors[error];\n    const msg = typeof e === \"function\" ? e.apply(null, args) : e;\n    throw new Error(`[Immer] ${msg}`);\n  }\n  throw new Error(\n    `[Immer] minified error nr: ${error}. Full error at: https://bit.ly/3cXEKWf`\n  );\n}\n\n// src/utils/common.ts\nvar getPrototypeOf = Object.getPrototypeOf;\nfunction isDraft(value) {\n  return !!value && !!value[DRAFT_STATE];\n}\nfunction isDraftable(value) {\n  if (!value)\n    return false;\n  return isPlainObject(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!value.constructor?.[DRAFTABLE] || isMap(value) || isSet(value);\n}\nvar objectCtorString = Object.prototype.constructor.toString();\nfunction isPlainObject(value) {\n  if (!value || typeof value !== \"object\")\n    return false;\n  const proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  const Ctor = Object.hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n  if (Ctor === Object)\n    return true;\n  return typeof Ctor == \"function\" && Function.toString.call(Ctor) === objectCtorString;\n}\nfunction original(value) {\n  if (!isDraft(value))\n    die(15, value);\n  return value[DRAFT_STATE].base_;\n}\nfunction each(obj, iter) {\n  if (getArchtype(obj) === 0 /* Object */) {\n    Reflect.ownKeys(obj).forEach((key) => {\n      iter(key, obj[key], obj);\n    });\n  } else {\n    obj.forEach((entry, index) => iter(index, entry, obj));\n  }\n}\nfunction getArchtype(thing) {\n  const state = thing[DRAFT_STATE];\n  return state ? state.type_ : Array.isArray(thing) ? 1 /* Array */ : isMap(thing) ? 2 /* Map */ : isSet(thing) ? 3 /* Set */ : 0 /* Object */;\n}\nfunction has(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);\n}\nfunction get(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.get(prop) : thing[prop];\n}\nfunction set(thing, propOrOldValue, value) {\n  const t = getArchtype(thing);\n  if (t === 2 /* Map */)\n    thing.set(propOrOldValue, value);\n  else if (t === 3 /* Set */) {\n    thing.add(value);\n  } else\n    thing[propOrOldValue] = value;\n}\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction isMap(target) {\n  return target instanceof Map;\n}\nfunction isSet(target) {\n  return target instanceof Set;\n}\nfunction latest(state) {\n  return state.copy_ || state.base_;\n}\nfunction shallowCopy(base, strict) {\n  if (isMap(base)) {\n    return new Map(base);\n  }\n  if (isSet(base)) {\n    return new Set(base);\n  }\n  if (Array.isArray(base))\n    return Array.prototype.slice.call(base);\n  const isPlain = isPlainObject(base);\n  if (strict === true || strict === \"class_only\" && !isPlain) {\n    const descriptors = Object.getOwnPropertyDescriptors(base);\n    delete descriptors[DRAFT_STATE];\n    let keys = Reflect.ownKeys(descriptors);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const desc = descriptors[key];\n      if (desc.writable === false) {\n        desc.writable = true;\n        desc.configurable = true;\n      }\n      if (desc.get || desc.set)\n        descriptors[key] = {\n          configurable: true,\n          writable: true,\n          // could live with !!desc.set as well here...\n          enumerable: desc.enumerable,\n          value: base[key]\n        };\n    }\n    return Object.create(getPrototypeOf(base), descriptors);\n  } else {\n    const proto = getPrototypeOf(base);\n    if (proto !== null && isPlain) {\n      return { ...base };\n    }\n    const obj = Object.create(proto);\n    return Object.assign(obj, base);\n  }\n}\nfunction freeze(obj, deep = false) {\n  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))\n    return obj;\n  if (getArchtype(obj) > 1) {\n    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;\n  }\n  Object.freeze(obj);\n  if (deep)\n    Object.entries(obj).forEach(([key, value]) => freeze(value, true));\n  return obj;\n}\nfunction dontMutateFrozenCollections() {\n  die(2);\n}\nfunction isFrozen(obj) {\n  return Object.isFrozen(obj);\n}\n\n// src/utils/plugins.ts\nvar plugins = {};\nfunction getPlugin(pluginKey) {\n  const plugin = plugins[pluginKey];\n  if (!plugin) {\n    die(0, pluginKey);\n  }\n  return plugin;\n}\nfunction loadPlugin(pluginKey, implementation) {\n  if (!plugins[pluginKey])\n    plugins[pluginKey] = implementation;\n}\n\n// src/core/scope.ts\nvar currentScope;\nfunction getCurrentScope() {\n  return currentScope;\n}\nfunction createScope(parent_, immer_) {\n  return {\n    drafts_: [],\n    parent_,\n    immer_,\n    // Whenever the modified draft contains a draft from another scope, we\n    // need to prevent auto-freezing so the unowned draft can be finalized.\n    canAutoFreeze_: true,\n    unfinalizedDrafts_: 0\n  };\n}\nfunction usePatchesInScope(scope, patchListener) {\n  if (patchListener) {\n    getPlugin(\"Patches\");\n    scope.patches_ = [];\n    scope.inversePatches_ = [];\n    scope.patchListener_ = patchListener;\n  }\n}\nfunction revokeScope(scope) {\n  leaveScope(scope);\n  scope.drafts_.forEach(revokeDraft);\n  scope.drafts_ = null;\n}\nfunction leaveScope(scope) {\n  if (scope === currentScope) {\n    currentScope = scope.parent_;\n  }\n}\nfunction enterScope(immer2) {\n  return currentScope = createScope(currentScope, immer2);\n}\nfunction revokeDraft(draft) {\n  const state = draft[DRAFT_STATE];\n  if (state.type_ === 0 /* Object */ || state.type_ === 1 /* Array */)\n    state.revoke_();\n  else\n    state.revoked_ = true;\n}\n\n// src/core/finalize.ts\nfunction processResult(result, scope) {\n  scope.unfinalizedDrafts_ = scope.drafts_.length;\n  const baseDraft = scope.drafts_[0];\n  const isReplaced = result !== void 0 && result !== baseDraft;\n  if (isReplaced) {\n    if (baseDraft[DRAFT_STATE].modified_) {\n      revokeScope(scope);\n      die(4);\n    }\n    if (isDraftable(result)) {\n      result = finalize(scope, result);\n      if (!scope.parent_)\n        maybeFreeze(scope, result);\n    }\n    if (scope.patches_) {\n      getPlugin(\"Patches\").generateReplacementPatches_(\n        baseDraft[DRAFT_STATE].base_,\n        result,\n        scope.patches_,\n        scope.inversePatches_\n      );\n    }\n  } else {\n    result = finalize(scope, baseDraft, []);\n  }\n  revokeScope(scope);\n  if (scope.patches_) {\n    scope.patchListener_(scope.patches_, scope.inversePatches_);\n  }\n  return result !== NOTHING ? result : void 0;\n}\nfunction finalize(rootScope, value, path) {\n  if (isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  if (!state) {\n    each(\n      value,\n      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path)\n    );\n    return value;\n  }\n  if (state.scope_ !== rootScope)\n    return value;\n  if (!state.modified_) {\n    maybeFreeze(rootScope, state.base_, true);\n    return state.base_;\n  }\n  if (!state.finalized_) {\n    state.finalized_ = true;\n    state.scope_.unfinalizedDrafts_--;\n    const result = state.copy_;\n    let resultEach = result;\n    let isSet2 = false;\n    if (state.type_ === 3 /* Set */) {\n      resultEach = new Set(result);\n      result.clear();\n      isSet2 = true;\n    }\n    each(\n      resultEach,\n      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path, isSet2)\n    );\n    maybeFreeze(rootScope, result, false);\n    if (path && rootScope.patches_) {\n      getPlugin(\"Patches\").generatePatches_(\n        state,\n        path,\n        rootScope.patches_,\n        rootScope.inversePatches_\n      );\n    }\n  }\n  return state.copy_;\n}\nfunction finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {\n  if (process.env.NODE_ENV !== \"production\" && childValue === targetObject)\n    die(5);\n  if (isDraft(childValue)) {\n    const path = rootPath && parentState && parentState.type_ !== 3 /* Set */ && // Set objects are atomic since they have no keys.\n    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;\n    const res = finalize(rootScope, childValue, path);\n    set(targetObject, prop, res);\n    if (isDraft(res)) {\n      rootScope.canAutoFreeze_ = false;\n    } else\n      return;\n  } else if (targetIsSet) {\n    targetObject.add(childValue);\n  }\n  if (isDraftable(childValue) && !isFrozen(childValue)) {\n    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n      return;\n    }\n    finalize(rootScope, childValue);\n    if ((!parentState || !parentState.scope_.parent_) && typeof prop !== \"symbol\" && Object.prototype.propertyIsEnumerable.call(targetObject, prop))\n      maybeFreeze(rootScope, childValue);\n  }\n}\nfunction maybeFreeze(scope, value, deep = false) {\n  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n    freeze(value, deep);\n  }\n}\n\n// src/core/proxy.ts\nfunction createProxyProxy(base, parent) {\n  const isArray = Array.isArray(base);\n  const state = {\n    type_: isArray ? 1 /* Array */ : 0 /* Object */,\n    // Track which produce call this is associated with.\n    scope_: parent ? parent.scope_ : getCurrentScope(),\n    // True for both shallow and deep changes.\n    modified_: false,\n    // Used during finalization.\n    finalized_: false,\n    // Track which properties have been assigned (true) or deleted (false).\n    assigned_: {},\n    // The parent draft state.\n    parent_: parent,\n    // The base state.\n    base_: base,\n    // The base proxy.\n    draft_: null,\n    // set below\n    // The base copy with any updated values.\n    copy_: null,\n    // Called by the `produce` function.\n    revoke_: null,\n    isManual_: false\n  };\n  let target = state;\n  let traps = objectTraps;\n  if (isArray) {\n    target = [state];\n    traps = arrayTraps;\n  }\n  const { revoke, proxy } = Proxy.revocable(target, traps);\n  state.draft_ = proxy;\n  state.revoke_ = revoke;\n  return proxy;\n}\nvar objectTraps = {\n  get(state, prop) {\n    if (prop === DRAFT_STATE)\n      return state;\n    const source = latest(state);\n    if (!has(source, prop)) {\n      return readPropFromProto(state, source, prop);\n    }\n    const value = source[prop];\n    if (state.finalized_ || !isDraftable(value)) {\n      return value;\n    }\n    if (value === peek(state.base_, prop)) {\n      prepareCopy(state);\n      return state.copy_[prop] = createProxy(value, state);\n    }\n    return value;\n  },\n  has(state, prop) {\n    return prop in latest(state);\n  },\n  ownKeys(state) {\n    return Reflect.ownKeys(latest(state));\n  },\n  set(state, prop, value) {\n    const desc = getDescriptorFromProto(latest(state), prop);\n    if (desc?.set) {\n      desc.set.call(state.draft_, value);\n      return true;\n    }\n    if (!state.modified_) {\n      const current2 = peek(latest(state), prop);\n      const currentState = current2?.[DRAFT_STATE];\n      if (currentState && currentState.base_ === value) {\n        state.copy_[prop] = value;\n        state.assigned_[prop] = false;\n        return true;\n      }\n      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))\n        return true;\n      prepareCopy(state);\n      markChanged(state);\n    }\n    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'\n    (value !== void 0 || prop in state.copy_) || // special case: NaN\n    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))\n      return true;\n    state.copy_[prop] = value;\n    state.assigned_[prop] = true;\n    return true;\n  },\n  deleteProperty(state, prop) {\n    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {\n      state.assigned_[prop] = false;\n      prepareCopy(state);\n      markChanged(state);\n    } else {\n      delete state.assigned_[prop];\n    }\n    if (state.copy_) {\n      delete state.copy_[prop];\n    }\n    return true;\n  },\n  // Note: We never coerce `desc.value` into an Immer draft, because we can't make\n  // the same guarantee in ES5 mode.\n  getOwnPropertyDescriptor(state, prop) {\n    const owner = latest(state);\n    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);\n    if (!desc)\n      return desc;\n    return {\n      writable: true,\n      configurable: state.type_ !== 1 /* Array */ || prop !== \"length\",\n      enumerable: desc.enumerable,\n      value: owner[prop]\n    };\n  },\n  defineProperty() {\n    die(11);\n  },\n  getPrototypeOf(state) {\n    return getPrototypeOf(state.base_);\n  },\n  setPrototypeOf() {\n    die(12);\n  }\n};\nvar arrayTraps = {};\neach(objectTraps, (key, fn) => {\n  arrayTraps[key] = function() {\n    arguments[0] = arguments[0][0];\n    return fn.apply(this, arguments);\n  };\n});\narrayTraps.deleteProperty = function(state, prop) {\n  if (process.env.NODE_ENV !== \"production\" && isNaN(parseInt(prop)))\n    die(13);\n  return arrayTraps.set.call(this, state, prop, void 0);\n};\narrayTraps.set = function(state, prop, value) {\n  if (process.env.NODE_ENV !== \"production\" && prop !== \"length\" && isNaN(parseInt(prop)))\n    die(14);\n  return objectTraps.set.call(this, state[0], prop, value, state[0]);\n};\nfunction peek(draft, prop) {\n  const state = draft[DRAFT_STATE];\n  const source = state ? latest(state) : draft;\n  return source[prop];\n}\nfunction readPropFromProto(state, source, prop) {\n  const desc = getDescriptorFromProto(source, prop);\n  return desc ? `value` in desc ? desc.value : (\n    // This is a very special case, if the prop is a getter defined by the\n    // prototype, we should invoke it with the draft as context!\n    desc.get?.call(state.draft_)\n  ) : void 0;\n}\nfunction getDescriptorFromProto(source, prop) {\n  if (!(prop in source))\n    return void 0;\n  let proto = getPrototypeOf(source);\n  while (proto) {\n    const desc = Object.getOwnPropertyDescriptor(proto, prop);\n    if (desc)\n      return desc;\n    proto = getPrototypeOf(proto);\n  }\n  return void 0;\n}\nfunction markChanged(state) {\n  if (!state.modified_) {\n    state.modified_ = true;\n    if (state.parent_) {\n      markChanged(state.parent_);\n    }\n  }\n}\nfunction prepareCopy(state) {\n  if (!state.copy_) {\n    state.copy_ = shallowCopy(\n      state.base_,\n      state.scope_.immer_.useStrictShallowCopy_\n    );\n  }\n}\n\n// src/core/immerClass.ts\nvar Immer2 = class {\n  constructor(config) {\n    this.autoFreeze_ = true;\n    this.useStrictShallowCopy_ = false;\n    /**\n     * The `produce` function takes a value and a \"recipe function\" (whose\n     * return value often depends on the base state). The recipe function is\n     * free to mutate its first argument however it wants. All mutations are\n     * only ever applied to a __copy__ of the base state.\n     *\n     * Pass only a function to create a \"curried producer\" which relieves you\n     * from passing the recipe function every time.\n     *\n     * Only plain objects and arrays are made mutable. All other objects are\n     * considered uncopyable.\n     *\n     * Note: This function is __bound__ to its `Immer` instance.\n     *\n     * @param {any} base - the initial state\n     * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified\n     * @param {Function} patchListener - optional function that will be called with all the patches produced here\n     * @returns {any} a new state, or the initial state if nothing was modified\n     */\n    this.produce = (base, recipe, patchListener) => {\n      if (typeof base === \"function\" && typeof recipe !== \"function\") {\n        const defaultBase = recipe;\n        recipe = base;\n        const self = this;\n        return function curriedProduce(base2 = defaultBase, ...args) {\n          return self.produce(base2, (draft) => recipe.call(this, draft, ...args));\n        };\n      }\n      if (typeof recipe !== \"function\")\n        die(6);\n      if (patchListener !== void 0 && typeof patchListener !== \"function\")\n        die(7);\n      let result;\n      if (isDraftable(base)) {\n        const scope = enterScope(this);\n        const proxy = createProxy(base, void 0);\n        let hasError = true;\n        try {\n          result = recipe(proxy);\n          hasError = false;\n        } finally {\n          if (hasError)\n            revokeScope(scope);\n          else\n            leaveScope(scope);\n        }\n        usePatchesInScope(scope, patchListener);\n        return processResult(result, scope);\n      } else if (!base || typeof base !== \"object\") {\n        result = recipe(base);\n        if (result === void 0)\n          result = base;\n        if (result === NOTHING)\n          result = void 0;\n        if (this.autoFreeze_)\n          freeze(result, true);\n        if (patchListener) {\n          const p = [];\n          const ip = [];\n          getPlugin(\"Patches\").generateReplacementPatches_(base, result, p, ip);\n          patchListener(p, ip);\n        }\n        return result;\n      } else\n        die(1, base);\n    };\n    this.produceWithPatches = (base, recipe) => {\n      if (typeof base === \"function\") {\n        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));\n      }\n      let patches, inversePatches;\n      const result = this.produce(base, recipe, (p, ip) => {\n        patches = p;\n        inversePatches = ip;\n      });\n      return [result, patches, inversePatches];\n    };\n    if (typeof config?.autoFreeze === \"boolean\")\n      this.setAutoFreeze(config.autoFreeze);\n    if (typeof config?.useStrictShallowCopy === \"boolean\")\n      this.setUseStrictShallowCopy(config.useStrictShallowCopy);\n  }\n  createDraft(base) {\n    if (!isDraftable(base))\n      die(8);\n    if (isDraft(base))\n      base = current(base);\n    const scope = enterScope(this);\n    const proxy = createProxy(base, void 0);\n    proxy[DRAFT_STATE].isManual_ = true;\n    leaveScope(scope);\n    return proxy;\n  }\n  finishDraft(draft, patchListener) {\n    const state = draft && draft[DRAFT_STATE];\n    if (!state || !state.isManual_)\n      die(9);\n    const { scope_: scope } = state;\n    usePatchesInScope(scope, patchListener);\n    return processResult(void 0, scope);\n  }\n  /**\n   * Pass true to automatically freeze all copies created by Immer.\n   *\n   * By default, auto-freezing is enabled.\n   */\n  setAutoFreeze(value) {\n    this.autoFreeze_ = value;\n  }\n  /**\n   * Pass true to enable strict shallow copy.\n   *\n   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.\n   */\n  setUseStrictShallowCopy(value) {\n    this.useStrictShallowCopy_ = value;\n  }\n  applyPatches(base, patches) {\n    let i;\n    for (i = patches.length - 1; i >= 0; i--) {\n      const patch = patches[i];\n      if (patch.path.length === 0 && patch.op === \"replace\") {\n        base = patch.value;\n        break;\n      }\n    }\n    if (i > -1) {\n      patches = patches.slice(i + 1);\n    }\n    const applyPatchesImpl = getPlugin(\"Patches\").applyPatches_;\n    if (isDraft(base)) {\n      return applyPatchesImpl(base, patches);\n    }\n    return this.produce(\n      base,\n      (draft) => applyPatchesImpl(draft, patches)\n    );\n  }\n};\nfunction createProxy(value, parent) {\n  const draft = isMap(value) ? getPlugin(\"MapSet\").proxyMap_(value, parent) : isSet(value) ? getPlugin(\"MapSet\").proxySet_(value, parent) : createProxyProxy(value, parent);\n  const scope = parent ? parent.scope_ : getCurrentScope();\n  scope.drafts_.push(draft);\n  return draft;\n}\n\n// src/core/current.ts\nfunction current(value) {\n  if (!isDraft(value))\n    die(10, value);\n  return currentImpl(value);\n}\nfunction currentImpl(value) {\n  if (!isDraftable(value) || isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  let copy;\n  if (state) {\n    if (!state.modified_)\n      return state.base_;\n    state.finalized_ = true;\n    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);\n  } else {\n    copy = shallowCopy(value, true);\n  }\n  each(copy, (key, childValue) => {\n    set(copy, key, currentImpl(childValue));\n  });\n  if (state) {\n    state.finalized_ = false;\n  }\n  return copy;\n}\n\n// src/plugins/patches.ts\nfunction enablePatches() {\n  const errorOffset = 16;\n  if (process.env.NODE_ENV !== \"production\") {\n    errors.push(\n      'Sets cannot have \"replace\" patches.',\n      function(op) {\n        return \"Unsupported patch operation: \" + op;\n      },\n      function(path) {\n        return \"Cannot apply patch, path doesn't resolve: \" + path;\n      },\n      \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n    );\n  }\n  const REPLACE = \"replace\";\n  const ADD = \"add\";\n  const REMOVE = \"remove\";\n  function generatePatches_(state, basePath, patches, inversePatches) {\n    switch (state.type_) {\n      case 0 /* Object */:\n      case 2 /* Map */:\n        return generatePatchesFromAssigned(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n      case 1 /* Array */:\n        return generateArrayPatches(state, basePath, patches, inversePatches);\n      case 3 /* Set */:\n        return generateSetPatches(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n    }\n  }\n  function generateArrayPatches(state, basePath, patches, inversePatches) {\n    let { base_, assigned_ } = state;\n    let copy_ = state.copy_;\n    if (copy_.length < base_.length) {\n      ;\n      [base_, copy_] = [copy_, base_];\n      [patches, inversePatches] = [inversePatches, patches];\n    }\n    for (let i = 0; i < base_.length; i++) {\n      if (assigned_[i] && copy_[i] !== base_[i]) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REPLACE,\n          path,\n          // Need to maybe clone it, as it can in fact be the original value\n          // due to the base/copy inversion at the start of this function\n          value: clonePatchValueIfNeeded(copy_[i])\n        });\n        inversePatches.push({\n          op: REPLACE,\n          path,\n          value: clonePatchValueIfNeeded(base_[i])\n        });\n      }\n    }\n    for (let i = base_.length; i < copy_.length; i++) {\n      const path = basePath.concat([i]);\n      patches.push({\n        op: ADD,\n        path,\n        // Need to maybe clone it, as it can in fact be the original value\n        // due to the base/copy inversion at the start of this function\n        value: clonePatchValueIfNeeded(copy_[i])\n      });\n    }\n    for (let i = copy_.length - 1; base_.length <= i; --i) {\n      const path = basePath.concat([i]);\n      inversePatches.push({\n        op: REMOVE,\n        path\n      });\n    }\n  }\n  function generatePatchesFromAssigned(state, basePath, patches, inversePatches) {\n    const { base_, copy_ } = state;\n    each(state.assigned_, (key, assignedValue) => {\n      const origValue = get(base_, key);\n      const value = get(copy_, key);\n      const op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD;\n      if (origValue === value && op === REPLACE)\n        return;\n      const path = basePath.concat(key);\n      patches.push(op === REMOVE ? { op, path } : { op, path, value });\n      inversePatches.push(\n        op === ADD ? { op: REMOVE, path } : op === REMOVE ? { op: ADD, path, value: clonePatchValueIfNeeded(origValue) } : { op: REPLACE, path, value: clonePatchValueIfNeeded(origValue) }\n      );\n    });\n  }\n  function generateSetPatches(state, basePath, patches, inversePatches) {\n    let { base_, copy_ } = state;\n    let i = 0;\n    base_.forEach((value) => {\n      if (!copy_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REMOVE,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: ADD,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n    i = 0;\n    copy_.forEach((value) => {\n      if (!base_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: ADD,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: REMOVE,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n  }\n  function generateReplacementPatches_(baseValue, replacement, patches, inversePatches) {\n    patches.push({\n      op: REPLACE,\n      path: [],\n      value: replacement === NOTHING ? void 0 : replacement\n    });\n    inversePatches.push({\n      op: REPLACE,\n      path: [],\n      value: baseValue\n    });\n  }\n  function applyPatches_(draft, patches) {\n    patches.forEach((patch) => {\n      const { path, op } = patch;\n      let base = draft;\n      for (let i = 0; i < path.length - 1; i++) {\n        const parentType = getArchtype(base);\n        let p = path[i];\n        if (typeof p !== \"string\" && typeof p !== \"number\") {\n          p = \"\" + p;\n        }\n        if ((parentType === 0 /* Object */ || parentType === 1 /* Array */) && (p === \"__proto__\" || p === \"constructor\"))\n          die(errorOffset + 3);\n        if (typeof base === \"function\" && p === \"prototype\")\n          die(errorOffset + 3);\n        base = get(base, p);\n        if (typeof base !== \"object\")\n          die(errorOffset + 2, path.join(\"/\"));\n      }\n      const type = getArchtype(base);\n      const value = deepClonePatchValue(patch.value);\n      const key = path[path.length - 1];\n      switch (op) {\n        case REPLACE:\n          switch (type) {\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              die(errorOffset);\n            default:\n              return base[key] = value;\n          }\n        case ADD:\n          switch (type) {\n            case 1 /* Array */:\n              return key === \"-\" ? base.push(value) : base.splice(key, 0, value);\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              return base.add(value);\n            default:\n              return base[key] = value;\n          }\n        case REMOVE:\n          switch (type) {\n            case 1 /* Array */:\n              return base.splice(key, 1);\n            case 2 /* Map */:\n              return base.delete(key);\n            case 3 /* Set */:\n              return base.delete(patch.value);\n            default:\n              return delete base[key];\n          }\n        default:\n          die(errorOffset + 1, op);\n      }\n    });\n    return draft;\n  }\n  function deepClonePatchValue(obj) {\n    if (!isDraftable(obj))\n      return obj;\n    if (Array.isArray(obj))\n      return obj.map(deepClonePatchValue);\n    if (isMap(obj))\n      return new Map(\n        Array.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n      );\n    if (isSet(obj))\n      return new Set(Array.from(obj).map(deepClonePatchValue));\n    const cloned = Object.create(getPrototypeOf(obj));\n    for (const key in obj)\n      cloned[key] = deepClonePatchValue(obj[key]);\n    if (has(obj, DRAFTABLE))\n      cloned[DRAFTABLE] = obj[DRAFTABLE];\n    return cloned;\n  }\n  function clonePatchValueIfNeeded(obj) {\n    if (isDraft(obj)) {\n      return deepClonePatchValue(obj);\n    } else\n      return obj;\n  }\n  loadPlugin(\"Patches\", {\n    applyPatches_,\n    generatePatches_,\n    generateReplacementPatches_\n  });\n}\n\n// src/plugins/mapset.ts\nfunction enableMapSet() {\n  class DraftMap extends Map {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 2 /* Map */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        assigned_: void 0,\n        base_: target,\n        draft_: this,\n        isManual_: false,\n        revoked_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(key) {\n      return latest(this[DRAFT_STATE]).has(key);\n    }\n    set(key, value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!latest(state).has(key) || latest(state).get(key) !== value) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_.set(key, true);\n        state.copy_.set(key, value);\n        state.assigned_.set(key, true);\n      }\n      return this;\n    }\n    delete(key) {\n      if (!this.has(key)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareMapCopy(state);\n      markChanged(state);\n      if (state.base_.has(key)) {\n        state.assigned_.set(key, false);\n      } else {\n        state.assigned_.delete(key);\n      }\n      state.copy_.delete(key);\n      return true;\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_ = /* @__PURE__ */ new Map();\n        each(state.base_, (key) => {\n          state.assigned_.set(key, false);\n        });\n        state.copy_.clear();\n      }\n    }\n    forEach(cb, thisArg) {\n      const state = this[DRAFT_STATE];\n      latest(state).forEach((_value, key, _map) => {\n        cb.call(thisArg, this.get(key), key, this);\n      });\n    }\n    get(key) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      const value = latest(state).get(key);\n      if (state.finalized_ || !isDraftable(value)) {\n        return value;\n      }\n      if (value !== state.base_.get(key)) {\n        return value;\n      }\n      const draft = createProxy(value, state);\n      prepareMapCopy(state);\n      state.copy_.set(key, draft);\n      return draft;\n    }\n    keys() {\n      return latest(this[DRAFT_STATE]).keys();\n    }\n    values() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.values(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value\n          };\n        }\n      };\n    }\n    entries() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.entries(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value: [r.value, value]\n          };\n        }\n      };\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.entries();\n    }\n  }\n  function proxyMap_(target, parent) {\n    return new DraftMap(target, parent);\n  }\n  function prepareMapCopy(state) {\n    if (!state.copy_) {\n      state.assigned_ = /* @__PURE__ */ new Map();\n      state.copy_ = new Map(state.base_);\n    }\n  }\n  class DraftSet extends Set {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 3 /* Set */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        base_: target,\n        draft_: this,\n        drafts_: /* @__PURE__ */ new Map(),\n        revoked_: false,\n        isManual_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!state.copy_) {\n        return state.base_.has(value);\n      }\n      if (state.copy_.has(value))\n        return true;\n      if (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))\n        return true;\n      return false;\n    }\n    add(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!this.has(value)) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.add(value);\n      }\n      return this;\n    }\n    delete(value) {\n      if (!this.has(value)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      markChanged(state);\n      return state.copy_.delete(value) || (state.drafts_.has(value) ? state.copy_.delete(state.drafts_.get(value)) : (\n        /* istanbul ignore next */\n        false\n      ));\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.clear();\n      }\n    }\n    values() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.values();\n    }\n    entries() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.entries();\n    }\n    keys() {\n      return this.values();\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.values();\n    }\n    forEach(cb, thisArg) {\n      const iterator = this.values();\n      let result = iterator.next();\n      while (!result.done) {\n        cb.call(thisArg, result.value, result.value, this);\n        result = iterator.next();\n      }\n    }\n  }\n  function proxySet_(target, parent) {\n    return new DraftSet(target, parent);\n  }\n  function prepareSetCopy(state) {\n    if (!state.copy_) {\n      state.copy_ = /* @__PURE__ */ new Set();\n      state.base_.forEach((value) => {\n        if (isDraftable(value)) {\n          const draft = createProxy(value, state);\n          state.drafts_.set(value, draft);\n          state.copy_.add(draft);\n        } else {\n          state.copy_.add(value);\n        }\n      });\n    }\n  }\n  function assertUnrevoked(state) {\n    if (state.revoked_)\n      die(3, JSON.stringify(latest(state)));\n  }\n  loadPlugin(\"MapSet\", { proxyMap_, proxySet_ });\n}\n\n// src/immer.ts\nvar immer = new Immer2();\nvar produce = immer.produce;\nvar produceWithPatches = immer.produceWithPatches.bind(\n  immer\n);\nvar setAutoFreeze = immer.setAutoFreeze.bind(immer);\nvar setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);\nvar applyPatches = immer.applyPatches.bind(immer);\nvar createDraft = immer.createDraft.bind(immer);\nvar finishDraft = immer.finishDraft.bind(immer);\nfunction castDraft(value) {\n  return value;\n}\nfunction castImmutable(value) {\n  return value;\n}\nexport {\n  Immer2 as Immer,\n  applyPatches,\n  castDraft,\n  castImmutable,\n  createDraft,\n  current,\n  enableMapSet,\n  enablePatches,\n  finishDraft,\n  freeze,\n  DRAFTABLE as immerable,\n  isDraft,\n  isDraftable,\n  NOTHING as nothing,\n  original,\n  produce,\n  produceWithPatches,\n  setAutoFreeze,\n  setUseStrictShallowCopy\n};\n//# sourceMappingURL=immer.mjs.map","// src/index.ts\nexport * from \"redux\";\nimport { produce, current as current3, freeze, original as original2, isDraft as isDraft5 } from \"immer\";\nimport { createSelector, createSelectorCreator as createSelectorCreator2, lruMemoize, weakMapMemoize as weakMapMemoize2 } from \"reselect\";\n\n// src/createDraftSafeSelector.ts\nimport { current, isDraft } from \"immer\";\nimport { createSelectorCreator, weakMapMemoize } from \"reselect\";\nvar createDraftSafeSelectorCreator = (...args) => {\n  const createSelector2 = createSelectorCreator(...args);\n  const createDraftSafeSelector2 = Object.assign((...args2) => {\n    const selector = createSelector2(...args2);\n    const wrappedSelector = (value, ...rest) => selector(isDraft(value) ? current(value) : value, ...rest);\n    Object.assign(wrappedSelector, selector);\n    return wrappedSelector;\n  }, {\n    withTypes: () => createDraftSafeSelector2\n  });\n  return createDraftSafeSelector2;\n};\nvar createDraftSafeSelector = /* @__PURE__ */ createDraftSafeSelectorCreator(weakMapMemoize);\n\n// src/configureStore.ts\nimport { applyMiddleware, createStore, compose as compose2, combineReducers, isPlainObject as isPlainObject2 } from \"redux\";\n\n// src/devtoolsExtension.ts\nimport { compose } from \"redux\";\nvar composeWithDevTools = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function() {\n  if (arguments.length === 0) return void 0;\n  if (typeof arguments[0] === \"object\") return compose;\n  return compose.apply(null, arguments);\n};\nvar devToolsEnhancer = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__ : function() {\n  return function(noop3) {\n    return noop3;\n  };\n};\n\n// src/getDefaultMiddleware.ts\nimport { thunk as thunkMiddleware, withExtraArgument } from \"redux-thunk\";\n\n// src/createAction.ts\nimport { isAction } from \"redux\";\n\n// src/tsHelpers.ts\nvar hasMatchFunction = (v) => {\n  return v && typeof v.match === \"function\";\n};\n\n// src/createAction.ts\nfunction createAction(type, prepareAction) {\n  function actionCreator(...args) {\n    if (prepareAction) {\n      let prepared = prepareAction(...args);\n      if (!prepared) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : \"prepareAction did not return an object\");\n      }\n      return {\n        type,\n        payload: prepared.payload,\n        ...\"meta\" in prepared && {\n          meta: prepared.meta\n        },\n        ...\"error\" in prepared && {\n          error: prepared.error\n        }\n      };\n    }\n    return {\n      type,\n      payload: args[0]\n    };\n  }\n  actionCreator.toString = () => `${type}`;\n  actionCreator.type = type;\n  actionCreator.match = (action) => isAction(action) && action.type === type;\n  return actionCreator;\n}\nfunction isActionCreator(action) {\n  return typeof action === \"function\" && \"type\" in action && // hasMatchFunction only wants Matchers but I don't see the point in rewriting it\n  hasMatchFunction(action);\n}\nfunction isFSA(action) {\n  return isAction(action) && Object.keys(action).every(isValidKey);\n}\nfunction isValidKey(key) {\n  return [\"type\", \"payload\", \"error\", \"meta\"].indexOf(key) > -1;\n}\n\n// src/actionCreatorInvariantMiddleware.ts\nfunction getMessage(type) {\n  const splitType = type ? `${type}`.split(\"/\") : [];\n  const actionName = splitType[splitType.length - 1] || \"actionCreator\";\n  return `Detected an action creator with type \"${type || \"unknown\"}\" being dispatched. \nMake sure you're calling the action creator before dispatching, i.e. \\`dispatch(${actionName}())\\` instead of \\`dispatch(${actionName})\\`. This is necessary even if the action has no payload.`;\n}\nfunction createActionCreatorInvariantMiddleware(options = {}) {\n  if (process.env.NODE_ENV === \"production\") {\n    return () => (next) => (action) => next(action);\n  }\n  const {\n    isActionCreator: isActionCreator2 = isActionCreator\n  } = options;\n  return () => (next) => (action) => {\n    if (isActionCreator2(action)) {\n      console.warn(getMessage(action.type));\n    }\n    return next(action);\n  };\n}\n\n// src/utils.ts\nimport { produce as createNextState, isDraftable } from \"immer\";\nfunction getTimeMeasureUtils(maxDelay, fnName) {\n  let elapsed = 0;\n  return {\n    measureTime(fn) {\n      const started = Date.now();\n      try {\n        return fn();\n      } finally {\n        const finished = Date.now();\n        elapsed += finished - started;\n      }\n    },\n    warnIfExceeded() {\n      if (elapsed > maxDelay) {\n        console.warn(`${fnName} took ${elapsed}ms, which is more than the warning threshold of ${maxDelay}ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.`);\n      }\n    }\n  };\n}\nvar Tuple = class _Tuple extends Array {\n  constructor(...items) {\n    super(...items);\n    Object.setPrototypeOf(this, _Tuple.prototype);\n  }\n  static get [Symbol.species]() {\n    return _Tuple;\n  }\n  concat(...arr) {\n    return super.concat.apply(this, arr);\n  }\n  prepend(...arr) {\n    if (arr.length === 1 && Array.isArray(arr[0])) {\n      return new _Tuple(...arr[0].concat(this));\n    }\n    return new _Tuple(...arr.concat(this));\n  }\n};\nfunction freezeDraftable(val) {\n  return isDraftable(val) ? createNextState(val, () => {\n  }) : val;\n}\nfunction getOrInsertComputed(map, key, compute) {\n  if (map.has(key)) return map.get(key);\n  return map.set(key, compute(key)).get(key);\n}\n\n// src/immutableStateInvariantMiddleware.ts\nfunction isImmutableDefault(value) {\n  return typeof value !== \"object\" || value == null || Object.isFrozen(value);\n}\nfunction trackForMutations(isImmutable, ignorePaths, obj) {\n  const trackedProperties = trackProperties(isImmutable, ignorePaths, obj);\n  return {\n    detectMutations() {\n      return detectMutations(isImmutable, ignorePaths, trackedProperties, obj);\n    }\n  };\n}\nfunction trackProperties(isImmutable, ignorePaths = [], obj, path = \"\", checkedObjects = /* @__PURE__ */ new Set()) {\n  const tracked = {\n    value: obj\n  };\n  if (!isImmutable(obj) && !checkedObjects.has(obj)) {\n    checkedObjects.add(obj);\n    tracked.children = {};\n    for (const key in obj) {\n      const childPath = path ? path + \".\" + key : key;\n      if (ignorePaths.length && ignorePaths.indexOf(childPath) !== -1) {\n        continue;\n      }\n      tracked.children[key] = trackProperties(isImmutable, ignorePaths, obj[key], childPath);\n    }\n  }\n  return tracked;\n}\nfunction detectMutations(isImmutable, ignoredPaths = [], trackedProperty, obj, sameParentRef = false, path = \"\") {\n  const prevObj = trackedProperty ? trackedProperty.value : void 0;\n  const sameRef = prevObj === obj;\n  if (sameParentRef && !sameRef && !Number.isNaN(obj)) {\n    return {\n      wasMutated: true,\n      path\n    };\n  }\n  if (isImmutable(prevObj) || isImmutable(obj)) {\n    return {\n      wasMutated: false\n    };\n  }\n  const keysToDetect = {};\n  for (let key in trackedProperty.children) {\n    keysToDetect[key] = true;\n  }\n  for (let key in obj) {\n    keysToDetect[key] = true;\n  }\n  const hasIgnoredPaths = ignoredPaths.length > 0;\n  for (let key in keysToDetect) {\n    const nestedPath = path ? path + \".\" + key : key;\n    if (hasIgnoredPaths) {\n      const hasMatches = ignoredPaths.some((ignored) => {\n        if (ignored instanceof RegExp) {\n          return ignored.test(nestedPath);\n        }\n        return nestedPath === ignored;\n      });\n      if (hasMatches) {\n        continue;\n      }\n    }\n    const result = detectMutations(isImmutable, ignoredPaths, trackedProperty.children[key], obj[key], sameRef, nestedPath);\n    if (result.wasMutated) {\n      return result;\n    }\n  }\n  return {\n    wasMutated: false\n  };\n}\nfunction createImmutableStateInvariantMiddleware(options = {}) {\n  if (process.env.NODE_ENV === \"production\") {\n    return () => (next) => (action) => next(action);\n  } else {\n    let stringify2 = function(obj, serializer, indent, decycler) {\n      return JSON.stringify(obj, getSerialize2(serializer, decycler), indent);\n    }, getSerialize2 = function(serializer, decycler) {\n      let stack = [], keys = [];\n      if (!decycler) decycler = function(_, value) {\n        if (stack[0] === value) return \"[Circular ~]\";\n        return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\";\n      };\n      return function(key, value) {\n        if (stack.length > 0) {\n          var thisPos = stack.indexOf(this);\n          ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n          ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n          if (~stack.indexOf(value)) value = decycler.call(this, key, value);\n        } else stack.push(value);\n        return serializer == null ? value : serializer.call(this, key, value);\n      };\n    };\n    var stringify = stringify2, getSerialize = getSerialize2;\n    let {\n      isImmutable = isImmutableDefault,\n      ignoredPaths,\n      warnAfter = 32\n    } = options;\n    const track = trackForMutations.bind(null, isImmutable, ignoredPaths);\n    return ({\n      getState\n    }) => {\n      let state = getState();\n      let tracker = track(state);\n      let result;\n      return (next) => (action) => {\n        const measureUtils = getTimeMeasureUtils(warnAfter, \"ImmutableStateInvariantMiddleware\");\n        measureUtils.measureTime(() => {\n          state = getState();\n          result = tracker.detectMutations();\n          tracker = track(state);\n          if (result.wasMutated) {\n            throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(19) : `A state mutation was detected between dispatches, in the path '${result.path || \"\"}'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`);\n          }\n        });\n        const dispatchedAction = next(action);\n        measureUtils.measureTime(() => {\n          state = getState();\n          result = tracker.detectMutations();\n          tracker = track(state);\n          if (result.wasMutated) {\n            throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(20) : `A state mutation was detected inside a dispatch, in the path: ${result.path || \"\"}. Take a look at the reducer(s) handling the action ${stringify2(action)}. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`);\n          }\n        });\n        measureUtils.warnIfExceeded();\n        return dispatchedAction;\n      };\n    };\n  }\n}\n\n// src/serializableStateInvariantMiddleware.ts\nimport { isAction as isAction2, isPlainObject } from \"redux\";\nfunction isPlain(val) {\n  const type = typeof val;\n  return val == null || type === \"string\" || type === \"boolean\" || type === \"number\" || Array.isArray(val) || isPlainObject(val);\n}\nfunction findNonSerializableValue(value, path = \"\", isSerializable = isPlain, getEntries, ignoredPaths = [], cache) {\n  let foundNestedSerializable;\n  if (!isSerializable(value)) {\n    return {\n      keyPath: path || \"<root>\",\n      value\n    };\n  }\n  if (typeof value !== \"object\" || value === null) {\n    return false;\n  }\n  if (cache?.has(value)) return false;\n  const entries = getEntries != null ? getEntries(value) : Object.entries(value);\n  const hasIgnoredPaths = ignoredPaths.length > 0;\n  for (const [key, nestedValue] of entries) {\n    const nestedPath = path ? path + \".\" + key : key;\n    if (hasIgnoredPaths) {\n      const hasMatches = ignoredPaths.some((ignored) => {\n        if (ignored instanceof RegExp) {\n          return ignored.test(nestedPath);\n        }\n        return nestedPath === ignored;\n      });\n      if (hasMatches) {\n        continue;\n      }\n    }\n    if (!isSerializable(nestedValue)) {\n      return {\n        keyPath: nestedPath,\n        value: nestedValue\n      };\n    }\n    if (typeof nestedValue === \"object\") {\n      foundNestedSerializable = findNonSerializableValue(nestedValue, nestedPath, isSerializable, getEntries, ignoredPaths, cache);\n      if (foundNestedSerializable) {\n        return foundNestedSerializable;\n      }\n    }\n  }\n  if (cache && isNestedFrozen(value)) cache.add(value);\n  return false;\n}\nfunction isNestedFrozen(value) {\n  if (!Object.isFrozen(value)) return false;\n  for (const nestedValue of Object.values(value)) {\n    if (typeof nestedValue !== \"object\" || nestedValue === null) continue;\n    if (!isNestedFrozen(nestedValue)) return false;\n  }\n  return true;\n}\nfunction createSerializableStateInvariantMiddleware(options = {}) {\n  if (process.env.NODE_ENV === \"production\") {\n    return () => (next) => (action) => next(action);\n  } else {\n    const {\n      isSerializable = isPlain,\n      getEntries,\n      ignoredActions = [],\n      ignoredActionPaths = [\"meta.arg\", \"meta.baseQueryMeta\"],\n      ignoredPaths = [],\n      warnAfter = 32,\n      ignoreState = false,\n      ignoreActions = false,\n      disableCache = false\n    } = options;\n    const cache = !disableCache && WeakSet ? /* @__PURE__ */ new WeakSet() : void 0;\n    return (storeAPI) => (next) => (action) => {\n      if (!isAction2(action)) {\n        return next(action);\n      }\n      const result = next(action);\n      const measureUtils = getTimeMeasureUtils(warnAfter, \"SerializableStateInvariantMiddleware\");\n      if (!ignoreActions && !(ignoredActions.length && ignoredActions.indexOf(action.type) !== -1)) {\n        measureUtils.measureTime(() => {\n          const foundActionNonSerializableValue = findNonSerializableValue(action, \"\", isSerializable, getEntries, ignoredActionPaths, cache);\n          if (foundActionNonSerializableValue) {\n            const {\n              keyPath,\n              value\n            } = foundActionNonSerializableValue;\n            console.error(`A non-serializable value was detected in an action, in the path: \\`${keyPath}\\`. Value:`, value, \"\\nTake a look at the logic that dispatched this action: \", action, \"\\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)\", \"\\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)\");\n          }\n        });\n      }\n      if (!ignoreState) {\n        measureUtils.measureTime(() => {\n          const state = storeAPI.getState();\n          const foundStateNonSerializableValue = findNonSerializableValue(state, \"\", isSerializable, getEntries, ignoredPaths, cache);\n          if (foundStateNonSerializableValue) {\n            const {\n              keyPath,\n              value\n            } = foundStateNonSerializableValue;\n            console.error(`A non-serializable value was detected in the state, in the path: \\`${keyPath}\\`. Value:`, value, `\nTake a look at the reducer(s) handling this action type: ${action.type}.\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`);\n          }\n        });\n        measureUtils.warnIfExceeded();\n      }\n      return result;\n    };\n  }\n}\n\n// src/getDefaultMiddleware.ts\nfunction isBoolean(x) {\n  return typeof x === \"boolean\";\n}\nvar buildGetDefaultMiddleware = () => function getDefaultMiddleware(options) {\n  const {\n    thunk = true,\n    immutableCheck = true,\n    serializableCheck = true,\n    actionCreatorCheck = true\n  } = options ?? {};\n  let middlewareArray = new Tuple();\n  if (thunk) {\n    if (isBoolean(thunk)) {\n      middlewareArray.push(thunkMiddleware);\n    } else {\n      middlewareArray.push(withExtraArgument(thunk.extraArgument));\n    }\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (immutableCheck) {\n      let immutableOptions = {};\n      if (!isBoolean(immutableCheck)) {\n        immutableOptions = immutableCheck;\n      }\n      middlewareArray.unshift(createImmutableStateInvariantMiddleware(immutableOptions));\n    }\n    if (serializableCheck) {\n      let serializableOptions = {};\n      if (!isBoolean(serializableCheck)) {\n        serializableOptions = serializableCheck;\n      }\n      middlewareArray.push(createSerializableStateInvariantMiddleware(serializableOptions));\n    }\n    if (actionCreatorCheck) {\n      let actionCreatorOptions = {};\n      if (!isBoolean(actionCreatorCheck)) {\n        actionCreatorOptions = actionCreatorCheck;\n      }\n      middlewareArray.unshift(createActionCreatorInvariantMiddleware(actionCreatorOptions));\n    }\n  }\n  return middlewareArray;\n};\n\n// src/autoBatchEnhancer.ts\nvar SHOULD_AUTOBATCH = \"RTK_autoBatch\";\nvar prepareAutoBatched = () => (payload) => ({\n  payload,\n  meta: {\n    [SHOULD_AUTOBATCH]: true\n  }\n});\nvar createQueueWithTimer = (timeout) => {\n  return (notify) => {\n    setTimeout(notify, timeout);\n  };\n};\nvar autoBatchEnhancer = (options = {\n  type: \"raf\"\n}) => (next) => (...args) => {\n  const store = next(...args);\n  let notifying = true;\n  let shouldNotifyAtEndOfTick = false;\n  let notificationQueued = false;\n  const listeners = /* @__PURE__ */ new Set();\n  const queueCallback = options.type === \"tick\" ? queueMicrotask : options.type === \"raf\" ? (\n    // requestAnimationFrame won't exist in SSR environments. Fall back to a vague approximation just to keep from erroring.\n    typeof window !== \"undefined\" && window.requestAnimationFrame ? window.requestAnimationFrame : createQueueWithTimer(10)\n  ) : options.type === \"callback\" ? options.queueNotification : createQueueWithTimer(options.timeout);\n  const notifyListeners = () => {\n    notificationQueued = false;\n    if (shouldNotifyAtEndOfTick) {\n      shouldNotifyAtEndOfTick = false;\n      listeners.forEach((l) => l());\n    }\n  };\n  return Object.assign({}, store, {\n    // Override the base `store.subscribe` method to keep original listeners\n    // from running if we're delaying notifications\n    subscribe(listener2) {\n      const wrappedListener = () => notifying && listener2();\n      const unsubscribe = store.subscribe(wrappedListener);\n      listeners.add(listener2);\n      return () => {\n        unsubscribe();\n        listeners.delete(listener2);\n      };\n    },\n    // Override the base `store.dispatch` method so that we can check actions\n    // for the `shouldAutoBatch` flag and determine if batching is active\n    dispatch(action) {\n      try {\n        notifying = !action?.meta?.[SHOULD_AUTOBATCH];\n        shouldNotifyAtEndOfTick = !notifying;\n        if (shouldNotifyAtEndOfTick) {\n          if (!notificationQueued) {\n            notificationQueued = true;\n            queueCallback(notifyListeners);\n          }\n        }\n        return store.dispatch(action);\n      } finally {\n        notifying = true;\n      }\n    }\n  });\n};\n\n// src/getDefaultEnhancers.ts\nvar buildGetDefaultEnhancers = (middlewareEnhancer) => function getDefaultEnhancers(options) {\n  const {\n    autoBatch = true\n  } = options ?? {};\n  let enhancerArray = new Tuple(middlewareEnhancer);\n  if (autoBatch) {\n    enhancerArray.push(autoBatchEnhancer(typeof autoBatch === \"object\" ? autoBatch : void 0));\n  }\n  return enhancerArray;\n};\n\n// src/configureStore.ts\nfunction configureStore(options) {\n  const getDefaultMiddleware = buildGetDefaultMiddleware();\n  const {\n    reducer = void 0,\n    middleware,\n    devTools = true,\n    preloadedState = void 0,\n    enhancers = void 0\n  } = options || {};\n  let rootReducer;\n  if (typeof reducer === \"function\") {\n    rootReducer = reducer;\n  } else if (isPlainObject2(reducer)) {\n    rootReducer = combineReducers(reducer);\n  } else {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"`reducer` is a required argument, and must be a function or an object of functions that can be passed to combineReducers\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && middleware && typeof middleware !== \"function\") {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"`middleware` field must be a callback\");\n  }\n  let finalMiddleware;\n  if (typeof middleware === \"function\") {\n    finalMiddleware = middleware(getDefaultMiddleware);\n    if (process.env.NODE_ENV !== \"production\" && !Array.isArray(finalMiddleware)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : \"when using a middleware builder function, an array of middleware must be returned\");\n    }\n  } else {\n    finalMiddleware = getDefaultMiddleware();\n  }\n  if (process.env.NODE_ENV !== \"production\" && finalMiddleware.some((item) => typeof item !== \"function\")) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"each middleware provided to configureStore must be a function\");\n  }\n  let finalCompose = compose2;\n  if (devTools) {\n    finalCompose = composeWithDevTools({\n      // Enable capture of stack traces for dispatched Redux actions\n      trace: process.env.NODE_ENV !== \"production\",\n      ...typeof devTools === \"object\" && devTools\n    });\n  }\n  const middlewareEnhancer = applyMiddleware(...finalMiddleware);\n  const getDefaultEnhancers = buildGetDefaultEnhancers(middlewareEnhancer);\n  if (process.env.NODE_ENV !== \"production\" && enhancers && typeof enhancers !== \"function\") {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : \"`enhancers` field must be a callback\");\n  }\n  let storeEnhancers = typeof enhancers === \"function\" ? enhancers(getDefaultEnhancers) : getDefaultEnhancers();\n  if (process.env.NODE_ENV !== \"production\" && !Array.isArray(storeEnhancers)) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : \"`enhancers` callback must return an array\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && storeEnhancers.some((item) => typeof item !== \"function\")) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"each enhancer provided to configureStore must be a function\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && finalMiddleware.length && !storeEnhancers.includes(middlewareEnhancer)) {\n    console.error(\"middlewares were provided, but middleware enhancer was not included in final enhancers - make sure to call `getDefaultEnhancers`\");\n  }\n  const composedEnhancer = finalCompose(...storeEnhancers);\n  return createStore(rootReducer, preloadedState, composedEnhancer);\n}\n\n// src/createReducer.ts\nimport { produce as createNextState2, isDraft as isDraft2, isDraftable as isDraftable2 } from \"immer\";\n\n// src/mapBuilders.ts\nfunction executeReducerBuilderCallback(builderCallback) {\n  const actionsMap = {};\n  const actionMatchers = [];\n  let defaultCaseReducer;\n  const builder = {\n    addCase(typeOrActionCreator, reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (actionMatchers.length > 0) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(26) : \"`builder.addCase` should only be called before calling `builder.addMatcher`\");\n        }\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(27) : \"`builder.addCase` should only be called before calling `builder.addDefaultCase`\");\n        }\n      }\n      const type = typeof typeOrActionCreator === \"string\" ? typeOrActionCreator : typeOrActionCreator.type;\n      if (!type) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(28) : \"`builder.addCase` cannot be called with an empty action type\");\n      }\n      if (type in actionsMap) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(29) : `\\`builder.addCase\\` cannot be called with two reducers for the same action type '${type}'`);\n      }\n      actionsMap[type] = reducer;\n      return builder;\n    },\n    addMatcher(matcher, reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(30) : \"`builder.addMatcher` should only be called before calling `builder.addDefaultCase`\");\n        }\n      }\n      actionMatchers.push({\n        matcher,\n        reducer\n      });\n      return builder;\n    },\n    addDefaultCase(reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(31) : \"`builder.addDefaultCase` can only be called once\");\n        }\n      }\n      defaultCaseReducer = reducer;\n      return builder;\n    }\n  };\n  builderCallback(builder);\n  return [actionsMap, actionMatchers, defaultCaseReducer];\n}\n\n// src/createReducer.ts\nfunction isStateFunction(x) {\n  return typeof x === \"function\";\n}\nfunction createReducer(initialState, mapOrBuilderCallback) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof mapOrBuilderCallback === \"object\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : \"The object notation for `createReducer` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer\");\n    }\n  }\n  let [actionsMap, finalActionMatchers, finalDefaultCaseReducer] = executeReducerBuilderCallback(mapOrBuilderCallback);\n  let getInitialState;\n  if (isStateFunction(initialState)) {\n    getInitialState = () => freezeDraftable(initialState());\n  } else {\n    const frozenInitialState = freezeDraftable(initialState);\n    getInitialState = () => frozenInitialState;\n  }\n  function reducer(state = getInitialState(), action) {\n    let caseReducers = [actionsMap[action.type], ...finalActionMatchers.filter(({\n      matcher\n    }) => matcher(action)).map(({\n      reducer: reducer2\n    }) => reducer2)];\n    if (caseReducers.filter((cr) => !!cr).length === 0) {\n      caseReducers = [finalDefaultCaseReducer];\n    }\n    return caseReducers.reduce((previousState, caseReducer) => {\n      if (caseReducer) {\n        if (isDraft2(previousState)) {\n          const draft = previousState;\n          const result = caseReducer(draft, action);\n          if (result === void 0) {\n            return previousState;\n          }\n          return result;\n        } else if (!isDraftable2(previousState)) {\n          const result = caseReducer(previousState, action);\n          if (result === void 0) {\n            if (previousState === null) {\n              return previousState;\n            }\n            throw Error(\"A case reducer on a non-draftable value must not return undefined\");\n          }\n          return result;\n        } else {\n          return createNextState2(previousState, (draft) => {\n            return caseReducer(draft, action);\n          });\n        }\n      }\n      return previousState;\n    }, state);\n  }\n  reducer.getInitialState = getInitialState;\n  return reducer;\n}\n\n// src/matchers.ts\nvar matches = (matcher, action) => {\n  if (hasMatchFunction(matcher)) {\n    return matcher.match(action);\n  } else {\n    return matcher(action);\n  }\n};\nfunction isAnyOf(...matchers) {\n  return (action) => {\n    return matchers.some((matcher) => matches(matcher, action));\n  };\n}\nfunction isAllOf(...matchers) {\n  return (action) => {\n    return matchers.every((matcher) => matches(matcher, action));\n  };\n}\nfunction hasExpectedRequestMetadata(action, validStatus) {\n  if (!action || !action.meta) return false;\n  const hasValidRequestId = typeof action.meta.requestId === \"string\";\n  const hasValidRequestStatus = validStatus.indexOf(action.meta.requestStatus) > -1;\n  return hasValidRequestId && hasValidRequestStatus;\n}\nfunction isAsyncThunkArray(a) {\n  return typeof a[0] === \"function\" && \"pending\" in a[0] && \"fulfilled\" in a[0] && \"rejected\" in a[0];\n}\nfunction isPending(...asyncThunks) {\n  if (asyncThunks.length === 0) {\n    return (action) => hasExpectedRequestMetadata(action, [\"pending\"]);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isPending()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map((asyncThunk) => asyncThunk.pending));\n}\nfunction isRejected(...asyncThunks) {\n  if (asyncThunks.length === 0) {\n    return (action) => hasExpectedRequestMetadata(action, [\"rejected\"]);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isRejected()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map((asyncThunk) => asyncThunk.rejected));\n}\nfunction isRejectedWithValue(...asyncThunks) {\n  const hasFlag = (action) => {\n    return action && action.meta && action.meta.rejectedWithValue;\n  };\n  if (asyncThunks.length === 0) {\n    return isAllOf(isRejected(...asyncThunks), hasFlag);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isRejectedWithValue()(asyncThunks[0]);\n  }\n  return isAllOf(isRejected(...asyncThunks), hasFlag);\n}\nfunction isFulfilled(...asyncThunks) {\n  if (asyncThunks.length === 0) {\n    return (action) => hasExpectedRequestMetadata(action, [\"fulfilled\"]);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isFulfilled()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map((asyncThunk) => asyncThunk.fulfilled));\n}\nfunction isAsyncThunkAction(...asyncThunks) {\n  if (asyncThunks.length === 0) {\n    return (action) => hasExpectedRequestMetadata(action, [\"pending\", \"fulfilled\", \"rejected\"]);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isAsyncThunkAction()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.flatMap((asyncThunk) => [asyncThunk.pending, asyncThunk.rejected, asyncThunk.fulfilled]));\n}\n\n// src/nanoid.ts\nvar urlAlphabet = \"ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW\";\nvar nanoid = (size = 21) => {\n  let id = \"\";\n  let i = size;\n  while (i--) {\n    id += urlAlphabet[Math.random() * 64 | 0];\n  }\n  return id;\n};\n\n// src/createAsyncThunk.ts\nvar commonProperties = [\"name\", \"message\", \"stack\", \"code\"];\nvar RejectWithValue = class {\n  constructor(payload, meta) {\n    this.payload = payload;\n    this.meta = meta;\n  }\n  /*\n  type-only property to distinguish between RejectWithValue and FulfillWithMeta\n  does not exist at runtime\n  */\n  _type;\n};\nvar FulfillWithMeta = class {\n  constructor(payload, meta) {\n    this.payload = payload;\n    this.meta = meta;\n  }\n  /*\n  type-only property to distinguish between RejectWithValue and FulfillWithMeta\n  does not exist at runtime\n  */\n  _type;\n};\nvar miniSerializeError = (value) => {\n  if (typeof value === \"object\" && value !== null) {\n    const simpleError = {};\n    for (const property of commonProperties) {\n      if (typeof value[property] === \"string\") {\n        simpleError[property] = value[property];\n      }\n    }\n    return simpleError;\n  }\n  return {\n    message: String(value)\n  };\n};\nvar createAsyncThunk = /* @__PURE__ */ (() => {\n  function createAsyncThunk2(typePrefix, payloadCreator, options) {\n    const fulfilled = createAction(typePrefix + \"/fulfilled\", (payload, requestId, arg, meta) => ({\n      payload,\n      meta: {\n        ...meta || {},\n        arg,\n        requestId,\n        requestStatus: \"fulfilled\"\n      }\n    }));\n    const pending = createAction(typePrefix + \"/pending\", (requestId, arg, meta) => ({\n      payload: void 0,\n      meta: {\n        ...meta || {},\n        arg,\n        requestId,\n        requestStatus: \"pending\"\n      }\n    }));\n    const rejected = createAction(typePrefix + \"/rejected\", (error, requestId, arg, payload, meta) => ({\n      payload,\n      error: (options && options.serializeError || miniSerializeError)(error || \"Rejected\"),\n      meta: {\n        ...meta || {},\n        arg,\n        requestId,\n        rejectedWithValue: !!payload,\n        requestStatus: \"rejected\",\n        aborted: error?.name === \"AbortError\",\n        condition: error?.name === \"ConditionError\"\n      }\n    }));\n    function actionCreator(arg) {\n      return (dispatch, getState, extra) => {\n        const requestId = options?.idGenerator ? options.idGenerator(arg) : nanoid();\n        const abortController = new AbortController();\n        let abortHandler;\n        let abortReason;\n        function abort(reason) {\n          abortReason = reason;\n          abortController.abort();\n        }\n        const promise = async function() {\n          let finalAction;\n          try {\n            let conditionResult = options?.condition?.(arg, {\n              getState,\n              extra\n            });\n            if (isThenable(conditionResult)) {\n              conditionResult = await conditionResult;\n            }\n            if (conditionResult === false || abortController.signal.aborted) {\n              throw {\n                name: \"ConditionError\",\n                message: \"Aborted due to condition callback returning false.\"\n              };\n            }\n            const abortedPromise = new Promise((_, reject) => {\n              abortHandler = () => {\n                reject({\n                  name: \"AbortError\",\n                  message: abortReason || \"Aborted\"\n                });\n              };\n              abortController.signal.addEventListener(\"abort\", abortHandler);\n            });\n            dispatch(pending(requestId, arg, options?.getPendingMeta?.({\n              requestId,\n              arg\n            }, {\n              getState,\n              extra\n            })));\n            finalAction = await Promise.race([abortedPromise, Promise.resolve(payloadCreator(arg, {\n              dispatch,\n              getState,\n              extra,\n              requestId,\n              signal: abortController.signal,\n              abort,\n              rejectWithValue: (value, meta) => {\n                return new RejectWithValue(value, meta);\n              },\n              fulfillWithValue: (value, meta) => {\n                return new FulfillWithMeta(value, meta);\n              }\n            })).then((result) => {\n              if (result instanceof RejectWithValue) {\n                throw result;\n              }\n              if (result instanceof FulfillWithMeta) {\n                return fulfilled(result.payload, requestId, arg, result.meta);\n              }\n              return fulfilled(result, requestId, arg);\n            })]);\n          } catch (err) {\n            finalAction = err instanceof RejectWithValue ? rejected(null, requestId, arg, err.payload, err.meta) : rejected(err, requestId, arg);\n          } finally {\n            if (abortHandler) {\n              abortController.signal.removeEventListener(\"abort\", abortHandler);\n            }\n          }\n          const skipDispatch = options && !options.dispatchConditionRejection && rejected.match(finalAction) && finalAction.meta.condition;\n          if (!skipDispatch) {\n            dispatch(finalAction);\n          }\n          return finalAction;\n        }();\n        return Object.assign(promise, {\n          abort,\n          requestId,\n          arg,\n          unwrap() {\n            return promise.then(unwrapResult);\n          }\n        });\n      };\n    }\n    return Object.assign(actionCreator, {\n      pending,\n      rejected,\n      fulfilled,\n      settled: isAnyOf(rejected, fulfilled),\n      typePrefix\n    });\n  }\n  createAsyncThunk2.withTypes = () => createAsyncThunk2;\n  return createAsyncThunk2;\n})();\nfunction unwrapResult(action) {\n  if (action.meta && action.meta.rejectedWithValue) {\n    throw action.payload;\n  }\n  if (action.error) {\n    throw action.error;\n  }\n  return action.payload;\n}\nfunction isThenable(value) {\n  return value !== null && typeof value === \"object\" && typeof value.then === \"function\";\n}\n\n// src/createSlice.ts\nvar asyncThunkSymbol = /* @__PURE__ */ Symbol.for(\"rtk-slice-createasyncthunk\");\nvar asyncThunkCreator = {\n  [asyncThunkSymbol]: createAsyncThunk\n};\nvar ReducerType = /* @__PURE__ */ ((ReducerType2) => {\n  ReducerType2[\"reducer\"] = \"reducer\";\n  ReducerType2[\"reducerWithPrepare\"] = \"reducerWithPrepare\";\n  ReducerType2[\"asyncThunk\"] = \"asyncThunk\";\n  return ReducerType2;\n})(ReducerType || {});\nfunction getType(slice, actionKey) {\n  return `${slice}/${actionKey}`;\n}\nfunction buildCreateSlice({\n  creators\n} = {}) {\n  const cAT = creators?.asyncThunk?.[asyncThunkSymbol];\n  return function createSlice2(options) {\n    const {\n      name,\n      reducerPath = name\n    } = options;\n    if (!name) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"`name` is a required option for createSlice\");\n    }\n    if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\") {\n      if (options.initialState === void 0) {\n        console.error(\"You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`\");\n      }\n    }\n    const reducers = (typeof options.reducers === \"function\" ? options.reducers(buildReducerCreators()) : options.reducers) || {};\n    const reducerNames = Object.keys(reducers);\n    const context = {\n      sliceCaseReducersByName: {},\n      sliceCaseReducersByType: {},\n      actionCreators: {},\n      sliceMatchers: []\n    };\n    const contextMethods = {\n      addCase(typeOrActionCreator, reducer2) {\n        const type = typeof typeOrActionCreator === \"string\" ? typeOrActionCreator : typeOrActionCreator.type;\n        if (!type) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"`context.addCase` cannot be called with an empty action type\");\n        }\n        if (type in context.sliceCaseReducersByType) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"`context.addCase` cannot be called with two reducers for the same action type: \" + type);\n        }\n        context.sliceCaseReducersByType[type] = reducer2;\n        return contextMethods;\n      },\n      addMatcher(matcher, reducer2) {\n        context.sliceMatchers.push({\n          matcher,\n          reducer: reducer2\n        });\n        return contextMethods;\n      },\n      exposeAction(name2, actionCreator) {\n        context.actionCreators[name2] = actionCreator;\n        return contextMethods;\n      },\n      exposeCaseReducer(name2, reducer2) {\n        context.sliceCaseReducersByName[name2] = reducer2;\n        return contextMethods;\n      }\n    };\n    reducerNames.forEach((reducerName) => {\n      const reducerDefinition = reducers[reducerName];\n      const reducerDetails = {\n        reducerName,\n        type: getType(name, reducerName),\n        createNotation: typeof options.reducers === \"function\"\n      };\n      if (isAsyncThunkSliceReducerDefinition(reducerDefinition)) {\n        handleThunkCaseReducerDefinition(reducerDetails, reducerDefinition, contextMethods, cAT);\n      } else {\n        handleNormalReducerDefinition(reducerDetails, reducerDefinition, contextMethods);\n      }\n    });\n    function buildReducer() {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (typeof options.extraReducers === \"object\") {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"The object notation for `createSlice.extraReducers` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice\");\n        }\n      }\n      const [extraReducers = {}, actionMatchers = [], defaultCaseReducer = void 0] = typeof options.extraReducers === \"function\" ? executeReducerBuilderCallback(options.extraReducers) : [options.extraReducers];\n      const finalCaseReducers = {\n        ...extraReducers,\n        ...context.sliceCaseReducersByType\n      };\n      return createReducer(options.initialState, (builder) => {\n        for (let key in finalCaseReducers) {\n          builder.addCase(key, finalCaseReducers[key]);\n        }\n        for (let sM of context.sliceMatchers) {\n          builder.addMatcher(sM.matcher, sM.reducer);\n        }\n        for (let m of actionMatchers) {\n          builder.addMatcher(m.matcher, m.reducer);\n        }\n        if (defaultCaseReducer) {\n          builder.addDefaultCase(defaultCaseReducer);\n        }\n      });\n    }\n    const selectSelf = (state) => state;\n    const injectedSelectorCache = /* @__PURE__ */ new Map();\n    let _reducer;\n    function reducer(state, action) {\n      if (!_reducer) _reducer = buildReducer();\n      return _reducer(state, action);\n    }\n    function getInitialState() {\n      if (!_reducer) _reducer = buildReducer();\n      return _reducer.getInitialState();\n    }\n    function makeSelectorProps(reducerPath2, injected = false) {\n      function selectSlice(state) {\n        let sliceState = state[reducerPath2];\n        if (typeof sliceState === \"undefined\") {\n          if (injected) {\n            sliceState = getInitialState();\n          } else if (process.env.NODE_ENV !== \"production\") {\n            throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : \"selectSlice returned undefined for an uninjected slice reducer\");\n          }\n        }\n        return sliceState;\n      }\n      function getSelectors(selectState = selectSelf) {\n        const selectorCache = getOrInsertComputed(injectedSelectorCache, injected, () => /* @__PURE__ */ new WeakMap());\n        return getOrInsertComputed(selectorCache, selectState, () => {\n          const map = {};\n          for (const [name2, selector] of Object.entries(options.selectors ?? {})) {\n            map[name2] = wrapSelector(selector, selectState, getInitialState, injected);\n          }\n          return map;\n        });\n      }\n      return {\n        reducerPath: reducerPath2,\n        getSelectors,\n        get selectors() {\n          return getSelectors(selectSlice);\n        },\n        selectSlice\n      };\n    }\n    const slice = {\n      name,\n      reducer,\n      actions: context.actionCreators,\n      caseReducers: context.sliceCaseReducersByName,\n      getInitialState,\n      ...makeSelectorProps(reducerPath),\n      injectInto(injectable, {\n        reducerPath: pathOpt,\n        ...config\n      } = {}) {\n        const newReducerPath = pathOpt ?? reducerPath;\n        injectable.inject({\n          reducerPath: newReducerPath,\n          reducer\n        }, config);\n        return {\n          ...slice,\n          ...makeSelectorProps(newReducerPath, true)\n        };\n      }\n    };\n    return slice;\n  };\n}\nfunction wrapSelector(selector, selectState, getInitialState, injected) {\n  function wrapper(rootState, ...args) {\n    let sliceState = selectState(rootState);\n    if (typeof sliceState === \"undefined\") {\n      if (injected) {\n        sliceState = getInitialState();\n      } else if (process.env.NODE_ENV !== \"production\") {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"selectState returned undefined for an uninjected slice reducer\");\n      }\n    }\n    return selector(sliceState, ...args);\n  }\n  wrapper.unwrapped = selector;\n  return wrapper;\n}\nvar createSlice = /* @__PURE__ */ buildCreateSlice();\nfunction buildReducerCreators() {\n  function asyncThunk(payloadCreator, config) {\n    return {\n      _reducerDefinitionType: \"asyncThunk\" /* asyncThunk */,\n      payloadCreator,\n      ...config\n    };\n  }\n  asyncThunk.withTypes = () => asyncThunk;\n  return {\n    reducer(caseReducer) {\n      return Object.assign({\n        // hack so the wrapping function has the same name as the original\n        // we need to create a wrapper so the `reducerDefinitionType` is not assigned to the original\n        [caseReducer.name](...args) {\n          return caseReducer(...args);\n        }\n      }[caseReducer.name], {\n        _reducerDefinitionType: \"reducer\" /* reducer */\n      });\n    },\n    preparedReducer(prepare, reducer) {\n      return {\n        _reducerDefinitionType: \"reducerWithPrepare\" /* reducerWithPrepare */,\n        prepare,\n        reducer\n      };\n    },\n    asyncThunk\n  };\n}\nfunction handleNormalReducerDefinition({\n  type,\n  reducerName,\n  createNotation\n}, maybeReducerWithPrepare, context) {\n  let caseReducer;\n  let prepareCallback;\n  if (\"reducer\" in maybeReducerWithPrepare) {\n    if (createNotation && !isCaseReducerWithPrepareDefinition(maybeReducerWithPrepare)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(17) : \"Please use the `create.preparedReducer` notation for prepared action creators with the `create` notation.\");\n    }\n    caseReducer = maybeReducerWithPrepare.reducer;\n    prepareCallback = maybeReducerWithPrepare.prepare;\n  } else {\n    caseReducer = maybeReducerWithPrepare;\n  }\n  context.addCase(type, caseReducer).exposeCaseReducer(reducerName, caseReducer).exposeAction(reducerName, prepareCallback ? createAction(type, prepareCallback) : createAction(type));\n}\nfunction isAsyncThunkSliceReducerDefinition(reducerDefinition) {\n  return reducerDefinition._reducerDefinitionType === \"asyncThunk\" /* asyncThunk */;\n}\nfunction isCaseReducerWithPrepareDefinition(reducerDefinition) {\n  return reducerDefinition._reducerDefinitionType === \"reducerWithPrepare\" /* reducerWithPrepare */;\n}\nfunction handleThunkCaseReducerDefinition({\n  type,\n  reducerName\n}, reducerDefinition, context, cAT) {\n  if (!cAT) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(18) : \"Cannot use `create.asyncThunk` in the built-in `createSlice`. Use `buildCreateSlice({ creators: { asyncThunk: asyncThunkCreator } })` to create a customised version of `createSlice`.\");\n  }\n  const {\n    payloadCreator,\n    fulfilled,\n    pending,\n    rejected,\n    settled,\n    options\n  } = reducerDefinition;\n  const thunk = cAT(type, payloadCreator, options);\n  context.exposeAction(reducerName, thunk);\n  if (fulfilled) {\n    context.addCase(thunk.fulfilled, fulfilled);\n  }\n  if (pending) {\n    context.addCase(thunk.pending, pending);\n  }\n  if (rejected) {\n    context.addCase(thunk.rejected, rejected);\n  }\n  if (settled) {\n    context.addMatcher(thunk.settled, settled);\n  }\n  context.exposeCaseReducer(reducerName, {\n    fulfilled: fulfilled || noop,\n    pending: pending || noop,\n    rejected: rejected || noop,\n    settled: settled || noop\n  });\n}\nfunction noop() {\n}\n\n// src/entities/entity_state.ts\nfunction getInitialEntityState() {\n  return {\n    ids: [],\n    entities: {}\n  };\n}\nfunction createInitialStateFactory(stateAdapter) {\n  function getInitialState(additionalState = {}, entities) {\n    const state = Object.assign(getInitialEntityState(), additionalState);\n    return entities ? stateAdapter.setAll(state, entities) : state;\n  }\n  return {\n    getInitialState\n  };\n}\n\n// src/entities/state_selectors.ts\nfunction createSelectorsFactory() {\n  function getSelectors(selectState, options = {}) {\n    const {\n      createSelector: createSelector2 = createDraftSafeSelector\n    } = options;\n    const selectIds = (state) => state.ids;\n    const selectEntities = (state) => state.entities;\n    const selectAll = createSelector2(selectIds, selectEntities, (ids, entities) => ids.map((id) => entities[id]));\n    const selectId = (_, id) => id;\n    const selectById = (entities, id) => entities[id];\n    const selectTotal = createSelector2(selectIds, (ids) => ids.length);\n    if (!selectState) {\n      return {\n        selectIds,\n        selectEntities,\n        selectAll,\n        selectTotal,\n        selectById: createSelector2(selectEntities, selectId, selectById)\n      };\n    }\n    const selectGlobalizedEntities = createSelector2(selectState, selectEntities);\n    return {\n      selectIds: createSelector2(selectState, selectIds),\n      selectEntities: selectGlobalizedEntities,\n      selectAll: createSelector2(selectState, selectAll),\n      selectTotal: createSelector2(selectState, selectTotal),\n      selectById: createSelector2(selectGlobalizedEntities, selectId, selectById)\n    };\n  }\n  return {\n    getSelectors\n  };\n}\n\n// src/entities/state_adapter.ts\nimport { produce as createNextState3, isDraft as isDraft3 } from \"immer\";\nvar isDraftTyped = isDraft3;\nfunction createSingleArgumentStateOperator(mutator) {\n  const operator = createStateOperator((_, state) => mutator(state));\n  return function operation(state) {\n    return operator(state, void 0);\n  };\n}\nfunction createStateOperator(mutator) {\n  return function operation(state, arg) {\n    function isPayloadActionArgument(arg2) {\n      return isFSA(arg2);\n    }\n    const runMutator = (draft) => {\n      if (isPayloadActionArgument(arg)) {\n        mutator(arg.payload, draft);\n      } else {\n        mutator(arg, draft);\n      }\n    };\n    if (isDraftTyped(state)) {\n      runMutator(state);\n      return state;\n    }\n    return createNextState3(state, runMutator);\n  };\n}\n\n// src/entities/utils.ts\nimport { current as current2, isDraft as isDraft4 } from \"immer\";\nfunction selectIdValue(entity, selectId) {\n  const key = selectId(entity);\n  if (process.env.NODE_ENV !== \"production\" && key === void 0) {\n    console.warn(\"The entity passed to the `selectId` implementation returned undefined.\", \"You should probably provide your own `selectId` implementation.\", \"The entity that was passed:\", entity, \"The `selectId` implementation:\", selectId.toString());\n  }\n  return key;\n}\nfunction ensureEntitiesArray(entities) {\n  if (!Array.isArray(entities)) {\n    entities = Object.values(entities);\n  }\n  return entities;\n}\nfunction getCurrent(value) {\n  return isDraft4(value) ? current2(value) : value;\n}\nfunction splitAddedUpdatedEntities(newEntities, selectId, state) {\n  newEntities = ensureEntitiesArray(newEntities);\n  const existingIdsArray = getCurrent(state.ids);\n  const existingIds = new Set(existingIdsArray);\n  const added = [];\n  const updated = [];\n  for (const entity of newEntities) {\n    const id = selectIdValue(entity, selectId);\n    if (existingIds.has(id)) {\n      updated.push({\n        id,\n        changes: entity\n      });\n    } else {\n      added.push(entity);\n    }\n  }\n  return [added, updated, existingIdsArray];\n}\n\n// src/entities/unsorted_state_adapter.ts\nfunction createUnsortedStateAdapter(selectId) {\n  function addOneMutably(entity, state) {\n    const key = selectIdValue(entity, selectId);\n    if (key in state.entities) {\n      return;\n    }\n    state.ids.push(key);\n    state.entities[key] = entity;\n  }\n  function addManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    for (const entity of newEntities) {\n      addOneMutably(entity, state);\n    }\n  }\n  function setOneMutably(entity, state) {\n    const key = selectIdValue(entity, selectId);\n    if (!(key in state.entities)) {\n      state.ids.push(key);\n    }\n    ;\n    state.entities[key] = entity;\n  }\n  function setManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    for (const entity of newEntities) {\n      setOneMutably(entity, state);\n    }\n  }\n  function setAllMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    state.ids = [];\n    state.entities = {};\n    addManyMutably(newEntities, state);\n  }\n  function removeOneMutably(key, state) {\n    return removeManyMutably([key], state);\n  }\n  function removeManyMutably(keys, state) {\n    let didMutate = false;\n    keys.forEach((key) => {\n      if (key in state.entities) {\n        delete state.entities[key];\n        didMutate = true;\n      }\n    });\n    if (didMutate) {\n      state.ids = state.ids.filter((id) => id in state.entities);\n    }\n  }\n  function removeAllMutably(state) {\n    Object.assign(state, {\n      ids: [],\n      entities: {}\n    });\n  }\n  function takeNewKey(keys, update, state) {\n    const original3 = state.entities[update.id];\n    if (original3 === void 0) {\n      return false;\n    }\n    const updated = Object.assign({}, original3, update.changes);\n    const newKey = selectIdValue(updated, selectId);\n    const hasNewKey = newKey !== update.id;\n    if (hasNewKey) {\n      keys[update.id] = newKey;\n      delete state.entities[update.id];\n    }\n    ;\n    state.entities[newKey] = updated;\n    return hasNewKey;\n  }\n  function updateOneMutably(update, state) {\n    return updateManyMutably([update], state);\n  }\n  function updateManyMutably(updates, state) {\n    const newKeys = {};\n    const updatesPerEntity = {};\n    updates.forEach((update) => {\n      if (update.id in state.entities) {\n        updatesPerEntity[update.id] = {\n          id: update.id,\n          // Spreads ignore falsy values, so this works even if there isn't\n          // an existing update already at this key\n          changes: {\n            ...updatesPerEntity[update.id]?.changes,\n            ...update.changes\n          }\n        };\n      }\n    });\n    updates = Object.values(updatesPerEntity);\n    const didMutateEntities = updates.length > 0;\n    if (didMutateEntities) {\n      const didMutateIds = updates.filter((update) => takeNewKey(newKeys, update, state)).length > 0;\n      if (didMutateIds) {\n        state.ids = Object.values(state.entities).map((e) => selectIdValue(e, selectId));\n      }\n    }\n  }\n  function upsertOneMutably(entity, state) {\n    return upsertManyMutably([entity], state);\n  }\n  function upsertManyMutably(newEntities, state) {\n    const [added, updated] = splitAddedUpdatedEntities(newEntities, selectId, state);\n    updateManyMutably(updated, state);\n    addManyMutably(added, state);\n  }\n  return {\n    removeAll: createSingleArgumentStateOperator(removeAllMutably),\n    addOne: createStateOperator(addOneMutably),\n    addMany: createStateOperator(addManyMutably),\n    setOne: createStateOperator(setOneMutably),\n    setMany: createStateOperator(setManyMutably),\n    setAll: createStateOperator(setAllMutably),\n    updateOne: createStateOperator(updateOneMutably),\n    updateMany: createStateOperator(updateManyMutably),\n    upsertOne: createStateOperator(upsertOneMutably),\n    upsertMany: createStateOperator(upsertManyMutably),\n    removeOne: createStateOperator(removeOneMutably),\n    removeMany: createStateOperator(removeManyMutably)\n  };\n}\n\n// src/entities/sorted_state_adapter.ts\nfunction findInsertIndex(sortedItems, item, comparisonFunction) {\n  let lowIndex = 0;\n  let highIndex = sortedItems.length;\n  while (lowIndex < highIndex) {\n    let middleIndex = lowIndex + highIndex >>> 1;\n    const currentItem = sortedItems[middleIndex];\n    const res = comparisonFunction(item, currentItem);\n    if (res >= 0) {\n      lowIndex = middleIndex + 1;\n    } else {\n      highIndex = middleIndex;\n    }\n  }\n  return lowIndex;\n}\nfunction insert(sortedItems, item, comparisonFunction) {\n  const insertAtIndex = findInsertIndex(sortedItems, item, comparisonFunction);\n  sortedItems.splice(insertAtIndex, 0, item);\n  return sortedItems;\n}\nfunction createSortedStateAdapter(selectId, comparer) {\n  const {\n    removeOne,\n    removeMany,\n    removeAll\n  } = createUnsortedStateAdapter(selectId);\n  function addOneMutably(entity, state) {\n    return addManyMutably([entity], state);\n  }\n  function addManyMutably(newEntities, state, existingIds) {\n    newEntities = ensureEntitiesArray(newEntities);\n    const existingKeys = new Set(existingIds ?? getCurrent(state.ids));\n    const models = newEntities.filter((model) => !existingKeys.has(selectIdValue(model, selectId)));\n    if (models.length !== 0) {\n      mergeFunction(state, models);\n    }\n  }\n  function setOneMutably(entity, state) {\n    return setManyMutably([entity], state);\n  }\n  function setManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    if (newEntities.length !== 0) {\n      for (const item of newEntities) {\n        delete state.entities[selectId(item)];\n      }\n      mergeFunction(state, newEntities);\n    }\n  }\n  function setAllMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    state.entities = {};\n    state.ids = [];\n    addManyMutably(newEntities, state, []);\n  }\n  function updateOneMutably(update, state) {\n    return updateManyMutably([update], state);\n  }\n  function updateManyMutably(updates, state) {\n    let appliedUpdates = false;\n    let replacedIds = false;\n    for (let update of updates) {\n      const entity = state.entities[update.id];\n      if (!entity) {\n        continue;\n      }\n      appliedUpdates = true;\n      Object.assign(entity, update.changes);\n      const newId = selectId(entity);\n      if (update.id !== newId) {\n        replacedIds = true;\n        delete state.entities[update.id];\n        const oldIndex = state.ids.indexOf(update.id);\n        state.ids[oldIndex] = newId;\n        state.entities[newId] = entity;\n      }\n    }\n    if (appliedUpdates) {\n      mergeFunction(state, [], appliedUpdates, replacedIds);\n    }\n  }\n  function upsertOneMutably(entity, state) {\n    return upsertManyMutably([entity], state);\n  }\n  function upsertManyMutably(newEntities, state) {\n    const [added, updated, existingIdsArray] = splitAddedUpdatedEntities(newEntities, selectId, state);\n    if (updated.length) {\n      updateManyMutably(updated, state);\n    }\n    if (added.length) {\n      addManyMutably(added, state, existingIdsArray);\n    }\n  }\n  function areArraysEqual(a, b) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] === b[i]) {\n        continue;\n      }\n      return false;\n    }\n    return true;\n  }\n  const mergeFunction = (state, addedItems, appliedUpdates, replacedIds) => {\n    const currentEntities = getCurrent(state.entities);\n    const currentIds = getCurrent(state.ids);\n    const stateEntities = state.entities;\n    let ids = currentIds;\n    if (replacedIds) {\n      ids = new Set(currentIds);\n    }\n    let sortedEntities = [];\n    for (const id of ids) {\n      const entity = currentEntities[id];\n      if (entity) {\n        sortedEntities.push(entity);\n      }\n    }\n    const wasPreviouslyEmpty = sortedEntities.length === 0;\n    for (const item of addedItems) {\n      stateEntities[selectId(item)] = item;\n      if (!wasPreviouslyEmpty) {\n        insert(sortedEntities, item, comparer);\n      }\n    }\n    if (wasPreviouslyEmpty) {\n      sortedEntities = addedItems.slice().sort(comparer);\n    } else if (appliedUpdates) {\n      sortedEntities.sort(comparer);\n    }\n    const newSortedIds = sortedEntities.map(selectId);\n    if (!areArraysEqual(currentIds, newSortedIds)) {\n      state.ids = newSortedIds;\n    }\n  };\n  return {\n    removeOne,\n    removeMany,\n    removeAll,\n    addOne: createStateOperator(addOneMutably),\n    updateOne: createStateOperator(updateOneMutably),\n    upsertOne: createStateOperator(upsertOneMutably),\n    setOne: createStateOperator(setOneMutably),\n    setMany: createStateOperator(setManyMutably),\n    setAll: createStateOperator(setAllMutably),\n    addMany: createStateOperator(addManyMutably),\n    updateMany: createStateOperator(updateManyMutably),\n    upsertMany: createStateOperator(upsertManyMutably)\n  };\n}\n\n// src/entities/create_adapter.ts\nfunction createEntityAdapter(options = {}) {\n  const {\n    selectId,\n    sortComparer\n  } = {\n    sortComparer: false,\n    selectId: (instance) => instance.id,\n    ...options\n  };\n  const stateAdapter = sortComparer ? createSortedStateAdapter(selectId, sortComparer) : createUnsortedStateAdapter(selectId);\n  const stateFactory = createInitialStateFactory(stateAdapter);\n  const selectorsFactory = createSelectorsFactory();\n  return {\n    selectId,\n    sortComparer,\n    ...stateFactory,\n    ...selectorsFactory,\n    ...stateAdapter\n  };\n}\n\n// src/listenerMiddleware/index.ts\nimport { isAction as isAction3 } from \"redux\";\n\n// src/listenerMiddleware/exceptions.ts\nvar task = \"task\";\nvar listener = \"listener\";\nvar completed = \"completed\";\nvar cancelled = \"cancelled\";\nvar taskCancelled = `task-${cancelled}`;\nvar taskCompleted = `task-${completed}`;\nvar listenerCancelled = `${listener}-${cancelled}`;\nvar listenerCompleted = `${listener}-${completed}`;\nvar TaskAbortError = class {\n  constructor(code) {\n    this.code = code;\n    this.message = `${task} ${cancelled} (reason: ${code})`;\n  }\n  name = \"TaskAbortError\";\n  message;\n};\n\n// src/listenerMiddleware/utils.ts\nvar assertFunction = (func, expected) => {\n  if (typeof func !== \"function\") {\n    throw new TypeError(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(32) : `${expected} is not a function`);\n  }\n};\nvar noop2 = () => {\n};\nvar catchRejection = (promise, onError = noop2) => {\n  promise.catch(onError);\n  return promise;\n};\nvar addAbortSignalListener = (abortSignal, callback) => {\n  abortSignal.addEventListener(\"abort\", callback, {\n    once: true\n  });\n  return () => abortSignal.removeEventListener(\"abort\", callback);\n};\nvar abortControllerWithReason = (abortController, reason) => {\n  const signal = abortController.signal;\n  if (signal.aborted) {\n    return;\n  }\n  if (!(\"reason\" in signal)) {\n    Object.defineProperty(signal, \"reason\", {\n      enumerable: true,\n      value: reason,\n      configurable: true,\n      writable: true\n    });\n  }\n  ;\n  abortController.abort(reason);\n};\n\n// src/listenerMiddleware/task.ts\nvar validateActive = (signal) => {\n  if (signal.aborted) {\n    const {\n      reason\n    } = signal;\n    throw new TaskAbortError(reason);\n  }\n};\nfunction raceWithSignal(signal, promise) {\n  let cleanup = noop2;\n  return new Promise((resolve, reject) => {\n    const notifyRejection = () => reject(new TaskAbortError(signal.reason));\n    if (signal.aborted) {\n      notifyRejection();\n      return;\n    }\n    cleanup = addAbortSignalListener(signal, notifyRejection);\n    promise.finally(() => cleanup()).then(resolve, reject);\n  }).finally(() => {\n    cleanup = noop2;\n  });\n}\nvar runTask = async (task2, cleanUp) => {\n  try {\n    await Promise.resolve();\n    const value = await task2();\n    return {\n      status: \"ok\",\n      value\n    };\n  } catch (error) {\n    return {\n      status: error instanceof TaskAbortError ? \"cancelled\" : \"rejected\",\n      error\n    };\n  } finally {\n    cleanUp?.();\n  }\n};\nvar createPause = (signal) => {\n  return (promise) => {\n    return catchRejection(raceWithSignal(signal, promise).then((output) => {\n      validateActive(signal);\n      return output;\n    }));\n  };\n};\nvar createDelay = (signal) => {\n  const pause = createPause(signal);\n  return (timeoutMs) => {\n    return pause(new Promise((resolve) => setTimeout(resolve, timeoutMs)));\n  };\n};\n\n// src/listenerMiddleware/index.ts\nvar {\n  assign\n} = Object;\nvar INTERNAL_NIL_TOKEN = {};\nvar alm = \"listenerMiddleware\";\nvar createFork = (parentAbortSignal, parentBlockingPromises) => {\n  const linkControllers = (controller) => addAbortSignalListener(parentAbortSignal, () => abortControllerWithReason(controller, parentAbortSignal.reason));\n  return (taskExecutor, opts) => {\n    assertFunction(taskExecutor, \"taskExecutor\");\n    const childAbortController = new AbortController();\n    linkControllers(childAbortController);\n    const result = runTask(async () => {\n      validateActive(parentAbortSignal);\n      validateActive(childAbortController.signal);\n      const result2 = await taskExecutor({\n        pause: createPause(childAbortController.signal),\n        delay: createDelay(childAbortController.signal),\n        signal: childAbortController.signal\n      });\n      validateActive(childAbortController.signal);\n      return result2;\n    }, () => abortControllerWithReason(childAbortController, taskCompleted));\n    if (opts?.autoJoin) {\n      parentBlockingPromises.push(result.catch(noop2));\n    }\n    return {\n      result: createPause(parentAbortSignal)(result),\n      cancel() {\n        abortControllerWithReason(childAbortController, taskCancelled);\n      }\n    };\n  };\n};\nvar createTakePattern = (startListening, signal) => {\n  const take = async (predicate, timeout) => {\n    validateActive(signal);\n    let unsubscribe = () => {\n    };\n    const tuplePromise = new Promise((resolve, reject) => {\n      let stopListening = startListening({\n        predicate,\n        effect: (action, listenerApi) => {\n          listenerApi.unsubscribe();\n          resolve([action, listenerApi.getState(), listenerApi.getOriginalState()]);\n        }\n      });\n      unsubscribe = () => {\n        stopListening();\n        reject();\n      };\n    });\n    const promises = [tuplePromise];\n    if (timeout != null) {\n      promises.push(new Promise((resolve) => setTimeout(resolve, timeout, null)));\n    }\n    try {\n      const output = await raceWithSignal(signal, Promise.race(promises));\n      validateActive(signal);\n      return output;\n    } finally {\n      unsubscribe();\n    }\n  };\n  return (predicate, timeout) => catchRejection(take(predicate, timeout));\n};\nvar getListenerEntryPropsFrom = (options) => {\n  let {\n    type,\n    actionCreator,\n    matcher,\n    predicate,\n    effect\n  } = options;\n  if (type) {\n    predicate = createAction(type).match;\n  } else if (actionCreator) {\n    type = actionCreator.type;\n    predicate = actionCreator.match;\n  } else if (matcher) {\n    predicate = matcher;\n  } else if (predicate) {\n  } else {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(21) : \"Creating or removing a listener requires one of the known fields for matching an action\");\n  }\n  assertFunction(effect, \"options.listener\");\n  return {\n    predicate,\n    type,\n    effect\n  };\n};\nvar createListenerEntry = /* @__PURE__ */ assign((options) => {\n  const {\n    type,\n    predicate,\n    effect\n  } = getListenerEntryPropsFrom(options);\n  const entry = {\n    id: nanoid(),\n    effect,\n    type,\n    predicate,\n    pending: /* @__PURE__ */ new Set(),\n    unsubscribe: () => {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(22) : \"Unsubscribe not initialized\");\n    }\n  };\n  return entry;\n}, {\n  withTypes: () => createListenerEntry\n});\nvar findListenerEntry = (listenerMap, options) => {\n  const {\n    type,\n    effect,\n    predicate\n  } = getListenerEntryPropsFrom(options);\n  return Array.from(listenerMap.values()).find((entry) => {\n    const matchPredicateOrType = typeof type === \"string\" ? entry.type === type : entry.predicate === predicate;\n    return matchPredicateOrType && entry.effect === effect;\n  });\n};\nvar cancelActiveListeners = (entry) => {\n  entry.pending.forEach((controller) => {\n    abortControllerWithReason(controller, listenerCancelled);\n  });\n};\nvar createClearListenerMiddleware = (listenerMap) => {\n  return () => {\n    listenerMap.forEach(cancelActiveListeners);\n    listenerMap.clear();\n  };\n};\nvar safelyNotifyError = (errorHandler, errorToNotify, errorInfo) => {\n  try {\n    errorHandler(errorToNotify, errorInfo);\n  } catch (errorHandlerError) {\n    setTimeout(() => {\n      throw errorHandlerError;\n    }, 0);\n  }\n};\nvar addListener = /* @__PURE__ */ assign(/* @__PURE__ */ createAction(`${alm}/add`), {\n  withTypes: () => addListener\n});\nvar clearAllListeners = /* @__PURE__ */ createAction(`${alm}/removeAll`);\nvar removeListener = /* @__PURE__ */ assign(/* @__PURE__ */ createAction(`${alm}/remove`), {\n  withTypes: () => removeListener\n});\nvar defaultErrorHandler = (...args) => {\n  console.error(`${alm}/error`, ...args);\n};\nvar createListenerMiddleware = (middlewareOptions = {}) => {\n  const listenerMap = /* @__PURE__ */ new Map();\n  const {\n    extra,\n    onError = defaultErrorHandler\n  } = middlewareOptions;\n  assertFunction(onError, \"onError\");\n  const insertEntry = (entry) => {\n    entry.unsubscribe = () => listenerMap.delete(entry.id);\n    listenerMap.set(entry.id, entry);\n    return (cancelOptions) => {\n      entry.unsubscribe();\n      if (cancelOptions?.cancelActive) {\n        cancelActiveListeners(entry);\n      }\n    };\n  };\n  const startListening = (options) => {\n    const entry = findListenerEntry(listenerMap, options) ?? createListenerEntry(options);\n    return insertEntry(entry);\n  };\n  assign(startListening, {\n    withTypes: () => startListening\n  });\n  const stopListening = (options) => {\n    const entry = findListenerEntry(listenerMap, options);\n    if (entry) {\n      entry.unsubscribe();\n      if (options.cancelActive) {\n        cancelActiveListeners(entry);\n      }\n    }\n    return !!entry;\n  };\n  assign(stopListening, {\n    withTypes: () => stopListening\n  });\n  const notifyListener = async (entry, action, api, getOriginalState) => {\n    const internalTaskController = new AbortController();\n    const take = createTakePattern(startListening, internalTaskController.signal);\n    const autoJoinPromises = [];\n    try {\n      entry.pending.add(internalTaskController);\n      await Promise.resolve(entry.effect(\n        action,\n        // Use assign() rather than ... to avoid extra helper functions added to bundle\n        assign({}, api, {\n          getOriginalState,\n          condition: (predicate, timeout) => take(predicate, timeout).then(Boolean),\n          take,\n          delay: createDelay(internalTaskController.signal),\n          pause: createPause(internalTaskController.signal),\n          extra,\n          signal: internalTaskController.signal,\n          fork: createFork(internalTaskController.signal, autoJoinPromises),\n          unsubscribe: entry.unsubscribe,\n          subscribe: () => {\n            listenerMap.set(entry.id, entry);\n          },\n          cancelActiveListeners: () => {\n            entry.pending.forEach((controller, _, set) => {\n              if (controller !== internalTaskController) {\n                abortControllerWithReason(controller, listenerCancelled);\n                set.delete(controller);\n              }\n            });\n          },\n          cancel: () => {\n            abortControllerWithReason(internalTaskController, listenerCancelled);\n            entry.pending.delete(internalTaskController);\n          },\n          throwIfCancelled: () => {\n            validateActive(internalTaskController.signal);\n          }\n        })\n      ));\n    } catch (listenerError) {\n      if (!(listenerError instanceof TaskAbortError)) {\n        safelyNotifyError(onError, listenerError, {\n          raisedBy: \"effect\"\n        });\n      }\n    } finally {\n      await Promise.all(autoJoinPromises);\n      abortControllerWithReason(internalTaskController, listenerCompleted);\n      entry.pending.delete(internalTaskController);\n    }\n  };\n  const clearListenerMiddleware = createClearListenerMiddleware(listenerMap);\n  const middleware = (api) => (next) => (action) => {\n    if (!isAction3(action)) {\n      return next(action);\n    }\n    if (addListener.match(action)) {\n      return startListening(action.payload);\n    }\n    if (clearAllListeners.match(action)) {\n      clearListenerMiddleware();\n      return;\n    }\n    if (removeListener.match(action)) {\n      return stopListening(action.payload);\n    }\n    let originalState = api.getState();\n    const getOriginalState = () => {\n      if (originalState === INTERNAL_NIL_TOKEN) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(23) : `${alm}: getOriginalState can only be called synchronously`);\n      }\n      return originalState;\n    };\n    let result;\n    try {\n      result = next(action);\n      if (listenerMap.size > 0) {\n        const currentState = api.getState();\n        const listenerEntries = Array.from(listenerMap.values());\n        for (const entry of listenerEntries) {\n          let runListener = false;\n          try {\n            runListener = entry.predicate(action, currentState, originalState);\n          } catch (predicateError) {\n            runListener = false;\n            safelyNotifyError(onError, predicateError, {\n              raisedBy: \"predicate\"\n            });\n          }\n          if (!runListener) {\n            continue;\n          }\n          notifyListener(entry, action, api, getOriginalState);\n        }\n      }\n    } finally {\n      originalState = INTERNAL_NIL_TOKEN;\n    }\n    return result;\n  };\n  return {\n    middleware,\n    startListening,\n    stopListening,\n    clearListeners: clearListenerMiddleware\n  };\n};\n\n// src/dynamicMiddleware/index.ts\nimport { compose as compose3 } from \"redux\";\nvar createMiddlewareEntry = (middleware) => ({\n  middleware,\n  applied: /* @__PURE__ */ new Map()\n});\nvar matchInstance = (instanceId) => (action) => action?.meta?.instanceId === instanceId;\nvar createDynamicMiddleware = () => {\n  const instanceId = nanoid();\n  const middlewareMap = /* @__PURE__ */ new Map();\n  const withMiddleware = Object.assign(createAction(\"dynamicMiddleware/add\", (...middlewares) => ({\n    payload: middlewares,\n    meta: {\n      instanceId\n    }\n  })), {\n    withTypes: () => withMiddleware\n  });\n  const addMiddleware = Object.assign(function addMiddleware2(...middlewares) {\n    middlewares.forEach((middleware2) => {\n      getOrInsertComputed(middlewareMap, middleware2, createMiddlewareEntry);\n    });\n  }, {\n    withTypes: () => addMiddleware\n  });\n  const getFinalMiddleware = (api) => {\n    const appliedMiddleware = Array.from(middlewareMap.values()).map((entry) => getOrInsertComputed(entry.applied, api, entry.middleware));\n    return compose3(...appliedMiddleware);\n  };\n  const isWithMiddleware = isAllOf(withMiddleware, matchInstance(instanceId));\n  const middleware = (api) => (next) => (action) => {\n    if (isWithMiddleware(action)) {\n      addMiddleware(...action.payload);\n      return api.dispatch;\n    }\n    return getFinalMiddleware(api)(next)(action);\n  };\n  return {\n    middleware,\n    addMiddleware,\n    withMiddleware,\n    instanceId\n  };\n};\n\n// src/combineSlices.ts\nimport { combineReducers as combineReducers2 } from \"redux\";\nvar isSliceLike = (maybeSliceLike) => \"reducerPath\" in maybeSliceLike && typeof maybeSliceLike.reducerPath === \"string\";\nvar getReducers = (slices) => slices.flatMap((sliceOrMap) => isSliceLike(sliceOrMap) ? [[sliceOrMap.reducerPath, sliceOrMap.reducer]] : Object.entries(sliceOrMap));\nvar ORIGINAL_STATE = Symbol.for(\"rtk-state-proxy-original\");\nvar isStateProxy = (value) => !!value && !!value[ORIGINAL_STATE];\nvar stateProxyMap = /* @__PURE__ */ new WeakMap();\nvar createStateProxy = (state, reducerMap) => getOrInsertComputed(stateProxyMap, state, () => new Proxy(state, {\n  get: (target, prop, receiver) => {\n    if (prop === ORIGINAL_STATE) return target;\n    const result = Reflect.get(target, prop, receiver);\n    if (typeof result === \"undefined\") {\n      const reducer = reducerMap[prop.toString()];\n      if (reducer) {\n        const reducerResult = reducer(void 0, {\n          type: nanoid()\n        });\n        if (typeof reducerResult === \"undefined\") {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(24) : `The slice reducer for key \"${prop.toString()}\" returned undefined when called for selector(). If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);\n        }\n        return reducerResult;\n      }\n    }\n    return result;\n  }\n}));\nvar original = (state) => {\n  if (!isStateProxy(state)) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(25) : \"original must be used on state Proxy\");\n  }\n  return state[ORIGINAL_STATE];\n};\nvar noopReducer = (state = {}) => state;\nfunction combineSlices(...slices) {\n  const reducerMap = Object.fromEntries(getReducers(slices));\n  const getReducer = () => Object.keys(reducerMap).length ? combineReducers2(reducerMap) : noopReducer;\n  let reducer = getReducer();\n  function combinedReducer(state, action) {\n    return reducer(state, action);\n  }\n  combinedReducer.withLazyLoadedSlices = () => combinedReducer;\n  const inject = (slice, config = {}) => {\n    const {\n      reducerPath,\n      reducer: reducerToInject\n    } = slice;\n    const currentReducer = reducerMap[reducerPath];\n    if (!config.overrideExisting && currentReducer && currentReducer !== reducerToInject) {\n      if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\") {\n        console.error(`called \\`inject\\` to override already-existing reducer ${reducerPath} without specifying \\`overrideExisting: true\\``);\n      }\n      return combinedReducer;\n    }\n    reducerMap[reducerPath] = reducerToInject;\n    reducer = getReducer();\n    return combinedReducer;\n  };\n  const selector = Object.assign(function makeSelector(selectorFn, selectState) {\n    return function selector2(state, ...args) {\n      return selectorFn(createStateProxy(selectState ? selectState(state, ...args) : state, reducerMap), ...args);\n    };\n  }, {\n    original\n  });\n  return Object.assign(combinedReducer, {\n    inject,\n    selector\n  });\n}\n\n// src/formatProdErrorMessage.ts\nfunction formatProdErrorMessage(code) {\n  return `Minified Redux Toolkit error #${code}; visit https://redux-toolkit.js.org/Errors?code=${code} for the full message or use the non-minified dev environment for full errors. `;\n}\nexport {\n  ReducerType,\n  SHOULD_AUTOBATCH,\n  TaskAbortError,\n  Tuple,\n  addListener,\n  asyncThunkCreator,\n  autoBatchEnhancer,\n  buildCreateSlice,\n  clearAllListeners,\n  combineSlices,\n  configureStore,\n  createAction,\n  createActionCreatorInvariantMiddleware,\n  createAsyncThunk,\n  createDraftSafeSelector,\n  createDraftSafeSelectorCreator,\n  createDynamicMiddleware,\n  createEntityAdapter,\n  createImmutableStateInvariantMiddleware,\n  createListenerMiddleware,\n  produce as createNextState,\n  createReducer,\n  createSelector,\n  createSelectorCreator2 as createSelectorCreator,\n  createSerializableStateInvariantMiddleware,\n  createSlice,\n  current3 as current,\n  findNonSerializableValue,\n  formatProdErrorMessage,\n  freeze,\n  isActionCreator,\n  isAllOf,\n  isAnyOf,\n  isAsyncThunkAction,\n  isDraft5 as isDraft,\n  isFSA as isFluxStandardAction,\n  isFulfilled,\n  isImmutableDefault,\n  isPending,\n  isPlain,\n  isRejected,\n  isRejectedWithValue,\n  lruMemoize,\n  miniSerializeError,\n  nanoid,\n  original2 as original,\n  prepareAutoBatched,\n  removeListener,\n  unwrapResult,\n  weakMapMemoize2 as weakMapMemoize\n};\n//# sourceMappingURL=redux-toolkit.modern.mjs.map","import React__default from 'react';\nimport { EditorStack } from './EditorStack.js';\n\nconst EditorFieldGroup = ({ children }) => {\n  return /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 1 }, children);\n};\n\nexport { EditorFieldGroup };\n//# sourceMappingURL=EditorFieldGroup.js.map\n","import { Button } from '@grafana/ui';\nimport React__default from 'react';\nimport { EditorStack } from './EditorStack.js';\n\nconst EditorList = React__default.forwardRef(function EditorList2({ items, renderItem, onChange }, ref) {\n  const onAddItem = () => {\n    const newItems = [...items, {}];\n    onChange(newItems);\n  };\n  const onChangeItem = (itemIndex, newItem) => {\n    const newItems = [...items];\n    newItems[itemIndex] = newItem;\n    onChange(newItems);\n  };\n  const onDeleteItem = (itemIndex) => {\n    const newItems = [...items];\n    newItems.splice(itemIndex, 1);\n    onChange(newItems);\n  };\n  return /* @__PURE__ */ React__default.createElement(EditorStack, null, items.map((item, index) => /* @__PURE__ */ React__default.createElement(\"div\", { key: index }, renderItem(\n    item,\n    (newItem) => onChangeItem(index, newItem),\n    () => onDeleteItem(index)\n  ))), /* @__PURE__ */ React__default.createElement(Button, { ref, onClick: onAddItem, variant: \"secondary\", size: \"md\", icon: \"plus\", \"aria-label\": \"Add\", type: \"button\" }));\n});\n\nexport { EditorList };\n//# sourceMappingURL=EditorList.js.map\n","import { cx, css } from '@emotion/css';\nimport { useStyles2 } from '@grafana/ui';\nimport React__default, { Children, isValidElement, cloneElement } from 'react';\n\nconst InputGroup = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  const modifiedChildren = Children.map(children, (child) => {\n    if (isValidElement(child) && child.props.invalid) {\n      return cloneElement(child, { className: cx(child.props.className, styles.invalidChild) });\n    }\n    return child;\n  });\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, modifiedChildren);\n};\nconst borderPriority = [\n  \"\",\n  // lowest priority\n  \"base\",\n  \"hovered\",\n  \"invalid\",\n  \"focused\"\n  // highest priority\n];\nconst getStyles = () => ({\n  root: css({\n    display: \"flex\",\n    // Style the direct children of the component\n    \"> *\": {\n      \"&:not(:first-child)\": {\n        // Negative margin hides the double-border on adjacent selects\n        marginLeft: -1\n      },\n      \"&:first-child\": {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0\n      },\n      \"&:last-child\": {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0\n      },\n      \"&:not(:first-child):not(:last-child)\": {\n        borderRadius: 0\n      },\n      //\n      position: \"relative\",\n      zIndex: borderPriority.indexOf(\"base\"),\n      // Adjacent borders are overlapping, so raise children up when hovering etc\n      // so all that child's borders are visible.\n      \"&:hover\": {\n        zIndex: borderPriority.indexOf(\"hovered\")\n      },\n      \"&:focus-within\": {\n        zIndex: borderPriority.indexOf(\"focused\")\n      }\n    }\n  }),\n  invalidChild: css({\n    zIndex: borderPriority.indexOf(\"invalid\")\n  })\n});\n\nexport { InputGroup };\n//# sourceMappingURL=InputGroup.js.map\n","import { cx, css } from '@emotion/css';\nimport React__default from 'react';\nimport '@grafana/data';\nimport { useStyles2, Button } from '@grafana/ui';\n\nconst AccessoryButton = ({ className, ...props }) => {\n  const styles = useStyles2(getButtonStyles);\n  return /* @__PURE__ */ React__default.createElement(Button, { ...props, className: cx(className, styles.button) });\n};\nconst getButtonStyles = (theme) => ({\n  button: css({\n    paddingLeft: theme.spacing(3 / 2),\n    paddingRight: theme.spacing(3 / 2)\n  })\n});\n\nexport { AccessoryButton };\n//# sourceMappingURL=AccessoryButton.js.map\n","import { uniqBy } from 'lodash';\nimport React__default, { useState, useRef } from 'react';\nimport { v4 } from 'uuid';\nimport { toOption } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { InlineField, Select } from '@grafana/ui';\nimport { InputGroup } from '../../QueryEditor/InputGroup.js';\nimport { AccessoryButton } from '../../QueryEditor/AccessoryButton.js';\n\nconst CONFLICTING_LABEL_FILTER_ERROR_MESSAGE = \"You have conflicting label filters\";\nfunction LabelFilterItem({\n  item,\n  items,\n  defaultOp,\n  onChange,\n  onDelete,\n  onGetLabelNames,\n  onGetLabelValues,\n  invalidLabel,\n  invalidValue,\n  multiValueSeparator = \"|\"\n}) {\n  var _a;\n  const [state, setState] = useState({});\n  const [labelNamesMenuOpen, setLabelNamesMenuOpen] = useState(false);\n  const [labelValuesMenuOpen, setLabelValuesMenuOpen] = useState(false);\n  const isMultiSelect = (operator = item.op) => {\n    var _a2;\n    return (_a2 = operators.find((op) => op.label === operator)) == null ? undefined : _a2.isMultiValue;\n  };\n  const getSelectOptionsFromString = (item2) => {\n    if (item2) {\n      if (item2.indexOf(multiValueSeparator) > 0) {\n        return item2.split(multiValueSeparator);\n      }\n      return [item2];\n    }\n    return [];\n  };\n  const getOptions = () => {\n    const labelValues = state.labelValues ? [...state.labelValues] : [];\n    const selectedOptions = getSelectOptionsFromString(item == null ? undefined : item.value).map(toOption);\n    return uniqBy([...selectedOptions, ...labelValues], \"value\");\n  };\n  const isConflicting = isConflictingLabelFilter(item, items);\n  const { current: id } = useRef(v4());\n  return /* @__PURE__ */ React__default.createElement(\"div\", { \"data-testid\": \"visual-query-builder-dimensions-filter-item\" }, /* @__PURE__ */ React__default.createElement(InlineField, { error: CONFLICTING_LABEL_FILTER_ERROR_MESSAGE, invalid: isConflicting ? true : undefined }, /* @__PURE__ */ React__default.createElement(InputGroup, null, /* @__PURE__ */ React__default.createElement(\n    Select,\n    {\n      placeholder: \"Select label\",\n      \"data-testid\": selectors.components.QueryBuilder.labelSelect,\n      inputId: `visual-query-builder-dimensions-filter-item-key-${id}`,\n      width: \"auto\",\n      value: item.label ? toOption(item.label) : null,\n      allowCustomValue: true,\n      onOpenMenu: async () => {\n        setState({ isLoadingLabelNames: true });\n        const labelNames = await onGetLabelNames(item);\n        setLabelNamesMenuOpen(true);\n        setState({ labelNames, isLoadingLabelNames: undefined });\n      },\n      onCloseMenu: () => {\n        setLabelNamesMenuOpen(false);\n      },\n      isOpen: labelNamesMenuOpen,\n      isLoading: state.isLoadingLabelNames,\n      options: state.labelNames,\n      onChange: (change) => {\n        var _a2;\n        if (change.value) {\n          onChange({\n            ...item,\n            op: (_a2 = item.op) != null ? _a2 : defaultOp,\n            label: change.value\n          });\n        }\n      },\n      invalid: isConflicting || invalidLabel\n    }\n  ), /* @__PURE__ */ React__default.createElement(\n    Select,\n    {\n      \"data-testid\": selectors.components.QueryBuilder.matchOperatorSelect,\n      value: toOption((_a = item.op) != null ? _a : defaultOp),\n      options: operators,\n      width: \"auto\",\n      onChange: (change) => {\n        if (change.value) {\n          onChange({\n            ...item,\n            op: change.value,\n            value: isMultiSelect(change.value) ? item.value : getSelectOptionsFromString(item == null ? undefined : item.value)[0]\n          });\n        }\n      },\n      invalid: isConflicting\n    }\n  ), /* @__PURE__ */ React__default.createElement(\n    Select,\n    {\n      placeholder: \"Select value\",\n      \"data-testid\": selectors.components.QueryBuilder.valueSelect,\n      inputId: `visual-query-builder-dimensions-filter-item-value-${id}`,\n      width: \"auto\",\n      value: isMultiSelect() ? getSelectOptionsFromString(item == null ? undefined : item.value).map(toOption) : getSelectOptionsFromString(item == null ? undefined : item.value).map(toOption)[0],\n      allowCustomValue: true,\n      onOpenMenu: async () => {\n        setState({ isLoadingLabelValues: true });\n        const labelValues = await onGetLabelValues(item);\n        setState({\n          ...state,\n          labelValues,\n          isLoadingLabelValues: undefined\n        });\n        setLabelValuesMenuOpen(true);\n      },\n      onCloseMenu: () => {\n        setLabelValuesMenuOpen(false);\n      },\n      isOpen: labelValuesMenuOpen,\n      isMulti: isMultiSelect(),\n      isLoading: state.isLoadingLabelValues,\n      options: getOptions(),\n      onChange: (change) => {\n        var _a2, _b;\n        if (change.value) {\n          onChange({\n            ...item,\n            value: change.value,\n            op: (_a2 = item.op) != null ? _a2 : defaultOp\n          });\n        } else {\n          const changes = change.map((change2) => {\n            if (change2.value) {\n              return change2.value;\n            } else {\n              return undefined;\n            }\n          }).filter((val) => val !== undefined).join(multiValueSeparator);\n          onChange({ ...item, value: changes, op: (_b = item.op) != null ? _b : defaultOp });\n        }\n      },\n      invalid: isConflicting || invalidValue\n    }\n  ), /* @__PURE__ */ React__default.createElement(AccessoryButton, { \"aria-label\": \"remove\", icon: \"times\", variant: \"secondary\", onClick: onDelete }))));\n}\nconst operators = [\n  { label: \"=\", value: \"=\", description: \"Equals\", isMultiValue: false },\n  { label: \"!=\", value: \"!=\", description: \"Does not equal\", isMultiValue: false },\n  { label: \"=~\", value: \"=~\", description: \"Matches regex\", isMultiValue: true },\n  { label: \"!~\", value: \"!~\", description: \"Does not match regex\", isMultiValue: true }\n];\nfunction isConflictingLabelFilter(newLabel, labels) {\n  if (!newLabel.label || !newLabel.op || !newLabel.value) {\n    return false;\n  }\n  if (labels.length < 2) {\n    return false;\n  }\n  const operationIsNegative = newLabel.op.toString().startsWith(\"!\");\n  const candidates = labels.filter(\n    (label) => label.label === newLabel.label && label.value === newLabel.value && label.op !== newLabel.op\n  );\n  const conflict = candidates.some((candidate) => {\n    var _a, _b;\n    if (operationIsNegative && ((_a = candidate == null ? undefined : candidate.op) == null ? undefined : _a.toString().startsWith(\"!\")) === false) {\n      return true;\n    }\n    if (operationIsNegative === false && ((_b = candidate == null ? undefined : candidate.op) == null ? undefined : _b.toString().startsWith(\"!\"))) {\n      return true;\n    }\n    return false;\n  });\n  return conflict;\n}\n\nexport { LabelFilterItem, isConflictingLabelFilter };\n//# sourceMappingURL=LabelFilterItem.js.map\n","import { isEqual } from 'lodash';\nimport React__default, { useState, useEffect } from 'react';\nimport '@grafana/data';\nimport { EditorField } from '../../QueryEditor/EditorField.js';\nimport { EditorFieldGroup } from '../../QueryEditor/EditorFieldGroup.js';\nimport { EditorList } from '../../QueryEditor/EditorList.js';\nimport { LabelFilterItem } from './LabelFilterItem.js';\n\nconst MISSING_LABEL_FILTER_ERROR_MESSAGE = \"Select at least 1 label filter (label and value)\";\nfunction LabelFilters({\n  labelsFilters,\n  onChange,\n  onGetLabelNames,\n  onGetLabelValues,\n  labelFilterRequired,\n  multiValueSeparator\n}) {\n  const defaultOp = \"=\";\n  const [items, setItems] = useState([{ op: defaultOp }]);\n  useEffect(() => {\n    if (labelsFilters.length > 0) {\n      setItems(labelsFilters);\n    } else {\n      setItems([{ op: defaultOp }]);\n    }\n  }, [labelsFilters]);\n  const onLabelsChange = (newItems) => {\n    setItems(newItems);\n    const newLabels = newItems.filter(\n      (item) => item.label !== undefined && item.value !== undefined\n    );\n    if (!isEqual(newLabels, labelsFilters)) {\n      onChange(newLabels);\n    }\n  };\n  const hasLabelFilter = items.some((item) => item.label && item.value);\n  return /* @__PURE__ */ React__default.createElement(EditorFieldGroup, null, /* @__PURE__ */ React__default.createElement(\n    EditorField,\n    {\n      label: \"Label filters\",\n      error: MISSING_LABEL_FILTER_ERROR_MESSAGE,\n      invalid: labelFilterRequired && !hasLabelFilter\n    },\n    /* @__PURE__ */ React__default.createElement(\n      EditorList,\n      {\n        items,\n        onChange: onLabelsChange,\n        renderItem: (item, onChangeItem, onDelete) => /* @__PURE__ */ React__default.createElement(\n          LabelFilterItem,\n          {\n            item,\n            items,\n            defaultOp,\n            onChange: onChangeItem,\n            onDelete,\n            onGetLabelNames,\n            onGetLabelValues,\n            invalidLabel: labelFilterRequired && !item.label,\n            invalidValue: labelFilterRequired && !item.value,\n            multiValueSeparator\n          }\n        )\n      }\n    )\n  ));\n}\n\nexport { LabelFilters, MISSING_LABEL_FILTER_ERROR_MESSAGE };\n//# sourceMappingURL=LabelFilters.js.map\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport { renderMarkdown } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nfunction OperationExplainedBox({ title, stepNumber, markdown, children }) {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.box }, stepNumber !== undefined && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.stepNumber }, stepNumber), /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.boxInner }, title && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.header }, /* @__PURE__ */ React__default.createElement(\"span\", null, title)), /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.body }, markdown && /* @__PURE__ */ React__default.createElement(\"div\", { dangerouslySetInnerHTML: { __html: renderMarkdown(markdown) } }), children)));\n}\nconst getStyles = (theme) => {\n  return {\n    box: css({\n      background: theme.colors.background.secondary,\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.radius.default,\n      position: \"relative\"\n    }),\n    boxInner: css({\n      marginLeft: theme.spacing(4)\n    }),\n    stepNumber: css({\n      fontWeight: theme.typography.fontWeightMedium,\n      background: theme.colors.secondary.main,\n      width: \"20px\",\n      height: \"20px\",\n      borderRadius: theme.shape.radius.circle,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      position: \"absolute\",\n      top: \"10px\",\n      left: \"11px\",\n      fontSize: theme.typography.bodySmall.fontSize\n    }),\n    header: css({\n      paddingBottom: theme.spacing(0.5),\n      display: \"flex\",\n      alignItems: \"center\",\n      fontFamily: theme.typography.fontFamilyMonospace\n    }),\n    body: css({\n      color: theme.colors.text.secondary,\n      \"p:last-child\": {\n        margin: 0\n      },\n      a: {\n        color: theme.colors.text.link,\n        textDecoration: \"underline\"\n      }\n    })\n  };\n};\n\nexport { OperationExplainedBox };\n//# sourceMappingURL=OperationExplainedBox.js.map\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport '../../QueryEditor/types.js';\nimport 'lodash';\nimport '../../QueryEditor/EditorList.js';\nimport { EditorStack } from '../../QueryEditor/EditorStack.js';\nimport '../../QueryEditor/Space.js';\nimport 'react-use';\nimport '../../QueryEditor/QueryHeader.js';\nimport 'react-virtualized-auto-sizer';\nimport 'sql-formatter-plus';\nimport '../../SQLEditor/standardSql/language.js';\nimport 'uuid';\nimport '@grafana/runtime';\nimport '../../SQLEditor/utils/debugger.js';\nimport '../../SQLEditor/standardSql/macros.js';\nimport '../../QueryEditor/visual-query-builder/AwesomeQueryBuilder.js';\nimport '../../QueryEditor/visual-query-builder/WhereRow.js';\nimport '../../QueryEditor/visual-query-builder/EditorField.js';\nimport 'rxjs';\nimport 'rxjs/operators';\n\nfunction OperationsEditorRow({ children }) {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 1 }, children));\n}\nconst getStyles = (theme) => {\n  return {\n    root: css({\n      padding: theme.spacing(1, 1, 0, 1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.radius.default\n    })\n  };\n};\n\nexport { OperationsEditorRow };\n//# sourceMappingURL=OperationsEditorRow.js.map\n","import { useState, useRef, useEffect } from 'react';\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (newInputs[i] !== lastInputs[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction useMemoOne(getResult, inputs) {\n  var initial = useState(function () {\n    return {\n      inputs: inputs,\n      result: getResult()\n    };\n  })[0];\n  var isFirstRun = useRef(true);\n  var committed = useRef(initial);\n  var useCache = isFirstRun.current || Boolean(inputs && committed.current.inputs && areInputsEqual(inputs, committed.current.inputs));\n  var cache = useCache ? committed.current : {\n    inputs: inputs,\n    result: getResult()\n  };\n  useEffect(function () {\n    isFirstRun.current = false;\n    committed.current = cache;\n  }, [cache]);\n  return cache.result;\n}\nfunction useCallbackOne(callback, inputs) {\n  return useMemoOne(function () {\n    return callback;\n  }, inputs);\n}\nvar useMemo = useMemoOne;\nvar useCallback = useCallbackOne;\n\nexport { useCallback, useCallbackOne, useMemo, useMemoOne };\n","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n    if (condition) {\n        return;\n    }\n    if (isProduction) {\n        throw new Error(prefix);\n    }\n    var provided = typeof message === 'function' ? message() : message;\n    var value = provided ? \"\".concat(prefix, \": \").concat(provided) : prefix;\n    throw new Error(value);\n}\n\nexport { invariant as default };\n","import invariant from 'tiny-invariant';\n\nvar getRect = function getRect(_ref) {\n  var top = _ref.top,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      left = _ref.left;\n  var width = right - left;\n  var height = bottom - top;\n  var rect = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left,\n    width: width,\n    height: height,\n    x: left,\n    y: top,\n    center: {\n      x: (right + left) / 2,\n      y: (bottom + top) / 2\n    }\n  };\n  return rect;\n};\nvar expand = function expand(target, expandBy) {\n  return {\n    top: target.top - expandBy.top,\n    left: target.left - expandBy.left,\n    bottom: target.bottom + expandBy.bottom,\n    right: target.right + expandBy.right\n  };\n};\nvar shrink = function shrink(target, shrinkBy) {\n  return {\n    top: target.top + shrinkBy.top,\n    left: target.left + shrinkBy.left,\n    bottom: target.bottom - shrinkBy.bottom,\n    right: target.right - shrinkBy.right\n  };\n};\n\nvar shift = function shift(target, shiftBy) {\n  return {\n    top: target.top + shiftBy.y,\n    left: target.left + shiftBy.x,\n    bottom: target.bottom + shiftBy.y,\n    right: target.right + shiftBy.x\n  };\n};\n\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nvar createBox = function createBox(_ref2) {\n  var borderBox = _ref2.borderBox,\n      _ref2$margin = _ref2.margin,\n      margin = _ref2$margin === void 0 ? noSpacing : _ref2$margin,\n      _ref2$border = _ref2.border,\n      border = _ref2$border === void 0 ? noSpacing : _ref2$border,\n      _ref2$padding = _ref2.padding,\n      padding = _ref2$padding === void 0 ? noSpacing : _ref2$padding;\n  var marginBox = getRect(expand(borderBox, margin));\n  var paddingBox = getRect(shrink(borderBox, border));\n  var contentBox = getRect(shrink(paddingBox, padding));\n  return {\n    marginBox: marginBox,\n    borderBox: getRect(borderBox),\n    paddingBox: paddingBox,\n    contentBox: contentBox,\n    margin: margin,\n    border: border,\n    padding: padding\n  };\n};\n\nvar parse = function parse(raw) {\n  var value = raw.slice(0, -2);\n  var suffix = raw.slice(-2);\n\n  if (suffix !== 'px') {\n    return 0;\n  }\n\n  var result = Number(value);\n  !!isNaN(result) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Could not parse value [raw: \" + raw + \", without suffix: \" + value + \"]\") : invariant(false) : void 0;\n  return result;\n};\n\nvar getWindowScroll = function getWindowScroll() {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n};\n\nvar offset = function offset(original, change) {\n  var borderBox = original.borderBox,\n      border = original.border,\n      margin = original.margin,\n      padding = original.padding;\n  var shifted = shift(borderBox, change);\n  return createBox({\n    borderBox: shifted,\n    border: border,\n    margin: margin,\n    padding: padding\n  });\n};\nvar withScroll = function withScroll(original, scroll) {\n  if (scroll === void 0) {\n    scroll = getWindowScroll();\n  }\n\n  return offset(original, scroll);\n};\nvar calculateBox = function calculateBox(borderBox, styles) {\n  var margin = {\n    top: parse(styles.marginTop),\n    right: parse(styles.marginRight),\n    bottom: parse(styles.marginBottom),\n    left: parse(styles.marginLeft)\n  };\n  var padding = {\n    top: parse(styles.paddingTop),\n    right: parse(styles.paddingRight),\n    bottom: parse(styles.paddingBottom),\n    left: parse(styles.paddingLeft)\n  };\n  var border = {\n    top: parse(styles.borderTopWidth),\n    right: parse(styles.borderRightWidth),\n    bottom: parse(styles.borderBottomWidth),\n    left: parse(styles.borderLeftWidth)\n  };\n  return createBox({\n    borderBox: borderBox,\n    margin: margin,\n    padding: padding,\n    border: border\n  });\n};\nvar getBox = function getBox(el) {\n  var borderBox = el.getBoundingClientRect();\n  var styles = window.getComputedStyle(el);\n  return calculateBox(borderBox, styles);\n};\n\nexport { calculateBox, createBox, expand, getBox, getRect, offset, shrink, withScroll };\n","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var cache = null;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (cache && cache.lastThis === this && isEqual(newArgs, cache.lastArgs)) {\n            return cache.lastResult;\n        }\n        var lastResult = resultFn.apply(this, newArgs);\n        cache = {\n            lastResult: lastResult,\n            lastArgs: newArgs,\n            lastThis: this,\n        };\n        return lastResult;\n    }\n    memoized.clear = function clear() {\n        cache = null;\n    };\n    return memoized;\n}\n\nexport { memoizeOne as default };\n","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","import React, { useLayoutEffect, useEffect, useRef, useState, useContext } from 'react';\nimport ReactDOM, { flushSync } from 'react-dom';\nimport { createStore as createStore$1, applyMiddleware, compose, bindActionCreators } from 'redux';\nimport { Provider, connect } from 'react-redux';\nimport { useMemo, useCallback } from 'use-memo-one';\nimport { getRect, expand, offset, withScroll, calculateBox, getBox, createBox } from 'css-box-model';\nimport memoizeOne from 'memoize-one';\nimport rafSchd from 'raf-schd';\nimport _extends from '@babel/runtime/helpers/esm/extends';\n\nconst isProduction$1 = process.env.NODE_ENV === 'production';\nconst spacesAndTabs = /[ \\t]{2,}/g;\nconst lineStartWithSpaces = /^[ \\t]*/gm;\nconst clean$2 = value => value.replace(spacesAndTabs, ' ').replace(lineStartWithSpaces, '').trim();\nconst getDevMessage = message => clean$2(`\n  %c@hello-pangea/dnd\n\n  %c${clean$2(message)}\n\n  %c This is a development only message. It will be removed in production builds.\n`);\nconst getFormattedMessage = message => [getDevMessage(message), 'color: #00C584; font-size: 1.2em; font-weight: bold;', 'line-height: 1.5', 'color: #723874;'];\nconst isDisabledFlag = '__@hello-pangea/dnd-disable-dev-warnings';\nfunction log(type, message) {\n  if (isProduction$1) {\n    return;\n  }\n  if (typeof window !== 'undefined' && window[isDisabledFlag]) {\n    return;\n  }\n  console[type](...getFormattedMessage(message));\n}\nconst warning = log.bind(null, 'warn');\nconst error = log.bind(null, 'error');\n\nfunction noop$2() {}\n\nfunction getOptions(shared, fromBinding) {\n  return {\n    ...shared,\n    ...fromBinding\n  };\n}\nfunction bindEvents(el, bindings, sharedOptions) {\n  const unbindings = bindings.map(binding => {\n    const options = getOptions(sharedOptions, binding.options);\n    el.addEventListener(binding.eventName, binding.fn, options);\n    return function unbind() {\n      el.removeEventListener(binding.eventName, binding.fn, options);\n    };\n  });\n  return function unbindAll() {\n    unbindings.forEach(unbind => {\n      unbind();\n    });\n  };\n}\n\nconst isProduction = process.env.NODE_ENV === 'production';\nconst prefix$1 = 'Invariant failed';\nclass RbdInvariant extends Error {}\nRbdInvariant.prototype.toString = function toString() {\n  return this.message;\n};\nfunction invariant(condition, message) {\n  if (isProduction) {\n    throw new RbdInvariant(prefix$1);\n  } else {\n    throw new RbdInvariant(`${prefix$1}: ${message || ''}`);\n  }\n}\n\nclass ErrorBoundary extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.callbacks = null;\n    this.unbind = noop$2;\n    this.onWindowError = event => {\n      const callbacks = this.getCallbacks();\n      if (callbacks.isDragging()) {\n        callbacks.tryAbort();\n        process.env.NODE_ENV !== \"production\" ? warning(`\n        An error was caught by our window 'error' event listener while a drag was occurring.\n        The active drag has been aborted.\n      `) : void 0;\n      }\n      const err = event.error;\n      if (err instanceof RbdInvariant) {\n        event.preventDefault();\n        if (process.env.NODE_ENV !== 'production') {\n          error(err.message);\n        }\n      }\n    };\n    this.getCallbacks = () => {\n      if (!this.callbacks) {\n        throw new Error('Unable to find AppCallbacks in <ErrorBoundary/>');\n      }\n      return this.callbacks;\n    };\n    this.setCallbacks = callbacks => {\n      this.callbacks = callbacks;\n    };\n  }\n  componentDidMount() {\n    this.unbind = bindEvents(window, [{\n      eventName: 'error',\n      fn: this.onWindowError\n    }]);\n  }\n  componentDidCatch(err) {\n    if (err instanceof RbdInvariant) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(err.message);\n      }\n      this.setState({});\n      return;\n    }\n    throw err;\n  }\n  componentWillUnmount() {\n    this.unbind();\n  }\n  render() {\n    return this.props.children(this.setCallbacks);\n  }\n}\n\nconst dragHandleUsageInstructions = `\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n`;\nconst position = index => index + 1;\nconst onDragStart = start => `\n  You have lifted an item in position ${position(start.source.index)}\n`;\nconst withLocation = (source, destination) => {\n  const isInHomeList = source.droppableId === destination.droppableId;\n  const startPosition = position(source.index);\n  const endPosition = position(destination.index);\n  if (isInHomeList) {\n    return `\n      You have moved the item from position ${startPosition}\n      to position ${endPosition}\n    `;\n  }\n  return `\n    You have moved the item from position ${startPosition}\n    in list ${source.droppableId}\n    to list ${destination.droppableId}\n    in position ${endPosition}\n  `;\n};\nconst withCombine = (id, source, combine) => {\n  const inHomeList = source.droppableId === combine.droppableId;\n  if (inHomeList) {\n    return `\n      The item ${id}\n      has been combined with ${combine.draggableId}`;\n  }\n  return `\n      The item ${id}\n      in list ${source.droppableId}\n      has been combined with ${combine.draggableId}\n      in list ${combine.droppableId}\n    `;\n};\nconst onDragUpdate = update => {\n  const location = update.destination;\n  if (location) {\n    return withLocation(update.source, location);\n  }\n  const combine = update.combine;\n  if (combine) {\n    return withCombine(update.draggableId, update.source, combine);\n  }\n  return 'You are over an area that cannot be dropped on';\n};\nconst returnedToStart = source => `\n  The item has returned to its starting position\n  of ${position(source.index)}\n`;\nconst onDragEnd = result => {\n  if (result.reason === 'CANCEL') {\n    return `\n      Movement cancelled.\n      ${returnedToStart(result.source)}\n    `;\n  }\n  const location = result.destination;\n  const combine = result.combine;\n  if (location) {\n    return `\n      You have dropped the item.\n      ${withLocation(result.source, location)}\n    `;\n  }\n  if (combine) {\n    return `\n      You have dropped the item.\n      ${withCombine(result.draggableId, result.source, combine)}\n    `;\n  }\n  return `\n    The item has been dropped while not over a drop area.\n    ${returnedToStart(result.source)}\n  `;\n};\nconst preset = {\n  dragHandleUsageInstructions,\n  onDragStart,\n  onDragUpdate,\n  onDragEnd\n};\n\nconst origin = {\n  x: 0,\n  y: 0\n};\nconst add = (point1, point2) => ({\n  x: point1.x + point2.x,\n  y: point1.y + point2.y\n});\nconst subtract = (point1, point2) => ({\n  x: point1.x - point2.x,\n  y: point1.y - point2.y\n});\nconst isEqual$1 = (point1, point2) => point1.x === point2.x && point1.y === point2.y;\nconst negate = point => ({\n  x: point.x !== 0 ? -point.x : 0,\n  y: point.y !== 0 ? -point.y : 0\n});\nconst patch = (line, value, otherValue = 0) => {\n  if (line === 'x') {\n    return {\n      x: value,\n      y: otherValue\n    };\n  }\n  return {\n    x: otherValue,\n    y: value\n  };\n};\nconst distance = (point1, point2) => Math.sqrt((point2.x - point1.x) ** 2 + (point2.y - point1.y) ** 2);\nconst closest$1 = (target, points) => Math.min(...points.map(point => distance(target, point)));\nconst apply = fn => point => ({\n  x: fn(point.x),\n  y: fn(point.y)\n});\n\nvar executeClip = (frame, subject) => {\n  const result = getRect({\n    top: Math.max(subject.top, frame.top),\n    right: Math.min(subject.right, frame.right),\n    bottom: Math.min(subject.bottom, frame.bottom),\n    left: Math.max(subject.left, frame.left)\n  });\n  if (result.width <= 0 || result.height <= 0) {\n    return null;\n  }\n  return result;\n};\n\nconst offsetByPosition = (spacing, point) => ({\n  top: spacing.top + point.y,\n  left: spacing.left + point.x,\n  bottom: spacing.bottom + point.y,\n  right: spacing.right + point.x\n});\nconst getCorners = spacing => [{\n  x: spacing.left,\n  y: spacing.top\n}, {\n  x: spacing.right,\n  y: spacing.top\n}, {\n  x: spacing.left,\n  y: spacing.bottom\n}, {\n  x: spacing.right,\n  y: spacing.bottom\n}];\nconst noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\n\nconst scroll$1 = (target, frame) => {\n  if (!frame) {\n    return target;\n  }\n  return offsetByPosition(target, frame.scroll.diff.displacement);\n};\nconst increase = (target, axis, withPlaceholder) => {\n  if (withPlaceholder && withPlaceholder.increasedBy) {\n    return {\n      ...target,\n      [axis.end]: target[axis.end] + withPlaceholder.increasedBy[axis.line]\n    };\n  }\n  return target;\n};\nconst clip = (target, frame) => {\n  if (frame && frame.shouldClipSubject) {\n    return executeClip(frame.pageMarginBox, target);\n  }\n  return getRect(target);\n};\nvar getSubject = ({\n  page,\n  withPlaceholder,\n  axis,\n  frame\n}) => {\n  const scrolled = scroll$1(page.marginBox, frame);\n  const increased = increase(scrolled, axis, withPlaceholder);\n  const clipped = clip(increased, frame);\n  return {\n    page,\n    withPlaceholder,\n    active: clipped\n  };\n};\n\nvar scrollDroppable = (droppable, newScroll) => {\n  !droppable.frame ? process.env.NODE_ENV !== \"production\" ? invariant() : invariant() : void 0;\n  const scrollable = droppable.frame;\n  const scrollDiff = subtract(newScroll, scrollable.scroll.initial);\n  const scrollDisplacement = negate(scrollDiff);\n  const frame = {\n    ...scrollable,\n    scroll: {\n      initial: scrollable.scroll.initial,\n      current: newScroll,\n      diff: {\n        value: scrollDiff,\n        displacement: scrollDisplacement\n      },\n      max: scrollable.scroll.max\n    }\n  };\n  const subject = getSubject({\n    page: droppable.subject.page,\n    withPlaceholder: droppable.subject.withPlaceholder,\n    axis: droppable.axis,\n    frame\n  });\n  const result = {\n    ...droppable,\n    frame,\n    subject\n  };\n  return result;\n};\n\nconst toDroppableMap = memoizeOne(droppables => droppables.reduce((previous, current) => {\n  previous[current.descriptor.id] = current;\n  return previous;\n}, {}));\nconst toDraggableMap = memoizeOne(draggables => draggables.reduce((previous, current) => {\n  previous[current.descriptor.id] = current;\n  return previous;\n}, {}));\nconst toDroppableList = memoizeOne(droppables => Object.values(droppables));\nconst toDraggableList = memoizeOne(draggables => Object.values(draggables));\n\nvar getDraggablesInsideDroppable = memoizeOne((droppableId, draggables) => {\n  const result = toDraggableList(draggables).filter(draggable => droppableId === draggable.descriptor.droppableId).sort((a, b) => a.descriptor.index - b.descriptor.index);\n  return result;\n});\n\nfunction tryGetDestination(impact) {\n  if (impact.at && impact.at.type === 'REORDER') {\n    return impact.at.destination;\n  }\n  return null;\n}\nfunction tryGetCombine(impact) {\n  if (impact.at && impact.at.type === 'COMBINE') {\n    return impact.at.combine;\n  }\n  return null;\n}\n\nvar removeDraggableFromList = memoizeOne((remove, list) => list.filter(item => item.descriptor.id !== remove.descriptor.id));\n\nvar moveToNextCombine = ({\n  isMovingForward,\n  draggable,\n  destination,\n  insideDestination,\n  previousImpact\n}) => {\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n  const location = tryGetDestination(previousImpact);\n  if (!location) {\n    return null;\n  }\n  function getImpact(target) {\n    const at = {\n      type: 'COMBINE',\n      combine: {\n        draggableId: target,\n        droppableId: destination.descriptor.id\n      }\n    };\n    return {\n      ...previousImpact,\n      at\n    };\n  }\n  const all = previousImpact.displaced.all;\n  const closestId = all.length ? all[0] : null;\n  if (isMovingForward) {\n    return closestId ? getImpact(closestId) : null;\n  }\n  const withoutDraggable = removeDraggableFromList(draggable, insideDestination);\n  if (!closestId) {\n    if (!withoutDraggable.length) {\n      return null;\n    }\n    const last = withoutDraggable[withoutDraggable.length - 1];\n    return getImpact(last.descriptor.id);\n  }\n  const indexOfClosest = withoutDraggable.findIndex(d => d.descriptor.id === closestId);\n  !(indexOfClosest !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find displaced item in set') : invariant() : void 0;\n  const proposedIndex = indexOfClosest - 1;\n  if (proposedIndex < 0) {\n    return null;\n  }\n  const before = withoutDraggable[proposedIndex];\n  return getImpact(before.descriptor.id);\n};\n\nvar isHomeOf = (draggable, destination) => draggable.descriptor.droppableId === destination.descriptor.id;\n\nconst noDisplacedBy = {\n  point: origin,\n  value: 0\n};\nconst emptyGroups = {\n  invisible: {},\n  visible: {},\n  all: []\n};\nconst noImpact = {\n  displaced: emptyGroups,\n  displacedBy: noDisplacedBy,\n  at: null\n};\n\nvar isWithin = (lowerBound, upperBound) => value => lowerBound <= value && value <= upperBound;\n\nvar isPartiallyVisibleThroughFrame = frame => {\n  const isWithinVertical = isWithin(frame.top, frame.bottom);\n  const isWithinHorizontal = isWithin(frame.left, frame.right);\n  return subject => {\n    const isContained = isWithinVertical(subject.top) && isWithinVertical(subject.bottom) && isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n    if (isContained) {\n      return true;\n    }\n    const isPartiallyVisibleVertically = isWithinVertical(subject.top) || isWithinVertical(subject.bottom);\n    const isPartiallyVisibleHorizontally = isWithinHorizontal(subject.left) || isWithinHorizontal(subject.right);\n    const isPartiallyContained = isPartiallyVisibleVertically && isPartiallyVisibleHorizontally;\n    if (isPartiallyContained) {\n      return true;\n    }\n    const isBiggerVertically = subject.top < frame.top && subject.bottom > frame.bottom;\n    const isBiggerHorizontally = subject.left < frame.left && subject.right > frame.right;\n    const isTargetBiggerThanFrame = isBiggerVertically && isBiggerHorizontally;\n    if (isTargetBiggerThanFrame) {\n      return true;\n    }\n    const isTargetBiggerOnOneAxis = isBiggerVertically && isPartiallyVisibleHorizontally || isBiggerHorizontally && isPartiallyVisibleVertically;\n    return isTargetBiggerOnOneAxis;\n  };\n};\n\nvar isTotallyVisibleThroughFrame = frame => {\n  const isWithinVertical = isWithin(frame.top, frame.bottom);\n  const isWithinHorizontal = isWithin(frame.left, frame.right);\n  return subject => {\n    const isContained = isWithinVertical(subject.top) && isWithinVertical(subject.bottom) && isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n    return isContained;\n  };\n};\n\nconst vertical = {\n  direction: 'vertical',\n  line: 'y',\n  crossAxisLine: 'x',\n  start: 'top',\n  end: 'bottom',\n  size: 'height',\n  crossAxisStart: 'left',\n  crossAxisEnd: 'right',\n  crossAxisSize: 'width'\n};\nconst horizontal = {\n  direction: 'horizontal',\n  line: 'x',\n  crossAxisLine: 'y',\n  start: 'left',\n  end: 'right',\n  size: 'width',\n  crossAxisStart: 'top',\n  crossAxisEnd: 'bottom',\n  crossAxisSize: 'height'\n};\n\nvar isTotallyVisibleThroughFrameOnAxis = axis => frame => {\n  const isWithinVertical = isWithin(frame.top, frame.bottom);\n  const isWithinHorizontal = isWithin(frame.left, frame.right);\n  return subject => {\n    if (axis === vertical) {\n      return isWithinVertical(subject.top) && isWithinVertical(subject.bottom);\n    }\n    return isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n  };\n};\n\nconst getDroppableDisplaced = (target, destination) => {\n  const displacement = destination.frame ? destination.frame.scroll.diff.displacement : origin;\n  return offsetByPosition(target, displacement);\n};\nconst isVisibleInDroppable = (target, destination, isVisibleThroughFrameFn) => {\n  if (!destination.subject.active) {\n    return false;\n  }\n  return isVisibleThroughFrameFn(destination.subject.active)(target);\n};\nconst isVisibleInViewport = (target, viewport, isVisibleThroughFrameFn) => isVisibleThroughFrameFn(viewport)(target);\nconst isVisible$1 = ({\n  target: toBeDisplaced,\n  destination,\n  viewport,\n  withDroppableDisplacement,\n  isVisibleThroughFrameFn\n}) => {\n  const displacedTarget = withDroppableDisplacement ? getDroppableDisplaced(toBeDisplaced, destination) : toBeDisplaced;\n  return isVisibleInDroppable(displacedTarget, destination, isVisibleThroughFrameFn) && isVisibleInViewport(displacedTarget, viewport, isVisibleThroughFrameFn);\n};\nconst isPartiallyVisible = args => isVisible$1({\n  ...args,\n  isVisibleThroughFrameFn: isPartiallyVisibleThroughFrame\n});\nconst isTotallyVisible = args => isVisible$1({\n  ...args,\n  isVisibleThroughFrameFn: isTotallyVisibleThroughFrame\n});\nconst isTotallyVisibleOnAxis = args => isVisible$1({\n  ...args,\n  isVisibleThroughFrameFn: isTotallyVisibleThroughFrameOnAxis(args.destination.axis)\n});\n\nconst getShouldAnimate = (id, last, forceShouldAnimate) => {\n  if (typeof forceShouldAnimate === 'boolean') {\n    return forceShouldAnimate;\n  }\n  if (!last) {\n    return true;\n  }\n  const {\n    invisible,\n    visible\n  } = last;\n  if (invisible[id]) {\n    return false;\n  }\n  const previous = visible[id];\n  return previous ? previous.shouldAnimate : true;\n};\nfunction getTarget(draggable, displacedBy) {\n  const marginBox = draggable.page.marginBox;\n  const expandBy = {\n    top: displacedBy.point.y,\n    right: 0,\n    bottom: 0,\n    left: displacedBy.point.x\n  };\n  return getRect(expand(marginBox, expandBy));\n}\nfunction getDisplacementGroups({\n  afterDragging,\n  destination,\n  displacedBy,\n  viewport,\n  forceShouldAnimate,\n  last\n}) {\n  return afterDragging.reduce(function process(groups, draggable) {\n    const target = getTarget(draggable, displacedBy);\n    const id = draggable.descriptor.id;\n    groups.all.push(id);\n    const isVisible = isPartiallyVisible({\n      target,\n      destination,\n      viewport,\n      withDroppableDisplacement: true\n    });\n    if (!isVisible) {\n      groups.invisible[draggable.descriptor.id] = true;\n      return groups;\n    }\n    const shouldAnimate = getShouldAnimate(id, last, forceShouldAnimate);\n    const displacement = {\n      draggableId: id,\n      shouldAnimate\n    };\n    groups.visible[id] = displacement;\n    return groups;\n  }, {\n    all: [],\n    visible: {},\n    invisible: {}\n  });\n}\n\nfunction getIndexOfLastItem(draggables, options) {\n  if (!draggables.length) {\n    return 0;\n  }\n  const indexOfLastItem = draggables[draggables.length - 1].descriptor.index;\n  return options.inHomeList ? indexOfLastItem : indexOfLastItem + 1;\n}\nfunction goAtEnd({\n  insideDestination,\n  inHomeList,\n  displacedBy,\n  destination\n}) {\n  const newIndex = getIndexOfLastItem(insideDestination, {\n    inHomeList\n  });\n  return {\n    displaced: emptyGroups,\n    displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: {\n        droppableId: destination.descriptor.id,\n        index: newIndex\n      }\n    }\n  };\n}\nfunction calculateReorderImpact({\n  draggable,\n  insideDestination,\n  destination,\n  viewport,\n  displacedBy,\n  last,\n  index,\n  forceShouldAnimate\n}) {\n  const inHomeList = isHomeOf(draggable, destination);\n  if (index == null) {\n    return goAtEnd({\n      insideDestination,\n      inHomeList,\n      displacedBy,\n      destination\n    });\n  }\n  const match = insideDestination.find(item => item.descriptor.index === index);\n  if (!match) {\n    return goAtEnd({\n      insideDestination,\n      inHomeList,\n      displacedBy,\n      destination\n    });\n  }\n  const withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  const sliceFrom = insideDestination.indexOf(match);\n  const impacted = withoutDragging.slice(sliceFrom);\n  const displaced = getDisplacementGroups({\n    afterDragging: impacted,\n    destination,\n    displacedBy,\n    last,\n    viewport: viewport.frame,\n    forceShouldAnimate\n  });\n  return {\n    displaced,\n    displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: {\n        droppableId: destination.descriptor.id,\n        index\n      }\n    }\n  };\n}\n\nfunction didStartAfterCritical(draggableId, afterCritical) {\n  return Boolean(afterCritical.effected[draggableId]);\n}\n\nvar fromCombine = ({\n  isMovingForward,\n  destination,\n  draggables,\n  combine,\n  afterCritical\n}) => {\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n  const combineId = combine.draggableId;\n  const combineWith = draggables[combineId];\n  const combineWithIndex = combineWith.descriptor.index;\n  const didCombineWithStartAfterCritical = didStartAfterCritical(combineId, afterCritical);\n  if (didCombineWithStartAfterCritical) {\n    if (isMovingForward) {\n      return combineWithIndex;\n    }\n    return combineWithIndex - 1;\n  }\n  if (isMovingForward) {\n    return combineWithIndex + 1;\n  }\n  return combineWithIndex;\n};\n\nvar fromReorder = ({\n  isMovingForward,\n  isInHomeList,\n  insideDestination,\n  location\n}) => {\n  if (!insideDestination.length) {\n    return null;\n  }\n  const currentIndex = location.index;\n  const proposedIndex = isMovingForward ? currentIndex + 1 : currentIndex - 1;\n  const firstIndex = insideDestination[0].descriptor.index;\n  const lastIndex = insideDestination[insideDestination.length - 1].descriptor.index;\n  const upperBound = isInHomeList ? lastIndex : lastIndex + 1;\n  if (proposedIndex < firstIndex) {\n    return null;\n  }\n  if (proposedIndex > upperBound) {\n    return null;\n  }\n  return proposedIndex;\n};\n\nvar moveToNextIndex = ({\n  isMovingForward,\n  isInHomeList,\n  draggable,\n  draggables,\n  destination,\n  insideDestination,\n  previousImpact,\n  viewport,\n  afterCritical\n}) => {\n  const wasAt = previousImpact.at;\n  !wasAt ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot move in direction without previous impact location') : invariant() : void 0;\n  if (wasAt.type === 'REORDER') {\n    const newIndex = fromReorder({\n      isMovingForward,\n      isInHomeList,\n      location: wasAt.destination,\n      insideDestination\n    });\n    if (newIndex == null) {\n      return null;\n    }\n    return calculateReorderImpact({\n      draggable,\n      insideDestination,\n      destination,\n      viewport,\n      last: previousImpact.displaced,\n      displacedBy: previousImpact.displacedBy,\n      index: newIndex\n    });\n  }\n  const newIndex = fromCombine({\n    isMovingForward,\n    destination,\n    displaced: previousImpact.displaced,\n    draggables,\n    combine: wasAt.combine,\n    afterCritical\n  });\n  if (newIndex == null) {\n    return null;\n  }\n  return calculateReorderImpact({\n    draggable,\n    insideDestination,\n    destination,\n    viewport,\n    last: previousImpact.displaced,\n    displacedBy: previousImpact.displacedBy,\n    index: newIndex\n  });\n};\n\nvar getCombinedItemDisplacement = ({\n  displaced,\n  afterCritical,\n  combineWith,\n  displacedBy\n}) => {\n  const isDisplaced = Boolean(displaced.visible[combineWith] || displaced.invisible[combineWith]);\n  if (didStartAfterCritical(combineWith, afterCritical)) {\n    return isDisplaced ? origin : negate(displacedBy.point);\n  }\n  return isDisplaced ? displacedBy.point : origin;\n};\n\nvar whenCombining = ({\n  afterCritical,\n  impact,\n  draggables\n}) => {\n  const combine = tryGetCombine(impact);\n  !combine ? process.env.NODE_ENV !== \"production\" ? invariant() : invariant() : void 0;\n  const combineWith = combine.draggableId;\n  const center = draggables[combineWith].page.borderBox.center;\n  const displaceBy = getCombinedItemDisplacement({\n    displaced: impact.displaced,\n    afterCritical,\n    combineWith,\n    displacedBy: impact.displacedBy\n  });\n  return add(center, displaceBy);\n};\n\nconst distanceFromStartToBorderBoxCenter = (axis, box) => box.margin[axis.start] + box.borderBox[axis.size] / 2;\nconst distanceFromEndToBorderBoxCenter = (axis, box) => box.margin[axis.end] + box.borderBox[axis.size] / 2;\nconst getCrossAxisBorderBoxCenter = (axis, target, isMoving) => target[axis.crossAxisStart] + isMoving.margin[axis.crossAxisStart] + isMoving.borderBox[axis.crossAxisSize] / 2;\nconst goAfter = ({\n  axis,\n  moveRelativeTo,\n  isMoving\n}) => patch(axis.line, moveRelativeTo.marginBox[axis.end] + distanceFromStartToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveRelativeTo.marginBox, isMoving));\nconst goBefore = ({\n  axis,\n  moveRelativeTo,\n  isMoving\n}) => patch(axis.line, moveRelativeTo.marginBox[axis.start] - distanceFromEndToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveRelativeTo.marginBox, isMoving));\nconst goIntoStart = ({\n  axis,\n  moveInto,\n  isMoving\n}) => patch(axis.line, moveInto.contentBox[axis.start] + distanceFromStartToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveInto.contentBox, isMoving));\n\nvar whenReordering = ({\n  impact,\n  draggable,\n  draggables,\n  droppable,\n  afterCritical\n}) => {\n  const insideDestination = getDraggablesInsideDroppable(droppable.descriptor.id, draggables);\n  const draggablePage = draggable.page;\n  const axis = droppable.axis;\n  if (!insideDestination.length) {\n    return goIntoStart({\n      axis,\n      moveInto: droppable.page,\n      isMoving: draggablePage\n    });\n  }\n  const {\n    displaced,\n    displacedBy\n  } = impact;\n  const closestAfter = displaced.all[0];\n  if (closestAfter) {\n    const closest = draggables[closestAfter];\n    if (didStartAfterCritical(closestAfter, afterCritical)) {\n      return goBefore({\n        axis,\n        moveRelativeTo: closest.page,\n        isMoving: draggablePage\n      });\n    }\n    const withDisplacement = offset(closest.page, displacedBy.point);\n    return goBefore({\n      axis,\n      moveRelativeTo: withDisplacement,\n      isMoving: draggablePage\n    });\n  }\n  const last = insideDestination[insideDestination.length - 1];\n  if (last.descriptor.id === draggable.descriptor.id) {\n    return draggablePage.borderBox.center;\n  }\n  if (didStartAfterCritical(last.descriptor.id, afterCritical)) {\n    const page = offset(last.page, negate(afterCritical.displacedBy.point));\n    return goAfter({\n      axis,\n      moveRelativeTo: page,\n      isMoving: draggablePage\n    });\n  }\n  return goAfter({\n    axis,\n    moveRelativeTo: last.page,\n    isMoving: draggablePage\n  });\n};\n\nvar withDroppableDisplacement = (droppable, point) => {\n  const frame = droppable.frame;\n  if (!frame) {\n    return point;\n  }\n  return add(point, frame.scroll.diff.displacement);\n};\n\nconst getResultWithoutDroppableDisplacement = ({\n  impact,\n  draggable,\n  droppable,\n  draggables,\n  afterCritical\n}) => {\n  const original = draggable.page.borderBox.center;\n  const at = impact.at;\n  if (!droppable) {\n    return original;\n  }\n  if (!at) {\n    return original;\n  }\n  if (at.type === 'REORDER') {\n    return whenReordering({\n      impact,\n      draggable,\n      draggables,\n      droppable,\n      afterCritical\n    });\n  }\n  return whenCombining({\n    impact,\n    draggables,\n    afterCritical\n  });\n};\nvar getPageBorderBoxCenterFromImpact = args => {\n  const withoutDisplacement = getResultWithoutDroppableDisplacement(args);\n  const droppable = args.droppable;\n  const withDisplacement = droppable ? withDroppableDisplacement(droppable, withoutDisplacement) : withoutDisplacement;\n  return withDisplacement;\n};\n\nvar scrollViewport = (viewport, newScroll) => {\n  const diff = subtract(newScroll, viewport.scroll.initial);\n  const displacement = negate(diff);\n  const frame = getRect({\n    top: newScroll.y,\n    bottom: newScroll.y + viewport.frame.height,\n    left: newScroll.x,\n    right: newScroll.x + viewport.frame.width\n  });\n  const updated = {\n    frame,\n    scroll: {\n      initial: viewport.scroll.initial,\n      max: viewport.scroll.max,\n      current: newScroll,\n      diff: {\n        value: diff,\n        displacement\n      }\n    }\n  };\n  return updated;\n};\n\nfunction getDraggables$1(ids, draggables) {\n  return ids.map(id => draggables[id]);\n}\nfunction tryGetVisible(id, groups) {\n  for (let i = 0; i < groups.length; i++) {\n    const displacement = groups[i].visible[id];\n    if (displacement) {\n      return displacement;\n    }\n  }\n  return null;\n}\nvar speculativelyIncrease = ({\n  impact,\n  viewport,\n  destination,\n  draggables,\n  maxScrollChange\n}) => {\n  const scrolledViewport = scrollViewport(viewport, add(viewport.scroll.current, maxScrollChange));\n  const scrolledDroppable = destination.frame ? scrollDroppable(destination, add(destination.frame.scroll.current, maxScrollChange)) : destination;\n  const last = impact.displaced;\n  const withViewportScroll = getDisplacementGroups({\n    afterDragging: getDraggables$1(last.all, draggables),\n    destination,\n    displacedBy: impact.displacedBy,\n    viewport: scrolledViewport.frame,\n    last,\n    forceShouldAnimate: false\n  });\n  const withDroppableScroll = getDisplacementGroups({\n    afterDragging: getDraggables$1(last.all, draggables),\n    destination: scrolledDroppable,\n    displacedBy: impact.displacedBy,\n    viewport: viewport.frame,\n    last,\n    forceShouldAnimate: false\n  });\n  const invisible = {};\n  const visible = {};\n  const groups = [last, withViewportScroll, withDroppableScroll];\n  last.all.forEach(id => {\n    const displacement = tryGetVisible(id, groups);\n    if (displacement) {\n      visible[id] = displacement;\n      return;\n    }\n    invisible[id] = true;\n  });\n  const newImpact = {\n    ...impact,\n    displaced: {\n      all: last.all,\n      invisible,\n      visible\n    }\n  };\n  return newImpact;\n};\n\nvar withViewportDisplacement = (viewport, point) => add(viewport.scroll.diff.displacement, point);\n\nvar getClientFromPageBorderBoxCenter = ({\n  pageBorderBoxCenter,\n  draggable,\n  viewport\n}) => {\n  const withoutPageScrollChange = withViewportDisplacement(viewport, pageBorderBoxCenter);\n  const offset = subtract(withoutPageScrollChange, draggable.page.borderBox.center);\n  return add(draggable.client.borderBox.center, offset);\n};\n\nvar isTotallyVisibleInNewLocation = ({\n  draggable,\n  destination,\n  newPageBorderBoxCenter,\n  viewport,\n  withDroppableDisplacement,\n  onlyOnMainAxis = false\n}) => {\n  const changeNeeded = subtract(newPageBorderBoxCenter, draggable.page.borderBox.center);\n  const shifted = offsetByPosition(draggable.page.borderBox, changeNeeded);\n  const args = {\n    target: shifted,\n    destination,\n    withDroppableDisplacement,\n    viewport\n  };\n  return onlyOnMainAxis ? isTotallyVisibleOnAxis(args) : isTotallyVisible(args);\n};\n\nvar moveToNextPlace = ({\n  isMovingForward,\n  draggable,\n  destination,\n  draggables,\n  previousImpact,\n  viewport,\n  previousPageBorderBoxCenter,\n  previousClientSelection,\n  afterCritical\n}) => {\n  if (!destination.isEnabled) {\n    return null;\n  }\n  const insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  const isInHomeList = isHomeOf(draggable, destination);\n  const impact = moveToNextCombine({\n    isMovingForward,\n    draggable,\n    destination,\n    insideDestination,\n    previousImpact\n  }) || moveToNextIndex({\n    isMovingForward,\n    isInHomeList,\n    draggable,\n    draggables,\n    destination,\n    insideDestination,\n    previousImpact,\n    viewport,\n    afterCritical\n  });\n  if (!impact) {\n    return null;\n  }\n  const pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact,\n    draggable,\n    droppable: destination,\n    draggables,\n    afterCritical\n  });\n  const isVisibleInNewLocation = isTotallyVisibleInNewLocation({\n    draggable,\n    destination,\n    newPageBorderBoxCenter: pageBorderBoxCenter,\n    viewport: viewport.frame,\n    withDroppableDisplacement: false,\n    onlyOnMainAxis: true\n  });\n  if (isVisibleInNewLocation) {\n    const clientSelection = getClientFromPageBorderBoxCenter({\n      pageBorderBoxCenter,\n      draggable,\n      viewport\n    });\n    return {\n      clientSelection,\n      impact,\n      scrollJumpRequest: null\n    };\n  }\n  const distance = subtract(pageBorderBoxCenter, previousPageBorderBoxCenter);\n  const cautious = speculativelyIncrease({\n    impact,\n    viewport,\n    destination,\n    draggables,\n    maxScrollChange: distance\n  });\n  return {\n    clientSelection: previousClientSelection,\n    impact: cautious,\n    scrollJumpRequest: distance\n  };\n};\n\nconst getKnownActive = droppable => {\n  const rect = droppable.subject.active;\n  !rect ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot get clipped area from droppable') : invariant() : void 0;\n  return rect;\n};\nvar getBestCrossAxisDroppable = ({\n  isMovingForward,\n  pageBorderBoxCenter,\n  source,\n  droppables,\n  viewport\n}) => {\n  const active = source.subject.active;\n  if (!active) {\n    return null;\n  }\n  const axis = source.axis;\n  const isBetweenSourceClipped = isWithin(active[axis.start], active[axis.end]);\n  const candidates = toDroppableList(droppables).filter(droppable => droppable !== source).filter(droppable => droppable.isEnabled).filter(droppable => Boolean(droppable.subject.active)).filter(droppable => isPartiallyVisibleThroughFrame(viewport.frame)(getKnownActive(droppable))).filter(droppable => {\n    const activeOfTarget = getKnownActive(droppable);\n    if (isMovingForward) {\n      return active[axis.crossAxisEnd] < activeOfTarget[axis.crossAxisEnd];\n    }\n    return activeOfTarget[axis.crossAxisStart] < active[axis.crossAxisStart];\n  }).filter(droppable => {\n    const activeOfTarget = getKnownActive(droppable);\n    const isBetweenDestinationClipped = isWithin(activeOfTarget[axis.start], activeOfTarget[axis.end]);\n    return isBetweenSourceClipped(activeOfTarget[axis.start]) || isBetweenSourceClipped(activeOfTarget[axis.end]) || isBetweenDestinationClipped(active[axis.start]) || isBetweenDestinationClipped(active[axis.end]);\n  }).sort((a, b) => {\n    const first = getKnownActive(a)[axis.crossAxisStart];\n    const second = getKnownActive(b)[axis.crossAxisStart];\n    if (isMovingForward) {\n      return first - second;\n    }\n    return second - first;\n  }).filter((droppable, index, array) => getKnownActive(droppable)[axis.crossAxisStart] === getKnownActive(array[0])[axis.crossAxisStart]);\n  if (!candidates.length) {\n    return null;\n  }\n  if (candidates.length === 1) {\n    return candidates[0];\n  }\n  const contains = candidates.filter(droppable => {\n    const isWithinDroppable = isWithin(getKnownActive(droppable)[axis.start], getKnownActive(droppable)[axis.end]);\n    return isWithinDroppable(pageBorderBoxCenter[axis.line]);\n  });\n  if (contains.length === 1) {\n    return contains[0];\n  }\n  if (contains.length > 1) {\n    return contains.sort((a, b) => getKnownActive(a)[axis.start] - getKnownActive(b)[axis.start])[0];\n  }\n  return candidates.sort((a, b) => {\n    const first = closest$1(pageBorderBoxCenter, getCorners(getKnownActive(a)));\n    const second = closest$1(pageBorderBoxCenter, getCorners(getKnownActive(b)));\n    if (first !== second) {\n      return first - second;\n    }\n    return getKnownActive(a)[axis.start] - getKnownActive(b)[axis.start];\n  })[0];\n};\n\nconst getCurrentPageBorderBoxCenter = (draggable, afterCritical) => {\n  const original = draggable.page.borderBox.center;\n  return didStartAfterCritical(draggable.descriptor.id, afterCritical) ? subtract(original, afterCritical.displacedBy.point) : original;\n};\nconst getCurrentPageBorderBox = (draggable, afterCritical) => {\n  const original = draggable.page.borderBox;\n  return didStartAfterCritical(draggable.descriptor.id, afterCritical) ? offsetByPosition(original, negate(afterCritical.displacedBy.point)) : original;\n};\n\nvar getClosestDraggable = ({\n  pageBorderBoxCenter,\n  viewport,\n  destination,\n  insideDestination,\n  afterCritical\n}) => {\n  const sorted = insideDestination.filter(draggable => isTotallyVisible({\n    target: getCurrentPageBorderBox(draggable, afterCritical),\n    destination,\n    viewport: viewport.frame,\n    withDroppableDisplacement: true\n  })).sort((a, b) => {\n    const distanceToA = distance(pageBorderBoxCenter, withDroppableDisplacement(destination, getCurrentPageBorderBoxCenter(a, afterCritical)));\n    const distanceToB = distance(pageBorderBoxCenter, withDroppableDisplacement(destination, getCurrentPageBorderBoxCenter(b, afterCritical)));\n    if (distanceToA < distanceToB) {\n      return -1;\n    }\n    if (distanceToB < distanceToA) {\n      return 1;\n    }\n    return a.descriptor.index - b.descriptor.index;\n  });\n  return sorted[0] || null;\n};\n\nvar getDisplacedBy = memoizeOne(function getDisplacedBy(axis, displaceBy) {\n  const displacement = displaceBy[axis.line];\n  return {\n    value: displacement,\n    point: patch(axis.line, displacement)\n  };\n});\n\nconst getRequiredGrowthForPlaceholder = (droppable, placeholderSize, draggables) => {\n  const axis = droppable.axis;\n  if (droppable.descriptor.mode === 'virtual') {\n    return patch(axis.line, placeholderSize[axis.line]);\n  }\n  const availableSpace = droppable.subject.page.contentBox[axis.size];\n  const insideDroppable = getDraggablesInsideDroppable(droppable.descriptor.id, draggables);\n  const spaceUsed = insideDroppable.reduce((sum, dimension) => sum + dimension.client.marginBox[axis.size], 0);\n  const requiredSpace = spaceUsed + placeholderSize[axis.line];\n  const needsToGrowBy = requiredSpace - availableSpace;\n  if (needsToGrowBy <= 0) {\n    return null;\n  }\n  return patch(axis.line, needsToGrowBy);\n};\nconst withMaxScroll = (frame, max) => ({\n  ...frame,\n  scroll: {\n    ...frame.scroll,\n    max\n  }\n});\nconst addPlaceholder = (droppable, draggable, draggables) => {\n  const frame = droppable.frame;\n  !!isHomeOf(draggable, droppable) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Should not add placeholder space to home list') : invariant() : void 0;\n  !!droppable.subject.withPlaceholder ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot add placeholder size to a subject when it already has one') : invariant() : void 0;\n  const placeholderSize = getDisplacedBy(droppable.axis, draggable.displaceBy).point;\n  const requiredGrowth = getRequiredGrowthForPlaceholder(droppable, placeholderSize, draggables);\n  const added = {\n    placeholderSize,\n    increasedBy: requiredGrowth,\n    oldFrameMaxScroll: droppable.frame ? droppable.frame.scroll.max : null\n  };\n  if (!frame) {\n    const subject = getSubject({\n      page: droppable.subject.page,\n      withPlaceholder: added,\n      axis: droppable.axis,\n      frame: droppable.frame\n    });\n    return {\n      ...droppable,\n      subject\n    };\n  }\n  const maxScroll = requiredGrowth ? add(frame.scroll.max, requiredGrowth) : frame.scroll.max;\n  const newFrame = withMaxScroll(frame, maxScroll);\n  const subject = getSubject({\n    page: droppable.subject.page,\n    withPlaceholder: added,\n    axis: droppable.axis,\n    frame: newFrame\n  });\n  return {\n    ...droppable,\n    subject,\n    frame: newFrame\n  };\n};\nconst removePlaceholder = droppable => {\n  const added = droppable.subject.withPlaceholder;\n  !added ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot remove placeholder form subject when there was none') : invariant() : void 0;\n  const frame = droppable.frame;\n  if (!frame) {\n    const subject = getSubject({\n      page: droppable.subject.page,\n      axis: droppable.axis,\n      frame: null,\n      withPlaceholder: null\n    });\n    return {\n      ...droppable,\n      subject\n    };\n  }\n  const oldMaxScroll = added.oldFrameMaxScroll;\n  !oldMaxScroll ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected droppable with frame to have old max frame scroll when removing placeholder') : invariant() : void 0;\n  const newFrame = withMaxScroll(frame, oldMaxScroll);\n  const subject = getSubject({\n    page: droppable.subject.page,\n    axis: droppable.axis,\n    frame: newFrame,\n    withPlaceholder: null\n  });\n  return {\n    ...droppable,\n    subject,\n    frame: newFrame\n  };\n};\n\nvar moveToNewDroppable = ({\n  previousPageBorderBoxCenter,\n  moveRelativeTo,\n  insideDestination,\n  draggable,\n  draggables,\n  destination,\n  viewport,\n  afterCritical\n}) => {\n  if (!moveRelativeTo) {\n    if (insideDestination.length) {\n      return null;\n    }\n    const proposed = {\n      displaced: emptyGroups,\n      displacedBy: noDisplacedBy,\n      at: {\n        type: 'REORDER',\n        destination: {\n          droppableId: destination.descriptor.id,\n          index: 0\n        }\n      }\n    };\n    const proposedPageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n      impact: proposed,\n      draggable,\n      droppable: destination,\n      draggables,\n      afterCritical\n    });\n    const withPlaceholder = isHomeOf(draggable, destination) ? destination : addPlaceholder(destination, draggable, draggables);\n    const isVisibleInNewLocation = isTotallyVisibleInNewLocation({\n      draggable,\n      destination: withPlaceholder,\n      newPageBorderBoxCenter: proposedPageBorderBoxCenter,\n      viewport: viewport.frame,\n      withDroppableDisplacement: false,\n      onlyOnMainAxis: true\n    });\n    return isVisibleInNewLocation ? proposed : null;\n  }\n  const isGoingBeforeTarget = Boolean(previousPageBorderBoxCenter[destination.axis.line] <= moveRelativeTo.page.borderBox.center[destination.axis.line]);\n  const proposedIndex = (() => {\n    const relativeTo = moveRelativeTo.descriptor.index;\n    if (moveRelativeTo.descriptor.id === draggable.descriptor.id) {\n      return relativeTo;\n    }\n    if (isGoingBeforeTarget) {\n      return relativeTo;\n    }\n    return relativeTo + 1;\n  })();\n  const displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  return calculateReorderImpact({\n    draggable,\n    insideDestination,\n    destination,\n    viewport,\n    displacedBy,\n    last: emptyGroups,\n    index: proposedIndex\n  });\n};\n\nvar moveCrossAxis = ({\n  isMovingForward,\n  previousPageBorderBoxCenter,\n  draggable,\n  isOver,\n  draggables,\n  droppables,\n  viewport,\n  afterCritical\n}) => {\n  const destination = getBestCrossAxisDroppable({\n    isMovingForward,\n    pageBorderBoxCenter: previousPageBorderBoxCenter,\n    source: isOver,\n    droppables,\n    viewport\n  });\n  if (!destination) {\n    return null;\n  }\n  const insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  const moveRelativeTo = getClosestDraggable({\n    pageBorderBoxCenter: previousPageBorderBoxCenter,\n    viewport,\n    destination,\n    insideDestination,\n    afterCritical\n  });\n  const impact = moveToNewDroppable({\n    previousPageBorderBoxCenter,\n    destination,\n    draggable,\n    draggables,\n    moveRelativeTo,\n    insideDestination,\n    viewport,\n    afterCritical\n  });\n  if (!impact) {\n    return null;\n  }\n  const pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact,\n    draggable,\n    droppable: destination,\n    draggables,\n    afterCritical\n  });\n  const clientSelection = getClientFromPageBorderBoxCenter({\n    pageBorderBoxCenter,\n    draggable,\n    viewport\n  });\n  return {\n    clientSelection,\n    impact,\n    scrollJumpRequest: null\n  };\n};\n\nvar whatIsDraggedOver = impact => {\n  const at = impact.at;\n  if (!at) {\n    return null;\n  }\n  if (at.type === 'REORDER') {\n    return at.destination.droppableId;\n  }\n  return at.combine.droppableId;\n};\n\nconst getDroppableOver$1 = (impact, droppables) => {\n  const id = whatIsDraggedOver(impact);\n  return id ? droppables[id] : null;\n};\nvar moveInDirection = ({\n  state,\n  type\n}) => {\n  const isActuallyOver = getDroppableOver$1(state.impact, state.dimensions.droppables);\n  const isMainAxisMovementAllowed = Boolean(isActuallyOver);\n  const home = state.dimensions.droppables[state.critical.droppable.id];\n  const isOver = isActuallyOver || home;\n  const direction = isOver.axis.direction;\n  const isMovingOnMainAxis = direction === 'vertical' && (type === 'MOVE_UP' || type === 'MOVE_DOWN') || direction === 'horizontal' && (type === 'MOVE_LEFT' || type === 'MOVE_RIGHT');\n  if (isMovingOnMainAxis && !isMainAxisMovementAllowed) {\n    return null;\n  }\n  const isMovingForward = type === 'MOVE_DOWN' || type === 'MOVE_RIGHT';\n  const draggable = state.dimensions.draggables[state.critical.draggable.id];\n  const previousPageBorderBoxCenter = state.current.page.borderBoxCenter;\n  const {\n    draggables,\n    droppables\n  } = state.dimensions;\n  return isMovingOnMainAxis ? moveToNextPlace({\n    isMovingForward,\n    previousPageBorderBoxCenter,\n    draggable,\n    destination: isOver,\n    draggables,\n    viewport: state.viewport,\n    previousClientSelection: state.current.client.selection,\n    previousImpact: state.impact,\n    afterCritical: state.afterCritical\n  }) : moveCrossAxis({\n    isMovingForward,\n    previousPageBorderBoxCenter,\n    draggable,\n    isOver,\n    draggables,\n    droppables,\n    viewport: state.viewport,\n    afterCritical: state.afterCritical\n  });\n};\n\nfunction isMovementAllowed(state) {\n  return state.phase === 'DRAGGING' || state.phase === 'COLLECTING';\n}\n\nfunction isPositionInFrame(frame) {\n  const isWithinVertical = isWithin(frame.top, frame.bottom);\n  const isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function run(point) {\n    return isWithinVertical(point.y) && isWithinHorizontal(point.x);\n  };\n}\n\nfunction getHasOverlap(first, second) {\n  return first.left < second.right && first.right > second.left && first.top < second.bottom && first.bottom > second.top;\n}\nfunction getFurthestAway({\n  pageBorderBox,\n  draggable,\n  candidates\n}) {\n  const startCenter = draggable.page.borderBox.center;\n  const sorted = candidates.map(candidate => {\n    const axis = candidate.axis;\n    const target = patch(candidate.axis.line, pageBorderBox.center[axis.line], candidate.page.borderBox.center[axis.crossAxisLine]);\n    return {\n      id: candidate.descriptor.id,\n      distance: distance(startCenter, target)\n    };\n  }).sort((a, b) => b.distance - a.distance);\n  return sorted[0] ? sorted[0].id : null;\n}\nfunction getDroppableOver({\n  pageBorderBox,\n  draggable,\n  droppables\n}) {\n  const candidates = toDroppableList(droppables).filter(item => {\n    if (!item.isEnabled) {\n      return false;\n    }\n    const active = item.subject.active;\n    if (!active) {\n      return false;\n    }\n    if (!getHasOverlap(pageBorderBox, active)) {\n      return false;\n    }\n    if (isPositionInFrame(active)(pageBorderBox.center)) {\n      return true;\n    }\n    const axis = item.axis;\n    const childCenter = active.center[axis.crossAxisLine];\n    const crossAxisStart = pageBorderBox[axis.crossAxisStart];\n    const crossAxisEnd = pageBorderBox[axis.crossAxisEnd];\n    const isContained = isWithin(active[axis.crossAxisStart], active[axis.crossAxisEnd]);\n    const isStartContained = isContained(crossAxisStart);\n    const isEndContained = isContained(crossAxisEnd);\n    if (!isStartContained && !isEndContained) {\n      return true;\n    }\n    if (isStartContained) {\n      return crossAxisStart < childCenter;\n    }\n    return crossAxisEnd > childCenter;\n  });\n  if (!candidates.length) {\n    return null;\n  }\n  if (candidates.length === 1) {\n    return candidates[0].descriptor.id;\n  }\n  return getFurthestAway({\n    pageBorderBox,\n    draggable,\n    candidates\n  });\n}\n\nconst offsetRectByPosition = (rect, point) => getRect(offsetByPosition(rect, point));\n\nvar withDroppableScroll = (droppable, area) => {\n  const frame = droppable.frame;\n  if (!frame) {\n    return area;\n  }\n  return offsetRectByPosition(area, frame.scroll.diff.value);\n};\n\nfunction getIsDisplaced({\n  displaced,\n  id\n}) {\n  return Boolean(displaced.visible[id] || displaced.invisible[id]);\n}\n\nfunction atIndex({\n  draggable,\n  closest,\n  inHomeList\n}) {\n  if (!closest) {\n    return null;\n  }\n  if (!inHomeList) {\n    return closest.descriptor.index;\n  }\n  if (closest.descriptor.index > draggable.descriptor.index) {\n    return closest.descriptor.index - 1;\n  }\n  return closest.descriptor.index;\n}\nvar getReorderImpact = ({\n  pageBorderBoxWithDroppableScroll: targetRect,\n  draggable,\n  destination,\n  insideDestination,\n  last,\n  viewport,\n  afterCritical\n}) => {\n  const axis = destination.axis;\n  const displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  const displacement = displacedBy.value;\n  const targetStart = targetRect[axis.start];\n  const targetEnd = targetRect[axis.end];\n  const withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  const closest = withoutDragging.find(child => {\n    const id = child.descriptor.id;\n    const childCenter = child.page.borderBox.center[axis.line];\n    const didStartAfterCritical$1 = didStartAfterCritical(id, afterCritical);\n    const isDisplaced = getIsDisplaced({\n      displaced: last,\n      id\n    });\n    if (didStartAfterCritical$1) {\n      if (isDisplaced) {\n        return targetEnd <= childCenter;\n      }\n      return targetStart < childCenter - displacement;\n    }\n    if (isDisplaced) {\n      return targetEnd <= childCenter + displacement;\n    }\n    return targetStart < childCenter;\n  }) || null;\n  const newIndex = atIndex({\n    draggable,\n    closest,\n    inHomeList: isHomeOf(draggable, destination)\n  });\n  return calculateReorderImpact({\n    draggable,\n    insideDestination,\n    destination,\n    viewport,\n    last,\n    displacedBy,\n    index: newIndex\n  });\n};\n\nconst combineThresholdDivisor = 4;\nvar getCombineImpact = ({\n  draggable,\n  pageBorderBoxWithDroppableScroll: targetRect,\n  previousImpact,\n  destination,\n  insideDestination,\n  afterCritical\n}) => {\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n  const axis = destination.axis;\n  const displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  const displacement = displacedBy.value;\n  const targetStart = targetRect[axis.start];\n  const targetEnd = targetRect[axis.end];\n  const withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  const combineWith = withoutDragging.find(child => {\n    const id = child.descriptor.id;\n    const childRect = child.page.borderBox;\n    const childSize = childRect[axis.size];\n    const threshold = childSize / combineThresholdDivisor;\n    const didStartAfterCritical$1 = didStartAfterCritical(id, afterCritical);\n    const isDisplaced = getIsDisplaced({\n      displaced: previousImpact.displaced,\n      id\n    });\n    if (didStartAfterCritical$1) {\n      if (isDisplaced) {\n        return targetEnd > childRect[axis.start] + threshold && targetEnd < childRect[axis.end] - threshold;\n      }\n      return targetStart > childRect[axis.start] - displacement + threshold && targetStart < childRect[axis.end] - displacement - threshold;\n    }\n    if (isDisplaced) {\n      return targetEnd > childRect[axis.start] + displacement + threshold && targetEnd < childRect[axis.end] + displacement - threshold;\n    }\n    return targetStart > childRect[axis.start] + threshold && targetStart < childRect[axis.end] - threshold;\n  });\n  if (!combineWith) {\n    return null;\n  }\n  const impact = {\n    displacedBy,\n    displaced: previousImpact.displaced,\n    at: {\n      type: 'COMBINE',\n      combine: {\n        draggableId: combineWith.descriptor.id,\n        droppableId: destination.descriptor.id\n      }\n    }\n  };\n  return impact;\n};\n\nvar getDragImpact = ({\n  pageOffset,\n  draggable,\n  draggables,\n  droppables,\n  previousImpact,\n  viewport,\n  afterCritical\n}) => {\n  const pageBorderBox = offsetRectByPosition(draggable.page.borderBox, pageOffset);\n  const destinationId = getDroppableOver({\n    pageBorderBox,\n    draggable,\n    droppables\n  });\n  if (!destinationId) {\n    return noImpact;\n  }\n  const destination = droppables[destinationId];\n  const insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  const pageBorderBoxWithDroppableScroll = withDroppableScroll(destination, pageBorderBox);\n  return getCombineImpact({\n    pageBorderBoxWithDroppableScroll,\n    draggable,\n    previousImpact,\n    destination,\n    insideDestination,\n    afterCritical\n  }) || getReorderImpact({\n    pageBorderBoxWithDroppableScroll,\n    draggable,\n    destination,\n    insideDestination,\n    last: previousImpact.displaced,\n    viewport,\n    afterCritical\n  });\n};\n\nvar patchDroppableMap = (droppables, updated) => ({\n  ...droppables,\n  [updated.descriptor.id]: updated\n});\n\nconst clearUnusedPlaceholder = ({\n  previousImpact,\n  impact,\n  droppables\n}) => {\n  const last = whatIsDraggedOver(previousImpact);\n  const now = whatIsDraggedOver(impact);\n  if (!last) {\n    return droppables;\n  }\n  if (last === now) {\n    return droppables;\n  }\n  const lastDroppable = droppables[last];\n  if (!lastDroppable.subject.withPlaceholder) {\n    return droppables;\n  }\n  const updated = removePlaceholder(lastDroppable);\n  return patchDroppableMap(droppables, updated);\n};\nvar recomputePlaceholders = ({\n  draggable,\n  draggables,\n  droppables,\n  previousImpact,\n  impact\n}) => {\n  const cleaned = clearUnusedPlaceholder({\n    previousImpact,\n    impact,\n    droppables\n  });\n  const isOver = whatIsDraggedOver(impact);\n  if (!isOver) {\n    return cleaned;\n  }\n  const droppable = droppables[isOver];\n  if (isHomeOf(draggable, droppable)) {\n    return cleaned;\n  }\n  if (droppable.subject.withPlaceholder) {\n    return cleaned;\n  }\n  const patched = addPlaceholder(droppable, draggable, draggables);\n  return patchDroppableMap(cleaned, patched);\n};\n\nvar update = ({\n  state,\n  clientSelection: forcedClientSelection,\n  dimensions: forcedDimensions,\n  viewport: forcedViewport,\n  impact: forcedImpact,\n  scrollJumpRequest\n}) => {\n  const viewport = forcedViewport || state.viewport;\n  const dimensions = forcedDimensions || state.dimensions;\n  const clientSelection = forcedClientSelection || state.current.client.selection;\n  const offset = subtract(clientSelection, state.initial.client.selection);\n  const client = {\n    offset,\n    selection: clientSelection,\n    borderBoxCenter: add(state.initial.client.borderBoxCenter, offset)\n  };\n  const page = {\n    selection: add(client.selection, viewport.scroll.current),\n    borderBoxCenter: add(client.borderBoxCenter, viewport.scroll.current),\n    offset: add(client.offset, viewport.scroll.diff.value)\n  };\n  const current = {\n    client,\n    page\n  };\n  if (state.phase === 'COLLECTING') {\n    return {\n      ...state,\n      dimensions,\n      viewport,\n      current\n    };\n  }\n  const draggable = dimensions.draggables[state.critical.draggable.id];\n  const newImpact = forcedImpact || getDragImpact({\n    pageOffset: page.offset,\n    draggable,\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables,\n    previousImpact: state.impact,\n    viewport,\n    afterCritical: state.afterCritical\n  });\n  const withUpdatedPlaceholders = recomputePlaceholders({\n    draggable,\n    impact: newImpact,\n    previousImpact: state.impact,\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables\n  });\n  const result = {\n    ...state,\n    current,\n    dimensions: {\n      draggables: dimensions.draggables,\n      droppables: withUpdatedPlaceholders\n    },\n    impact: newImpact,\n    viewport,\n    scrollJumpRequest: scrollJumpRequest || null,\n    forceShouldAnimate: scrollJumpRequest ? false : null\n  };\n  return result;\n};\n\nfunction getDraggables(ids, draggables) {\n  return ids.map(id => draggables[id]);\n}\nvar recompute = ({\n  impact,\n  viewport,\n  draggables,\n  destination,\n  forceShouldAnimate\n}) => {\n  const last = impact.displaced;\n  const afterDragging = getDraggables(last.all, draggables);\n  const displaced = getDisplacementGroups({\n    afterDragging,\n    destination,\n    displacedBy: impact.displacedBy,\n    viewport: viewport.frame,\n    forceShouldAnimate,\n    last\n  });\n  return {\n    ...impact,\n    displaced\n  };\n};\n\nvar getClientBorderBoxCenter = ({\n  impact,\n  draggable,\n  droppable,\n  draggables,\n  viewport,\n  afterCritical\n}) => {\n  const pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact,\n    draggable,\n    draggables,\n    droppable,\n    afterCritical\n  });\n  return getClientFromPageBorderBoxCenter({\n    pageBorderBoxCenter,\n    draggable,\n    viewport\n  });\n};\n\nvar refreshSnap = ({\n  state,\n  dimensions: forcedDimensions,\n  viewport: forcedViewport\n}) => {\n  !(state.movementMode === 'SNAP') ? process.env.NODE_ENV !== \"production\" ? invariant() : invariant() : void 0;\n  const needsVisibilityCheck = state.impact;\n  const viewport = forcedViewport || state.viewport;\n  const dimensions = forcedDimensions || state.dimensions;\n  const {\n    draggables,\n    droppables\n  } = dimensions;\n  const draggable = draggables[state.critical.draggable.id];\n  const isOver = whatIsDraggedOver(needsVisibilityCheck);\n  !isOver ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Must be over a destination in SNAP movement mode') : invariant() : void 0;\n  const destination = droppables[isOver];\n  const impact = recompute({\n    impact: needsVisibilityCheck,\n    viewport,\n    destination,\n    draggables\n  });\n  const clientSelection = getClientBorderBoxCenter({\n    impact,\n    draggable,\n    droppable: destination,\n    draggables,\n    viewport,\n    afterCritical: state.afterCritical\n  });\n  return update({\n    impact,\n    clientSelection,\n    state,\n    dimensions,\n    viewport\n  });\n};\n\nvar getHomeLocation = descriptor => ({\n  index: descriptor.index,\n  droppableId: descriptor.droppableId\n});\n\nvar getLiftEffect = ({\n  draggable,\n  home,\n  draggables,\n  viewport\n}) => {\n  const displacedBy = getDisplacedBy(home.axis, draggable.displaceBy);\n  const insideHome = getDraggablesInsideDroppable(home.descriptor.id, draggables);\n  const rawIndex = insideHome.indexOf(draggable);\n  !(rawIndex !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected draggable to be inside home list') : invariant() : void 0;\n  const afterDragging = insideHome.slice(rawIndex + 1);\n  const effected = afterDragging.reduce((previous, item) => {\n    previous[item.descriptor.id] = true;\n    return previous;\n  }, {});\n  const afterCritical = {\n    inVirtualList: home.descriptor.mode === 'virtual',\n    displacedBy,\n    effected\n  };\n  const displaced = getDisplacementGroups({\n    afterDragging,\n    destination: home,\n    displacedBy,\n    last: null,\n    viewport: viewport.frame,\n    forceShouldAnimate: false\n  });\n  const impact = {\n    displaced,\n    displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: getHomeLocation(draggable.descriptor)\n    }\n  };\n  return {\n    impact,\n    afterCritical\n  };\n};\n\nvar patchDimensionMap = (dimensions, updated) => ({\n  draggables: dimensions.draggables,\n  droppables: patchDroppableMap(dimensions.droppables, updated)\n});\n\nconst start = key => {\n  if (process.env.NODE_ENV !== 'production') {\n    {\n      return;\n    }\n  }\n};\nconst finish = key => {\n  if (process.env.NODE_ENV !== 'production') {\n    {\n      return;\n    }\n  }\n};\n\nvar offsetDraggable = ({\n  draggable,\n  offset: offset$1,\n  initialWindowScroll\n}) => {\n  const client = offset(draggable.client, offset$1);\n  const page = withScroll(client, initialWindowScroll);\n  const moved = {\n    ...draggable,\n    placeholder: {\n      ...draggable.placeholder,\n      client\n    },\n    client,\n    page\n  };\n  return moved;\n};\n\nvar getFrame = droppable => {\n  const frame = droppable.frame;\n  !frame ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected Droppable to have a frame') : invariant() : void 0;\n  return frame;\n};\n\nvar adjustAdditionsForScrollChanges = ({\n  additions,\n  updatedDroppables,\n  viewport\n}) => {\n  const windowScrollChange = viewport.scroll.diff.value;\n  return additions.map(draggable => {\n    const droppableId = draggable.descriptor.droppableId;\n    const modified = updatedDroppables[droppableId];\n    const frame = getFrame(modified);\n    const droppableScrollChange = frame.scroll.diff.value;\n    const totalChange = add(windowScrollChange, droppableScrollChange);\n    const moved = offsetDraggable({\n      draggable,\n      offset: totalChange,\n      initialWindowScroll: viewport.scroll.initial\n    });\n    return moved;\n  });\n};\n\nconst timingsKey = 'Processing dynamic changes';\nvar publishWhileDraggingInVirtual = ({\n  state,\n  published\n}) => {\n  start();\n  const withScrollChange = published.modified.map(update => {\n    const existing = state.dimensions.droppables[update.droppableId];\n    const scrolled = scrollDroppable(existing, update.scroll);\n    return scrolled;\n  });\n  const droppables = {\n    ...state.dimensions.droppables,\n    ...toDroppableMap(withScrollChange)\n  };\n  const updatedAdditions = toDraggableMap(adjustAdditionsForScrollChanges({\n    additions: published.additions,\n    updatedDroppables: droppables,\n    viewport: state.viewport\n  }));\n  const draggables = {\n    ...state.dimensions.draggables,\n    ...updatedAdditions\n  };\n  published.removals.forEach(id => {\n    delete draggables[id];\n  });\n  const dimensions = {\n    droppables,\n    draggables\n  };\n  const wasOverId = whatIsDraggedOver(state.impact);\n  const wasOver = wasOverId ? dimensions.droppables[wasOverId] : null;\n  const draggable = dimensions.draggables[state.critical.draggable.id];\n  const home = dimensions.droppables[state.critical.droppable.id];\n  const {\n    impact: onLiftImpact,\n    afterCritical\n  } = getLiftEffect({\n    draggable,\n    home,\n    draggables,\n    viewport: state.viewport\n  });\n  const previousImpact = wasOver && wasOver.isCombineEnabled ? state.impact : onLiftImpact;\n  const impact = getDragImpact({\n    pageOffset: state.current.page.offset,\n    draggable: dimensions.draggables[state.critical.draggable.id],\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables,\n    previousImpact,\n    viewport: state.viewport,\n    afterCritical\n  });\n  finish(timingsKey);\n  const draggingState = {\n    ...state,\n    phase: 'DRAGGING',\n    impact,\n    onLiftImpact,\n    dimensions,\n    afterCritical,\n    forceShouldAnimate: false\n  };\n  if (state.phase === 'COLLECTING') {\n    return draggingState;\n  }\n  const dropPending = {\n    ...draggingState,\n    phase: 'DROP_PENDING',\n    reason: state.reason,\n    isWaiting: false\n  };\n  return dropPending;\n};\n\nconst isSnapping = state => state.movementMode === 'SNAP';\nconst postDroppableChange = (state, updated, isEnabledChanging) => {\n  const dimensions = patchDimensionMap(state.dimensions, updated);\n  if (!isSnapping(state) || isEnabledChanging) {\n    return update({\n      state,\n      dimensions\n    });\n  }\n  return refreshSnap({\n    state,\n    dimensions\n  });\n};\nfunction removeScrollJumpRequest(state) {\n  if (state.isDragging && state.movementMode === 'SNAP') {\n    return {\n      ...state,\n      scrollJumpRequest: null\n    };\n  }\n  return state;\n}\nconst idle$2 = {\n  phase: 'IDLE',\n  completed: null,\n  shouldFlush: false\n};\nvar reducer = (state = idle$2, action) => {\n  if (action.type === 'FLUSH') {\n    return {\n      ...idle$2,\n      shouldFlush: true\n    };\n  }\n  if (action.type === 'INITIAL_PUBLISH') {\n    !(state.phase === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'INITIAL_PUBLISH must come after a IDLE phase') : invariant() : void 0;\n    const {\n      critical,\n      clientSelection,\n      viewport,\n      dimensions,\n      movementMode\n    } = action.payload;\n    const draggable = dimensions.draggables[critical.draggable.id];\n    const home = dimensions.droppables[critical.droppable.id];\n    const client = {\n      selection: clientSelection,\n      borderBoxCenter: draggable.client.borderBox.center,\n      offset: origin\n    };\n    const initial = {\n      client,\n      page: {\n        selection: add(client.selection, viewport.scroll.initial),\n        borderBoxCenter: add(client.selection, viewport.scroll.initial),\n        offset: add(client.selection, viewport.scroll.diff.value)\n      }\n    };\n    const isWindowScrollAllowed = toDroppableList(dimensions.droppables).every(item => !item.isFixedOnPage);\n    const {\n      impact,\n      afterCritical\n    } = getLiftEffect({\n      draggable,\n      home,\n      draggables: dimensions.draggables,\n      viewport\n    });\n    const result = {\n      phase: 'DRAGGING',\n      isDragging: true,\n      critical,\n      movementMode,\n      dimensions,\n      initial,\n      current: initial,\n      isWindowScrollAllowed,\n      impact,\n      afterCritical,\n      onLiftImpact: impact,\n      viewport,\n      scrollJumpRequest: null,\n      forceShouldAnimate: null\n    };\n    return result;\n  }\n  if (action.type === 'COLLECTION_STARTING') {\n    if (state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') {\n      return state;\n    }\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Collection cannot start from phase ${state.phase}`) : invariant() : void 0;\n    const result = {\n      ...state,\n      phase: 'COLLECTING'\n    };\n    return result;\n  }\n  if (action.type === 'PUBLISH_WHILE_DRAGGING') {\n    !(state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Unexpected ${action.type} received in phase ${state.phase}`) : invariant() : void 0;\n    return publishWhileDraggingInVirtual({\n      state,\n      published: action.payload\n    });\n  }\n  if (action.type === 'MOVE') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `${action.type} not permitted in phase ${state.phase}`) : invariant() : void 0;\n    const {\n      client: clientSelection\n    } = action.payload;\n    if (isEqual$1(clientSelection, state.current.client.selection)) {\n      return state;\n    }\n    return update({\n      state,\n      clientSelection,\n      impact: isSnapping(state) ? state.impact : null\n    });\n  }\n  if (action.type === 'UPDATE_DROPPABLE_SCROLL') {\n    if (state.phase === 'DROP_PENDING') {\n      return removeScrollJumpRequest(state);\n    }\n    if (state.phase === 'COLLECTING') {\n      return removeScrollJumpRequest(state);\n    }\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `${action.type} not permitted in phase ${state.phase}`) : invariant() : void 0;\n    const {\n      id,\n      newScroll\n    } = action.payload;\n    const target = state.dimensions.droppables[id];\n    if (!target) {\n      return state;\n    }\n    const scrolled = scrollDroppable(target, newScroll);\n    return postDroppableChange(state, scrolled, false);\n  }\n  if (action.type === 'UPDATE_DROPPABLE_IS_ENABLED') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Attempting to move in an unsupported phase ${state.phase}`) : invariant() : void 0;\n    const {\n      id,\n      isEnabled\n    } = action.payload;\n    const target = state.dimensions.droppables[id];\n    !target ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot find Droppable[id: ${id}] to toggle its enabled state`) : invariant() : void 0;\n    !(target.isEnabled !== isEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Trying to set droppable isEnabled to ${String(isEnabled)}\n      but it is already ${String(target.isEnabled)}`) : invariant() : void 0;\n    const updated = {\n      ...target,\n      isEnabled\n    };\n    return postDroppableChange(state, updated, true);\n  }\n  if (action.type === 'UPDATE_DROPPABLE_IS_COMBINE_ENABLED') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Attempting to move in an unsupported phase ${state.phase}`) : invariant() : void 0;\n    const {\n      id,\n      isCombineEnabled\n    } = action.payload;\n    const target = state.dimensions.droppables[id];\n    !target ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot find Droppable[id: ${id}] to toggle its isCombineEnabled state`) : invariant() : void 0;\n    !(target.isCombineEnabled !== isCombineEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Trying to set droppable isCombineEnabled to ${String(isCombineEnabled)}\n      but it is already ${String(target.isCombineEnabled)}`) : invariant() : void 0;\n    const updated = {\n      ...target,\n      isCombineEnabled\n    };\n    return postDroppableChange(state, updated, true);\n  }\n  if (action.type === 'MOVE_BY_WINDOW_SCROLL') {\n    if (state.phase === 'DROP_PENDING' || state.phase === 'DROP_ANIMATING') {\n      return state;\n    }\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot move by window in phase ${state.phase}`) : invariant() : void 0;\n    !state.isWindowScrollAllowed ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Window scrolling is currently not supported for fixed lists') : invariant() : void 0;\n    const newScroll = action.payload.newScroll;\n    if (isEqual$1(state.viewport.scroll.current, newScroll)) {\n      return removeScrollJumpRequest(state);\n    }\n    const viewport = scrollViewport(state.viewport, newScroll);\n    if (isSnapping(state)) {\n      return refreshSnap({\n        state,\n        viewport\n      });\n    }\n    return update({\n      state,\n      viewport\n    });\n  }\n  if (action.type === 'UPDATE_VIEWPORT_MAX_SCROLL') {\n    if (!isMovementAllowed(state)) {\n      return state;\n    }\n    const maxScroll = action.payload.maxScroll;\n    if (isEqual$1(maxScroll, state.viewport.scroll.max)) {\n      return state;\n    }\n    const withMaxScroll = {\n      ...state.viewport,\n      scroll: {\n        ...state.viewport.scroll,\n        max: maxScroll\n      }\n    };\n    return {\n      ...state,\n      viewport: withMaxScroll\n    };\n  }\n  if (action.type === 'MOVE_UP' || action.type === 'MOVE_DOWN' || action.type === 'MOVE_LEFT' || action.type === 'MOVE_RIGHT') {\n    if (state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') {\n      return state;\n    }\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, `${action.type} received while not in DRAGGING phase`) : invariant() : void 0;\n    const result = moveInDirection({\n      state,\n      type: action.type\n    });\n    if (!result) {\n      return state;\n    }\n    return update({\n      state,\n      impact: result.impact,\n      clientSelection: result.clientSelection,\n      scrollJumpRequest: result.scrollJumpRequest\n    });\n  }\n  if (action.type === 'DROP_PENDING') {\n    const reason = action.payload.reason;\n    !(state.phase === 'COLLECTING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only move into the DROP_PENDING phase from the COLLECTING phase') : invariant() : void 0;\n    const newState = {\n      ...state,\n      phase: 'DROP_PENDING',\n      isWaiting: true,\n      reason\n    };\n    return newState;\n  }\n  if (action.type === 'DROP_ANIMATE') {\n    const {\n      completed,\n      dropDuration,\n      newHomeClientOffset\n    } = action.payload;\n    !(state.phase === 'DRAGGING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot animate drop from phase ${state.phase}`) : invariant() : void 0;\n    const result = {\n      phase: 'DROP_ANIMATING',\n      completed,\n      dropDuration,\n      newHomeClientOffset,\n      dimensions: state.dimensions\n    };\n    return result;\n  }\n  if (action.type === 'DROP_COMPLETE') {\n    const {\n      completed\n    } = action.payload;\n    return {\n      phase: 'IDLE',\n      completed,\n      shouldFlush: false\n    };\n  }\n  return state;\n};\n\nfunction guard(action, predicate) {\n  return action instanceof Object && 'type' in action && action.type === predicate;\n}\nconst beforeInitialCapture = args => ({\n  type: 'BEFORE_INITIAL_CAPTURE',\n  payload: args\n});\nconst lift$1 = args => ({\n  type: 'LIFT',\n  payload: args\n});\nconst initialPublish = args => ({\n  type: 'INITIAL_PUBLISH',\n  payload: args\n});\nconst publishWhileDragging = args => ({\n  type: 'PUBLISH_WHILE_DRAGGING',\n  payload: args\n});\nconst collectionStarting = () => ({\n  type: 'COLLECTION_STARTING',\n  payload: null\n});\nconst updateDroppableScroll = args => ({\n  type: 'UPDATE_DROPPABLE_SCROLL',\n  payload: args\n});\nconst updateDroppableIsEnabled = args => ({\n  type: 'UPDATE_DROPPABLE_IS_ENABLED',\n  payload: args\n});\nconst updateDroppableIsCombineEnabled = args => ({\n  type: 'UPDATE_DROPPABLE_IS_COMBINE_ENABLED',\n  payload: args\n});\nconst move = args => ({\n  type: 'MOVE',\n  payload: args\n});\nconst moveByWindowScroll = args => ({\n  type: 'MOVE_BY_WINDOW_SCROLL',\n  payload: args\n});\nconst updateViewportMaxScroll = args => ({\n  type: 'UPDATE_VIEWPORT_MAX_SCROLL',\n  payload: args\n});\nconst moveUp = () => ({\n  type: 'MOVE_UP',\n  payload: null\n});\nconst moveDown = () => ({\n  type: 'MOVE_DOWN',\n  payload: null\n});\nconst moveRight = () => ({\n  type: 'MOVE_RIGHT',\n  payload: null\n});\nconst moveLeft = () => ({\n  type: 'MOVE_LEFT',\n  payload: null\n});\nconst flush = () => ({\n  type: 'FLUSH',\n  payload: null\n});\nconst animateDrop = args => ({\n  type: 'DROP_ANIMATE',\n  payload: args\n});\nconst completeDrop = args => ({\n  type: 'DROP_COMPLETE',\n  payload: args\n});\nconst drop = args => ({\n  type: 'DROP',\n  payload: args\n});\nconst dropPending = args => ({\n  type: 'DROP_PENDING',\n  payload: args\n});\nconst dropAnimationFinished = () => ({\n  type: 'DROP_ANIMATION_FINISHED',\n  payload: null\n});\n\nfunction checkIndexes(insideDestination) {\n  if (insideDestination.length <= 1) {\n    return;\n  }\n  const indexes = insideDestination.map(d => d.descriptor.index);\n  const errors = {};\n  for (let i = 1; i < indexes.length; i++) {\n    const current = indexes[i];\n    const previous = indexes[i - 1];\n    if (current !== previous + 1) {\n      errors[current] = true;\n    }\n  }\n  if (!Object.keys(errors).length) {\n    return;\n  }\n  const formatted = indexes.map(index => {\n    const hasError = Boolean(errors[index]);\n    return hasError ? `[${index}]` : `${index}`;\n  }).join(', ');\n  process.env.NODE_ENV !== \"production\" ? warning(`\n    Detected non-consecutive <Draggable /> indexes.\n\n    (This can cause unexpected bugs)\n\n    ${formatted}\n  `) : void 0;\n}\nfunction validateDimensions(critical, dimensions) {\n  if (process.env.NODE_ENV !== 'production') {\n    const insideDestination = getDraggablesInsideDroppable(critical.droppable.id, dimensions.draggables);\n    checkIndexes(insideDestination);\n  }\n}\n\nvar lift = marshal => ({\n  getState,\n  dispatch\n}) => next => action => {\n  if (!guard(action, 'LIFT')) {\n    next(action);\n    return;\n  }\n  const {\n    id,\n    clientSelection,\n    movementMode\n  } = action.payload;\n  const initial = getState();\n  if (initial.phase === 'DROP_ANIMATING') {\n    dispatch(completeDrop({\n      completed: initial.completed\n    }));\n  }\n  !(getState().phase === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Unexpected phase to start a drag') : invariant() : void 0;\n  dispatch(flush());\n  dispatch(beforeInitialCapture({\n    draggableId: id,\n    movementMode\n  }));\n  const scrollOptions = {\n    shouldPublishImmediately: movementMode === 'SNAP'\n  };\n  const request = {\n    draggableId: id,\n    scrollOptions\n  };\n  const {\n    critical,\n    dimensions,\n    viewport\n  } = marshal.startPublishing(request);\n  validateDimensions(critical, dimensions);\n  dispatch(initialPublish({\n    critical,\n    dimensions,\n    clientSelection,\n    movementMode,\n    viewport\n  }));\n};\n\nvar style = marshal => () => next => action => {\n  if (guard(action, 'INITIAL_PUBLISH')) {\n    marshal.dragging();\n  }\n  if (guard(action, 'DROP_ANIMATE')) {\n    marshal.dropping(action.payload.completed.result.reason);\n  }\n  if (guard(action, 'FLUSH') || guard(action, 'DROP_COMPLETE')) {\n    marshal.resting();\n  }\n  next(action);\n};\n\nconst curves = {\n  outOfTheWay: 'cubic-bezier(0.2, 0, 0, 1)',\n  drop: 'cubic-bezier(.2,1,.1,1)'\n};\nconst combine = {\n  opacity: {\n    drop: 0,\n    combining: 0.7\n  },\n  scale: {\n    drop: 0.75\n  }\n};\nconst timings = {\n  outOfTheWay: 0.2,\n  minDropTime: 0.33,\n  maxDropTime: 0.55\n};\nconst outOfTheWayTiming = `${timings.outOfTheWay}s ${curves.outOfTheWay}`;\nconst transitions = {\n  fluid: `opacity ${outOfTheWayTiming}`,\n  snap: `transform ${outOfTheWayTiming}, opacity ${outOfTheWayTiming}`,\n  drop: duration => {\n    const timing = `${duration}s ${curves.drop}`;\n    return `transform ${timing}, opacity ${timing}`;\n  },\n  outOfTheWay: `transform ${outOfTheWayTiming}`,\n  placeholder: `height ${outOfTheWayTiming}, width ${outOfTheWayTiming}, margin ${outOfTheWayTiming}`\n};\nconst moveTo = offset => isEqual$1(offset, origin) ? undefined : `translate(${offset.x}px, ${offset.y}px)`;\nconst transforms = {\n  moveTo,\n  drop: (offset, isCombining) => {\n    const translate = moveTo(offset);\n    if (!translate) {\n      return undefined;\n    }\n    if (!isCombining) {\n      return translate;\n    }\n    return `${translate} scale(${combine.scale.drop})`;\n  }\n};\n\nconst {\n  minDropTime,\n  maxDropTime\n} = timings;\nconst dropTimeRange = maxDropTime - minDropTime;\nconst maxDropTimeAtDistance = 1500;\nconst cancelDropModifier = 0.6;\nvar getDropDuration = ({\n  current,\n  destination,\n  reason\n}) => {\n  const distance$1 = distance(current, destination);\n  if (distance$1 <= 0) {\n    return minDropTime;\n  }\n  if (distance$1 >= maxDropTimeAtDistance) {\n    return maxDropTime;\n  }\n  const percentage = distance$1 / maxDropTimeAtDistance;\n  const duration = minDropTime + dropTimeRange * percentage;\n  const withDuration = reason === 'CANCEL' ? duration * cancelDropModifier : duration;\n  return Number(withDuration.toFixed(2));\n};\n\nvar getNewHomeClientOffset = ({\n  impact,\n  draggable,\n  dimensions,\n  viewport,\n  afterCritical\n}) => {\n  const {\n    draggables,\n    droppables\n  } = dimensions;\n  const droppableId = whatIsDraggedOver(impact);\n  const destination = droppableId ? droppables[droppableId] : null;\n  const home = droppables[draggable.descriptor.droppableId];\n  const newClientCenter = getClientBorderBoxCenter({\n    impact,\n    draggable,\n    draggables,\n    afterCritical,\n    droppable: destination || home,\n    viewport\n  });\n  const offset = subtract(newClientCenter, draggable.client.borderBox.center);\n  return offset;\n};\n\nvar getDropImpact = ({\n  draggables,\n  reason,\n  lastImpact,\n  home,\n  viewport,\n  onLiftImpact\n}) => {\n  if (!lastImpact.at || reason !== 'DROP') {\n    const recomputedHomeImpact = recompute({\n      draggables,\n      impact: onLiftImpact,\n      destination: home,\n      viewport,\n      forceShouldAnimate: true\n    });\n    return {\n      impact: recomputedHomeImpact,\n      didDropInsideDroppable: false\n    };\n  }\n  if (lastImpact.at.type === 'REORDER') {\n    return {\n      impact: lastImpact,\n      didDropInsideDroppable: true\n    };\n  }\n  const withoutMovement = {\n    ...lastImpact,\n    displaced: emptyGroups\n  };\n  return {\n    impact: withoutMovement,\n    didDropInsideDroppable: true\n  };\n};\n\nconst dropMiddleware = ({\n  getState,\n  dispatch\n}) => next => action => {\n  if (!guard(action, 'DROP')) {\n    next(action);\n    return;\n  }\n  const state = getState();\n  const reason = action.payload.reason;\n  if (state.phase === 'COLLECTING') {\n    dispatch(dropPending({\n      reason\n    }));\n    return;\n  }\n  if (state.phase === 'IDLE') {\n    return;\n  }\n  const isWaitingForDrop = state.phase === 'DROP_PENDING' && state.isWaiting;\n  !!isWaitingForDrop ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A DROP action occurred while DROP_PENDING and still waiting') : invariant() : void 0;\n  !(state.phase === 'DRAGGING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot drop in phase: ${state.phase}`) : invariant() : void 0;\n  const critical = state.critical;\n  const dimensions = state.dimensions;\n  const draggable = dimensions.draggables[state.critical.draggable.id];\n  const {\n    impact,\n    didDropInsideDroppable\n  } = getDropImpact({\n    reason,\n    lastImpact: state.impact,\n    afterCritical: state.afterCritical,\n    onLiftImpact: state.onLiftImpact,\n    home: state.dimensions.droppables[state.critical.droppable.id],\n    viewport: state.viewport,\n    draggables: state.dimensions.draggables\n  });\n  const destination = didDropInsideDroppable ? tryGetDestination(impact) : null;\n  const combine = didDropInsideDroppable ? tryGetCombine(impact) : null;\n  const source = {\n    index: critical.draggable.index,\n    droppableId: critical.droppable.id\n  };\n  const result = {\n    draggableId: draggable.descriptor.id,\n    type: draggable.descriptor.type,\n    source,\n    reason,\n    mode: state.movementMode,\n    destination,\n    combine\n  };\n  const newHomeClientOffset = getNewHomeClientOffset({\n    impact,\n    draggable,\n    dimensions,\n    viewport: state.viewport,\n    afterCritical: state.afterCritical\n  });\n  const completed = {\n    critical: state.critical,\n    afterCritical: state.afterCritical,\n    result,\n    impact\n  };\n  const isAnimationRequired = !isEqual$1(state.current.client.offset, newHomeClientOffset) || Boolean(result.combine);\n  if (!isAnimationRequired) {\n    dispatch(completeDrop({\n      completed\n    }));\n    return;\n  }\n  const dropDuration = getDropDuration({\n    current: state.current.client.offset,\n    destination: newHomeClientOffset,\n    reason\n  });\n  const args = {\n    newHomeClientOffset,\n    dropDuration,\n    completed\n  };\n  dispatch(animateDrop(args));\n};\n\nvar getWindowScroll = () => ({\n  x: window.pageXOffset,\n  y: window.pageYOffset\n});\n\nfunction getWindowScrollBinding(update) {\n  return {\n    eventName: 'scroll',\n    options: {\n      passive: true,\n      capture: false\n    },\n    fn: event => {\n      if (event.target !== window && event.target !== window.document) {\n        return;\n      }\n      update();\n    }\n  };\n}\nfunction getScrollListener({\n  onWindowScroll\n}) {\n  function updateScroll() {\n    onWindowScroll(getWindowScroll());\n  }\n  const scheduled = rafSchd(updateScroll);\n  const binding = getWindowScrollBinding(scheduled);\n  let unbind = noop$2;\n  function isActive() {\n    return unbind !== noop$2;\n  }\n  function start() {\n    !!isActive() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start scroll listener when already active') : invariant() : void 0;\n    unbind = bindEvents(window, [binding]);\n  }\n  function stop() {\n    !isActive() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop scroll listener when not active') : invariant() : void 0;\n    scheduled.cancel();\n    unbind();\n    unbind = noop$2;\n  }\n  return {\n    start,\n    stop,\n    isActive\n  };\n}\n\nconst shouldStop$1 = action => guard(action, 'DROP_COMPLETE') || guard(action, 'DROP_ANIMATE') || guard(action, 'FLUSH');\nconst scrollListener = store => {\n  const listener = getScrollListener({\n    onWindowScroll: newScroll => {\n      store.dispatch(moveByWindowScroll({\n        newScroll\n      }));\n    }\n  });\n  return next => action => {\n    if (!listener.isActive() && guard(action, 'INITIAL_PUBLISH')) {\n      listener.start();\n    }\n    if (listener.isActive() && shouldStop$1(action)) {\n      listener.stop();\n    }\n    next(action);\n  };\n};\n\nvar getExpiringAnnounce = announce => {\n  let wasCalled = false;\n  let isExpired = false;\n  const timeoutId = setTimeout(() => {\n    isExpired = true;\n  });\n  const result = message => {\n    if (wasCalled) {\n      process.env.NODE_ENV !== \"production\" ? warning('Announcement already made. Not making a second announcement') : void 0;\n      return;\n    }\n    if (isExpired) {\n      process.env.NODE_ENV !== \"production\" ? warning(`\n        Announcements cannot be made asynchronously.\n        Default message has already been announced.\n      `) : void 0;\n      return;\n    }\n    wasCalled = true;\n    announce(message);\n    clearTimeout(timeoutId);\n  };\n  result.wasCalled = () => wasCalled;\n  return result;\n};\n\nvar getAsyncMarshal = () => {\n  const entries = [];\n  const execute = timerId => {\n    const index = entries.findIndex(item => item.timerId === timerId);\n    !(index !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find timer') : invariant() : void 0;\n    const [entry] = entries.splice(index, 1);\n    entry.callback();\n  };\n  const add = fn => {\n    const timerId = setTimeout(() => execute(timerId));\n    const entry = {\n      timerId,\n      callback: fn\n    };\n    entries.push(entry);\n  };\n  const flush = () => {\n    if (!entries.length) {\n      return;\n    }\n    const shallow = [...entries];\n    entries.length = 0;\n    shallow.forEach(entry => {\n      clearTimeout(entry.timerId);\n      entry.callback();\n    });\n  };\n  return {\n    add,\n    flush\n  };\n};\n\nconst areLocationsEqual = (first, second) => {\n  if (first == null && second == null) {\n    return true;\n  }\n  if (first == null || second == null) {\n    return false;\n  }\n  return first.droppableId === second.droppableId && first.index === second.index;\n};\nconst isCombineEqual = (first, second) => {\n  if (first == null && second == null) {\n    return true;\n  }\n  if (first == null || second == null) {\n    return false;\n  }\n  return first.draggableId === second.draggableId && first.droppableId === second.droppableId;\n};\nconst isCriticalEqual = (first, second) => {\n  if (first === second) {\n    return true;\n  }\n  const isDraggableEqual = first.draggable.id === second.draggable.id && first.draggable.droppableId === second.draggable.droppableId && first.draggable.type === second.draggable.type && first.draggable.index === second.draggable.index;\n  const isDroppableEqual = first.droppable.id === second.droppable.id && first.droppable.type === second.droppable.type;\n  return isDraggableEqual && isDroppableEqual;\n};\n\nconst withTimings = (key, fn) => {\n  start();\n  fn();\n  finish();\n};\nconst getDragStart = (critical, mode) => ({\n  draggableId: critical.draggable.id,\n  type: critical.droppable.type,\n  source: {\n    droppableId: critical.droppable.id,\n    index: critical.draggable.index\n  },\n  mode\n});\nfunction execute(responder, data, announce, getDefaultMessage) {\n  if (!responder) {\n    announce(getDefaultMessage(data));\n    return;\n  }\n  const willExpire = getExpiringAnnounce(announce);\n  const provided = {\n    announce: willExpire\n  };\n  responder(data, provided);\n  if (!willExpire.wasCalled()) {\n    announce(getDefaultMessage(data));\n  }\n}\nvar getPublisher = (getResponders, announce) => {\n  const asyncMarshal = getAsyncMarshal();\n  let dragging = null;\n  const beforeCapture = (draggableId, mode) => {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeCapture as a drag start has already been published') : invariant() : void 0;\n    withTimings('onBeforeCapture', () => {\n      const fn = getResponders().onBeforeCapture;\n      if (fn) {\n        const before = {\n          draggableId,\n          mode\n        };\n        fn(before);\n      }\n    });\n  };\n  const beforeStart = (critical, mode) => {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeDragStart as a drag start has already been published') : invariant() : void 0;\n    withTimings('onBeforeDragStart', () => {\n      const fn = getResponders().onBeforeDragStart;\n      if (fn) {\n        fn(getDragStart(critical, mode));\n      }\n    });\n  };\n  const start = (critical, mode) => {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeDragStart as a drag start has already been published') : invariant() : void 0;\n    const data = getDragStart(critical, mode);\n    dragging = {\n      mode,\n      lastCritical: critical,\n      lastLocation: data.source,\n      lastCombine: null\n    };\n    asyncMarshal.add(() => {\n      withTimings('onDragStart', () => execute(getResponders().onDragStart, data, announce, preset.onDragStart));\n    });\n  };\n  const update = (critical, impact) => {\n    const location = tryGetDestination(impact);\n    const combine = tryGetCombine(impact);\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onDragMove when onDragStart has not been called') : invariant() : void 0;\n    const hasCriticalChanged = !isCriticalEqual(critical, dragging.lastCritical);\n    if (hasCriticalChanged) {\n      dragging.lastCritical = critical;\n    }\n    const hasLocationChanged = !areLocationsEqual(dragging.lastLocation, location);\n    if (hasLocationChanged) {\n      dragging.lastLocation = location;\n    }\n    const hasGroupingChanged = !isCombineEqual(dragging.lastCombine, combine);\n    if (hasGroupingChanged) {\n      dragging.lastCombine = combine;\n    }\n    if (!hasCriticalChanged && !hasLocationChanged && !hasGroupingChanged) {\n      return;\n    }\n    const data = {\n      ...getDragStart(critical, dragging.mode),\n      combine,\n      destination: location\n    };\n    asyncMarshal.add(() => {\n      withTimings('onDragUpdate', () => execute(getResponders().onDragUpdate, data, announce, preset.onDragUpdate));\n    });\n  };\n  const flush = () => {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only flush responders while dragging') : invariant() : void 0;\n    asyncMarshal.flush();\n  };\n  const drop = result => {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onDragEnd when there is no matching onDragStart') : invariant() : void 0;\n    dragging = null;\n    withTimings('onDragEnd', () => execute(getResponders().onDragEnd, result, announce, preset.onDragEnd));\n  };\n  const abort = () => {\n    if (!dragging) {\n      return;\n    }\n    const result = {\n      ...getDragStart(dragging.lastCritical, dragging.mode),\n      combine: null,\n      destination: null,\n      reason: 'CANCEL'\n    };\n    drop(result);\n  };\n  return {\n    beforeCapture,\n    beforeStart,\n    start,\n    update,\n    flush,\n    drop,\n    abort\n  };\n};\n\nvar responders = (getResponders, announce) => {\n  const publisher = getPublisher(getResponders, announce);\n  return store => next => action => {\n    if (guard(action, 'BEFORE_INITIAL_CAPTURE')) {\n      publisher.beforeCapture(action.payload.draggableId, action.payload.movementMode);\n      return;\n    }\n    if (guard(action, 'INITIAL_PUBLISH')) {\n      const critical = action.payload.critical;\n      publisher.beforeStart(critical, action.payload.movementMode);\n      next(action);\n      publisher.start(critical, action.payload.movementMode);\n      return;\n    }\n    if (guard(action, 'DROP_COMPLETE')) {\n      const result = action.payload.completed.result;\n      publisher.flush();\n      next(action);\n      publisher.drop(result);\n      return;\n    }\n    next(action);\n    if (guard(action, 'FLUSH')) {\n      publisher.abort();\n      return;\n    }\n    const state = store.getState();\n    if (state.phase === 'DRAGGING') {\n      publisher.update(state.critical, state.impact);\n    }\n  };\n};\n\nconst dropAnimationFinishMiddleware = store => next => action => {\n  if (!guard(action, 'DROP_ANIMATION_FINISHED')) {\n    next(action);\n    return;\n  }\n  const state = store.getState();\n  !(state.phase === 'DROP_ANIMATING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot finish a drop animating when no drop is occurring') : invariant() : void 0;\n  store.dispatch(completeDrop({\n    completed: state.completed\n  }));\n};\n\nconst dropAnimationFlushOnScrollMiddleware = store => {\n  let unbind = null;\n  let frameId = null;\n  function clear() {\n    if (frameId) {\n      cancelAnimationFrame(frameId);\n      frameId = null;\n    }\n    if (unbind) {\n      unbind();\n      unbind = null;\n    }\n  }\n  return next => action => {\n    if (guard(action, 'FLUSH') || guard(action, 'DROP_COMPLETE') || guard(action, 'DROP_ANIMATION_FINISHED')) {\n      clear();\n    }\n    next(action);\n    if (!guard(action, 'DROP_ANIMATE')) {\n      return;\n    }\n    const binding = {\n      eventName: 'scroll',\n      options: {\n        capture: true,\n        passive: false,\n        once: true\n      },\n      fn: function flushDropAnimation() {\n        const state = store.getState();\n        if (state.phase === 'DROP_ANIMATING') {\n          store.dispatch(dropAnimationFinished());\n        }\n      }\n    };\n    frameId = requestAnimationFrame(() => {\n      frameId = null;\n      unbind = bindEvents(window, [binding]);\n    });\n  };\n};\n\nvar dimensionMarshalStopper = marshal => () => next => action => {\n  if (guard(action, 'DROP_COMPLETE') || guard(action, 'FLUSH') || guard(action, 'DROP_ANIMATE')) {\n    marshal.stopPublishing();\n  }\n  next(action);\n};\n\nvar focus = marshal => {\n  let isWatching = false;\n  return () => next => action => {\n    if (guard(action, 'INITIAL_PUBLISH')) {\n      isWatching = true;\n      marshal.tryRecordFocus(action.payload.critical.draggable.id);\n      next(action);\n      marshal.tryRestoreFocusRecorded();\n      return;\n    }\n    next(action);\n    if (!isWatching) {\n      return;\n    }\n    if (guard(action, 'FLUSH')) {\n      isWatching = false;\n      marshal.tryRestoreFocusRecorded();\n      return;\n    }\n    if (guard(action, 'DROP_COMPLETE')) {\n      isWatching = false;\n      const result = action.payload.completed.result;\n      if (result.combine) {\n        marshal.tryShiftRecord(result.draggableId, result.combine.draggableId);\n      }\n      marshal.tryRestoreFocusRecorded();\n    }\n  };\n};\n\nconst shouldStop = action => guard(action, 'DROP_COMPLETE') || guard(action, 'DROP_ANIMATE') || guard(action, 'FLUSH');\nvar autoScroll = autoScroller => store => next => action => {\n  if (shouldStop(action)) {\n    autoScroller.stop();\n    next(action);\n    return;\n  }\n  if (guard(action, 'INITIAL_PUBLISH')) {\n    next(action);\n    const state = store.getState();\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected phase to be DRAGGING after INITIAL_PUBLISH') : invariant() : void 0;\n    autoScroller.start(state);\n    return;\n  }\n  next(action);\n  autoScroller.scroll(store.getState());\n};\n\nconst pendingDrop = store => next => action => {\n  next(action);\n  if (!guard(action, 'PUBLISH_WHILE_DRAGGING')) {\n    return;\n  }\n  const postActionState = store.getState();\n  if (postActionState.phase !== 'DROP_PENDING') {\n    return;\n  }\n  if (postActionState.isWaiting) {\n    return;\n  }\n  store.dispatch(drop({\n    reason: postActionState.reason\n  }));\n};\n\nconst composeEnhancers = process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n  name: '@hello-pangea/dnd'\n}) : compose;\nvar createStore = ({\n  dimensionMarshal,\n  focusMarshal,\n  styleMarshal,\n  getResponders,\n  announce,\n  autoScroller\n}) => createStore$1(reducer, composeEnhancers(applyMiddleware(style(styleMarshal), dimensionMarshalStopper(dimensionMarshal), lift(dimensionMarshal), dropMiddleware, dropAnimationFinishMiddleware, dropAnimationFlushOnScrollMiddleware, pendingDrop, autoScroll(autoScroller), scrollListener, focus(focusMarshal), responders(getResponders, announce))));\n\nconst clean$1 = () => ({\n  additions: {},\n  removals: {},\n  modified: {}\n});\nfunction createPublisher({\n  registry,\n  callbacks\n}) {\n  let staging = clean$1();\n  let frameId = null;\n  const collect = () => {\n    if (frameId) {\n      return;\n    }\n    callbacks.collectionStarting();\n    frameId = requestAnimationFrame(() => {\n      frameId = null;\n      start();\n      const {\n        additions,\n        removals,\n        modified\n      } = staging;\n      const added = Object.keys(additions).map(id => registry.draggable.getById(id).getDimension(origin)).sort((a, b) => a.descriptor.index - b.descriptor.index);\n      const updated = Object.keys(modified).map(id => {\n        const entry = registry.droppable.getById(id);\n        const scroll = entry.callbacks.getScrollWhileDragging();\n        return {\n          droppableId: id,\n          scroll\n        };\n      });\n      const result = {\n        additions: added,\n        removals: Object.keys(removals),\n        modified: updated\n      };\n      staging = clean$1();\n      finish();\n      callbacks.publish(result);\n    });\n  };\n  const add = entry => {\n    const id = entry.descriptor.id;\n    staging.additions[id] = entry;\n    staging.modified[entry.descriptor.droppableId] = true;\n    if (staging.removals[id]) {\n      delete staging.removals[id];\n    }\n    collect();\n  };\n  const remove = entry => {\n    const descriptor = entry.descriptor;\n    staging.removals[descriptor.id] = true;\n    staging.modified[descriptor.droppableId] = true;\n    if (staging.additions[descriptor.id]) {\n      delete staging.additions[descriptor.id];\n    }\n    collect();\n  };\n  const stop = () => {\n    if (!frameId) {\n      return;\n    }\n    cancelAnimationFrame(frameId);\n    frameId = null;\n    staging = clean$1();\n  };\n  return {\n    add,\n    remove,\n    stop\n  };\n}\n\nvar getMaxScroll = ({\n  scrollHeight,\n  scrollWidth,\n  height,\n  width\n}) => {\n  const maxScroll = subtract({\n    x: scrollWidth,\n    y: scrollHeight\n  }, {\n    x: width,\n    y: height\n  });\n  const adjustedMaxScroll = {\n    x: Math.max(0, maxScroll.x),\n    y: Math.max(0, maxScroll.y)\n  };\n  return adjustedMaxScroll;\n};\n\nvar getDocumentElement = () => {\n  const doc = document.documentElement;\n  !doc ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find document.documentElement') : invariant() : void 0;\n  return doc;\n};\n\nvar getMaxWindowScroll = () => {\n  const doc = getDocumentElement();\n  const maxScroll = getMaxScroll({\n    scrollHeight: doc.scrollHeight,\n    scrollWidth: doc.scrollWidth,\n    width: doc.clientWidth,\n    height: doc.clientHeight\n  });\n  return maxScroll;\n};\n\nvar getViewport = () => {\n  const scroll = getWindowScroll();\n  const maxScroll = getMaxWindowScroll();\n  const top = scroll.y;\n  const left = scroll.x;\n  const doc = getDocumentElement();\n  const width = doc.clientWidth;\n  const height = doc.clientHeight;\n  const right = left + width;\n  const bottom = top + height;\n  const frame = getRect({\n    top,\n    left,\n    right,\n    bottom\n  });\n  const viewport = {\n    frame,\n    scroll: {\n      initial: scroll,\n      current: scroll,\n      max: maxScroll,\n      diff: {\n        value: origin,\n        displacement: origin\n      }\n    }\n  };\n  return viewport;\n};\n\nvar getInitialPublish = ({\n  critical,\n  scrollOptions,\n  registry\n}) => {\n  start();\n  const viewport = getViewport();\n  const windowScroll = viewport.scroll.current;\n  const home = critical.droppable;\n  const droppables = registry.droppable.getAllByType(home.type).map(entry => entry.callbacks.getDimensionAndWatchScroll(windowScroll, scrollOptions));\n  const draggables = registry.draggable.getAllByType(critical.draggable.type).map(entry => entry.getDimension(windowScroll));\n  const dimensions = {\n    draggables: toDraggableMap(draggables),\n    droppables: toDroppableMap(droppables)\n  };\n  finish();\n  const result = {\n    dimensions,\n    critical,\n    viewport\n  };\n  return result;\n};\n\nfunction shouldPublishUpdate(registry, dragging, entry) {\n  if (entry.descriptor.id === dragging.id) {\n    return false;\n  }\n  if (entry.descriptor.type !== dragging.type) {\n    return false;\n  }\n  const home = registry.droppable.getById(entry.descriptor.droppableId);\n  if (home.descriptor.mode !== 'virtual') {\n    process.env.NODE_ENV !== \"production\" ? warning(`\n      You are attempting to add or remove a Draggable [id: ${entry.descriptor.id}]\n      while a drag is occurring. This is only supported for virtual lists.\n\n      See https://github.com/hello-pangea/dnd/blob/main/docs/patterns/virtual-lists.md\n    `) : void 0;\n    return false;\n  }\n  return true;\n}\nvar createDimensionMarshal = (registry, callbacks) => {\n  let collection = null;\n  const publisher = createPublisher({\n    callbacks: {\n      publish: callbacks.publishWhileDragging,\n      collectionStarting: callbacks.collectionStarting\n    },\n    registry\n  });\n  const updateDroppableIsEnabled = (id, isEnabled) => {\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot update is enabled flag of Droppable ${id} as it is not registered`) : invariant() : void 0;\n    if (!collection) {\n      return;\n    }\n    callbacks.updateDroppableIsEnabled({\n      id,\n      isEnabled\n    });\n  };\n  const updateDroppableIsCombineEnabled = (id, isCombineEnabled) => {\n    if (!collection) {\n      return;\n    }\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot update isCombineEnabled flag of Droppable ${id} as it is not registered`) : invariant() : void 0;\n    callbacks.updateDroppableIsCombineEnabled({\n      id,\n      isCombineEnabled\n    });\n  };\n  const updateDroppableScroll = (id, newScroll) => {\n    if (!collection) {\n      return;\n    }\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot update the scroll on Droppable ${id} as it is not registered`) : invariant() : void 0;\n    callbacks.updateDroppableScroll({\n      id,\n      newScroll\n    });\n  };\n  const scrollDroppable = (id, change) => {\n    if (!collection) {\n      return;\n    }\n    registry.droppable.getById(id).callbacks.scroll(change);\n  };\n  const stopPublishing = () => {\n    if (!collection) {\n      return;\n    }\n    publisher.stop();\n    const home = collection.critical.droppable;\n    registry.droppable.getAllByType(home.type).forEach(entry => entry.callbacks.dragStopped());\n    collection.unsubscribe();\n    collection = null;\n  };\n  const subscriber = event => {\n    !collection ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Should only be subscribed when a collection is occurring') : invariant() : void 0;\n    const dragging = collection.critical.draggable;\n    if (event.type === 'ADDITION') {\n      if (shouldPublishUpdate(registry, dragging, event.value)) {\n        publisher.add(event.value);\n      }\n    }\n    if (event.type === 'REMOVAL') {\n      if (shouldPublishUpdate(registry, dragging, event.value)) {\n        publisher.remove(event.value);\n      }\n    }\n  };\n  const startPublishing = request => {\n    !!collection ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start capturing critical dimensions as there is already a collection') : invariant() : void 0;\n    const entry = registry.draggable.getById(request.draggableId);\n    const home = registry.droppable.getById(entry.descriptor.droppableId);\n    const critical = {\n      draggable: entry.descriptor,\n      droppable: home.descriptor\n    };\n    const unsubscribe = registry.subscribe(subscriber);\n    collection = {\n      critical,\n      unsubscribe\n    };\n    return getInitialPublish({\n      critical,\n      registry,\n      scrollOptions: request.scrollOptions\n    });\n  };\n  const marshal = {\n    updateDroppableIsEnabled,\n    updateDroppableIsCombineEnabled,\n    scrollDroppable,\n    updateDroppableScroll,\n    startPublishing,\n    stopPublishing\n  };\n  return marshal;\n};\n\nvar canStartDrag = (state, id) => {\n  if (state.phase === 'IDLE') {\n    return true;\n  }\n  if (state.phase !== 'DROP_ANIMATING') {\n    return false;\n  }\n  if (state.completed.result.draggableId === id) {\n    return false;\n  }\n  return state.completed.result.reason === 'DROP';\n};\n\nvar scrollWindow = change => {\n  window.scrollBy(change.x, change.y);\n};\n\nconst getScrollableDroppables = memoizeOne(droppables => toDroppableList(droppables).filter(droppable => {\n  if (!droppable.isEnabled) {\n    return false;\n  }\n  if (!droppable.frame) {\n    return false;\n  }\n  return true;\n}));\nconst getScrollableDroppableOver = (target, droppables) => {\n  const maybe = getScrollableDroppables(droppables).find(droppable => {\n    !droppable.frame ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Invalid result') : invariant() : void 0;\n    return isPositionInFrame(droppable.frame.pageMarginBox)(target);\n  }) || null;\n  return maybe;\n};\nvar getBestScrollableDroppable = ({\n  center,\n  destination,\n  droppables\n}) => {\n  if (destination) {\n    const dimension = droppables[destination];\n    if (!dimension.frame) {\n      return null;\n    }\n    return dimension;\n  }\n  const dimension = getScrollableDroppableOver(center, droppables);\n  return dimension;\n};\n\nconst defaultAutoScrollerOptions = {\n  startFromPercentage: 0.25,\n  maxScrollAtPercentage: 0.05,\n  maxPixelScroll: 28,\n  ease: percentage => percentage ** 2,\n  durationDampening: {\n    stopDampeningAt: 1200,\n    accelerateAt: 360\n  },\n  disabled: false\n};\n\nvar getDistanceThresholds = (container, axis, getAutoScrollerOptions = () => defaultAutoScrollerOptions) => {\n  const autoScrollerOptions = getAutoScrollerOptions();\n  const startScrollingFrom = container[axis.size] * autoScrollerOptions.startFromPercentage;\n  const maxScrollValueAt = container[axis.size] * autoScrollerOptions.maxScrollAtPercentage;\n  const thresholds = {\n    startScrollingFrom,\n    maxScrollValueAt\n  };\n  return thresholds;\n};\n\nvar getPercentage = ({\n  startOfRange,\n  endOfRange,\n  current\n}) => {\n  const range = endOfRange - startOfRange;\n  if (range === 0) {\n    process.env.NODE_ENV !== \"production\" ? warning(`\n      Detected distance range of 0 in the fluid auto scroller\n      This is unexpected and would cause a divide by 0 issue.\n      Not allowing an auto scroll\n    `) : void 0;\n    return 0;\n  }\n  const currentInRange = current - startOfRange;\n  const percentage = currentInRange / range;\n  return percentage;\n};\n\nvar minScroll = 1;\n\nvar getValueFromDistance = (distanceToEdge, thresholds, getAutoScrollerOptions = () => defaultAutoScrollerOptions) => {\n  const autoScrollerOptions = getAutoScrollerOptions();\n  if (distanceToEdge > thresholds.startScrollingFrom) {\n    return 0;\n  }\n  if (distanceToEdge <= thresholds.maxScrollValueAt) {\n    return autoScrollerOptions.maxPixelScroll;\n  }\n  if (distanceToEdge === thresholds.startScrollingFrom) {\n    return minScroll;\n  }\n  const percentageFromMaxScrollValueAt = getPercentage({\n    startOfRange: thresholds.maxScrollValueAt,\n    endOfRange: thresholds.startScrollingFrom,\n    current: distanceToEdge\n  });\n  const percentageFromStartScrollingFrom = 1 - percentageFromMaxScrollValueAt;\n  const scroll = autoScrollerOptions.maxPixelScroll * autoScrollerOptions.ease(percentageFromStartScrollingFrom);\n  return Math.ceil(scroll);\n};\n\nvar dampenValueByTime = (proposedScroll, dragStartTime, getAutoScrollerOptions) => {\n  const autoScrollerOptions = getAutoScrollerOptions();\n  const accelerateAt = autoScrollerOptions.durationDampening.accelerateAt;\n  const stopAt = autoScrollerOptions.durationDampening.stopDampeningAt;\n  const startOfRange = dragStartTime;\n  const endOfRange = stopAt;\n  const now = Date.now();\n  const runTime = now - startOfRange;\n  if (runTime >= stopAt) {\n    return proposedScroll;\n  }\n  if (runTime < accelerateAt) {\n    return minScroll;\n  }\n  const betweenAccelerateAtAndStopAtPercentage = getPercentage({\n    startOfRange: accelerateAt,\n    endOfRange,\n    current: runTime\n  });\n  const scroll = proposedScroll * autoScrollerOptions.ease(betweenAccelerateAtAndStopAtPercentage);\n  return Math.ceil(scroll);\n};\n\nvar getValue = ({\n  distanceToEdge,\n  thresholds,\n  dragStartTime,\n  shouldUseTimeDampening,\n  getAutoScrollerOptions\n}) => {\n  const scroll = getValueFromDistance(distanceToEdge, thresholds, getAutoScrollerOptions);\n  if (scroll === 0) {\n    return 0;\n  }\n  if (!shouldUseTimeDampening) {\n    return scroll;\n  }\n  return Math.max(dampenValueByTime(scroll, dragStartTime, getAutoScrollerOptions), minScroll);\n};\n\nvar getScrollOnAxis = ({\n  container,\n  distanceToEdges,\n  dragStartTime,\n  axis,\n  shouldUseTimeDampening,\n  getAutoScrollerOptions\n}) => {\n  const thresholds = getDistanceThresholds(container, axis, getAutoScrollerOptions);\n  const isCloserToEnd = distanceToEdges[axis.end] < distanceToEdges[axis.start];\n  if (isCloserToEnd) {\n    return getValue({\n      distanceToEdge: distanceToEdges[axis.end],\n      thresholds,\n      dragStartTime,\n      shouldUseTimeDampening,\n      getAutoScrollerOptions\n    });\n  }\n  return -1 * getValue({\n    distanceToEdge: distanceToEdges[axis.start],\n    thresholds,\n    dragStartTime,\n    shouldUseTimeDampening,\n    getAutoScrollerOptions\n  });\n};\n\nvar adjustForSizeLimits = ({\n  container,\n  subject,\n  proposedScroll\n}) => {\n  const isTooBigVertically = subject.height > container.height;\n  const isTooBigHorizontally = subject.width > container.width;\n  if (!isTooBigHorizontally && !isTooBigVertically) {\n    return proposedScroll;\n  }\n  if (isTooBigHorizontally && isTooBigVertically) {\n    return null;\n  }\n  return {\n    x: isTooBigHorizontally ? 0 : proposedScroll.x,\n    y: isTooBigVertically ? 0 : proposedScroll.y\n  };\n};\n\nconst clean = apply(value => value === 0 ? 0 : value);\nvar getScroll$1 = ({\n  dragStartTime,\n  container,\n  subject,\n  center,\n  shouldUseTimeDampening,\n  getAutoScrollerOptions\n}) => {\n  const distanceToEdges = {\n    top: center.y - container.top,\n    right: container.right - center.x,\n    bottom: container.bottom - center.y,\n    left: center.x - container.left\n  };\n  const y = getScrollOnAxis({\n    container,\n    distanceToEdges,\n    dragStartTime,\n    axis: vertical,\n    shouldUseTimeDampening,\n    getAutoScrollerOptions\n  });\n  const x = getScrollOnAxis({\n    container,\n    distanceToEdges,\n    dragStartTime,\n    axis: horizontal,\n    shouldUseTimeDampening,\n    getAutoScrollerOptions\n  });\n  const required = clean({\n    x,\n    y\n  });\n  if (isEqual$1(required, origin)) {\n    return null;\n  }\n  const limited = adjustForSizeLimits({\n    container,\n    subject,\n    proposedScroll: required\n  });\n  if (!limited) {\n    return null;\n  }\n  return isEqual$1(limited, origin) ? null : limited;\n};\n\nconst smallestSigned = apply(value => {\n  if (value === 0) {\n    return 0;\n  }\n  return value > 0 ? 1 : -1;\n});\nconst getOverlap = (() => {\n  const getRemainder = (target, max) => {\n    if (target < 0) {\n      return target;\n    }\n    if (target > max) {\n      return target - max;\n    }\n    return 0;\n  };\n  return ({\n    current,\n    max,\n    change\n  }) => {\n    const targetScroll = add(current, change);\n    const overlap = {\n      x: getRemainder(targetScroll.x, max.x),\n      y: getRemainder(targetScroll.y, max.y)\n    };\n    if (isEqual$1(overlap, origin)) {\n      return null;\n    }\n    return overlap;\n  };\n})();\nconst canPartiallyScroll = ({\n  max: rawMax,\n  current,\n  change\n}) => {\n  const max = {\n    x: Math.max(current.x, rawMax.x),\n    y: Math.max(current.y, rawMax.y)\n  };\n  const smallestChange = smallestSigned(change);\n  const overlap = getOverlap({\n    max,\n    current,\n    change: smallestChange\n  });\n  if (!overlap) {\n    return true;\n  }\n  if (smallestChange.x !== 0 && overlap.x === 0) {\n    return true;\n  }\n  if (smallestChange.y !== 0 && overlap.y === 0) {\n    return true;\n  }\n  return false;\n};\nconst canScrollWindow = (viewport, change) => canPartiallyScroll({\n  current: viewport.scroll.current,\n  max: viewport.scroll.max,\n  change\n});\nconst getWindowOverlap = (viewport, change) => {\n  if (!canScrollWindow(viewport, change)) {\n    return null;\n  }\n  const max = viewport.scroll.max;\n  const current = viewport.scroll.current;\n  return getOverlap({\n    current,\n    max,\n    change\n  });\n};\nconst canScrollDroppable = (droppable, change) => {\n  const frame = droppable.frame;\n  if (!frame) {\n    return false;\n  }\n  return canPartiallyScroll({\n    current: frame.scroll.current,\n    max: frame.scroll.max,\n    change\n  });\n};\nconst getDroppableOverlap = (droppable, change) => {\n  const frame = droppable.frame;\n  if (!frame) {\n    return null;\n  }\n  if (!canScrollDroppable(droppable, change)) {\n    return null;\n  }\n  return getOverlap({\n    current: frame.scroll.current,\n    max: frame.scroll.max,\n    change\n  });\n};\n\nvar getWindowScrollChange = ({\n  viewport,\n  subject,\n  center,\n  dragStartTime,\n  shouldUseTimeDampening,\n  getAutoScrollerOptions\n}) => {\n  const scroll = getScroll$1({\n    dragStartTime,\n    container: viewport.frame,\n    subject,\n    center,\n    shouldUseTimeDampening,\n    getAutoScrollerOptions\n  });\n  return scroll && canScrollWindow(viewport, scroll) ? scroll : null;\n};\n\nvar getDroppableScrollChange = ({\n  droppable,\n  subject,\n  center,\n  dragStartTime,\n  shouldUseTimeDampening,\n  getAutoScrollerOptions\n}) => {\n  const frame = droppable.frame;\n  if (!frame) {\n    return null;\n  }\n  const scroll = getScroll$1({\n    dragStartTime,\n    container: frame.pageMarginBox,\n    subject,\n    center,\n    shouldUseTimeDampening,\n    getAutoScrollerOptions\n  });\n  return scroll && canScrollDroppable(droppable, scroll) ? scroll : null;\n};\n\nvar scroll = ({\n  state,\n  dragStartTime,\n  shouldUseTimeDampening,\n  scrollWindow,\n  scrollDroppable,\n  getAutoScrollerOptions\n}) => {\n  const center = state.current.page.borderBoxCenter;\n  const draggable = state.dimensions.draggables[state.critical.draggable.id];\n  const subject = draggable.page.marginBox;\n  if (state.isWindowScrollAllowed) {\n    const viewport = state.viewport;\n    const change = getWindowScrollChange({\n      dragStartTime,\n      viewport,\n      subject,\n      center,\n      shouldUseTimeDampening,\n      getAutoScrollerOptions\n    });\n    if (change) {\n      scrollWindow(change);\n      return;\n    }\n  }\n  const droppable = getBestScrollableDroppable({\n    center,\n    destination: whatIsDraggedOver(state.impact),\n    droppables: state.dimensions.droppables\n  });\n  if (!droppable) {\n    return;\n  }\n  const change = getDroppableScrollChange({\n    dragStartTime,\n    droppable,\n    subject,\n    center,\n    shouldUseTimeDampening,\n    getAutoScrollerOptions\n  });\n  if (change) {\n    scrollDroppable(droppable.descriptor.id, change);\n  }\n};\n\nvar createFluidScroller = ({\n  scrollWindow,\n  scrollDroppable,\n  getAutoScrollerOptions = () => defaultAutoScrollerOptions\n}) => {\n  const scheduleWindowScroll = rafSchd(scrollWindow);\n  const scheduleDroppableScroll = rafSchd(scrollDroppable);\n  let dragging = null;\n  const tryScroll = state => {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fluid scroll if not dragging') : invariant() : void 0;\n    const {\n      shouldUseTimeDampening,\n      dragStartTime\n    } = dragging;\n    scroll({\n      state,\n      scrollWindow: scheduleWindowScroll,\n      scrollDroppable: scheduleDroppableScroll,\n      dragStartTime,\n      shouldUseTimeDampening,\n      getAutoScrollerOptions\n    });\n  };\n  const start$1 = state => {\n    start();\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start auto scrolling when already started') : invariant() : void 0;\n    const dragStartTime = Date.now();\n    let wasScrollNeeded = false;\n    const fakeScrollCallback = () => {\n      wasScrollNeeded = true;\n    };\n    scroll({\n      state,\n      dragStartTime: 0,\n      shouldUseTimeDampening: false,\n      scrollWindow: fakeScrollCallback,\n      scrollDroppable: fakeScrollCallback,\n      getAutoScrollerOptions\n    });\n    dragging = {\n      dragStartTime,\n      shouldUseTimeDampening: wasScrollNeeded\n    };\n    finish();\n    if (wasScrollNeeded) {\n      tryScroll(state);\n    }\n  };\n  const stop = () => {\n    if (!dragging) {\n      return;\n    }\n    scheduleWindowScroll.cancel();\n    scheduleDroppableScroll.cancel();\n    dragging = null;\n  };\n  return {\n    start: start$1,\n    stop,\n    scroll: tryScroll\n  };\n};\n\nvar createJumpScroller = ({\n  move,\n  scrollDroppable,\n  scrollWindow\n}) => {\n  const moveByOffset = (state, offset) => {\n    const client = add(state.current.client.selection, offset);\n    move({\n      client\n    });\n  };\n  const scrollDroppableAsMuchAsItCan = (droppable, change) => {\n    if (!canScrollDroppable(droppable, change)) {\n      return change;\n    }\n    const overlap = getDroppableOverlap(droppable, change);\n    if (!overlap) {\n      scrollDroppable(droppable.descriptor.id, change);\n      return null;\n    }\n    const whatTheDroppableCanScroll = subtract(change, overlap);\n    scrollDroppable(droppable.descriptor.id, whatTheDroppableCanScroll);\n    const remainder = subtract(change, whatTheDroppableCanScroll);\n    return remainder;\n  };\n  const scrollWindowAsMuchAsItCan = (isWindowScrollAllowed, viewport, change) => {\n    if (!isWindowScrollAllowed) {\n      return change;\n    }\n    if (!canScrollWindow(viewport, change)) {\n      return change;\n    }\n    const overlap = getWindowOverlap(viewport, change);\n    if (!overlap) {\n      scrollWindow(change);\n      return null;\n    }\n    const whatTheWindowCanScroll = subtract(change, overlap);\n    scrollWindow(whatTheWindowCanScroll);\n    const remainder = subtract(change, whatTheWindowCanScroll);\n    return remainder;\n  };\n  const jumpScroller = state => {\n    const request = state.scrollJumpRequest;\n    if (!request) {\n      return;\n    }\n    const destination = whatIsDraggedOver(state.impact);\n    !destination ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot perform a jump scroll when there is no destination') : invariant() : void 0;\n    const droppableRemainder = scrollDroppableAsMuchAsItCan(state.dimensions.droppables[destination], request);\n    if (!droppableRemainder) {\n      return;\n    }\n    const viewport = state.viewport;\n    const windowRemainder = scrollWindowAsMuchAsItCan(state.isWindowScrollAllowed, viewport, droppableRemainder);\n    if (!windowRemainder) {\n      return;\n    }\n    moveByOffset(state, windowRemainder);\n  };\n  return jumpScroller;\n};\n\nvar createAutoScroller = ({\n  scrollDroppable,\n  scrollWindow,\n  move,\n  getAutoScrollerOptions\n}) => {\n  const fluidScroller = createFluidScroller({\n    scrollWindow,\n    scrollDroppable,\n    getAutoScrollerOptions\n  });\n  const jumpScroll = createJumpScroller({\n    move,\n    scrollWindow,\n    scrollDroppable\n  });\n  const scroll = state => {\n    const autoScrollerOptions = getAutoScrollerOptions();\n    if (autoScrollerOptions.disabled || state.phase !== 'DRAGGING') {\n      return;\n    }\n    if (state.movementMode === 'FLUID') {\n      fluidScroller.scroll(state);\n      return;\n    }\n    if (!state.scrollJumpRequest) {\n      return;\n    }\n    jumpScroll(state);\n  };\n  const scroller = {\n    scroll,\n    start: fluidScroller.start,\n    stop: fluidScroller.stop\n  };\n  return scroller;\n};\n\nconst prefix = 'data-rfd';\nconst dragHandle = (() => {\n  const base = `${prefix}-drag-handle`;\n  return {\n    base,\n    draggableId: `${base}-draggable-id`,\n    contextId: `${base}-context-id`\n  };\n})();\nconst draggable = (() => {\n  const base = `${prefix}-draggable`;\n  return {\n    base,\n    contextId: `${base}-context-id`,\n    id: `${base}-id`\n  };\n})();\nconst droppable = (() => {\n  const base = `${prefix}-droppable`;\n  return {\n    base,\n    contextId: `${base}-context-id`,\n    id: `${base}-id`\n  };\n})();\nconst scrollContainer = {\n  contextId: `${prefix}-scroll-container-context-id`\n};\n\nconst makeGetSelector = context => attribute => `[${attribute}=\"${context}\"]`;\nconst getStyles = (rules, property) => rules.map(rule => {\n  const value = rule.styles[property];\n  if (!value) {\n    return '';\n  }\n  return `${rule.selector} { ${value} }`;\n}).join(' ');\nconst noPointerEvents = 'pointer-events: none;';\nvar getStyles$1 = contextId => {\n  const getSelector = makeGetSelector(contextId);\n  const dragHandle$1 = (() => {\n    const grabCursor = `\n      cursor: -webkit-grab;\n      cursor: grab;\n    `;\n    return {\n      selector: getSelector(dragHandle.contextId),\n      styles: {\n        always: `\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        `,\n        resting: grabCursor,\n        dragging: noPointerEvents,\n        dropAnimating: grabCursor\n      }\n    };\n  })();\n  const draggable$1 = (() => {\n    const transition = `\n      transition: ${transitions.outOfTheWay};\n    `;\n    return {\n      selector: getSelector(draggable.contextId),\n      styles: {\n        dragging: transition,\n        dropAnimating: transition,\n        userCancel: transition\n      }\n    };\n  })();\n  const droppable$1 = {\n    selector: getSelector(droppable.contextId),\n    styles: {\n      always: `overflow-anchor: none;`\n    }\n  };\n  const body = {\n    selector: 'body',\n    styles: {\n      dragging: `\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      `\n    }\n  };\n  const rules = [draggable$1, dragHandle$1, droppable$1, body];\n  return {\n    always: getStyles(rules, 'always'),\n    resting: getStyles(rules, 'resting'),\n    dragging: getStyles(rules, 'dragging'),\n    dropAnimating: getStyles(rules, 'dropAnimating'),\n    userCancel: getStyles(rules, 'userCancel')\n  };\n};\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nconst getHead = () => {\n  const head = document.querySelector('head');\n  !head ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find the head to append a style to') : invariant() : void 0;\n  return head;\n};\nconst createStyleEl = nonce => {\n  const el = document.createElement('style');\n  if (nonce) {\n    el.setAttribute('nonce', nonce);\n  }\n  el.type = 'text/css';\n  return el;\n};\nfunction useStyleMarshal(contextId, nonce) {\n  const styles = useMemo(() => getStyles$1(contextId), [contextId]);\n  const alwaysRef = useRef(null);\n  const dynamicRef = useRef(null);\n  const setDynamicStyle = useCallback(memoizeOne(proposed => {\n    const el = dynamicRef.current;\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot set dynamic style element if it is not set') : invariant() : void 0;\n    el.textContent = proposed;\n  }), []);\n  const setAlwaysStyle = useCallback(proposed => {\n    const el = alwaysRef.current;\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot set dynamic style element if it is not set') : invariant() : void 0;\n    el.textContent = proposed;\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    !(!alwaysRef.current && !dynamicRef.current) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'style elements already mounted') : invariant() : void 0;\n    const always = createStyleEl(nonce);\n    const dynamic = createStyleEl(nonce);\n    alwaysRef.current = always;\n    dynamicRef.current = dynamic;\n    always.setAttribute(`${prefix}-always`, contextId);\n    dynamic.setAttribute(`${prefix}-dynamic`, contextId);\n    getHead().appendChild(always);\n    getHead().appendChild(dynamic);\n    setAlwaysStyle(styles.always);\n    setDynamicStyle(styles.resting);\n    return () => {\n      const remove = ref => {\n        const current = ref.current;\n        !current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot unmount ref as it is not set') : invariant() : void 0;\n        getHead().removeChild(current);\n        ref.current = null;\n      };\n      remove(alwaysRef);\n      remove(dynamicRef);\n    };\n  }, [nonce, setAlwaysStyle, setDynamicStyle, styles.always, styles.resting, contextId]);\n  const dragging = useCallback(() => setDynamicStyle(styles.dragging), [setDynamicStyle, styles.dragging]);\n  const dropping = useCallback(reason => {\n    if (reason === 'DROP') {\n      setDynamicStyle(styles.dropAnimating);\n      return;\n    }\n    setDynamicStyle(styles.userCancel);\n  }, [setDynamicStyle, styles.dropAnimating, styles.userCancel]);\n  const resting = useCallback(() => {\n    if (!dynamicRef.current) {\n      return;\n    }\n    setDynamicStyle(styles.resting);\n  }, [setDynamicStyle, styles.resting]);\n  const marshal = useMemo(() => ({\n    dragging,\n    dropping,\n    resting\n  }), [dragging, dropping, resting]);\n  return marshal;\n}\n\nfunction querySelectorAll(parentNode, selector) {\n  return Array.from(parentNode.querySelectorAll(selector));\n}\n\nvar getWindowFromEl = el => {\n  if (el && el.ownerDocument && el.ownerDocument.defaultView) {\n    return el.ownerDocument.defaultView;\n  }\n  return window;\n};\n\nfunction isHtmlElement(el) {\n  return el instanceof getWindowFromEl(el).HTMLElement;\n}\n\nfunction findDragHandle(contextId, draggableId) {\n  const selector = `[${dragHandle.contextId}=\"${contextId}\"]`;\n  const possible = querySelectorAll(document, selector);\n  if (!possible.length) {\n    process.env.NODE_ENV !== \"production\" ? warning(`Unable to find any drag handles in the context \"${contextId}\"`) : void 0;\n    return null;\n  }\n  const handle = possible.find(el => {\n    return el.getAttribute(dragHandle.draggableId) === draggableId;\n  });\n  if (!handle) {\n    process.env.NODE_ENV !== \"production\" ? warning(`Unable to find drag handle with id \"${draggableId}\" as no handle with a matching id was found`) : void 0;\n    return null;\n  }\n  if (!isHtmlElement(handle)) {\n    process.env.NODE_ENV !== \"production\" ? warning('drag handle needs to be a HTMLElement') : void 0;\n    return null;\n  }\n  return handle;\n}\n\nfunction useFocusMarshal(contextId) {\n  const entriesRef = useRef({});\n  const recordRef = useRef(null);\n  const restoreFocusFrameRef = useRef(null);\n  const isMountedRef = useRef(false);\n  const register = useCallback(function register(id, focus) {\n    const entry = {\n      id,\n      focus\n    };\n    entriesRef.current[id] = entry;\n    return function unregister() {\n      const entries = entriesRef.current;\n      const current = entries[id];\n      if (current !== entry) {\n        delete entries[id];\n      }\n    };\n  }, []);\n  const tryGiveFocus = useCallback(function tryGiveFocus(tryGiveFocusTo) {\n    const handle = findDragHandle(contextId, tryGiveFocusTo);\n    if (handle && handle !== document.activeElement) {\n      handle.focus();\n    }\n  }, [contextId]);\n  const tryShiftRecord = useCallback(function tryShiftRecord(previous, redirectTo) {\n    if (recordRef.current === previous) {\n      recordRef.current = redirectTo;\n    }\n  }, []);\n  const tryRestoreFocusRecorded = useCallback(function tryRestoreFocusRecorded() {\n    if (restoreFocusFrameRef.current) {\n      return;\n    }\n    if (!isMountedRef.current) {\n      return;\n    }\n    restoreFocusFrameRef.current = requestAnimationFrame(() => {\n      restoreFocusFrameRef.current = null;\n      const record = recordRef.current;\n      if (record) {\n        tryGiveFocus(record);\n      }\n    });\n  }, [tryGiveFocus]);\n  const tryRecordFocus = useCallback(function tryRecordFocus(id) {\n    recordRef.current = null;\n    const focused = document.activeElement;\n    if (!focused) {\n      return;\n    }\n    if (focused.getAttribute(dragHandle.draggableId) !== id) {\n      return;\n    }\n    recordRef.current = id;\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    isMountedRef.current = true;\n    return function clearFrameOnUnmount() {\n      isMountedRef.current = false;\n      const frameId = restoreFocusFrameRef.current;\n      if (frameId) {\n        cancelAnimationFrame(frameId);\n      }\n    };\n  }, []);\n  const marshal = useMemo(() => ({\n    register,\n    tryRecordFocus,\n    tryRestoreFocusRecorded,\n    tryShiftRecord\n  }), [register, tryRecordFocus, tryRestoreFocusRecorded, tryShiftRecord]);\n  return marshal;\n}\n\nfunction createRegistry() {\n  const entries = {\n    draggables: {},\n    droppables: {}\n  };\n  const subscribers = [];\n  function subscribe(cb) {\n    subscribers.push(cb);\n    return function unsubscribe() {\n      const index = subscribers.indexOf(cb);\n      if (index === -1) {\n        return;\n      }\n      subscribers.splice(index, 1);\n    };\n  }\n  function notify(event) {\n    if (subscribers.length) {\n      subscribers.forEach(cb => cb(event));\n    }\n  }\n  function findDraggableById(id) {\n    return entries.draggables[id] || null;\n  }\n  function getDraggableById(id) {\n    const entry = findDraggableById(id);\n    !entry ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot find draggable entry with id [${id}]`) : invariant() : void 0;\n    return entry;\n  }\n  const draggableAPI = {\n    register: entry => {\n      entries.draggables[entry.descriptor.id] = entry;\n      notify({\n        type: 'ADDITION',\n        value: entry\n      });\n    },\n    update: (entry, last) => {\n      const current = entries.draggables[last.descriptor.id];\n      if (!current) {\n        return;\n      }\n      if (current.uniqueId !== entry.uniqueId) {\n        return;\n      }\n      delete entries.draggables[last.descriptor.id];\n      entries.draggables[entry.descriptor.id] = entry;\n    },\n    unregister: entry => {\n      const draggableId = entry.descriptor.id;\n      const current = findDraggableById(draggableId);\n      if (!current) {\n        return;\n      }\n      if (entry.uniqueId !== current.uniqueId) {\n        return;\n      }\n      delete entries.draggables[draggableId];\n      if (entries.droppables[entry.descriptor.droppableId]) {\n        notify({\n          type: 'REMOVAL',\n          value: entry\n        });\n      }\n    },\n    getById: getDraggableById,\n    findById: findDraggableById,\n    exists: id => Boolean(findDraggableById(id)),\n    getAllByType: type => Object.values(entries.draggables).filter(entry => entry.descriptor.type === type)\n  };\n  function findDroppableById(id) {\n    return entries.droppables[id] || null;\n  }\n  function getDroppableById(id) {\n    const entry = findDroppableById(id);\n    !entry ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot find droppable entry with id [${id}]`) : invariant() : void 0;\n    return entry;\n  }\n  const droppableAPI = {\n    register: entry => {\n      entries.droppables[entry.descriptor.id] = entry;\n    },\n    unregister: entry => {\n      const current = findDroppableById(entry.descriptor.id);\n      if (!current) {\n        return;\n      }\n      if (entry.uniqueId !== current.uniqueId) {\n        return;\n      }\n      delete entries.droppables[entry.descriptor.id];\n    },\n    getById: getDroppableById,\n    findById: findDroppableById,\n    exists: id => Boolean(findDroppableById(id)),\n    getAllByType: type => Object.values(entries.droppables).filter(entry => entry.descriptor.type === type)\n  };\n  function clean() {\n    entries.draggables = {};\n    entries.droppables = {};\n    subscribers.length = 0;\n  }\n  return {\n    draggable: draggableAPI,\n    droppable: droppableAPI,\n    subscribe,\n    clean\n  };\n}\n\nfunction useRegistry() {\n  const registry = useMemo(createRegistry, []);\n  useEffect(() => {\n    return function unmount() {\n      registry.clean();\n    };\n  }, [registry]);\n  return registry;\n}\n\nvar StoreContext = React.createContext(null);\n\nvar getBodyElement = () => {\n  const body = document.body;\n  !body ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find document.body') : invariant() : void 0;\n  return body;\n};\n\nconst visuallyHidden = {\n  position: 'absolute',\n  width: '1px',\n  height: '1px',\n  margin: '-1px',\n  border: '0',\n  padding: '0',\n  overflow: 'hidden',\n  clip: 'rect(0 0 0 0)',\n  'clip-path': 'inset(100%)'\n};\n\nconst getId = contextId => `rfd-announcement-${contextId}`;\nfunction useAnnouncer(contextId) {\n  const id = useMemo(() => getId(contextId), [contextId]);\n  const ref = useRef(null);\n  useEffect(function setup() {\n    const el = document.createElement('div');\n    ref.current = el;\n    el.id = id;\n    el.setAttribute('aria-live', 'assertive');\n    el.setAttribute('aria-atomic', 'true');\n    _extends(el.style, visuallyHidden);\n    getBodyElement().appendChild(el);\n    return function cleanup() {\n      setTimeout(function remove() {\n        const body = getBodyElement();\n        if (body.contains(el)) {\n          body.removeChild(el);\n        }\n        if (el === ref.current) {\n          ref.current = null;\n        }\n      });\n    };\n  }, [id]);\n  const announce = useCallback(message => {\n    const el = ref.current;\n    if (el) {\n      el.textContent = message;\n      return;\n    }\n    process.env.NODE_ENV !== \"production\" ? warning(`\n      A screen reader message was trying to be announced but it was unable to do so.\n      This can occur if you unmount your <DragDropContext /> in your onDragEnd.\n      Consider calling provided.announce() before the unmount so that the instruction will\n      not be lost for users relying on a screen reader.\n\n      Message not passed to screen reader:\n\n      \"${message}\"\n    `) : void 0;\n  }, []);\n  return announce;\n}\n\nconst defaults = {\n  separator: '::'\n};\nfunction useUniqueId(prefix, options = defaults) {\n  const id = React.useId();\n  return useMemo(() => `${prefix}${options.separator}${id}`, [options.separator, prefix, id]);\n}\n\nfunction getElementId({\n  contextId,\n  uniqueId\n}) {\n  return `rfd-hidden-text-${contextId}-${uniqueId}`;\n}\nfunction useHiddenTextElement({\n  contextId,\n  text\n}) {\n  const uniqueId = useUniqueId('hidden-text', {\n    separator: '-'\n  });\n  const id = useMemo(() => getElementId({\n    contextId,\n    uniqueId\n  }), [uniqueId, contextId]);\n  useEffect(function mount() {\n    const el = document.createElement('div');\n    el.id = id;\n    el.textContent = text;\n    el.style.display = 'none';\n    getBodyElement().appendChild(el);\n    return function unmount() {\n      const body = getBodyElement();\n      if (body.contains(el)) {\n        body.removeChild(el);\n      }\n    };\n  }, [id, text]);\n  return id;\n}\n\nvar AppContext = React.createContext(null);\n\nvar peerDependencies = {\n\treact: \"^18.0.0\",\n\t\"react-dom\": \"^18.0.0\"\n};\n\nconst semver = /(\\d+)\\.(\\d+)\\.(\\d+)/;\nconst getVersion = value => {\n  const result = semver.exec(value);\n  !(result != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Unable to parse React version ${value}`) : invariant() : void 0;\n  const major = Number(result[1]);\n  const minor = Number(result[2]);\n  const patch = Number(result[3]);\n  return {\n    major,\n    minor,\n    patch,\n    raw: value\n  };\n};\nconst isSatisfied = (expected, actual) => {\n  if (actual.major > expected.major) {\n    return true;\n  }\n  if (actual.major < expected.major) {\n    return false;\n  }\n  if (actual.minor > expected.minor) {\n    return true;\n  }\n  if (actual.minor < expected.minor) {\n    return false;\n  }\n  return actual.patch >= expected.patch;\n};\nvar checkReactVersion = (peerDepValue, actualValue) => {\n  const peerDep = getVersion(peerDepValue);\n  const actual = getVersion(actualValue);\n  if (isSatisfied(peerDep, actual)) {\n    return;\n  }\n  process.env.NODE_ENV !== \"production\" ? warning(`\n    React version: [${actual.raw}]\n    does not satisfy expected peer dependency version: [${peerDep.raw}]\n\n    This can result in run time bugs, and even fatal crashes\n  `) : void 0;\n};\n\nconst suffix = `\n  We expect a html5 doctype: <!doctype html>\n  This is to ensure consistent browser layout and measurement\n\n  More information: https://github.com/hello-pangea/dnd/blob/main/docs/guides/doctype.md\n`;\nvar checkDoctype = doc => {\n  const doctype = doc.doctype;\n  if (!doctype) {\n    process.env.NODE_ENV !== \"production\" ? warning(`\n      No <!doctype html> found.\n\n      ${suffix}\n    `) : void 0;\n    return;\n  }\n  if (doctype.name.toLowerCase() !== 'html') {\n    process.env.NODE_ENV !== \"production\" ? warning(`\n      Unexpected <!doctype> found: (${doctype.name})\n\n      ${suffix}\n    `) : void 0;\n  }\n  if (doctype.publicId !== '') {\n    process.env.NODE_ENV !== \"production\" ? warning(`\n      Unexpected <!doctype> publicId found: (${doctype.publicId})\n      A html5 doctype does not have a publicId\n\n      ${suffix}\n    `) : void 0;\n  }\n};\n\nfunction useDev(useHook) {\n  if (process.env.NODE_ENV !== 'production') {\n    useHook();\n  }\n}\n\nfunction useDevSetupWarning(fn, inputs) {\n  useDev(() => {\n    useEffect(() => {\n      try {\n        fn();\n      } catch (e) {\n        error(`\n          A setup problem was encountered.\n\n          > ${e.message}\n        `);\n      }\n    }, inputs);\n  });\n}\n\nfunction useStartupValidation() {\n  useDevSetupWarning(() => {\n    checkReactVersion(peerDependencies.react, React.version);\n    checkDoctype(document);\n  }, []);\n}\n\nfunction usePrevious(current) {\n  const ref = useRef(current);\n  useEffect(() => {\n    ref.current = current;\n  });\n  return ref;\n}\n\nfunction create() {\n  let lock = null;\n  function isClaimed() {\n    return Boolean(lock);\n  }\n  function isActive(value) {\n    return value === lock;\n  }\n  function claim(abandon) {\n    !!lock ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot claim lock as it is already claimed') : invariant() : void 0;\n    const newLock = {\n      abandon\n    };\n    lock = newLock;\n    return newLock;\n  }\n  function release() {\n    !lock ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot release lock when there is no lock') : invariant() : void 0;\n    lock = null;\n  }\n  function tryAbandon() {\n    if (lock) {\n      lock.abandon();\n      release();\n    }\n  }\n  return {\n    isClaimed,\n    isActive,\n    claim,\n    release,\n    tryAbandon\n  };\n}\n\nfunction isDragging(state) {\n  if (state.phase === 'IDLE' || state.phase === 'DROP_ANIMATING') {\n    return false;\n  }\n  return state.isDragging;\n}\n\nconst tab = 9;\nconst enter = 13;\nconst escape = 27;\nconst space = 32;\nconst pageUp = 33;\nconst pageDown = 34;\nconst end = 35;\nconst home = 36;\nconst arrowLeft = 37;\nconst arrowUp = 38;\nconst arrowRight = 39;\nconst arrowDown = 40;\n\nconst preventedKeys = {\n  [enter]: true,\n  [tab]: true\n};\nvar preventStandardKeyEvents = event => {\n  if (preventedKeys[event.keyCode]) {\n    event.preventDefault();\n  }\n};\n\nconst supportedEventName = (() => {\n  const base = 'visibilitychange';\n  if (typeof document === 'undefined') {\n    return base;\n  }\n  const candidates = [base, `ms${base}`, `webkit${base}`, `moz${base}`, `o${base}`];\n  const supported = candidates.find(eventName => `on${eventName}` in document);\n  return supported || base;\n})();\n\nconst primaryButton = 0;\nconst sloppyClickThreshold = 5;\nfunction isSloppyClickThresholdExceeded(original, current) {\n  return Math.abs(current.x - original.x) >= sloppyClickThreshold || Math.abs(current.y - original.y) >= sloppyClickThreshold;\n}\nconst idle$1 = {\n  type: 'IDLE'\n};\nfunction getCaptureBindings({\n  cancel,\n  completed,\n  getPhase,\n  setPhase\n}) {\n  return [{\n    eventName: 'mousemove',\n    fn: event => {\n      const {\n        button,\n        clientX,\n        clientY\n      } = event;\n      if (button !== primaryButton) {\n        return;\n      }\n      const point = {\n        x: clientX,\n        y: clientY\n      };\n      const phase = getPhase();\n      if (phase.type === 'DRAGGING') {\n        event.preventDefault();\n        phase.actions.move(point);\n        return;\n      }\n      !(phase.type === 'PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot be IDLE') : invariant() : void 0;\n      const pending = phase.point;\n      if (!isSloppyClickThresholdExceeded(pending, point)) {\n        return;\n      }\n      event.preventDefault();\n      const actions = phase.actions.fluidLift(point);\n      setPhase({\n        type: 'DRAGGING',\n        actions\n      });\n    }\n  }, {\n    eventName: 'mouseup',\n    fn: event => {\n      const phase = getPhase();\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n      event.preventDefault();\n      phase.actions.drop({\n        shouldBlockNextClick: true\n      });\n      completed();\n    }\n  }, {\n    eventName: 'mousedown',\n    fn: event => {\n      if (getPhase().type === 'DRAGGING') {\n        event.preventDefault();\n      }\n      cancel();\n    }\n  }, {\n    eventName: 'keydown',\n    fn: event => {\n      const phase = getPhase();\n      if (phase.type === 'PENDING') {\n        cancel();\n        return;\n      }\n      if (event.keyCode === escape) {\n        event.preventDefault();\n        cancel();\n        return;\n      }\n      preventStandardKeyEvents(event);\n    }\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'scroll',\n    options: {\n      passive: true,\n      capture: false\n    },\n    fn: () => {\n      if (getPhase().type === 'PENDING') {\n        cancel();\n      }\n    }\n  }, {\n    eventName: 'webkitmouseforcedown',\n    fn: event => {\n      const phase = getPhase();\n      !(phase.type !== 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Unexpected phase') : invariant() : void 0;\n      if (phase.actions.shouldRespectForcePress()) {\n        cancel();\n        return;\n      }\n      event.preventDefault();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\nfunction useMouseSensor(api) {\n  const phaseRef = useRef(idle$1);\n  const unbindEventsRef = useRef(noop$2);\n  const startCaptureBinding = useMemo(() => ({\n    eventName: 'mousedown',\n    fn: function onMouseDown(event) {\n      if (event.defaultPrevented) {\n        return;\n      }\n      if (event.button !== primaryButton) {\n        return;\n      }\n      if (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey) {\n        return;\n      }\n      const draggableId = api.findClosestDraggableId(event);\n      if (!draggableId) {\n        return;\n      }\n      const actions = api.tryGetLock(draggableId, stop, {\n        sourceEvent: event\n      });\n      if (!actions) {\n        return;\n      }\n      event.preventDefault();\n      const point = {\n        x: event.clientX,\n        y: event.clientY\n      };\n      unbindEventsRef.current();\n      startPendingDrag(actions, point);\n    }\n  }), [api]);\n  const preventForcePressBinding = useMemo(() => ({\n    eventName: 'webkitmouseforcewillbegin',\n    fn: event => {\n      if (event.defaultPrevented) {\n        return;\n      }\n      const id = api.findClosestDraggableId(event);\n      if (!id) {\n        return;\n      }\n      const options = api.findOptionsForDraggable(id);\n      if (!options) {\n        return;\n      }\n      if (options.shouldRespectForcePress) {\n        return;\n      }\n      if (!api.canGetLock(id)) {\n        return;\n      }\n      event.preventDefault();\n    }\n  }), [api]);\n  const listenForCapture = useCallback(function listenForCapture() {\n    const options = {\n      passive: false,\n      capture: true\n    };\n    unbindEventsRef.current = bindEvents(window, [preventForcePressBinding, startCaptureBinding], options);\n  }, [preventForcePressBinding, startCaptureBinding]);\n  const stop = useCallback(() => {\n    const current = phaseRef.current;\n    if (current.type === 'IDLE') {\n      return;\n    }\n    phaseRef.current = idle$1;\n    unbindEventsRef.current();\n    listenForCapture();\n  }, [listenForCapture]);\n  const cancel = useCallback(() => {\n    const phase = phaseRef.current;\n    stop();\n    if (phase.type === 'DRAGGING') {\n      phase.actions.cancel({\n        shouldBlockNextClick: true\n      });\n    }\n    if (phase.type === 'PENDING') {\n      phase.actions.abort();\n    }\n  }, [stop]);\n  const bindCapturingEvents = useCallback(function bindCapturingEvents() {\n    const options = {\n      capture: true,\n      passive: false\n    };\n    const bindings = getCaptureBindings({\n      cancel,\n      completed: stop,\n      getPhase: () => phaseRef.current,\n      setPhase: phase => {\n        phaseRef.current = phase;\n      }\n    });\n    unbindEventsRef.current = bindEvents(window, bindings, options);\n  }, [cancel, stop]);\n  const startPendingDrag = useCallback(function startPendingDrag(actions, point) {\n    !(phaseRef.current.type === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected to move from IDLE to PENDING drag') : invariant() : void 0;\n    phaseRef.current = {\n      type: 'PENDING',\n      point,\n      actions\n    };\n    bindCapturingEvents();\n  }, [bindCapturingEvents]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n    };\n  }, [listenForCapture]);\n}\n\nfunction noop$1() {}\nconst scrollJumpKeys = {\n  [pageDown]: true,\n  [pageUp]: true,\n  [home]: true,\n  [end]: true\n};\nfunction getDraggingBindings(actions, stop) {\n  function cancel() {\n    stop();\n    actions.cancel();\n  }\n  function drop() {\n    stop();\n    actions.drop();\n  }\n  return [{\n    eventName: 'keydown',\n    fn: event => {\n      if (event.keyCode === escape) {\n        event.preventDefault();\n        cancel();\n        return;\n      }\n      if (event.keyCode === space) {\n        event.preventDefault();\n        drop();\n        return;\n      }\n      if (event.keyCode === arrowDown) {\n        event.preventDefault();\n        actions.moveDown();\n        return;\n      }\n      if (event.keyCode === arrowUp) {\n        event.preventDefault();\n        actions.moveUp();\n        return;\n      }\n      if (event.keyCode === arrowRight) {\n        event.preventDefault();\n        actions.moveRight();\n        return;\n      }\n      if (event.keyCode === arrowLeft) {\n        event.preventDefault();\n        actions.moveLeft();\n        return;\n      }\n      if (scrollJumpKeys[event.keyCode]) {\n        event.preventDefault();\n        return;\n      }\n      preventStandardKeyEvents(event);\n    }\n  }, {\n    eventName: 'mousedown',\n    fn: cancel\n  }, {\n    eventName: 'mouseup',\n    fn: cancel\n  }, {\n    eventName: 'click',\n    fn: cancel\n  }, {\n    eventName: 'touchstart',\n    fn: cancel\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'wheel',\n    fn: cancel,\n    options: {\n      passive: true\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\nfunction useKeyboardSensor(api) {\n  const unbindEventsRef = useRef(noop$1);\n  const startCaptureBinding = useMemo(() => ({\n    eventName: 'keydown',\n    fn: function onKeyDown(event) {\n      if (event.defaultPrevented) {\n        return;\n      }\n      if (event.keyCode !== space) {\n        return;\n      }\n      const draggableId = api.findClosestDraggableId(event);\n      if (!draggableId) {\n        return;\n      }\n      const preDrag = api.tryGetLock(draggableId, stop, {\n        sourceEvent: event\n      });\n      if (!preDrag) {\n        return;\n      }\n      event.preventDefault();\n      let isCapturing = true;\n      const actions = preDrag.snapLift();\n      unbindEventsRef.current();\n      function stop() {\n        !isCapturing ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop capturing a keyboard drag when not capturing') : invariant() : void 0;\n        isCapturing = false;\n        unbindEventsRef.current();\n        listenForCapture();\n      }\n      unbindEventsRef.current = bindEvents(window, getDraggingBindings(actions, stop), {\n        capture: true,\n        passive: false\n      });\n    }\n  }), [api]);\n  const listenForCapture = useCallback(function tryStartCapture() {\n    const options = {\n      passive: false,\n      capture: true\n    };\n    unbindEventsRef.current = bindEvents(window, [startCaptureBinding], options);\n  }, [startCaptureBinding]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n    };\n  }, [listenForCapture]);\n}\n\nconst idle = {\n  type: 'IDLE'\n};\nconst timeForLongPress = 120;\nconst forcePressThreshold = 0.15;\nfunction getWindowBindings({\n  cancel,\n  getPhase\n}) {\n  return [{\n    eventName: 'orientationchange',\n    fn: cancel\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'contextmenu',\n    fn: event => {\n      event.preventDefault();\n    }\n  }, {\n    eventName: 'keydown',\n    fn: event => {\n      if (getPhase().type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n      if (event.keyCode === escape) {\n        event.preventDefault();\n      }\n      cancel();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\nfunction getHandleBindings({\n  cancel,\n  completed,\n  getPhase\n}) {\n  return [{\n    eventName: 'touchmove',\n    options: {\n      capture: false\n    },\n    fn: event => {\n      const phase = getPhase();\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n      phase.hasMoved = true;\n      const {\n        clientX,\n        clientY\n      } = event.touches[0];\n      const point = {\n        x: clientX,\n        y: clientY\n      };\n      event.preventDefault();\n      phase.actions.move(point);\n    }\n  }, {\n    eventName: 'touchend',\n    fn: event => {\n      const phase = getPhase();\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n      event.preventDefault();\n      phase.actions.drop({\n        shouldBlockNextClick: true\n      });\n      completed();\n    }\n  }, {\n    eventName: 'touchcancel',\n    fn: event => {\n      if (getPhase().type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n      event.preventDefault();\n      cancel();\n    }\n  }, {\n    eventName: 'touchforcechange',\n    fn: event => {\n      const phase = getPhase();\n      !(phase.type !== 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant() : invariant() : void 0;\n      const touch = event.touches[0];\n      if (!touch) {\n        return;\n      }\n      const isForcePress = touch.force >= forcePressThreshold;\n      if (!isForcePress) {\n        return;\n      }\n      const shouldRespect = phase.actions.shouldRespectForcePress();\n      if (phase.type === 'PENDING') {\n        if (shouldRespect) {\n          cancel();\n        }\n        return;\n      }\n      if (shouldRespect) {\n        if (phase.hasMoved) {\n          event.preventDefault();\n          return;\n        }\n        cancel();\n        return;\n      }\n      event.preventDefault();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\nfunction useTouchSensor(api) {\n  const phaseRef = useRef(idle);\n  const unbindEventsRef = useRef(noop$2);\n  const getPhase = useCallback(function getPhase() {\n    return phaseRef.current;\n  }, []);\n  const setPhase = useCallback(function setPhase(phase) {\n    phaseRef.current = phase;\n  }, []);\n  const startCaptureBinding = useMemo(() => ({\n    eventName: 'touchstart',\n    fn: function onTouchStart(event) {\n      if (event.defaultPrevented) {\n        return;\n      }\n      const draggableId = api.findClosestDraggableId(event);\n      if (!draggableId) {\n        return;\n      }\n      const actions = api.tryGetLock(draggableId, stop, {\n        sourceEvent: event\n      });\n      if (!actions) {\n        return;\n      }\n      const touch = event.touches[0];\n      const {\n        clientX,\n        clientY\n      } = touch;\n      const point = {\n        x: clientX,\n        y: clientY\n      };\n      unbindEventsRef.current();\n      startPendingDrag(actions, point);\n    }\n  }), [api]);\n  const listenForCapture = useCallback(function listenForCapture() {\n    const options = {\n      capture: true,\n      passive: false\n    };\n    unbindEventsRef.current = bindEvents(window, [startCaptureBinding], options);\n  }, [startCaptureBinding]);\n  const stop = useCallback(() => {\n    const current = phaseRef.current;\n    if (current.type === 'IDLE') {\n      return;\n    }\n    if (current.type === 'PENDING') {\n      clearTimeout(current.longPressTimerId);\n    }\n    setPhase(idle);\n    unbindEventsRef.current();\n    listenForCapture();\n  }, [listenForCapture, setPhase]);\n  const cancel = useCallback(() => {\n    const phase = phaseRef.current;\n    stop();\n    if (phase.type === 'DRAGGING') {\n      phase.actions.cancel({\n        shouldBlockNextClick: true\n      });\n    }\n    if (phase.type === 'PENDING') {\n      phase.actions.abort();\n    }\n  }, [stop]);\n  const bindCapturingEvents = useCallback(function bindCapturingEvents() {\n    const options = {\n      capture: true,\n      passive: false\n    };\n    const args = {\n      cancel,\n      completed: stop,\n      getPhase\n    };\n    const unbindTarget = bindEvents(window, getHandleBindings(args), options);\n    const unbindWindow = bindEvents(window, getWindowBindings(args), options);\n    unbindEventsRef.current = function unbindAll() {\n      unbindTarget();\n      unbindWindow();\n    };\n  }, [cancel, getPhase, stop]);\n  const startDragging = useCallback(function startDragging() {\n    const phase = getPhase();\n    !(phase.type === 'PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot start dragging from phase ${phase.type}`) : invariant() : void 0;\n    const actions = phase.actions.fluidLift(phase.point);\n    setPhase({\n      type: 'DRAGGING',\n      actions,\n      hasMoved: false\n    });\n  }, [getPhase, setPhase]);\n  const startPendingDrag = useCallback(function startPendingDrag(actions, point) {\n    !(getPhase().type === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected to move from IDLE to PENDING drag') : invariant() : void 0;\n    const longPressTimerId = setTimeout(startDragging, timeForLongPress);\n    setPhase({\n      type: 'PENDING',\n      point,\n      actions,\n      longPressTimerId\n    });\n    bindCapturingEvents();\n  }, [bindCapturingEvents, getPhase, setPhase, startDragging]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n      const phase = getPhase();\n      if (phase.type === 'PENDING') {\n        clearTimeout(phase.longPressTimerId);\n        setPhase(idle);\n      }\n    };\n  }, [getPhase, listenForCapture, setPhase]);\n  useIsomorphicLayoutEffect(function webkitHack() {\n    const unbind = bindEvents(window, [{\n      eventName: 'touchmove',\n      fn: () => {},\n      options: {\n        capture: false,\n        passive: false\n      }\n    }]);\n    return unbind;\n  }, []);\n}\n\nfunction useValidateSensorHooks(sensorHooks) {\n  useDev(() => {\n    const previousRef = usePrevious(sensorHooks);\n    useDevSetupWarning(() => {\n      !(previousRef.current.length === sensorHooks.length) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot change the amount of sensor hooks after mounting') : invariant(false) : void 0;\n    });\n  });\n}\n\nconst interactiveTagNames = ['input', 'button', 'textarea', 'select', 'option', 'optgroup', 'video', 'audio'];\nfunction isAnInteractiveElement(parent, current) {\n  if (current == null) {\n    return false;\n  }\n  const hasAnInteractiveTag = interactiveTagNames.includes(current.tagName.toLowerCase());\n  if (hasAnInteractiveTag) {\n    return true;\n  }\n  const attribute = current.getAttribute('contenteditable');\n  if (attribute === 'true' || attribute === '') {\n    return true;\n  }\n  if (current === parent) {\n    return false;\n  }\n  return isAnInteractiveElement(parent, current.parentElement);\n}\nfunction isEventInInteractiveElement(draggable, event) {\n  const target = event.target;\n  if (!isHtmlElement(target)) {\n    return false;\n  }\n  return isAnInteractiveElement(draggable, target);\n}\n\nvar getBorderBoxCenterPosition = el => getRect(el.getBoundingClientRect()).center;\n\nfunction isElement(el) {\n  return el instanceof getWindowFromEl(el).Element;\n}\n\nconst supportedMatchesName = (() => {\n  const base = 'matches';\n  if (typeof document === 'undefined') {\n    return base;\n  }\n  const candidates = [base, 'msMatchesSelector', 'webkitMatchesSelector'];\n  const value = candidates.find(name => name in Element.prototype);\n  return value || base;\n})();\nfunction closestPonyfill(el, selector) {\n  if (el == null) {\n    return null;\n  }\n  if (el[supportedMatchesName](selector)) {\n    return el;\n  }\n  return closestPonyfill(el.parentElement, selector);\n}\nfunction closest(el, selector) {\n  if (el.closest) {\n    return el.closest(selector);\n  }\n  return closestPonyfill(el, selector);\n}\n\nfunction getSelector(contextId) {\n  return `[${dragHandle.contextId}=\"${contextId}\"]`;\n}\nfunction findClosestDragHandleFromEvent(contextId, event) {\n  const target = event.target;\n  if (!isElement(target)) {\n    process.env.NODE_ENV !== \"production\" ? warning('event.target must be a Element') : void 0;\n    return null;\n  }\n  const selector = getSelector(contextId);\n  const handle = closest(target, selector);\n  if (!handle) {\n    return null;\n  }\n  if (!isHtmlElement(handle)) {\n    process.env.NODE_ENV !== \"production\" ? warning('drag handle must be a HTMLElement') : void 0;\n    return null;\n  }\n  return handle;\n}\nfunction tryGetClosestDraggableIdFromEvent(contextId, event) {\n  const handle = findClosestDragHandleFromEvent(contextId, event);\n  if (!handle) {\n    return null;\n  }\n  return handle.getAttribute(dragHandle.draggableId);\n}\n\nfunction findDraggable(contextId, draggableId) {\n  const selector = `[${draggable.contextId}=\"${contextId}\"]`;\n  const possible = querySelectorAll(document, selector);\n  const draggable$1 = possible.find(el => {\n    return el.getAttribute(draggable.id) === draggableId;\n  });\n  if (!draggable$1) {\n    return null;\n  }\n  if (!isHtmlElement(draggable$1)) {\n    process.env.NODE_ENV !== \"production\" ? warning('Draggable element is not a HTMLElement') : void 0;\n    return null;\n  }\n  return draggable$1;\n}\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\nfunction isActive({\n  expected,\n  phase,\n  isLockActive,\n  shouldWarn\n}) {\n  if (!isLockActive()) {\n    if (shouldWarn) {\n      process.env.NODE_ENV !== \"production\" ? warning(`\n        Cannot perform action.\n        The sensor no longer has an action lock.\n\n        Tips:\n\n        - Throw away your action handlers when forceStop() is called\n        - Check actions.isActive() if you really need to\n      `) : void 0;\n    }\n    return false;\n  }\n  if (expected !== phase) {\n    if (shouldWarn) {\n      process.env.NODE_ENV !== \"production\" ? warning(`\n        Cannot perform action.\n        The actions you used belong to an outdated phase\n\n        Current phase: ${expected}\n        You called an action from outdated phase: ${phase}\n\n        Tips:\n\n        - Do not use preDragActions actions after calling preDragActions.lift()\n      `) : void 0;\n    }\n    return false;\n  }\n  return true;\n}\nfunction canStart({\n  lockAPI,\n  store,\n  registry,\n  draggableId\n}) {\n  if (lockAPI.isClaimed()) {\n    return false;\n  }\n  const entry = registry.draggable.findById(draggableId);\n  if (!entry) {\n    process.env.NODE_ENV !== \"production\" ? warning(`Unable to find draggable with id: ${draggableId}`) : void 0;\n    return false;\n  }\n  if (!entry.options.isEnabled) {\n    return false;\n  }\n  if (!canStartDrag(store.getState(), draggableId)) {\n    return false;\n  }\n  return true;\n}\nfunction tryStart({\n  lockAPI,\n  contextId,\n  store,\n  registry,\n  draggableId,\n  forceSensorStop,\n  sourceEvent\n}) {\n  const shouldStart = canStart({\n    lockAPI,\n    store,\n    registry,\n    draggableId\n  });\n  if (!shouldStart) {\n    return null;\n  }\n  const entry = registry.draggable.getById(draggableId);\n  const el = findDraggable(contextId, entry.descriptor.id);\n  if (!el) {\n    process.env.NODE_ENV !== \"production\" ? warning(`Unable to find draggable element with id: ${draggableId}`) : void 0;\n    return null;\n  }\n  if (sourceEvent && !entry.options.canDragInteractiveElements && isEventInInteractiveElement(el, sourceEvent)) {\n    return null;\n  }\n  const lock = lockAPI.claim(forceSensorStop || noop$2);\n  let phase = 'PRE_DRAG';\n  function getShouldRespectForcePress() {\n    return entry.options.shouldRespectForcePress;\n  }\n  function isLockActive() {\n    return lockAPI.isActive(lock);\n  }\n  function tryDispatch(expected, getAction) {\n    if (isActive({\n      expected,\n      phase,\n      isLockActive,\n      shouldWarn: true\n    })) {\n      store.dispatch(getAction());\n    }\n  }\n  const tryDispatchWhenDragging = tryDispatch.bind(null, 'DRAGGING');\n  function lift(args) {\n    function completed() {\n      lockAPI.release();\n      phase = 'COMPLETED';\n    }\n    if (phase !== 'PRE_DRAG') {\n      completed();\n      process.env.NODE_ENV !== \"production\" ? invariant(false, `Cannot lift in phase ${phase}`) : invariant() ;\n    }\n    store.dispatch(lift$1(args.liftActionArgs));\n    phase = 'DRAGGING';\n    function finish(reason, options = {\n      shouldBlockNextClick: false\n    }) {\n      args.cleanup();\n      if (options.shouldBlockNextClick) {\n        const unbind = bindEvents(window, [{\n          eventName: 'click',\n          fn: preventDefault,\n          options: {\n            once: true,\n            passive: false,\n            capture: true\n          }\n        }]);\n        setTimeout(unbind);\n      }\n      completed();\n      store.dispatch(drop({\n        reason\n      }));\n    }\n    return {\n      isActive: () => isActive({\n        expected: 'DRAGGING',\n        phase,\n        isLockActive,\n        shouldWarn: false\n      }),\n      shouldRespectForcePress: getShouldRespectForcePress,\n      drop: options => finish('DROP', options),\n      cancel: options => finish('CANCEL', options),\n      ...args.actions\n    };\n  }\n  function fluidLift(clientSelection) {\n    const move$1 = rafSchd(client => {\n      tryDispatchWhenDragging(() => move({\n        client\n      }));\n    });\n    const api = lift({\n      liftActionArgs: {\n        id: draggableId,\n        clientSelection,\n        movementMode: 'FLUID'\n      },\n      cleanup: () => move$1.cancel(),\n      actions: {\n        move: move$1\n      }\n    });\n    return {\n      ...api,\n      move: move$1\n    };\n  }\n  function snapLift() {\n    const actions = {\n      moveUp: () => tryDispatchWhenDragging(moveUp),\n      moveRight: () => tryDispatchWhenDragging(moveRight),\n      moveDown: () => tryDispatchWhenDragging(moveDown),\n      moveLeft: () => tryDispatchWhenDragging(moveLeft)\n    };\n    return lift({\n      liftActionArgs: {\n        id: draggableId,\n        clientSelection: getBorderBoxCenterPosition(el),\n        movementMode: 'SNAP'\n      },\n      cleanup: noop$2,\n      actions\n    });\n  }\n  function abortPreDrag() {\n    const shouldRelease = isActive({\n      expected: 'PRE_DRAG',\n      phase,\n      isLockActive,\n      shouldWarn: true\n    });\n    if (shouldRelease) {\n      lockAPI.release();\n    }\n  }\n  const preDrag = {\n    isActive: () => isActive({\n      expected: 'PRE_DRAG',\n      phase,\n      isLockActive,\n      shouldWarn: false\n    }),\n    shouldRespectForcePress: getShouldRespectForcePress,\n    fluidLift,\n    snapLift,\n    abort: abortPreDrag\n  };\n  return preDrag;\n}\nconst defaultSensors = [useMouseSensor, useKeyboardSensor, useTouchSensor];\nfunction useSensorMarshal({\n  contextId,\n  store,\n  registry,\n  customSensors,\n  enableDefaultSensors\n}) {\n  const useSensors = [...(enableDefaultSensors ? defaultSensors : []), ...(customSensors || [])];\n  const lockAPI = useState(() => create())[0];\n  const tryAbandonLock = useCallback(function tryAbandonLock(previous, current) {\n    if (isDragging(previous) && !isDragging(current)) {\n      lockAPI.tryAbandon();\n    }\n  }, [lockAPI]);\n  useIsomorphicLayoutEffect(function listenToStore() {\n    let previous = store.getState();\n    const unsubscribe = store.subscribe(() => {\n      const current = store.getState();\n      tryAbandonLock(previous, current);\n      previous = current;\n    });\n    return unsubscribe;\n  }, [lockAPI, store, tryAbandonLock]);\n  useIsomorphicLayoutEffect(() => {\n    return lockAPI.tryAbandon;\n  }, [lockAPI.tryAbandon]);\n  const canGetLock = useCallback(draggableId => {\n    return canStart({\n      lockAPI,\n      registry,\n      store,\n      draggableId\n    });\n  }, [lockAPI, registry, store]);\n  const tryGetLock = useCallback((draggableId, forceStop, options) => tryStart({\n    lockAPI,\n    registry,\n    contextId,\n    store,\n    draggableId,\n    forceSensorStop: forceStop || null,\n    sourceEvent: options && options.sourceEvent ? options.sourceEvent : null\n  }), [contextId, lockAPI, registry, store]);\n  const findClosestDraggableId = useCallback(event => tryGetClosestDraggableIdFromEvent(contextId, event), [contextId]);\n  const findOptionsForDraggable = useCallback(id => {\n    const entry = registry.draggable.findById(id);\n    return entry ? entry.options : null;\n  }, [registry.draggable]);\n  const tryReleaseLock = useCallback(function tryReleaseLock() {\n    if (!lockAPI.isClaimed()) {\n      return;\n    }\n    lockAPI.tryAbandon();\n    if (store.getState().phase !== 'IDLE') {\n      store.dispatch(flush());\n    }\n  }, [lockAPI, store]);\n  const isLockClaimed = useCallback(() => lockAPI.isClaimed(), [lockAPI]);\n  const api = useMemo(() => ({\n    canGetLock,\n    tryGetLock,\n    findClosestDraggableId,\n    findOptionsForDraggable,\n    tryReleaseLock,\n    isLockClaimed\n  }), [canGetLock, tryGetLock, findClosestDraggableId, findOptionsForDraggable, tryReleaseLock, isLockClaimed]);\n  useValidateSensorHooks(useSensors);\n  for (let i = 0; i < useSensors.length; i++) {\n    useSensors[i](api);\n  }\n}\n\nconst createResponders = props => ({\n  onBeforeCapture: t => {\n    const onBeforeCapureCallback = () => {\n      if (props.onBeforeCapture) {\n        props.onBeforeCapture(t);\n      }\n    };\n    flushSync(onBeforeCapureCallback);\n  },\n  onBeforeDragStart: props.onBeforeDragStart,\n  onDragStart: props.onDragStart,\n  onDragEnd: props.onDragEnd,\n  onDragUpdate: props.onDragUpdate\n});\nconst createAutoScrollerOptions = props => ({\n  ...defaultAutoScrollerOptions,\n  ...props.autoScrollerOptions,\n  durationDampening: {\n    ...defaultAutoScrollerOptions.durationDampening,\n    ...props.autoScrollerOptions\n  }\n});\nfunction getStore(lazyRef) {\n  !lazyRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find store from lazy ref') : invariant() : void 0;\n  return lazyRef.current;\n}\nfunction App(props) {\n  const {\n    contextId,\n    setCallbacks,\n    sensors,\n    nonce,\n    dragHandleUsageInstructions\n  } = props;\n  const lazyStoreRef = useRef(null);\n  useStartupValidation();\n  const lastPropsRef = usePrevious(props);\n  const getResponders = useCallback(() => {\n    return createResponders(lastPropsRef.current);\n  }, [lastPropsRef]);\n  const getAutoScrollerOptions = useCallback(() => {\n    return createAutoScrollerOptions(lastPropsRef.current);\n  }, [lastPropsRef]);\n  const announce = useAnnouncer(contextId);\n  const dragHandleUsageInstructionsId = useHiddenTextElement({\n    contextId,\n    text: dragHandleUsageInstructions\n  });\n  const styleMarshal = useStyleMarshal(contextId, nonce);\n  const lazyDispatch = useCallback(action => {\n    getStore(lazyStoreRef).dispatch(action);\n  }, []);\n  const marshalCallbacks = useMemo(() => bindActionCreators({\n    publishWhileDragging,\n    updateDroppableScroll,\n    updateDroppableIsEnabled,\n    updateDroppableIsCombineEnabled,\n    collectionStarting\n  }, lazyDispatch), [lazyDispatch]);\n  const registry = useRegistry();\n  const dimensionMarshal = useMemo(() => {\n    return createDimensionMarshal(registry, marshalCallbacks);\n  }, [registry, marshalCallbacks]);\n  const autoScroller = useMemo(() => createAutoScroller({\n    scrollWindow,\n    scrollDroppable: dimensionMarshal.scrollDroppable,\n    getAutoScrollerOptions,\n    ...bindActionCreators({\n      move\n    }, lazyDispatch)\n  }), [dimensionMarshal.scrollDroppable, lazyDispatch, getAutoScrollerOptions]);\n  const focusMarshal = useFocusMarshal(contextId);\n  const store = useMemo(() => createStore({\n    announce,\n    autoScroller,\n    dimensionMarshal,\n    focusMarshal,\n    getResponders,\n    styleMarshal\n  }), [announce, autoScroller, dimensionMarshal, focusMarshal, getResponders, styleMarshal]);\n  if (process.env.NODE_ENV !== 'production') {\n    if (lazyStoreRef.current && lazyStoreRef.current !== store) {\n      process.env.NODE_ENV !== \"production\" ? warning('unexpected store change') : void 0;\n    }\n  }\n  lazyStoreRef.current = store;\n  const tryResetStore = useCallback(() => {\n    const current = getStore(lazyStoreRef);\n    const state = current.getState();\n    if (state.phase !== 'IDLE') {\n      current.dispatch(flush());\n    }\n  }, []);\n  const isDragging = useCallback(() => {\n    const state = getStore(lazyStoreRef).getState();\n    if (state.phase === 'DROP_ANIMATING') {\n      return true;\n    }\n    if (state.phase === 'IDLE') {\n      return false;\n    }\n    return state.isDragging;\n  }, []);\n  const appCallbacks = useMemo(() => ({\n    isDragging,\n    tryAbort: tryResetStore\n  }), [isDragging, tryResetStore]);\n  setCallbacks(appCallbacks);\n  const getCanLift = useCallback(id => canStartDrag(getStore(lazyStoreRef).getState(), id), []);\n  const getIsMovementAllowed = useCallback(() => isMovementAllowed(getStore(lazyStoreRef).getState()), []);\n  const appContext = useMemo(() => ({\n    marshal: dimensionMarshal,\n    focus: focusMarshal,\n    contextId,\n    canLift: getCanLift,\n    isMovementAllowed: getIsMovementAllowed,\n    dragHandleUsageInstructionsId,\n    registry\n  }), [contextId, dimensionMarshal, dragHandleUsageInstructionsId, focusMarshal, getCanLift, getIsMovementAllowed, registry]);\n  useSensorMarshal({\n    contextId,\n    store,\n    registry,\n    customSensors: sensors || null,\n    enableDefaultSensors: props.enableDefaultSensors !== false\n  });\n  useEffect(() => {\n    return tryResetStore;\n  }, [tryResetStore]);\n  return React.createElement(AppContext.Provider, {\n    value: appContext\n  }, React.createElement(Provider, {\n    context: StoreContext,\n    store: store\n  }, props.children));\n}\n\nfunction useUniqueContextId() {\n  return React.useId();\n}\n\nfunction DragDropContext(props) {\n  const contextId = useUniqueContextId();\n  const dragHandleUsageInstructions = props.dragHandleUsageInstructions || preset.dragHandleUsageInstructions;\n  return React.createElement(ErrorBoundary, null, setCallbacks => React.createElement(App, {\n    nonce: props.nonce,\n    contextId: contextId,\n    setCallbacks: setCallbacks,\n    dragHandleUsageInstructions: dragHandleUsageInstructions,\n    enableDefaultSensors: props.enableDefaultSensors,\n    sensors: props.sensors,\n    onBeforeCapture: props.onBeforeCapture,\n    onBeforeDragStart: props.onBeforeDragStart,\n    onDragStart: props.onDragStart,\n    onDragUpdate: props.onDragUpdate,\n    onDragEnd: props.onDragEnd,\n    autoScrollerOptions: props.autoScrollerOptions\n  }, props.children));\n}\n\nconst zIndexOptions = {\n  dragging: 5000,\n  dropAnimating: 4500\n};\nconst getDraggingTransition = (shouldAnimateDragMovement, dropping) => {\n  if (dropping) {\n    return transitions.drop(dropping.duration);\n  }\n  if (shouldAnimateDragMovement) {\n    return transitions.snap;\n  }\n  return transitions.fluid;\n};\nconst getDraggingOpacity = (isCombining, isDropAnimating) => {\n  if (!isCombining) {\n    return undefined;\n  }\n  return isDropAnimating ? combine.opacity.drop : combine.opacity.combining;\n};\nconst getShouldDraggingAnimate = dragging => {\n  if (dragging.forceShouldAnimate != null) {\n    return dragging.forceShouldAnimate;\n  }\n  return dragging.mode === 'SNAP';\n};\nfunction getDraggingStyle(dragging) {\n  const dimension = dragging.dimension;\n  const box = dimension.client;\n  const {\n    offset,\n    combineWith,\n    dropping\n  } = dragging;\n  const isCombining = Boolean(combineWith);\n  const shouldAnimate = getShouldDraggingAnimate(dragging);\n  const isDropAnimating = Boolean(dropping);\n  const transform = isDropAnimating ? transforms.drop(offset, isCombining) : transforms.moveTo(offset);\n  const style = {\n    position: 'fixed',\n    top: box.marginBox.top,\n    left: box.marginBox.left,\n    boxSizing: 'border-box',\n    width: box.borderBox.width,\n    height: box.borderBox.height,\n    transition: getDraggingTransition(shouldAnimate, dropping),\n    transform,\n    opacity: getDraggingOpacity(isCombining, isDropAnimating),\n    zIndex: isDropAnimating ? zIndexOptions.dropAnimating : zIndexOptions.dragging,\n    pointerEvents: 'none'\n  };\n  return style;\n}\nfunction getSecondaryStyle(secondary) {\n  return {\n    transform: transforms.moveTo(secondary.offset),\n    transition: secondary.shouldAnimateDisplacement ? undefined : 'none'\n  };\n}\nfunction getStyle$1(mapped) {\n  return mapped.type === 'DRAGGING' ? getDraggingStyle(mapped) : getSecondaryStyle(mapped);\n}\n\nfunction getDimension$1(descriptor, el, windowScroll = origin) {\n  const computedStyles = window.getComputedStyle(el);\n  const borderBox = el.getBoundingClientRect();\n  const client = calculateBox(borderBox, computedStyles);\n  const page = withScroll(client, windowScroll);\n  const placeholder = {\n    client,\n    tagName: el.tagName.toLowerCase(),\n    display: computedStyles.display\n  };\n  const displaceBy = {\n    x: client.marginBox.width,\n    y: client.marginBox.height\n  };\n  const dimension = {\n    descriptor,\n    placeholder,\n    displaceBy,\n    client,\n    page\n  };\n  return dimension;\n}\n\nfunction useDraggablePublisher(args) {\n  const uniqueId = useUniqueId('draggable');\n  const {\n    descriptor,\n    registry,\n    getDraggableRef,\n    canDragInteractiveElements,\n    shouldRespectForcePress,\n    isEnabled\n  } = args;\n  const options = useMemo(() => ({\n    canDragInteractiveElements,\n    shouldRespectForcePress,\n    isEnabled\n  }), [canDragInteractiveElements, isEnabled, shouldRespectForcePress]);\n  const getDimension = useCallback(windowScroll => {\n    const el = getDraggableRef();\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot get dimension when no ref is set') : invariant() : void 0;\n    return getDimension$1(descriptor, el, windowScroll);\n  }, [descriptor, getDraggableRef]);\n  const entry = useMemo(() => ({\n    uniqueId,\n    descriptor,\n    options,\n    getDimension\n  }), [descriptor, getDimension, options, uniqueId]);\n  const publishedRef = useRef(entry);\n  const isFirstPublishRef = useRef(true);\n  useIsomorphicLayoutEffect(() => {\n    registry.draggable.register(publishedRef.current);\n    return () => registry.draggable.unregister(publishedRef.current);\n  }, [registry.draggable]);\n  useIsomorphicLayoutEffect(() => {\n    if (isFirstPublishRef.current) {\n      isFirstPublishRef.current = false;\n      return;\n    }\n    const last = publishedRef.current;\n    publishedRef.current = entry;\n    registry.draggable.update(entry, last);\n  }, [entry, registry.draggable]);\n}\n\nvar DroppableContext = React.createContext(null);\n\nfunction checkIsValidInnerRef(el) {\n  !(el && isHtmlElement(el)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `\n    provided.innerRef has not been provided with a HTMLElement.\n\n    You can find a guide on using the innerRef callback functions at:\n    https://github.com/hello-pangea/dnd/blob/main/docs/guides/using-inner-ref.md\n  `) : invariant() : void 0;\n}\n\nfunction useValidation$1(props, contextId, getRef) {\n  useDevSetupWarning(() => {\n    function prefix(id) {\n      return `Draggable[id: ${id}]: `;\n    }\n    const id = props.draggableId;\n    !id ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Draggable requires a draggableId') : invariant(false) : void 0;\n    !(typeof id === 'string') ? process.env.NODE_ENV !== \"production\" ? invariant(false, `Draggable requires a [string] draggableId.\n      Provided: [type: ${typeof id}] (value: ${id})`) : invariant(false) : void 0;\n    !Number.isInteger(props.index) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `${prefix(id)} requires an integer index prop`) : invariant(false) : void 0;\n    if (props.mapped.type === 'DRAGGING') {\n      return;\n    }\n    checkIsValidInnerRef(getRef());\n    if (props.isEnabled) {\n      !findDragHandle(contextId, id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, `${prefix(id)} Unable to find drag handle`) : invariant(false) : void 0;\n    }\n  });\n}\nfunction useClonePropValidation(isClone) {\n  useDev(() => {\n    const initialRef = useRef(isClone);\n    useDevSetupWarning(() => {\n      !(isClone === initialRef.current) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Draggable isClone prop value changed during component life') : invariant(false) : void 0;\n    }, [isClone]);\n  });\n}\n\nfunction useRequiredContext(Context) {\n  const result = useContext(Context);\n  !result ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find required context') : invariant() : void 0;\n  return result;\n}\n\nfunction preventHtml5Dnd(event) {\n  event.preventDefault();\n}\nconst Draggable = props => {\n  const ref = useRef(null);\n  const setRef = useCallback((el = null) => {\n    ref.current = el;\n  }, []);\n  const getRef = useCallback(() => ref.current, []);\n  const {\n    contextId,\n    dragHandleUsageInstructionsId,\n    registry\n  } = useRequiredContext(AppContext);\n  const {\n    type,\n    droppableId\n  } = useRequiredContext(DroppableContext);\n  const descriptor = useMemo(() => ({\n    id: props.draggableId,\n    index: props.index,\n    type,\n    droppableId\n  }), [props.draggableId, props.index, type, droppableId]);\n  const {\n    children,\n    draggableId,\n    isEnabled,\n    shouldRespectForcePress,\n    canDragInteractiveElements,\n    isClone,\n    mapped,\n    dropAnimationFinished: dropAnimationFinishedAction\n  } = props;\n  useValidation$1(props, contextId, getRef);\n  useClonePropValidation(isClone);\n  if (!isClone) {\n    const forPublisher = useMemo(() => ({\n      descriptor,\n      registry,\n      getDraggableRef: getRef,\n      canDragInteractiveElements,\n      shouldRespectForcePress,\n      isEnabled\n    }), [descriptor, registry, getRef, canDragInteractiveElements, shouldRespectForcePress, isEnabled]);\n    useDraggablePublisher(forPublisher);\n  }\n  const dragHandleProps = useMemo(() => isEnabled ? {\n    tabIndex: 0,\n    role: 'button',\n    'aria-describedby': dragHandleUsageInstructionsId,\n    'data-rfd-drag-handle-draggable-id': draggableId,\n    'data-rfd-drag-handle-context-id': contextId,\n    draggable: false,\n    onDragStart: preventHtml5Dnd\n  } : null, [contextId, dragHandleUsageInstructionsId, draggableId, isEnabled]);\n  const onMoveEnd = useCallback(event => {\n    if (mapped.type !== 'DRAGGING') {\n      return;\n    }\n    if (!mapped.dropping) {\n      return;\n    }\n    if (event.propertyName !== 'transform') {\n      return;\n    }\n    flushSync(dropAnimationFinishedAction);\n  }, [dropAnimationFinishedAction, mapped]);\n  const provided = useMemo(() => {\n    const style = getStyle$1(mapped);\n    const onTransitionEnd = mapped.type === 'DRAGGING' && mapped.dropping ? onMoveEnd : undefined;\n    const result = {\n      innerRef: setRef,\n      draggableProps: {\n        'data-rfd-draggable-context-id': contextId,\n        'data-rfd-draggable-id': draggableId,\n        style,\n        onTransitionEnd\n      },\n      dragHandleProps\n    };\n    return result;\n  }, [contextId, dragHandleProps, draggableId, mapped, onMoveEnd, setRef]);\n  const rubric = useMemo(() => ({\n    draggableId: descriptor.id,\n    type: descriptor.type,\n    source: {\n      index: descriptor.index,\n      droppableId: descriptor.droppableId\n    }\n  }), [descriptor.droppableId, descriptor.id, descriptor.index, descriptor.type]);\n  return React.createElement(React.Fragment, null, children(provided, mapped.snapshot, rubric));\n};\n\nvar isStrictEqual = (a, b) => a === b;\n\nvar whatIsDraggedOverFromResult = result => {\n  const {\n    combine,\n    destination\n  } = result;\n  if (destination) {\n    return destination.droppableId;\n  }\n  if (combine) {\n    return combine.droppableId;\n  }\n  return null;\n};\n\nconst getCombineWithFromResult = result => {\n  return result.combine ? result.combine.draggableId : null;\n};\nconst getCombineWithFromImpact = impact => {\n  return impact.at && impact.at.type === 'COMBINE' ? impact.at.combine.draggableId : null;\n};\nfunction getDraggableSelector() {\n  const memoizedOffset = memoizeOne((x, y) => ({\n    x,\n    y\n  }));\n  const getMemoizedSnapshot = memoizeOne((mode, isClone, draggingOver = null, combineWith = null, dropping = null) => ({\n    isDragging: true,\n    isClone,\n    isDropAnimating: Boolean(dropping),\n    dropAnimation: dropping,\n    mode,\n    draggingOver,\n    combineWith,\n    combineTargetFor: null\n  }));\n  const getMemoizedProps = memoizeOne((offset, mode, dimension, isClone, draggingOver = null, combineWith = null, forceShouldAnimate = null) => ({\n    mapped: {\n      type: 'DRAGGING',\n      dropping: null,\n      draggingOver,\n      combineWith,\n      mode,\n      offset,\n      dimension,\n      forceShouldAnimate,\n      snapshot: getMemoizedSnapshot(mode, isClone, draggingOver, combineWith, null)\n    }\n  }));\n  const selector = (state, ownProps) => {\n    if (isDragging(state)) {\n      if (state.critical.draggable.id !== ownProps.draggableId) {\n        return null;\n      }\n      const offset = state.current.client.offset;\n      const dimension = state.dimensions.draggables[ownProps.draggableId];\n      const draggingOver = whatIsDraggedOver(state.impact);\n      const combineWith = getCombineWithFromImpact(state.impact);\n      const forceShouldAnimate = state.forceShouldAnimate;\n      return getMemoizedProps(memoizedOffset(offset.x, offset.y), state.movementMode, dimension, ownProps.isClone, draggingOver, combineWith, forceShouldAnimate);\n    }\n    if (state.phase === 'DROP_ANIMATING') {\n      const completed = state.completed;\n      if (completed.result.draggableId !== ownProps.draggableId) {\n        return null;\n      }\n      const isClone = ownProps.isClone;\n      const dimension = state.dimensions.draggables[ownProps.draggableId];\n      const result = completed.result;\n      const mode = result.mode;\n      const draggingOver = whatIsDraggedOverFromResult(result);\n      const combineWith = getCombineWithFromResult(result);\n      const duration = state.dropDuration;\n      const dropping = {\n        duration,\n        curve: curves.drop,\n        moveTo: state.newHomeClientOffset,\n        opacity: combineWith ? combine.opacity.drop : null,\n        scale: combineWith ? combine.scale.drop : null\n      };\n      return {\n        mapped: {\n          type: 'DRAGGING',\n          offset: state.newHomeClientOffset,\n          dimension,\n          dropping,\n          draggingOver,\n          combineWith,\n          mode,\n          forceShouldAnimate: null,\n          snapshot: getMemoizedSnapshot(mode, isClone, draggingOver, combineWith, dropping)\n        }\n      };\n    }\n    return null;\n  };\n  return selector;\n}\nfunction getSecondarySnapshot(combineTargetFor = null) {\n  return {\n    isDragging: false,\n    isDropAnimating: false,\n    isClone: false,\n    dropAnimation: null,\n    mode: null,\n    draggingOver: null,\n    combineTargetFor,\n    combineWith: null\n  };\n}\nconst atRest = {\n  mapped: {\n    type: 'SECONDARY',\n    offset: origin,\n    combineTargetFor: null,\n    shouldAnimateDisplacement: true,\n    snapshot: getSecondarySnapshot(null)\n  }\n};\nfunction getSecondarySelector() {\n  const memoizedOffset = memoizeOne((x, y) => ({\n    x,\n    y\n  }));\n  const getMemoizedSnapshot = memoizeOne(getSecondarySnapshot);\n  const getMemoizedProps = memoizeOne((offset, combineTargetFor = null, shouldAnimateDisplacement) => ({\n    mapped: {\n      type: 'SECONDARY',\n      offset,\n      combineTargetFor,\n      shouldAnimateDisplacement,\n      snapshot: getMemoizedSnapshot(combineTargetFor)\n    }\n  }));\n  const getFallback = combineTargetFor => {\n    return combineTargetFor ? getMemoizedProps(origin, combineTargetFor, true) : null;\n  };\n  const getProps = (ownId, draggingId, impact, afterCritical) => {\n    const visualDisplacement = impact.displaced.visible[ownId];\n    const isAfterCriticalInVirtualList = Boolean(afterCritical.inVirtualList && afterCritical.effected[ownId]);\n    const combine = tryGetCombine(impact);\n    const combineTargetFor = combine && combine.draggableId === ownId ? draggingId : null;\n    if (!visualDisplacement) {\n      if (!isAfterCriticalInVirtualList) {\n        return getFallback(combineTargetFor);\n      }\n      if (impact.displaced.invisible[ownId]) {\n        return null;\n      }\n      const change = negate(afterCritical.displacedBy.point);\n      const offset = memoizedOffset(change.x, change.y);\n      return getMemoizedProps(offset, combineTargetFor, true);\n    }\n    if (isAfterCriticalInVirtualList) {\n      return getFallback(combineTargetFor);\n    }\n    const displaceBy = impact.displacedBy.point;\n    const offset = memoizedOffset(displaceBy.x, displaceBy.y);\n    return getMemoizedProps(offset, combineTargetFor, visualDisplacement.shouldAnimate);\n  };\n  const selector = (state, ownProps) => {\n    if (isDragging(state)) {\n      if (state.critical.draggable.id === ownProps.draggableId) {\n        return null;\n      }\n      return getProps(ownProps.draggableId, state.critical.draggable.id, state.impact, state.afterCritical);\n    }\n    if (state.phase === 'DROP_ANIMATING') {\n      const completed = state.completed;\n      if (completed.result.draggableId === ownProps.draggableId) {\n        return null;\n      }\n      return getProps(ownProps.draggableId, completed.result.draggableId, completed.impact, completed.afterCritical);\n    }\n    return null;\n  };\n  return selector;\n}\nconst makeMapStateToProps$1 = () => {\n  const draggingSelector = getDraggableSelector();\n  const secondarySelector = getSecondarySelector();\n  const selector = (state, ownProps) => draggingSelector(state, ownProps) || secondarySelector(state, ownProps) || atRest;\n  return selector;\n};\nconst mapDispatchToProps$1 = {\n  dropAnimationFinished: dropAnimationFinished\n};\nconst ConnectedDraggable = connect(makeMapStateToProps$1, mapDispatchToProps$1, null, {\n  context: StoreContext,\n  areStatePropsEqual: isStrictEqual\n})(Draggable);\n\nfunction PrivateDraggable(props) {\n  const droppableContext = useRequiredContext(DroppableContext);\n  const isUsingCloneFor = droppableContext.isUsingCloneFor;\n  if (isUsingCloneFor === props.draggableId && !props.isClone) {\n    return null;\n  }\n  return React.createElement(ConnectedDraggable, props);\n}\nfunction PublicDraggable(props) {\n  const isEnabled = typeof props.isDragDisabled === 'boolean' ? !props.isDragDisabled : true;\n  const canDragInteractiveElements = Boolean(props.disableInteractiveElementBlocking);\n  const shouldRespectForcePress = Boolean(props.shouldRespectForcePress);\n  return React.createElement(PrivateDraggable, _extends({}, props, {\n    isClone: false,\n    isEnabled: isEnabled,\n    canDragInteractiveElements: canDragInteractiveElements,\n    shouldRespectForcePress: shouldRespectForcePress\n  }));\n}\n\nconst isEqual = base => value => base === value;\nconst isScroll = isEqual('scroll');\nconst isAuto = isEqual('auto');\nconst isVisible = isEqual('visible');\nconst isEither = (overflow, fn) => fn(overflow.overflowX) || fn(overflow.overflowY);\nconst isBoth = (overflow, fn) => fn(overflow.overflowX) && fn(overflow.overflowY);\nconst isElementScrollable = el => {\n  const style = window.getComputedStyle(el);\n  const overflow = {\n    overflowX: style.overflowX,\n    overflowY: style.overflowY\n  };\n  return isEither(overflow, isScroll) || isEither(overflow, isAuto);\n};\nconst isBodyScrollable = () => {\n  if (process.env.NODE_ENV === 'production') {\n    return false;\n  }\n  const body = getBodyElement();\n  const html = document.documentElement;\n  !html ? process.env.NODE_ENV !== \"production\" ? invariant() : invariant() : void 0;\n  if (!isElementScrollable(body)) {\n    return false;\n  }\n  const htmlStyle = window.getComputedStyle(html);\n  const htmlOverflow = {\n    overflowX: htmlStyle.overflowX,\n    overflowY: htmlStyle.overflowY\n  };\n  if (isBoth(htmlOverflow, isVisible)) {\n    return false;\n  }\n  process.env.NODE_ENV !== \"production\" ? warning(`\n    We have detected that your <body> element might be a scroll container.\n    We have found no reliable way of detecting whether the <body> element is a scroll container.\n    Under most circumstances a <body> scroll bar will be on the <html> element (document.documentElement)\n\n    Because we cannot determine if the <body> is a scroll container, and generally it is not one,\n    we will be treating the <body> as *not* a scroll container\n\n    More information: https://github.com/hello-pangea/dnd/blob/main/docs/guides/how-we-detect-scroll-containers.md\n  `) : void 0;\n  return false;\n};\nconst getClosestScrollable = el => {\n  if (el == null) {\n    return null;\n  }\n  if (el === document.body) {\n    return isBodyScrollable() ? el : null;\n  }\n  if (el === document.documentElement) {\n    return null;\n  }\n  if (!isElementScrollable(el)) {\n    return getClosestScrollable(el.parentElement);\n  }\n  return el;\n};\n\nvar checkForNestedScrollContainers = scrollable => {\n  if (!scrollable) {\n    return;\n  }\n  const anotherScrollParent = getClosestScrollable(scrollable.parentElement);\n  if (!anotherScrollParent) {\n    return;\n  }\n  process.env.NODE_ENV !== \"production\" ? warning(`\n    Droppable: unsupported nested scroll container detected.\n    A Droppable can only have one scroll parent (which can be itself)\n    Nested scroll containers are currently not supported.\n\n    We hope to support nested scroll containers soon: https://github.com/atlassian/react-beautiful-dnd/issues/131\n  `) : void 0;\n};\n\nvar getScroll = el => ({\n  x: el.scrollLeft,\n  y: el.scrollTop\n});\n\nconst getIsFixed = el => {\n  if (!el) {\n    return false;\n  }\n  const style = window.getComputedStyle(el);\n  if (style.position === 'fixed') {\n    return true;\n  }\n  return getIsFixed(el.parentElement);\n};\nvar getEnv = start => {\n  const closestScrollable = getClosestScrollable(start);\n  const isFixedOnPage = getIsFixed(start);\n  return {\n    closestScrollable,\n    isFixedOnPage\n  };\n};\n\nvar getDroppableDimension = ({\n  descriptor,\n  isEnabled,\n  isCombineEnabled,\n  isFixedOnPage,\n  direction,\n  client,\n  page,\n  closest\n}) => {\n  const frame = (() => {\n    if (!closest) {\n      return null;\n    }\n    const {\n      scrollSize,\n      client: frameClient\n    } = closest;\n    const maxScroll = getMaxScroll({\n      scrollHeight: scrollSize.scrollHeight,\n      scrollWidth: scrollSize.scrollWidth,\n      height: frameClient.paddingBox.height,\n      width: frameClient.paddingBox.width\n    });\n    return {\n      pageMarginBox: closest.page.marginBox,\n      frameClient,\n      scrollSize,\n      shouldClipSubject: closest.shouldClipSubject,\n      scroll: {\n        initial: closest.scroll,\n        current: closest.scroll,\n        max: maxScroll,\n        diff: {\n          value: origin,\n          displacement: origin\n        }\n      }\n    };\n  })();\n  const axis = direction === 'vertical' ? vertical : horizontal;\n  const subject = getSubject({\n    page,\n    withPlaceholder: null,\n    axis,\n    frame\n  });\n  const dimension = {\n    descriptor,\n    isCombineEnabled,\n    isFixedOnPage,\n    axis,\n    isEnabled,\n    client,\n    page,\n    frame,\n    subject\n  };\n  return dimension;\n};\n\nconst getClient = (targetRef, closestScrollable) => {\n  const base = getBox(targetRef);\n  if (!closestScrollable) {\n    return base;\n  }\n  if (targetRef !== closestScrollable) {\n    return base;\n  }\n  const top = base.paddingBox.top - closestScrollable.scrollTop;\n  const left = base.paddingBox.left - closestScrollable.scrollLeft;\n  const bottom = top + closestScrollable.scrollHeight;\n  const right = left + closestScrollable.scrollWidth;\n  const paddingBox = {\n    top,\n    right,\n    bottom,\n    left\n  };\n  const borderBox = expand(paddingBox, base.border);\n  const client = createBox({\n    borderBox,\n    margin: base.margin,\n    border: base.border,\n    padding: base.padding\n  });\n  return client;\n};\nvar getDimension = ({\n  ref,\n  descriptor,\n  env,\n  windowScroll,\n  direction,\n  isDropDisabled,\n  isCombineEnabled,\n  shouldClipSubject\n}) => {\n  const closestScrollable = env.closestScrollable;\n  const client = getClient(ref, closestScrollable);\n  const page = withScroll(client, windowScroll);\n  const closest = (() => {\n    if (!closestScrollable) {\n      return null;\n    }\n    const frameClient = getBox(closestScrollable);\n    const scrollSize = {\n      scrollHeight: closestScrollable.scrollHeight,\n      scrollWidth: closestScrollable.scrollWidth\n    };\n    return {\n      client: frameClient,\n      page: withScroll(frameClient, windowScroll),\n      scroll: getScroll(closestScrollable),\n      scrollSize,\n      shouldClipSubject\n    };\n  })();\n  const dimension = getDroppableDimension({\n    descriptor,\n    isEnabled: !isDropDisabled,\n    isCombineEnabled,\n    isFixedOnPage: env.isFixedOnPage,\n    direction,\n    client,\n    page,\n    closest\n  });\n  return dimension;\n};\n\nconst immediate = {\n  passive: false\n};\nconst delayed = {\n  passive: true\n};\nvar getListenerOptions = options => options.shouldPublishImmediately ? immediate : delayed;\n\nconst getClosestScrollableFromDrag = dragging => dragging && dragging.env.closestScrollable || null;\nfunction useDroppablePublisher(args) {\n  const whileDraggingRef = useRef(null);\n  const appContext = useRequiredContext(AppContext);\n  const uniqueId = useUniqueId('droppable');\n  const {\n    registry,\n    marshal\n  } = appContext;\n  const previousRef = usePrevious(args);\n  const descriptor = useMemo(() => ({\n    id: args.droppableId,\n    type: args.type,\n    mode: args.mode\n  }), [args.droppableId, args.mode, args.type]);\n  const publishedDescriptorRef = useRef(descriptor);\n  const memoizedUpdateScroll = useMemo(() => memoizeOne((x, y) => {\n    !whileDraggingRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only update scroll when dragging') : invariant() : void 0;\n    const scroll = {\n      x,\n      y\n    };\n    marshal.updateDroppableScroll(descriptor.id, scroll);\n  }), [descriptor.id, marshal]);\n  const getClosestScroll = useCallback(() => {\n    const dragging = whileDraggingRef.current;\n    if (!dragging || !dragging.env.closestScrollable) {\n      return origin;\n    }\n    return getScroll(dragging.env.closestScrollable);\n  }, []);\n  const updateScroll = useCallback(() => {\n    const scroll = getClosestScroll();\n    memoizedUpdateScroll(scroll.x, scroll.y);\n  }, [getClosestScroll, memoizedUpdateScroll]);\n  const scheduleScrollUpdate = useMemo(() => rafSchd(updateScroll), [updateScroll]);\n  const onClosestScroll = useCallback(() => {\n    const dragging = whileDraggingRef.current;\n    const closest = getClosestScrollableFromDrag(dragging);\n    !(dragging && closest) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find scroll options while scrolling') : invariant() : void 0;\n    const options = dragging.scrollOptions;\n    if (options.shouldPublishImmediately) {\n      updateScroll();\n      return;\n    }\n    scheduleScrollUpdate();\n  }, [scheduleScrollUpdate, updateScroll]);\n  const getDimensionAndWatchScroll = useCallback((windowScroll, options) => {\n    !!whileDraggingRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot collect a droppable while a drag is occurring') : invariant() : void 0;\n    const previous = previousRef.current;\n    const ref = previous.getDroppableRef();\n    !ref ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot collect without a droppable ref') : invariant() : void 0;\n    const env = getEnv(ref);\n    const dragging = {\n      ref,\n      descriptor,\n      env,\n      scrollOptions: options\n    };\n    whileDraggingRef.current = dragging;\n    const dimension = getDimension({\n      ref,\n      descriptor,\n      env,\n      windowScroll,\n      direction: previous.direction,\n      isDropDisabled: previous.isDropDisabled,\n      isCombineEnabled: previous.isCombineEnabled,\n      shouldClipSubject: !previous.ignoreContainerClipping\n    });\n    const scrollable = env.closestScrollable;\n    if (scrollable) {\n      scrollable.setAttribute(scrollContainer.contextId, appContext.contextId);\n      scrollable.addEventListener('scroll', onClosestScroll, getListenerOptions(dragging.scrollOptions));\n      if (process.env.NODE_ENV !== 'production') {\n        checkForNestedScrollContainers(scrollable);\n      }\n    }\n    return dimension;\n  }, [appContext.contextId, descriptor, onClosestScroll, previousRef]);\n  const getScrollWhileDragging = useCallback(() => {\n    const dragging = whileDraggingRef.current;\n    const closest = getClosestScrollableFromDrag(dragging);\n    !(dragging && closest) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only recollect Droppable client for Droppables that have a scroll container') : invariant() : void 0;\n    return getScroll(closest);\n  }, []);\n  const dragStopped = useCallback(() => {\n    const dragging = whileDraggingRef.current;\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop drag when no active drag') : invariant() : void 0;\n    const closest = getClosestScrollableFromDrag(dragging);\n    whileDraggingRef.current = null;\n    if (!closest) {\n      return;\n    }\n    scheduleScrollUpdate.cancel();\n    closest.removeAttribute(scrollContainer.contextId);\n    closest.removeEventListener('scroll', onClosestScroll, getListenerOptions(dragging.scrollOptions));\n  }, [onClosestScroll, scheduleScrollUpdate]);\n  const scroll = useCallback(change => {\n    const dragging = whileDraggingRef.current;\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot scroll when there is no drag') : invariant() : void 0;\n    const closest = getClosestScrollableFromDrag(dragging);\n    !closest ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot scroll a droppable with no closest scrollable') : invariant() : void 0;\n    closest.scrollTop += change.y;\n    closest.scrollLeft += change.x;\n  }, []);\n  const callbacks = useMemo(() => {\n    return {\n      getDimensionAndWatchScroll,\n      getScrollWhileDragging,\n      dragStopped,\n      scroll\n    };\n  }, [dragStopped, getDimensionAndWatchScroll, getScrollWhileDragging, scroll]);\n  const entry = useMemo(() => ({\n    uniqueId,\n    descriptor,\n    callbacks\n  }), [callbacks, descriptor, uniqueId]);\n  useIsomorphicLayoutEffect(() => {\n    publishedDescriptorRef.current = entry.descriptor;\n    registry.droppable.register(entry);\n    return () => {\n      if (whileDraggingRef.current) {\n        process.env.NODE_ENV !== \"production\" ? warning('Unsupported: changing the droppableId or type of a Droppable during a drag') : void 0;\n        dragStopped();\n      }\n      registry.droppable.unregister(entry);\n    };\n  }, [callbacks, descriptor, dragStopped, entry, marshal, registry.droppable]);\n  useIsomorphicLayoutEffect(() => {\n    if (!whileDraggingRef.current) {\n      return;\n    }\n    marshal.updateDroppableIsEnabled(publishedDescriptorRef.current.id, !args.isDropDisabled);\n  }, [args.isDropDisabled, marshal]);\n  useIsomorphicLayoutEffect(() => {\n    if (!whileDraggingRef.current) {\n      return;\n    }\n    marshal.updateDroppableIsCombineEnabled(publishedDescriptorRef.current.id, args.isCombineEnabled);\n  }, [args.isCombineEnabled, marshal]);\n}\n\nfunction noop() {}\nconst empty = {\n  width: 0,\n  height: 0,\n  margin: noSpacing\n};\nconst getSize = ({\n  isAnimatingOpenOnMount,\n  placeholder,\n  animate\n}) => {\n  if (isAnimatingOpenOnMount) {\n    return empty;\n  }\n  if (animate === 'close') {\n    return empty;\n  }\n  return {\n    height: placeholder.client.borderBox.height,\n    width: placeholder.client.borderBox.width,\n    margin: placeholder.client.margin\n  };\n};\nconst getStyle = ({\n  isAnimatingOpenOnMount,\n  placeholder,\n  animate\n}) => {\n  const size = getSize({\n    isAnimatingOpenOnMount,\n    placeholder,\n    animate\n  });\n  return {\n    display: placeholder.display,\n    boxSizing: 'border-box',\n    width: size.width,\n    height: size.height,\n    marginTop: size.margin.top,\n    marginRight: size.margin.right,\n    marginBottom: size.margin.bottom,\n    marginLeft: size.margin.left,\n    flexShrink: '0',\n    flexGrow: '0',\n    pointerEvents: 'none',\n    transition: animate !== 'none' ? transitions.placeholder : null\n  };\n};\nconst Placeholder = props => {\n  const animateOpenTimerRef = useRef(null);\n  const tryClearAnimateOpenTimer = useCallback(() => {\n    if (!animateOpenTimerRef.current) {\n      return;\n    }\n    clearTimeout(animateOpenTimerRef.current);\n    animateOpenTimerRef.current = null;\n  }, []);\n  const {\n    animate,\n    onTransitionEnd,\n    onClose,\n    contextId\n  } = props;\n  const [isAnimatingOpenOnMount, setIsAnimatingOpenOnMount] = useState(props.animate === 'open');\n  useEffect(() => {\n    if (!isAnimatingOpenOnMount) {\n      return noop;\n    }\n    if (animate !== 'open') {\n      tryClearAnimateOpenTimer();\n      setIsAnimatingOpenOnMount(false);\n      return noop;\n    }\n    if (animateOpenTimerRef.current) {\n      return noop;\n    }\n    animateOpenTimerRef.current = setTimeout(() => {\n      animateOpenTimerRef.current = null;\n      setIsAnimatingOpenOnMount(false);\n    });\n    return tryClearAnimateOpenTimer;\n  }, [animate, isAnimatingOpenOnMount, tryClearAnimateOpenTimer]);\n  const onSizeChangeEnd = useCallback(event => {\n    if (event.propertyName !== 'height') {\n      return;\n    }\n    onTransitionEnd();\n    if (animate === 'close') {\n      onClose();\n    }\n  }, [animate, onClose, onTransitionEnd]);\n  const style = getStyle({\n    isAnimatingOpenOnMount,\n    animate: props.animate,\n    placeholder: props.placeholder\n  });\n  return React.createElement(props.placeholder.tagName, {\n    style,\n    'data-rfd-placeholder-context-id': contextId,\n    onTransitionEnd: onSizeChangeEnd,\n    ref: props.innerRef\n  });\n};\nvar Placeholder$1 = React.memo(Placeholder);\n\nfunction isBoolean(value) {\n  return typeof value === 'boolean';\n}\nfunction runChecks(args, checks) {\n  checks.forEach(check => check(args));\n}\nconst shared = [function required({\n  props\n}) {\n  !props.droppableId ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A Droppable requires a droppableId prop') : invariant() : void 0;\n  !(typeof props.droppableId === 'string') ? process.env.NODE_ENV !== \"production\" ? invariant(false, `A Droppable requires a [string] droppableId. Provided: [${typeof props.droppableId}]`) : invariant() : void 0;\n}, function boolean({\n  props\n}) {\n  !isBoolean(props.isDropDisabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'isDropDisabled must be a boolean') : invariant() : void 0;\n  !isBoolean(props.isCombineEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'isCombineEnabled must be a boolean') : invariant() : void 0;\n  !isBoolean(props.ignoreContainerClipping) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'ignoreContainerClipping must be a boolean') : invariant() : void 0;\n}, function ref({\n  getDroppableRef\n}) {\n  checkIsValidInnerRef(getDroppableRef());\n}];\nconst standard = [function placeholder({\n  props,\n  getPlaceholderRef\n}) {\n  if (!props.placeholder) {\n    return;\n  }\n  const ref = getPlaceholderRef();\n  if (ref) {\n    return;\n  }\n  process.env.NODE_ENV !== \"production\" ? warning(`\n      Droppable setup issue [droppableId: \"${props.droppableId}\"]:\n      DroppableProvided > placeholder could not be found.\n\n      Please be sure to add the {provided.placeholder} React Node as a child of your Droppable.\n      More information: https://github.com/hello-pangea/dnd/blob/main/docs/api/droppable.md\n    `) : void 0;\n}];\nconst virtual = [function hasClone({\n  props\n}) {\n  !props.renderClone ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Must provide a clone render function (renderClone) for virtual lists') : invariant() : void 0;\n}, function hasNoPlaceholder({\n  getPlaceholderRef\n}) {\n  !!getPlaceholderRef() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected virtual list to not have a placeholder') : invariant() : void 0;\n}];\nfunction useValidation(args) {\n  useDevSetupWarning(() => {\n    runChecks(args, shared);\n    if (args.props.mode === 'standard') {\n      runChecks(args, standard);\n    }\n    if (args.props.mode === 'virtual') {\n      runChecks(args, virtual);\n    }\n  });\n}\n\nclass AnimateInOut extends React.PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isVisible: Boolean(this.props.on),\n      data: this.props.on,\n      animate: this.props.shouldAnimate && this.props.on ? 'open' : 'none'\n    };\n    this.onClose = () => {\n      if (this.state.animate !== 'close') {\n        return;\n      }\n      this.setState({\n        isVisible: false\n      });\n    };\n  }\n  static getDerivedStateFromProps(props, state) {\n    if (!props.shouldAnimate) {\n      return {\n        isVisible: Boolean(props.on),\n        data: props.on,\n        animate: 'none'\n      };\n    }\n    if (props.on) {\n      return {\n        isVisible: true,\n        data: props.on,\n        animate: 'open'\n      };\n    }\n    if (state.isVisible) {\n      return {\n        isVisible: true,\n        data: state.data,\n        animate: 'close'\n      };\n    }\n    return {\n      isVisible: false,\n      animate: 'close',\n      data: null\n    };\n  }\n  render() {\n    if (!this.state.isVisible) {\n      return null;\n    }\n    const provided = {\n      onClose: this.onClose,\n      data: this.state.data,\n      animate: this.state.animate\n    };\n    return this.props.children(provided);\n  }\n}\n\nconst Droppable = props => {\n  const appContext = useContext(AppContext);\n  !appContext ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find app context') : invariant() : void 0;\n  const {\n    contextId,\n    isMovementAllowed\n  } = appContext;\n  const droppableRef = useRef(null);\n  const placeholderRef = useRef(null);\n  const {\n    children,\n    droppableId,\n    type,\n    mode,\n    direction,\n    ignoreContainerClipping,\n    isDropDisabled,\n    isCombineEnabled,\n    snapshot,\n    useClone,\n    updateViewportMaxScroll,\n    getContainerForClone\n  } = props;\n  const getDroppableRef = useCallback(() => droppableRef.current, []);\n  const setDroppableRef = useCallback((value = null) => {\n    droppableRef.current = value;\n  }, []);\n  const getPlaceholderRef = useCallback(() => placeholderRef.current, []);\n  const setPlaceholderRef = useCallback((value = null) => {\n    placeholderRef.current = value;\n  }, []);\n  useValidation({\n    props,\n    getDroppableRef,\n    getPlaceholderRef\n  });\n  const onPlaceholderTransitionEnd = useCallback(() => {\n    if (isMovementAllowed()) {\n      updateViewportMaxScroll({\n        maxScroll: getMaxWindowScroll()\n      });\n    }\n  }, [isMovementAllowed, updateViewportMaxScroll]);\n  useDroppablePublisher({\n    droppableId,\n    type,\n    mode,\n    direction,\n    isDropDisabled,\n    isCombineEnabled,\n    ignoreContainerClipping,\n    getDroppableRef\n  });\n  const placeholder = useMemo(() => React.createElement(AnimateInOut, {\n    on: props.placeholder,\n    shouldAnimate: props.shouldAnimatePlaceholder\n  }, ({\n    onClose,\n    data,\n    animate\n  }) => React.createElement(Placeholder$1, {\n    placeholder: data,\n    onClose: onClose,\n    innerRef: setPlaceholderRef,\n    animate: animate,\n    contextId: contextId,\n    onTransitionEnd: onPlaceholderTransitionEnd\n  })), [contextId, onPlaceholderTransitionEnd, props.placeholder, props.shouldAnimatePlaceholder, setPlaceholderRef]);\n  const provided = useMemo(() => ({\n    innerRef: setDroppableRef,\n    placeholder,\n    droppableProps: {\n      'data-rfd-droppable-id': droppableId,\n      'data-rfd-droppable-context-id': contextId\n    }\n  }), [contextId, droppableId, placeholder, setDroppableRef]);\n  const isUsingCloneFor = useClone ? useClone.dragging.draggableId : null;\n  const droppableContext = useMemo(() => ({\n    droppableId,\n    type,\n    isUsingCloneFor\n  }), [droppableId, isUsingCloneFor, type]);\n  function getClone() {\n    if (!useClone) {\n      return null;\n    }\n    const {\n      dragging,\n      render\n    } = useClone;\n    const node = React.createElement(PrivateDraggable, {\n      draggableId: dragging.draggableId,\n      index: dragging.source.index,\n      isClone: true,\n      isEnabled: true,\n      shouldRespectForcePress: false,\n      canDragInteractiveElements: true\n    }, (draggableProvided, draggableSnapshot) => render(draggableProvided, draggableSnapshot, dragging));\n    return ReactDOM.createPortal(node, getContainerForClone());\n  }\n  return React.createElement(DroppableContext.Provider, {\n    value: droppableContext\n  }, children(provided, snapshot), getClone());\n};\n\nfunction getBody() {\n  !document.body ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'document.body is not ready') : invariant() : void 0;\n  return document.body;\n}\nconst defaultProps = {\n  mode: 'standard',\n  type: 'DEFAULT',\n  direction: 'vertical',\n  isDropDisabled: false,\n  isCombineEnabled: false,\n  ignoreContainerClipping: false,\n  renderClone: null,\n  getContainerForClone: getBody\n};\nconst attachDefaultPropsToOwnProps = ownProps => {\n  let mergedProps = {\n    ...ownProps\n  };\n  let defaultPropKey;\n  for (defaultPropKey in defaultProps) {\n    if (ownProps[defaultPropKey] === undefined) {\n      mergedProps = {\n        ...mergedProps,\n        [defaultPropKey]: defaultProps[defaultPropKey]\n      };\n    }\n  }\n  return mergedProps;\n};\nconst isMatchingType = (type, critical) => type === critical.droppable.type;\nconst getDraggable = (critical, dimensions) => dimensions.draggables[critical.draggable.id];\nconst makeMapStateToProps = () => {\n  const idleWithAnimation = {\n    placeholder: null,\n    shouldAnimatePlaceholder: true,\n    snapshot: {\n      isDraggingOver: false,\n      draggingOverWith: null,\n      draggingFromThisWith: null,\n      isUsingPlaceholder: false\n    },\n    useClone: null\n  };\n  const idleWithoutAnimation = {\n    ...idleWithAnimation,\n    shouldAnimatePlaceholder: false\n  };\n  const getDraggableRubric = memoizeOne(descriptor => ({\n    draggableId: descriptor.id,\n    type: descriptor.type,\n    source: {\n      index: descriptor.index,\n      droppableId: descriptor.droppableId\n    }\n  }));\n  const getMapProps = memoizeOne((id, isEnabled, isDraggingOverForConsumer, isDraggingOverForImpact, dragging, renderClone) => {\n    const draggableId = dragging.descriptor.id;\n    const isHome = dragging.descriptor.droppableId === id;\n    if (isHome) {\n      const useClone = renderClone ? {\n        render: renderClone,\n        dragging: getDraggableRubric(dragging.descriptor)\n      } : null;\n      const snapshot = {\n        isDraggingOver: isDraggingOverForConsumer,\n        draggingOverWith: isDraggingOverForConsumer ? draggableId : null,\n        draggingFromThisWith: draggableId,\n        isUsingPlaceholder: true\n      };\n      return {\n        placeholder: dragging.placeholder,\n        shouldAnimatePlaceholder: false,\n        snapshot,\n        useClone\n      };\n    }\n    if (!isEnabled) {\n      return idleWithoutAnimation;\n    }\n    if (!isDraggingOverForImpact) {\n      return idleWithAnimation;\n    }\n    const snapshot = {\n      isDraggingOver: isDraggingOverForConsumer,\n      draggingOverWith: draggableId,\n      draggingFromThisWith: null,\n      isUsingPlaceholder: true\n    };\n    return {\n      placeholder: dragging.placeholder,\n      shouldAnimatePlaceholder: true,\n      snapshot,\n      useClone: null\n    };\n  });\n  const selector = (state, ownProps) => {\n    const ownPropsWithDefaultProps = attachDefaultPropsToOwnProps(ownProps);\n    const id = ownPropsWithDefaultProps.droppableId;\n    const type = ownPropsWithDefaultProps.type;\n    const isEnabled = !ownPropsWithDefaultProps.isDropDisabled;\n    const renderClone = ownPropsWithDefaultProps.renderClone;\n    if (isDragging(state)) {\n      const critical = state.critical;\n      if (!isMatchingType(type, critical)) {\n        return idleWithoutAnimation;\n      }\n      const dragging = getDraggable(critical, state.dimensions);\n      const isDraggingOver = whatIsDraggedOver(state.impact) === id;\n      return getMapProps(id, isEnabled, isDraggingOver, isDraggingOver, dragging, renderClone);\n    }\n    if (state.phase === 'DROP_ANIMATING') {\n      const completed = state.completed;\n      if (!isMatchingType(type, completed.critical)) {\n        return idleWithoutAnimation;\n      }\n      const dragging = getDraggable(completed.critical, state.dimensions);\n      return getMapProps(id, isEnabled, whatIsDraggedOverFromResult(completed.result) === id, whatIsDraggedOver(completed.impact) === id, dragging, renderClone);\n    }\n    if (state.phase === 'IDLE' && state.completed && !state.shouldFlush) {\n      const completed = state.completed;\n      if (!isMatchingType(type, completed.critical)) {\n        return idleWithoutAnimation;\n      }\n      const wasOver = whatIsDraggedOver(completed.impact) === id;\n      const wasCombining = Boolean(completed.impact.at && completed.impact.at.type === 'COMBINE');\n      const isHome = completed.critical.droppable.id === id;\n      if (wasOver) {\n        return wasCombining ? idleWithAnimation : idleWithoutAnimation;\n      }\n      if (isHome) {\n        return idleWithAnimation;\n      }\n      return idleWithoutAnimation;\n    }\n    return idleWithoutAnimation;\n  };\n  return selector;\n};\nconst mapDispatchToProps = {\n  updateViewportMaxScroll: updateViewportMaxScroll\n};\nconst ConnectedDroppable = connect(makeMapStateToProps, mapDispatchToProps, (stateProps, dispatchProps, ownProps) => {\n  return {\n    ...attachDefaultPropsToOwnProps(ownProps),\n    ...stateProps,\n    ...dispatchProps\n  };\n}, {\n  context: StoreContext,\n  areStatePropsEqual: isStrictEqual\n})(Droppable);\nvar ConnectedDroppable$1 = ConnectedDroppable;\n\nexport { DragDropContext, PublicDraggable as Draggable, ConnectedDroppable$1 as Droppable, useKeyboardSensor, useMouseSensor, useTouchSensor };\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}","import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}","import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update  it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update  it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases  research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import * as React from 'react';\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array,\n * otherwise returns the argument. Used for Preact compatibility.\n */\nexport var unwrapArray = function unwrapArray(arg) {\n  return Array.isArray(arg) ? arg[0] : arg;\n};\n/**\n * Takes a maybe-undefined function and arbitrary args and invokes the function\n * only if it is defined.\n */\n\nexport var safeInvoke = function safeInvoke(fn) {\n  if (typeof fn === 'function') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return fn.apply(void 0, args);\n  }\n};\n/**\n * Sets a ref using either a ref callback or a ref object\n */\n\nexport var setRef = function setRef(ref, node) {\n  // if its a function call it\n  if (typeof ref === 'function') {\n    return safeInvoke(ref, node);\n  } // otherwise we should treat it as a ref object\n  else if (ref != null) {\n      ref.current = node;\n    }\n};\n/**\n * Simple ponyfill for Object.fromEntries\n */\n\nexport var fromEntries = function fromEntries(entries) {\n  return entries.reduce(function (acc, _ref) {\n    var key = _ref[0],\n        value = _ref[1];\n    acc[key] = value;\n    return acc;\n  }, {});\n};\n/**\n * Small wrapper around `useLayoutEffect` to get rid of the warning on SSR envs\n */\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' && window.document && window.document.createElement ? React.useLayoutEffect : React.useEffect;","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { createPopper as defaultCreatePopper } from '@popperjs/core';\nimport isEqual from 'react-fast-compare';\nimport { fromEntries, useIsomorphicLayoutEffect } from './utils';\nvar EMPTY_MODIFIERS = [];\nexport var usePopper = function usePopper(referenceElement, popperElement, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var prevOptions = React.useRef(null);\n  var optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  var _React$useState = React.useState({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      },\n      arrow: {\n        position: 'absolute'\n      }\n    },\n    attributes: {}\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var updateStateModifier = React.useMemo(function () {\n    return {\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      fn: function fn(_ref) {\n        var state = _ref.state;\n        var elements = Object.keys(state.elements);\n        ReactDOM.flushSync(function () {\n          setState({\n            styles: fromEntries(elements.map(function (element) {\n              return [element, state.styles[element] || {}];\n            })),\n            attributes: fromEntries(elements.map(function (element) {\n              return [element, state.attributes[element]];\n            }))\n          });\n        });\n      },\n      requires: ['computeStyles']\n    };\n  }, []);\n  var popperOptions = React.useMemo(function () {\n    var newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [].concat(optionsWithDefaults.modifiers, [updateStateModifier, {\n        name: 'applyStyles',\n        enabled: false\n      }])\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  var popperInstanceRef = React.useRef();\n  useIsomorphicLayoutEffect(function () {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useIsomorphicLayoutEffect(function () {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    var createPopper = options.createPopper || defaultCreatePopper;\n    var popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return function () {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};","import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { usePopper } from 'react-popper';\n\nfunction useGetLatest(val) {\n  var ref = React.useRef(val);\n  ref.current = val;\n  return React.useCallback(function () {\n    return ref.current;\n  }, []);\n}\n\nvar noop = function noop() {// do nothing\n};\n\nfunction useControlledState(_ref) {\n  var initial = _ref.initial,\n      value = _ref.value,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange;\n\n  if (initial === undefined && value === undefined) {\n    throw new TypeError('Either \"value\" or \"initial\" variable must be set. Now both are undefined');\n  }\n\n  var _React$useState = React.useState(initial),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var getLatest = useGetLatest(state);\n  var set = React.useCallback(function (updater) {\n    var state = getLatest();\n    var updatedState = typeof updater === 'function' ? updater(state) : updater;\n    if (typeof updatedState.persist === 'function') updatedState.persist();\n    setState(updatedState);\n    if (typeof onChange === 'function') onChange(updatedState);\n  }, [getLatest, onChange]);\n  var isControlled = value !== undefined;\n  return [isControlled ? value : state, isControlled ? onChange : set];\n}\nfunction generateBoundingClientRect(x, y) {\n  if (x === void 0) {\n    x = 0;\n  }\n\n  if (y === void 0) {\n    y = 0;\n  }\n\n  return function () {\n    return {\n      width: 0,\n      height: 0,\n      top: y,\n      right: x,\n      bottom: y,\n      left: x,\n      x: 0,\n      y: 0,\n      toJSON: function toJSON() {\n        return null;\n      }\n    };\n  };\n}\n\nvar _excluded = [\"styles\", \"attributes\"];\nvar virtualElement = {\n  getBoundingClientRect: generateBoundingClientRect()\n};\nvar defaultConfig = {\n  closeOnOutsideClick: true,\n  closeOnTriggerHidden: false,\n  defaultVisible: false,\n  delayHide: 0,\n  delayShow: 0,\n  followCursor: false,\n  interactive: false,\n  mutationObserverOptions: {\n    attributes: true,\n    childList: true,\n    subtree: true\n  },\n  offset: [0, 6],\n  trigger: 'hover'\n};\nfunction usePopperTooltip(config, popperOptions) {\n  var _popperProps$state, _popperProps$state$mo, _popperProps$state$mo2;\n\n  if (config === void 0) {\n    config = {};\n  }\n\n  if (popperOptions === void 0) {\n    popperOptions = {};\n  }\n\n  // Merging options with default options.\n  // Keys with undefined values are replaced with the default ones if any.\n  // Keys with other values pass through.\n  var finalConfig = Object.keys(defaultConfig).reduce(function (config, key) {\n    var _extends2;\n\n    return _extends({}, config, (_extends2 = {}, _extends2[key] = config[key] !== undefined ? config[key] : defaultConfig[key], _extends2));\n  }, config);\n  var defaultModifiers = React.useMemo(function () {\n    return [{\n      name: 'offset',\n      options: {\n        offset: finalConfig.offset\n      }\n    }];\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  Array.isArray(finalConfig.offset) ? finalConfig.offset : []);\n\n  var finalPopperOptions = _extends({}, popperOptions, {\n    placement: popperOptions.placement || finalConfig.placement,\n    modifiers: popperOptions.modifiers || defaultModifiers\n  });\n\n  var _React$useState = React.useState(null),\n      triggerRef = _React$useState[0],\n      setTriggerRef = _React$useState[1];\n\n  var _React$useState2 = React.useState(null),\n      tooltipRef = _React$useState2[0],\n      setTooltipRef = _React$useState2[1];\n\n  var _useControlledState = useControlledState({\n    initial: finalConfig.defaultVisible,\n    value: finalConfig.visible,\n    onChange: finalConfig.onVisibleChange\n  }),\n      visible = _useControlledState[0],\n      setVisible = _useControlledState[1];\n\n  var timer = React.useRef();\n  React.useEffect(function () {\n    return function () {\n      return clearTimeout(timer.current);\n    };\n  }, []);\n\n  var _usePopper = usePopper(finalConfig.followCursor ? virtualElement : triggerRef, tooltipRef, finalPopperOptions),\n      styles = _usePopper.styles,\n      attributes = _usePopper.attributes,\n      popperProps = _objectWithoutPropertiesLoose(_usePopper, _excluded);\n\n  var update = popperProps.update;\n  var getLatest = useGetLatest({\n    visible: visible,\n    triggerRef: triggerRef,\n    tooltipRef: tooltipRef,\n    finalConfig: finalConfig\n  });\n  var isTriggeredBy = React.useCallback(function (trigger) {\n    return Array.isArray(finalConfig.trigger) ? finalConfig.trigger.includes(trigger) : finalConfig.trigger === trigger;\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  Array.isArray(finalConfig.trigger) ? finalConfig.trigger : [finalConfig.trigger]);\n  var hideTooltip = React.useCallback(function () {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(function () {\n      return setVisible(false);\n    }, finalConfig.delayHide);\n  }, [finalConfig.delayHide, setVisible]);\n  var showTooltip = React.useCallback(function () {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(function () {\n      return setVisible(true);\n    }, finalConfig.delayShow);\n  }, [finalConfig.delayShow, setVisible]);\n  var toggleTooltip = React.useCallback(function () {\n    if (getLatest().visible) {\n      hideTooltip();\n    } else {\n      showTooltip();\n    }\n  }, [getLatest, hideTooltip, showTooltip]); // Handle click outside\n\n  React.useEffect(function () {\n    if (!getLatest().finalConfig.closeOnOutsideClick) return;\n\n    var handleClickOutside = function handleClickOutside(event) {\n      var _event$composedPath;\n\n      var _getLatest = getLatest(),\n          tooltipRef = _getLatest.tooltipRef,\n          triggerRef = _getLatest.triggerRef;\n\n      var target = (event.composedPath == null ? void 0 : (_event$composedPath = event.composedPath()) == null ? void 0 : _event$composedPath[0]) || event.target;\n\n      if (target instanceof Node) {\n        if (tooltipRef != null && triggerRef != null && !tooltipRef.contains(target) && !triggerRef.contains(target)) {\n          hideTooltip();\n        }\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return function () {\n      return document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [getLatest, hideTooltip]); // Trigger: click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('click')) return;\n    triggerRef.addEventListener('click', toggleTooltip);\n    return function () {\n      return triggerRef.removeEventListener('click', toggleTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: double-click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('double-click')) return;\n    triggerRef.addEventListener('dblclick', toggleTooltip);\n    return function () {\n      return triggerRef.removeEventListener('dblclick', toggleTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: right-click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('right-click')) return;\n\n    var preventDefaultAndToggle = function preventDefaultAndToggle(event) {\n      // Don't show the context menu\n      event.preventDefault();\n      toggleTooltip();\n    };\n\n    triggerRef.addEventListener('contextmenu', preventDefaultAndToggle);\n    return function () {\n      return triggerRef.removeEventListener('contextmenu', preventDefaultAndToggle);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: focus\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('focus')) return;\n    triggerRef.addEventListener('focus', showTooltip);\n    triggerRef.addEventListener('blur', hideTooltip);\n    return function () {\n      triggerRef.removeEventListener('focus', showTooltip);\n      triggerRef.removeEventListener('blur', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]); // Trigger: hover on trigger\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('hover')) return;\n    triggerRef.addEventListener('mouseenter', showTooltip);\n    triggerRef.addEventListener('mouseleave', hideTooltip);\n    return function () {\n      triggerRef.removeEventListener('mouseenter', showTooltip);\n      triggerRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]); // Trigger: hover on tooltip, keep it open if hovered\n\n  React.useEffect(function () {\n    if (tooltipRef == null || !isTriggeredBy('hover') || !getLatest().finalConfig.interactive) return;\n    tooltipRef.addEventListener('mouseenter', showTooltip);\n    tooltipRef.addEventListener('mouseleave', hideTooltip);\n    return function () {\n      tooltipRef.removeEventListener('mouseenter', showTooltip);\n      tooltipRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [tooltipRef, isTriggeredBy, showTooltip, hideTooltip, getLatest]); // Handle closing tooltip if trigger hidden\n\n  var isReferenceHidden = popperProps == null ? void 0 : (_popperProps$state = popperProps.state) == null ? void 0 : (_popperProps$state$mo = _popperProps$state.modifiersData) == null ? void 0 : (_popperProps$state$mo2 = _popperProps$state$mo.hide) == null ? void 0 : _popperProps$state$mo2.isReferenceHidden;\n  React.useEffect(function () {\n    if (finalConfig.closeOnTriggerHidden && isReferenceHidden) hideTooltip();\n  }, [finalConfig.closeOnTriggerHidden, hideTooltip, isReferenceHidden]); // Handle follow cursor\n\n  React.useEffect(function () {\n    if (!finalConfig.followCursor || triggerRef == null) return;\n\n    function setMousePosition(_ref) {\n      var clientX = _ref.clientX,\n          clientY = _ref.clientY;\n      virtualElement.getBoundingClientRect = generateBoundingClientRect(clientX, clientY);\n      update == null ? void 0 : update();\n    }\n\n    triggerRef.addEventListener('mousemove', setMousePosition);\n    return function () {\n      return triggerRef.removeEventListener('mousemove', setMousePosition);\n    };\n  }, [finalConfig.followCursor, triggerRef, update]); // Handle tooltip DOM mutation changes (aka mutation observer)\n\n  React.useEffect(function () {\n    if (tooltipRef == null || update == null || finalConfig.mutationObserverOptions == null) return;\n    var observer = new MutationObserver(update);\n    observer.observe(tooltipRef, finalConfig.mutationObserverOptions);\n    return function () {\n      return observer.disconnect();\n    };\n  }, [finalConfig.mutationObserverOptions, tooltipRef, update]); // Tooltip props getter\n\n  var getTooltipProps = function getTooltipProps(args) {\n    if (args === void 0) {\n      args = {};\n    }\n\n    return _extends({}, args, {\n      style: _extends({}, args.style, styles.popper)\n    }, attributes.popper, {\n      'data-popper-interactive': finalConfig.interactive\n    });\n  }; // Arrow props getter\n\n\n  var getArrowProps = function getArrowProps(args) {\n    if (args === void 0) {\n      args = {};\n    }\n\n    return _extends({}, args, attributes.arrow, {\n      style: _extends({}, args.style, styles.arrow),\n      'data-popper-arrow': true\n    });\n  };\n\n  return _extends({\n    getArrowProps: getArrowProps,\n    getTooltipProps: getTooltipProps,\n    setTooltipRef: setTooltipRef,\n    setTriggerRef: setTriggerRef,\n    tooltipRef: tooltipRef,\n    triggerRef: triggerRef,\n    visible: visible\n  }, popperProps);\n}\n\nexport { usePopperTooltip };\n//# sourceMappingURL=react-popper-tooltip.js.map\n","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","import { css } from '@emotion/css';\nimport React__default, { useState } from 'react';\nimport { usePopperTooltip } from 'react-popper-tooltip';\nimport { renderMarkdown } from '@grafana/data';\nimport { useStyles2, Button, Portal } from '@grafana/ui';\nimport { FlexItem } from '../../QueryEditor/FlexItem.js';\n\nconst OperationInfoButton = React__default.memo(({ definition, operation, innerQueryPlaceholder }) => {\n  const styles = useStyles2(getStyles);\n  const [show, setShow] = useState(false);\n  const { getTooltipProps, setTooltipRef, setTriggerRef, visible } = usePopperTooltip({\n    placement: \"top\",\n    visible: show,\n    offset: [0, 16],\n    onVisibleChange: setShow,\n    interactive: true,\n    trigger: [\"click\"]\n  });\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(\n    Button,\n    {\n      title: \"Click to show description\",\n      ref: setTriggerRef,\n      icon: \"info-circle\",\n      size: \"sm\",\n      variant: \"secondary\",\n      fill: \"text\"\n    }\n  ), visible && /* @__PURE__ */ React__default.createElement(Portal, null, /* @__PURE__ */ React__default.createElement(\"div\", { ref: setTooltipRef, ...getTooltipProps(), className: styles.docBox }, /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.docBoxHeader }, /* @__PURE__ */ React__default.createElement(\"span\", null, definition.renderer(operation, definition, innerQueryPlaceholder)), /* @__PURE__ */ React__default.createElement(FlexItem, { grow: 1 }), /* @__PURE__ */ React__default.createElement(\n    Button,\n    {\n      icon: \"times\",\n      onClick: () => setShow(false),\n      fill: \"text\",\n      variant: \"secondary\",\n      title: \"Remove operation\"\n    }\n  )), /* @__PURE__ */ React__default.createElement(\n    \"div\",\n    {\n      className: styles.docBoxBody,\n      dangerouslySetInnerHTML: { __html: getOperationDocs(definition, operation) }\n    }\n  ))));\n});\nOperationInfoButton.displayName = \"OperationDocs\";\nconst getStyles = (theme) => {\n  return {\n    docBox: css({\n      overflow: \"hidden\",\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.strong}`,\n      boxShadow: theme.shadows.z3,\n      maxWidth: \"600px\",\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.radius.default,\n      zIndex: theme.zIndex.tooltip\n    }),\n    docBoxHeader: css({\n      fontSize: theme.typography.h5.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n      paddingBottom: theme.spacing(1),\n      display: \"flex\",\n      alignItems: \"center\"\n    }),\n    docBoxBody: css({\n      // The markdown paragraph has a marginBottom this removes it\n      marginBottom: theme.spacing(-1),\n      color: theme.colors.text.secondary\n    }),\n    signature: css({\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace\n    }),\n    dropdown: css({\n      opacity: 0,\n      color: theme.colors.text.secondary\n    })\n  };\n};\nfunction getOperationDocs(def, op) {\n  var _a;\n  return renderMarkdown(def.explainHandler ? def.explainHandler(op, def) : (_a = def.documentation) != null ? _a : \"no docs\");\n}\n\nexport { OperationInfoButton };\n//# sourceMappingURL=OperationInfoButton.js.map\n","import { css } from '@emotion/css';\nimport React__default, { useState } from 'react';\nimport '@hello-pangea/dnd';\nimport '@grafana/data';\nimport { useStyles2, Button, Select } from '@grafana/ui';\nimport { OperationInfoButton } from './OperationInfoButton.js';\nimport { FlexItem } from '../../QueryEditor/FlexItem.js';\n\nconst OperationHeader = React__default.memo(\n  ({ operation, definition, index, onChange, onRemove, onToggle, queryModeller, dragHandleProps }) => {\n    var _a;\n    const styles = useStyles2(getStyles);\n    const [state, setState] = useState({});\n    const onToggleSwitcher = () => {\n      if (state.isOpen) {\n        setState({ ...state, isOpen: false });\n      } else {\n        const alternatives = queryModeller.getAlternativeOperations(definition.alternativesKey).map((alt) => ({ label: alt.name, value: alt }));\n        setState({ isOpen: true, alternatives });\n      }\n    };\n    return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.header }, !state.isOpen && /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(\"div\", { ...dragHandleProps }, (_a = definition.name) != null ? _a : definition.id), /* @__PURE__ */ React__default.createElement(FlexItem, { grow: 1 }), /* @__PURE__ */ React__default.createElement(\"div\", { className: `${styles.operationHeaderButtons} operation-header-show-on-hover` }, /* @__PURE__ */ React__default.createElement(\n      Button,\n      {\n        icon: \"angle-down\",\n        size: \"sm\",\n        onClick: onToggleSwitcher,\n        fill: \"text\",\n        variant: \"secondary\",\n        title: \"Click to view alternative operations\"\n      }\n    ), /* @__PURE__ */ React__default.createElement(\n      OperationInfoButton,\n      {\n        definition,\n        operation,\n        innerQueryPlaceholder: queryModeller.innerQueryPlaceholder\n      }\n    ), definition.toggleable && /* @__PURE__ */ React__default.createElement(\n      Button,\n      {\n        icon: operation.disabled ? \"eye-slash\" : \"eye\",\n        size: \"sm\",\n        onClick: () => onToggle(index),\n        fill: \"text\",\n        variant: \"secondary\",\n        title: operation.disabled ? \"Enable operation\" : \"Disable operation\"\n      }\n    ), /* @__PURE__ */ React__default.createElement(\n      Button,\n      {\n        icon: \"times\",\n        size: \"sm\",\n        onClick: () => onRemove(index),\n        fill: \"text\",\n        variant: \"secondary\",\n        title: \"Remove operation\"\n      }\n    ))), state.isOpen && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.selectWrapper }, /* @__PURE__ */ React__default.createElement(\n      Select,\n      {\n        autoFocus: true,\n        openMenuOnFocus: true,\n        placeholder: \"Replace with\",\n        options: state.alternatives,\n        isOpen: true,\n        onCloseMenu: onToggleSwitcher,\n        onChange: (value) => {\n          if (value.value) {\n            const newDef = queryModeller.getOperationDefinition(value.value.id);\n            const newParams = [...newDef.defaultParams];\n            for (let i = 0; i < Math.min(operation.params.length, newParams.length); i++) {\n              if (newDef.params[i].type === definition.params[i].type) {\n                newParams[i] = operation.params[i];\n              }\n            }\n            const changedOp = { ...operation, params: newParams, id: value.value.id };\n            onChange(\n              index,\n              definition.changeTypeHandler ? definition.changeTypeHandler(changedOp, newDef) : changedOp\n            );\n          }\n        }\n      }\n    )));\n  }\n);\nOperationHeader.displayName = \"OperationHeader\";\nconst getStyles = (theme) => {\n  return {\n    header: css({\n      borderBottom: `1px solid ${theme.colors.border.medium}`,\n      padding: theme.spacing(0.5, 0.5, 0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\"\n    }),\n    operationHeaderButtons: css({\n      opacity: 1\n    }),\n    selectWrapper: css({\n      paddingRight: theme.spacing(2)\n    })\n  };\n};\n\nexport { OperationHeader };\n//# sourceMappingURL=OperationHeader.js.map\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport { toOption } from '@grafana/data';\nimport { AutoSizeInput, Checkbox, useStyles2, Button, Select } from '@grafana/ui';\nimport '../../QueryEditor/types.js';\nimport 'lodash';\nimport '../../QueryEditor/EditorList.js';\nimport { EditorStack } from '../../QueryEditor/EditorStack.js';\nimport '../../QueryEditor/Space.js';\nimport 'react-use';\nimport '../../QueryEditor/QueryHeader.js';\nimport 'react-virtualized-auto-sizer';\nimport 'sql-formatter-plus';\nimport '../../SQLEditor/standardSql/language.js';\nimport 'uuid';\nimport '@grafana/runtime';\nimport '../../SQLEditor/utils/debugger.js';\nimport '../../SQLEditor/standardSql/macros.js';\nimport '../../QueryEditor/visual-query-builder/AwesomeQueryBuilder.js';\nimport '../../QueryEditor/visual-query-builder/WhereRow.js';\nimport '../../QueryEditor/visual-query-builder/EditorField.js';\nimport 'rxjs';\nimport 'rxjs/operators';\n\nfunction getOperationParamEditor(paramDef) {\n  if (paramDef.editor) {\n    return paramDef.editor;\n  }\n  if (paramDef.options) {\n    return SelectInputParamEditor;\n  }\n  switch (paramDef.type) {\n    case \"boolean\":\n      return BoolInputParamEditor;\n    case \"number\":\n    case \"string\":\n    default:\n      return SimpleInputParamEditor;\n  }\n}\nfunction SimpleInputParamEditor(props) {\n  var _a;\n  return /* @__PURE__ */ React__default.createElement(\n    AutoSizeInput,\n    {\n      id: getOperationParamId(props.operationId, props.index),\n      defaultValue: (_a = props.value) == null ? undefined : _a.toString(),\n      minWidth: props.paramDef.minWidth,\n      placeholder: props.paramDef.placeholder,\n      title: props.paramDef.description,\n      maxWidth: (props.paramDef.minWidth || 20) * 3,\n      onCommitChange: (evt) => {\n        props.onChange(props.index, evt.currentTarget.value);\n        if (props.paramDef.runQueryOnEnter && evt.type === \"keydown\") {\n          props.onRunQuery();\n        }\n      }\n    }\n  );\n}\nfunction BoolInputParamEditor(props) {\n  return /* @__PURE__ */ React__default.createElement(\n    Checkbox,\n    {\n      id: getOperationParamId(props.operationId, props.index),\n      value: Boolean(props.value),\n      onChange: (evt) => props.onChange(props.index, evt.currentTarget.checked)\n    }\n  );\n}\nfunction SelectInputParamEditor({\n  paramDef,\n  value,\n  index,\n  operationId,\n  onChange\n}) {\n  var _a, _b;\n  const styles = useStyles2(getStyles);\n  let selectOptions = paramDef.options;\n  if (!((_a = selectOptions[0]) == null ? undefined : _a.label)) {\n    selectOptions = paramDef.options.map((option) => ({\n      label: option.toString(),\n      value: option\n    }));\n  }\n  let valueOption = (_b = selectOptions.find((x) => x.value === value)) != null ? _b : toOption(value);\n  if (!value && paramDef.optional) {\n    return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.optionalParam }, /* @__PURE__ */ React__default.createElement(\n      Button,\n      {\n        size: \"sm\",\n        variant: \"secondary\",\n        title: `Add ${paramDef.name}`,\n        icon: \"plus\",\n        onClick: () => onChange(index, selectOptions[0].value)\n      },\n      paramDef.name\n    ));\n  }\n  return /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 0.5, direction: \"row\", alignItems: \"center\" }, /* @__PURE__ */ React__default.createElement(\n    Select,\n    {\n      id: getOperationParamId(operationId, index),\n      value: valueOption,\n      options: selectOptions,\n      placeholder: paramDef.placeholder,\n      allowCustomValue: true,\n      onChange: (value2) => onChange(index, value2.value),\n      width: paramDef.minWidth || \"auto\"\n    }\n  ), paramDef.optional && /* @__PURE__ */ React__default.createElement(\n    Button,\n    {\n      \"data-testid\": `operations.${index}.remove-param`,\n      size: \"sm\",\n      fill: \"text\",\n      icon: \"times\",\n      variant: \"secondary\",\n      title: `Remove ${paramDef.name}`,\n      onClick: () => onChange(index, \"\")\n    }\n  ));\n}\nconst getStyles = (theme) => {\n  return {\n    optionalParam: css({\n      marginTop: theme.spacing(1)\n    })\n  };\n};\nfunction getOperationParamId(operationId, paramIndex) {\n  return `operations.${operationId}.param.${paramIndex}`;\n}\n\nexport { getOperationParamEditor, getOperationParamId };\n//# sourceMappingURL=OperationParamEditor.js.map\n","import React__default, { useRef, useState, useEffect } from 'react';\nimport '@hello-pangea/dnd';\nimport { useTheme2, Tooltip, Icon, Button } from '@grafana/ui';\nimport { cx, css } from '@emotion/css';\nimport '@grafana/data';\nimport { OperationHeader } from './OperationHeader.js';\nimport { getOperationParamEditor, getOperationParamId } from './OperationParamEditor.js';\nimport { v4 } from 'uuid';\nimport '../../QueryEditor/types.js';\nimport 'lodash';\nimport '../../QueryEditor/EditorList.js';\nimport { EditorStack } from '../../QueryEditor/EditorStack.js';\nimport '../../QueryEditor/Space.js';\nimport 'react-use';\nimport '../../QueryEditor/QueryHeader.js';\nimport 'react-virtualized-auto-sizer';\nimport 'sql-formatter-plus';\nimport '../../SQLEditor/standardSql/language.js';\nimport '@grafana/runtime';\nimport '../../SQLEditor/utils/debugger.js';\nimport '../../SQLEditor/standardSql/macros.js';\nimport '../../QueryEditor/visual-query-builder/AwesomeQueryBuilder.js';\nimport '../../QueryEditor/visual-query-builder/WhereRow.js';\nimport '../../QueryEditor/visual-query-builder/EditorField.js';\nimport 'rxjs';\nimport 'rxjs/operators';\n\nfunction OperationEditorBody({\n  provided,\n  flash,\n  isConflicting,\n  highlight,\n  index,\n  queryModeller,\n  onChange,\n  onRemove,\n  onToggle,\n  operation,\n  definition,\n  query,\n  timeRange,\n  onRunQuery,\n  datasource\n}) {\n  const theme = useTheme2();\n  const styles = getStyles(theme, isConflicting);\n  const shouldFlash = useFlash(flash);\n  const { current: id } = useRef(v4());\n  const onParamValueChanged = (paramIdx, value) => {\n    const update = { ...operation, params: [...operation.params] };\n    update.params[paramIdx] = value;\n    callParamChangedThenOnChange(definition, update, index, paramIdx, onChange);\n  };\n  const onAddRestParam = () => {\n    const update = { ...operation, params: [...operation.params, \"\"] };\n    callParamChangedThenOnChange(definition, update, index, operation.params.length, onChange);\n  };\n  const onRemoveRestParam = (paramIdx) => {\n    const update = {\n      ...operation,\n      params: [...operation.params.slice(0, paramIdx), ...operation.params.slice(paramIdx + 1)]\n    };\n    callParamChangedThenOnChange(definition, update, index, paramIdx, onChange);\n  };\n  let restParam;\n  if (definition.params.length > 0) {\n    const lastParamDef = definition.params[definition.params.length - 1];\n    if (lastParamDef.restParam) {\n      restParam = renderAddRestParamButton(lastParamDef, onAddRestParam, index, operation.params.length, styles);\n    }\n  }\n  return /* @__PURE__ */ React__default.createElement(\n    \"div\",\n    {\n      className: cx(styles.card, {\n        [styles.cardHighlight]: shouldFlash || highlight,\n        [styles.cardError]: isConflicting,\n        [styles.disabled]: operation.disabled\n      }),\n      ref: provided.innerRef,\n      ...provided.draggableProps,\n      \"data-testid\": `operations.${index}.wrapper`\n    },\n    /* @__PURE__ */ React__default.createElement(\n      OperationHeader,\n      {\n        operation,\n        dragHandleProps: provided.dragHandleProps,\n        definition,\n        index,\n        onChange,\n        onRemove,\n        onToggle,\n        queryModeller\n      }\n    ),\n    /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.body }, operation.params.map((param, paramIndex) => {\n      const paramDef = definition.params[Math.min(definition.params.length - 1, paramIndex)];\n      const Editor = getOperationParamEditor(paramDef);\n      return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.paramRow, key: `${paramIndex}-1` }, !paramDef.hideName && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.paramName }, /* @__PURE__ */ React__default.createElement(\"label\", { htmlFor: getOperationParamId(id, paramIndex) }, paramDef.name), paramDef.description && /* @__PURE__ */ React__default.createElement(Tooltip, { placement: \"top\", content: paramDef.description, theme: \"info\" }, /* @__PURE__ */ React__default.createElement(Icon, { name: \"info-circle\", size: \"sm\", className: styles.infoIcon }))), /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.paramValue }, /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 0.5, direction: \"row\", alignItems: \"center\", wrap: false }, /* @__PURE__ */ React__default.createElement(\n        Editor,\n        {\n          index: paramIndex,\n          paramDef,\n          value: operation.params[paramIndex],\n          operation,\n          operationId: id,\n          onChange: onParamValueChanged,\n          onRunQuery,\n          query,\n          datasource,\n          timeRange,\n          queryModeller\n        }\n      ), paramDef.restParam && (operation.params.length > definition.params.length || paramDef.optional) && /* @__PURE__ */ React__default.createElement(\n        Button,\n        {\n          \"data-testid\": `operations.${index}.remove-rest-param`,\n          size: \"sm\",\n          fill: \"text\",\n          icon: \"times\",\n          variant: \"secondary\",\n          title: `Remove ${paramDef.name}`,\n          onClick: () => onRemoveRestParam(paramIndex)\n        }\n      ))));\n    })),\n    restParam,\n    index < query.operations.length - 1 && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.arrow }, /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.arrowLine }), /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.arrowArrow }))\n  );\n}\nconst getStyles = (theme, isConflicting) => {\n  return {\n    cardWrapper: css({\n      alignItems: \"stretch\"\n    }),\n    error: css({\n      marginBottom: theme.spacing(1)\n    }),\n    card: css({\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.medium}`,\n      cursor: \"grab\",\n      borderRadius: theme.shape.radius.default,\n      position: \"relative\",\n      transition: \"all 0.5s ease-in 0s\",\n      height: isConflicting ? \"auto\" : \"100%\"\n    }),\n    disabled: css({\n      opacity: 0.5,\n      transition: \"none\"\n    }),\n    cardError: css({\n      boxShadow: `0px 0px 4px 0px ${theme.colors.warning.main}`,\n      border: `1px solid ${theme.colors.warning.main}`\n    }),\n    cardHighlight: css({\n      boxShadow: `0px 0px 4px 0px ${theme.colors.primary.border}`,\n      border: `1px solid ${theme.colors.primary.border}`\n    }),\n    infoIcon: css({\n      marginLeft: theme.spacing(0.5),\n      color: theme.colors.text.secondary,\n      \":hover\": {\n        color: theme.colors.text.primary\n      }\n    }),\n    body: css({\n      margin: theme.spacing(1, 1, 0.5, 1),\n      display: \"table\"\n    }),\n    paramRow: css({\n      label: \"paramRow\",\n      display: \"table-row\",\n      verticalAlign: \"middle\"\n    }),\n    paramName: css({\n      display: \"table-cell\",\n      padding: theme.spacing(0, 1, 0, 0),\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      verticalAlign: \"middle\",\n      height: \"32px\"\n    }),\n    paramValue: css({\n      label: \"paramValue\",\n      display: \"table-cell\",\n      verticalAlign: \"middle\"\n    }),\n    restParam: css({\n      padding: theme.spacing(0, 1, 1, 1)\n    }),\n    arrow: css({\n      position: \"absolute\",\n      top: \"0\",\n      right: \"-18px\",\n      display: \"flex\"\n    }),\n    arrowLine: css({\n      height: \"2px\",\n      width: \"8px\",\n      backgroundColor: theme.colors.border.strong,\n      position: \"relative\",\n      top: \"14px\"\n    }),\n    arrowArrow: css({\n      width: 0,\n      height: 0,\n      borderTop: `5px solid transparent`,\n      borderBottom: `5px solid transparent`,\n      borderLeft: `7px solid ${theme.colors.border.strong}`,\n      position: \"relative\",\n      top: \"10px\"\n    })\n  };\n};\nfunction useFlash(flash) {\n  const [keepFlash, setKeepFlash] = useState(true);\n  useEffect(() => {\n    let t;\n    if (flash) {\n      t = setTimeout(() => {\n        setKeepFlash(false);\n      }, 1e3);\n    } else {\n      setKeepFlash(true);\n    }\n    return () => clearTimeout(t);\n  }, [flash]);\n  return keepFlash && flash;\n}\nfunction callParamChangedThenOnChange(def, operation, operationIndex, paramIndex, onChange) {\n  if (def.paramChangedHandler) {\n    onChange(operationIndex, def.paramChangedHandler(paramIndex, operation, def));\n  } else {\n    onChange(operationIndex, operation);\n  }\n}\nfunction renderAddRestParamButton(paramDef, onAddRestParam, operationIndex, paramIndex, styles) {\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.restParam, key: `${paramIndex}-2` }, /* @__PURE__ */ React__default.createElement(\n    Button,\n    {\n      size: \"sm\",\n      icon: \"plus\",\n      title: `Add ${paramDef.name}`.trimEnd(),\n      variant: \"secondary\",\n      onClick: onAddRestParam,\n      \"data-testid\": `operations.${operationIndex}.add-rest-param`\n    },\n    paramDef.name\n  ));\n}\n\nexport { OperationEditorBody };\n//# sourceMappingURL=OperationEditorBody.js.map\n","import { cx, css } from '@emotion/css';\nimport React__default from 'react';\nimport { Draggable } from '@hello-pangea/dnd';\nimport '@grafana/data';\nimport { useTheme2, InlineField } from '@grafana/ui';\nimport { OperationEditorBody } from './OperationEditorBody.js';\n\nfunction OperationEditor({\n  operation,\n  index,\n  onRemove,\n  onToggle,\n  onChange,\n  onRunQuery,\n  queryModeller,\n  query,\n  datasource,\n  flash,\n  highlight,\n  timeRange,\n  isConflictingOperation\n}) {\n  const def = queryModeller.getOperationDefinition(operation.id);\n  const theme = useTheme2();\n  const isConflicting = isConflictingOperation ? isConflictingOperation(operation, query.operations) : false;\n  const styles = getStyles(theme);\n  if (!def) {\n    return /* @__PURE__ */ React__default.createElement(\"span\", null, \"Operation \", operation.id, \" not found\");\n  }\n  const isInvalid = (isDragging) => {\n    if (isDragging) {\n      return undefined;\n    }\n    return isConflicting ? true : undefined;\n  };\n  return /* @__PURE__ */ React__default.createElement(Draggable, { draggableId: `operation-${index}`, index }, (provided, snapshot) => /* @__PURE__ */ React__default.createElement(\n    InlineField,\n    {\n      error: \"You have conflicting label filters\",\n      invalid: isInvalid(snapshot.isDragging),\n      className: cx(styles.error, styles.cardWrapper)\n    },\n    /* @__PURE__ */ React__default.createElement(\n      OperationEditorBody,\n      {\n        provided,\n        flash,\n        highlight,\n        isConflicting,\n        index,\n        operation,\n        definition: def,\n        onChange,\n        onRemove,\n        onToggle,\n        queryModeller,\n        query,\n        timeRange,\n        onRunQuery,\n        datasource\n      }\n    )\n  ));\n}\nconst getStyles = (theme, isConflicting) => {\n  return {\n    cardWrapper: css({\n      alignItems: \"stretch\"\n    }),\n    error: css({\n      marginBottom: theme.spacing(1)\n    })\n  };\n};\n\nexport { OperationEditor };\n//# sourceMappingURL=OperationEditor.js.map\n","import { css } from '@emotion/css';\nimport React__default, { useState } from 'react';\nimport { DragDropContext, Droppable } from '@hello-pangea/dnd';\nimport { useMountedState, usePrevious } from 'react-use';\nimport '@grafana/data';\nimport { useStyles2, Cascader, Button } from '@grafana/ui';\nimport { OperationEditor } from './OperationEditor.js';\nimport '../../QueryEditor/types.js';\nimport 'lodash';\nimport '../../QueryEditor/EditorList.js';\nimport { EditorStack } from '../../QueryEditor/EditorStack.js';\nimport '../../QueryEditor/Space.js';\nimport '../../QueryEditor/QueryHeader.js';\nimport 'react-virtualized-auto-sizer';\nimport 'sql-formatter-plus';\nimport '../../SQLEditor/standardSql/language.js';\nimport 'uuid';\nimport '@grafana/runtime';\nimport '../../SQLEditor/utils/debugger.js';\nimport '../../SQLEditor/standardSql/macros.js';\nimport '../../QueryEditor/visual-query-builder/AwesomeQueryBuilder.js';\nimport '../../QueryEditor/visual-query-builder/WhereRow.js';\nimport '../../QueryEditor/visual-query-builder/EditorField.js';\nimport 'rxjs';\nimport 'rxjs/operators';\n\nfunction OperationList({\n  query,\n  datasource,\n  queryModeller,\n  onChange,\n  onRunQuery,\n  highlightedOp,\n  timeRange,\n  isConflictingOperation\n}) {\n  const styles = useStyles2(getStyles);\n  const { operations } = query;\n  const opsToHighlight = useOperationsHighlight(operations);\n  const [cascaderOpen, setCascaderOpen] = useState(false);\n  const onOperationChange = (index, update) => {\n    const updatedList = [...operations];\n    updatedList.splice(index, 1, update);\n    onChange({ ...query, operations: updatedList });\n  };\n  const onRemove = (index) => {\n    const updatedList = [...operations.slice(0, index), ...operations.slice(index + 1)];\n    onChange({ ...query, operations: updatedList });\n  };\n  const onToggle = (index) => {\n    onOperationChange(index, { ...operations[index], disabled: !operations[index].disabled });\n  };\n  const addOptions = queryModeller.getCategories().map((category) => {\n    return {\n      value: category,\n      label: category,\n      items: queryModeller.getOperationsForCategory(category).map((operation) => ({\n        value: operation.id,\n        label: operation.name,\n        isLeaf: true\n      }))\n    };\n  });\n  const onAddOperation = (value) => {\n    const operationDef = queryModeller.getOperationDefinition(value);\n    if (!operationDef) {\n      return;\n    }\n    onChange(operationDef.addOperationHandler(operationDef, query, queryModeller));\n    setCascaderOpen(false);\n  };\n  const onDragEnd = (result) => {\n    if (!result.destination) {\n      return;\n    }\n    const updatedList = [...operations];\n    const element = updatedList[result.source.index];\n    updatedList.splice(result.source.index, 1);\n    updatedList.splice(result.destination.index, 0, element);\n    onChange({ ...query, operations: updatedList });\n  };\n  const onCascaderBlur = () => {\n    setCascaderOpen(false);\n  };\n  return /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 1, direction: \"column\" }, /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 1 }, operations.length > 0 && /* @__PURE__ */ React__default.createElement(DragDropContext, { onDragEnd }, /* @__PURE__ */ React__default.createElement(Droppable, { droppableId: \"sortable-field-mappings\", direction: \"horizontal\" }, (provided) => /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.operationList, ref: provided.innerRef, ...provided.droppableProps }, operations.map((op, index) => {\n    return /* @__PURE__ */ React__default.createElement(\n      OperationEditor,\n      {\n        key: op.id + JSON.stringify(op.params) + index,\n        queryModeller,\n        index,\n        operation: op,\n        query,\n        datasource,\n        onChange: onOperationChange,\n        onRemove,\n        onToggle,\n        onRunQuery,\n        flash: opsToHighlight[index],\n        highlight: highlightedOp === op,\n        timeRange,\n        isConflictingOperation\n      }\n    );\n  }), provided.placeholder))), /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.addButton }, cascaderOpen ? /* @__PURE__ */ React__default.createElement(\n    Cascader,\n    {\n      options: addOptions,\n      onSelect: onAddOperation,\n      onBlur: onCascaderBlur,\n      autoFocus: true,\n      alwaysOpen: true,\n      hideActiveLevelLabel: true,\n      placeholder: \"Search\"\n    }\n  ) : /* @__PURE__ */ React__default.createElement(Button, { icon: \"plus\", variant: \"secondary\", onClick: () => setCascaderOpen(true), title: \"Add operation\" }, \"Operations\"))));\n}\nfunction useOperationsHighlight(operations) {\n  const isMounted = useMountedState();\n  const prevOperations = usePrevious(operations);\n  if (!isMounted()) {\n    return operations.map(() => false);\n  }\n  if (!prevOperations) {\n    return operations.map(() => true);\n  }\n  let newOps = [];\n  if (prevOperations.length - 1 === operations.length && operations.every((op) => prevOperations.includes(op))) {\n    return operations.map(() => false);\n  }\n  if (prevOperations.length + 1 === operations.length && prevOperations.every((op) => operations.includes(op))) {\n    const newOp = operations.find((op) => !prevOperations.includes(op));\n    newOps = operations.map((op) => {\n      return op === newOp;\n    });\n  } else {\n    newOps = operations.map((op, index) => {\n      var _a;\n      return !isSameOp(op.id, (_a = prevOperations[index]) == null ? undefined : _a.id);\n    });\n  }\n  return newOps;\n}\nfunction isSameOp(op1, op2) {\n  return op1 === op2 || `__${op1}_by` === op2 || op1 === `__${op2}_by`;\n}\nconst getStyles = (theme) => {\n  return {\n    heading: css({\n      label: \"heading\",\n      fontSize: 12,\n      fontWeight: theme.typography.fontWeightMedium,\n      marginBottom: 0\n    }),\n    operationList: css({\n      label: \"operationList\",\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      gap: theme.spacing(2)\n    }),\n    addButton: css({\n      label: \"addButton\",\n      width: 126,\n      paddingBottom: theme.spacing(1)\n    })\n  };\n};\n\nexport { OperationList };\n//# sourceMappingURL=OperationList.js.map\n","import { css } from '@emotion/css';\nimport React__default, { useState, useEffect } from 'react';\nimport '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { useStyles2, Tooltip, Button } from '@grafana/ui';\n\nconst QueryBuilderHints = ({\n  datasource,\n  query: visualQuery,\n  onChange,\n  data,\n  queryModeller,\n  buildVisualQueryFromString,\n  buildDataQueryFromQueryString,\n  buildQueryStringFromDataQuery\n}) => {\n  const [hints, setHints] = useState([]);\n  const styles = useStyles2(getStyles);\n  useEffect(() => {\n    var _a;\n    const dataQuery = buildDataQueryFromQueryString(queryModeller.renderQuery(visualQuery));\n    const hints2 = (_a = datasource.getQueryHints) == null ? undefined : _a.call(datasource, dataQuery, (data == null ? undefined : data.series) || []).filter((hint) => {\n      var _a2;\n      return (_a2 = hint.fix) == null ? undefined : _a2.action;\n    });\n    setHints(hints2 != null ? hints2 : []);\n  }, [datasource, visualQuery, data, queryModeller, buildDataQueryFromQueryString]);\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, hints.length > 0 && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.container }, hints.map((hint) => {\n    var _a, _b, _c, _d;\n    return /* @__PURE__ */ React__default.createElement(Tooltip, { content: `${hint.label} ${(_a = hint.fix) == null ? undefined : _a.label}`, key: hint.type }, /* @__PURE__ */ React__default.createElement(\n      Button,\n      {\n        onClick: () => {\n          var _a2, _b2, _c2;\n          reportInteraction(\"grafana_query_builder_hints_clicked\", {\n            hint: hint.type,\n            datasourceType: datasource.type\n          });\n          if ((_a2 = hint == null ? undefined : hint.fix) == null ? undefined : _a2.action) {\n            const dataQuery = buildDataQueryFromQueryString(queryModeller.renderQuery(visualQuery));\n            const newQuery = (_b2 = datasource.modifyQuery) == null ? undefined : _b2.call(datasource, dataQuery, hint.fix.action);\n            if (newQuery) {\n              const newVisualQuery = buildVisualQueryFromString(\n                (_c2 = buildQueryStringFromDataQuery(newQuery)) != null ? _c2 : \"\"\n              );\n              return onChange(newVisualQuery.query);\n            }\n          }\n        },\n        fill: \"outline\",\n        size: \"sm\",\n        className: styles.hint\n      },\n      \"hint: \",\n      ((_b = hint.fix) == null ? undefined : _b.title) || ((_d = (_c = hint.fix) == null ? undefined : _c.action) == null ? undefined : _d.type.toLowerCase().replace(\"_\", \" \"))\n    ));\n  })));\n};\nQueryBuilderHints.displayName = \"QueryBuilderHints\";\nconst getStyles = (theme) => {\n  return {\n    container: css`\n      display: flex;\n      align-items: start;\n    `,\n    hint: css`\n      margin-right: ${theme.spacing(1)};\n    `\n  };\n};\n\nexport { QueryBuilderHints };\n//# sourceMappingURL=QueryBuilderHints.js.map\n","import 'prismjs';\nimport React__default from 'react';\nimport { OperationExplainedBox } from './OperationExplainedBox.js';\nimport { RawQuery } from './RawQuery.js';\nimport '@grafana/data';\n\nfunction OperationListExplained({\n  query,\n  queryModeller,\n  stepNumber,\n  language,\n  onMouseEnter,\n  onMouseLeave\n}) {\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, query.operations.map((op, index) => {\n    var _a;\n    const def = queryModeller.getOperationDefinition(op.id);\n    if (!def) {\n      return `Operation ${op.id} not found`;\n    }\n    const title = def.renderer(op, def, queryModeller.innerQueryPlaceholder);\n    const body = def.explainHandler ? def.explainHandler(op, def) : (_a = def.documentation) != null ? _a : \"no docs\";\n    return /* @__PURE__ */ React__default.createElement(\n      \"div\",\n      {\n        key: index,\n        onMouseEnter: () => onMouseEnter == null ? undefined : onMouseEnter(op, index),\n        onMouseLeave: () => onMouseLeave == null ? undefined : onMouseLeave(op, index)\n      },\n      /* @__PURE__ */ React__default.createElement(\n        OperationExplainedBox,\n        {\n          stepNumber: index + stepNumber,\n          title: /* @__PURE__ */ React__default.createElement(RawQuery, { query: title, language }),\n          markdown: body\n        }\n      )\n    );\n  }));\n}\n\nexport { OperationListExplained };\n//# sourceMappingURL=OperationListExplained.js.map\n","import { memo } from 'react';\n\nimport { OperationExplainedBox, OperationListExplained, RawQuery } from '@grafana/plugin-ui';\nimport { Stack } from '@grafana/ui';\n\nimport { lokiGrammar } from '../../syntax';\nimport { lokiQueryModeller } from '../LokiQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { LokiVisualQuery } from '../types';\n\nexport const EXPLAIN_LABEL_FILTER_CONTENT = 'Fetch all log lines matching label filters.';\n\nexport interface Props {\n  query: string;\n}\n\nexport const LokiQueryBuilderExplained = memo<Props>(({ query }) => {\n  const visQuery = buildVisualQueryFromString(query || '').query;\n  const lang = { grammar: lokiGrammar, name: 'lokiql' };\n\n  return (\n    <Stack gap={0} direction=\"column\">\n      <OperationExplainedBox\n        stepNumber={1}\n        title={<RawQuery query={`${lokiQueryModeller.renderLabels(visQuery.labels)}`} language={lang} />}\n      >\n        {EXPLAIN_LABEL_FILTER_CONTENT}\n      </OperationExplainedBox>\n      <OperationListExplained<LokiVisualQuery>\n        stepNumber={2}\n        queryModeller={lokiQueryModeller}\n        query={visQuery}\n        language={lang}\n      />\n    </Stack>\n  );\n});\n\nLokiQueryBuilderExplained.displayName = 'LokiQueryBuilderExplained';\n","import { css } from '@emotion/css';\nimport { memo } from 'react';\n\nimport { GrafanaTheme2, toOption } from '@grafana/data';\nimport { EditorRows, FlexItem } from '@grafana/plugin-ui';\nimport { AutoSizeInput, IconButton, Select, useStyles2 } from '@grafana/ui';\n\nimport { LokiDatasource } from '../../datasource';\nimport { binaryScalarDefs } from '../binaryScalarOperations';\nimport { LokiVisualQueryBinary } from '../types';\n\nimport { LokiQueryBuilder } from './LokiQueryBuilder';\n\nexport interface Props {\n  nestedQuery: LokiVisualQueryBinary;\n  datasource: LokiDatasource;\n  index: number;\n  showExplain: boolean;\n  onChange: (index: number, update: LokiVisualQueryBinary) => void;\n  onRemove: (index: number) => void;\n  onRunQuery: () => void;\n}\n\nexport const NestedQuery = memo<Props>(\n  ({ nestedQuery, index, datasource, onChange, onRemove, onRunQuery, showExplain }) => {\n    const styles = useStyles2(getStyles);\n\n    return (\n      <div className={styles.card}>\n        <div className={styles.header}>\n          <div className={styles.name}>Operator</div>\n          <Select\n            aria-label=\"Select operator\"\n            width=\"auto\"\n            options={operators}\n            value={toOption(nestedQuery.operator)}\n            onChange={(value) => {\n              onChange(index, {\n                ...nestedQuery,\n                operator: value.value!,\n              });\n            }}\n          />\n          <div className={styles.name}>Vector matches</div>\n          <div className={styles.vectorMatchWrapper}>\n            <Select<LokiVisualQueryBinary['vectorMatchesType']>\n              width=\"auto\"\n              value={nestedQuery.vectorMatchesType || 'on'}\n              allowCustomValue\n              options={[\n                { value: 'on', label: 'on' },\n                { value: 'ignoring', label: 'ignoring' },\n              ]}\n              onChange={(val) => {\n                onChange(index, {\n                  ...nestedQuery,\n                  vectorMatchesType: val.value,\n                });\n              }}\n            />\n            <AutoSizeInput\n              className={styles.vectorMatchInput}\n              minWidth={20}\n              defaultValue={nestedQuery.vectorMatches}\n              onCommitChange={(evt) => {\n                onChange(index, {\n                  ...nestedQuery,\n                  vectorMatches: evt.currentTarget.value,\n                  vectorMatchesType: nestedQuery.vectorMatchesType || 'on',\n                });\n              }}\n            />\n          </div>\n          <FlexItem grow={1} />\n          <IconButton name=\"times\" size=\"sm\" onClick={() => onRemove(index)} tooltip=\"Remove nested query\" />\n        </div>\n        <div className={styles.body}>\n          <EditorRows>\n            <LokiQueryBuilder\n              showExplain={showExplain}\n              query={nestedQuery.query}\n              datasource={datasource}\n              onRunQuery={onRunQuery}\n              onChange={(update) => {\n                onChange(index, { ...nestedQuery, query: update });\n              }}\n            />\n          </EditorRows>\n        </div>\n      </div>\n    );\n  }\n);\n\nconst operators = binaryScalarDefs.map((def) => ({ label: def.sign, value: def.sign }));\n\nNestedQuery.displayName = 'NestedQuery';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    card: css({\n      label: 'card',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: theme.spacing(0.5),\n    }),\n    header: css({\n      label: 'header',\n      padding: theme.spacing(0.5, 0.5, 0.5, 1),\n      gap: theme.spacing(1),\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    name: css({\n      label: 'name',\n      whiteSpace: 'nowrap',\n    }),\n    body: css({\n      label: 'body',\n      paddingLeft: theme.spacing(2),\n    }),\n    vectorMatchInput: css({\n      label: 'vectorMatchInput',\n      marginLeft: -1,\n    }),\n    vectorMatchWrapper: css({\n      label: 'vectorMatchWrapper',\n      display: 'flex',\n    }),\n  };\n};\n","import { Stack } from '@grafana/ui';\n\nimport { LokiDatasource } from '../../datasource';\nimport { LokiVisualQuery, LokiVisualQueryBinary } from '../types';\n\nimport { NestedQuery } from './NestedQuery';\n\nexport interface Props {\n  query: LokiVisualQuery;\n  datasource: LokiDatasource;\n  showExplain: boolean;\n  onChange: (query: LokiVisualQuery) => void;\n  onRunQuery: () => void;\n}\n\nexport function NestedQueryList({ query, datasource, onChange, onRunQuery, showExplain }: Props) {\n  const nestedQueries = query.binaryQueries ?? [];\n\n  const onNestedQueryUpdate = (index: number, update: LokiVisualQueryBinary) => {\n    const updatedList = [...nestedQueries];\n    updatedList.splice(index, 1, update);\n    onChange({ ...query, binaryQueries: updatedList });\n  };\n\n  const onRemove = (index: number) => {\n    const updatedList = [...nestedQueries.slice(0, index), ...nestedQueries.slice(index + 1)];\n    onChange({ ...query, binaryQueries: updatedList });\n  };\n\n  return (\n    <Stack direction=\"column\" gap={1}>\n      {nestedQueries.map((nestedQuery, index) => (\n        <NestedQuery\n          key={index.toString()}\n          nestedQuery={nestedQuery}\n          index={index}\n          onChange={onNestedQueryUpdate}\n          datasource={datasource}\n          onRemove={onRemove}\n          onRunQuery={onRunQuery}\n          showExplain={showExplain}\n        />\n      ))}\n    </Stack>\n  );\n}\n","import { isEqual } from 'lodash';\nimport { memo, useEffect, useMemo, useState } from 'react';\nimport { usePrevious } from 'react-use';\n\nimport { DataSourceApi, getDefaultTimeRange, LoadingState, PanelData, SelectableValue, TimeRange } from '@grafana/data';\nimport {\n  EditorRow,\n  LabelFilters,\n  OperationExplainedBox,\n  OperationList,\n  OperationListExplained,\n  OperationsEditorRow,\n  QueryBuilderHints,\n  RawQuery,\n  QueryBuilderLabelFilter,\n  QueryBuilderOperation,\n} from '@grafana/plugin-ui';\n\nimport { testIds } from '../../components/LokiQueryEditor';\nimport { LokiDatasource } from '../../datasource';\nimport { escapeLabelValueInSelector } from '../../languageUtils';\nimport logqlGrammar from '../../syntax';\nimport { LokiQuery } from '../../types';\nimport { lokiQueryModeller } from '../LokiQueryModeller';\nimport { isConflictingFilter } from '../operationUtils';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { LokiOperationId, LokiVisualQuery } from '../types';\n\nimport { EXPLAIN_LABEL_FILTER_CONTENT } from './LokiQueryBuilderExplained';\nimport { NestedQueryList } from './NestedQueryList';\n\nexport const TIME_SPAN_TO_TRIGGER_SAMPLES = 5 * 60 * 1000;\nexport interface Props {\n  query: LokiVisualQuery;\n  datasource: LokiDatasource;\n  showExplain: boolean;\n  timeRange?: TimeRange;\n  onChange: (update: LokiVisualQuery) => void;\n  onRunQuery: () => void;\n}\nexport const LokiQueryBuilder = memo<Props>(({ datasource, query, onChange, onRunQuery, showExplain, timeRange }) => {\n  const [sampleData, setSampleData] = useState<PanelData>();\n  const [highlightedOp, setHighlightedOp] = useState<QueryBuilderOperation | undefined>(undefined);\n  const prevQuery = usePrevious(query);\n  const prevTimeRange = usePrevious(timeRange);\n\n  const onChangeLabels = (labels: QueryBuilderLabelFilter[]) => {\n    onChange({ ...query, labels });\n  };\n\n  const withTemplateVariableOptions = async (optionsPromise: Promise<string[]>): Promise<SelectableValue[]> => {\n    const options = await optionsPromise;\n    return [...datasource.getVariables(), ...options].map((value) => ({ label: value, value }));\n  };\n\n  const onGetLabelNames = async (forLabel: Partial<QueryBuilderLabelFilter>): Promise<string[]> => {\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n\n    const hasEqualityOperation = labelsToConsider.find(\n      (filter) => filter.op === '=' || (filter.op === '=~' && new RegExp(filter.value).test('') === false)\n    );\n    if (labelsToConsider.length === 0 || !hasEqualityOperation) {\n      return await datasource.languageProvider.fetchLabels({ timeRange });\n    }\n\n    const streamSelector = lokiQueryModeller.renderLabels(labelsToConsider);\n    const possibleLabelNames = await datasource.languageProvider.fetchLabels({\n      streamSelector,\n      timeRange,\n    });\n    const labelsNamesToConsider = labelsToConsider.map((l) => l.label);\n\n    // Filter out label names that are already selected\n    return possibleLabelNames.filter((label) => !labelsNamesToConsider.includes(label)).sort();\n  };\n\n  const onGetLabelValues = async (forLabel: Partial<QueryBuilderLabelFilter>) => {\n    if (!forLabel.label) {\n      return [];\n    }\n\n    let values;\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    // If we have no equality/regex operation with .*, we can't fetch series as it will throw an error, so we fetch label values\n    const hasEqualityOperation = labelsToConsider.find(\n      (filter) => filter.op === '=' || (filter.op === '=~' && new RegExp(filter.value).test('') === false)\n    );\n    if (labelsToConsider.length === 0 || !hasEqualityOperation) {\n      values = await datasource.languageProvider.fetchLabelValues(forLabel.label, { timeRange });\n    } else {\n      const streamSelector = lokiQueryModeller.renderLabels(labelsToConsider);\n      values = await datasource.languageProvider.fetchLabelValues(forLabel.label, {\n        streamSelector,\n        timeRange,\n      });\n    }\n\n    return values ? values.map((v) => escapeLabelValueInSelector(v, forLabel.op)) : []; // Escape values in return\n  };\n\n  const labelFilterRequired: boolean = useMemo(() => {\n    const { labels, operations: op } = query;\n    if (!labels.length && op.length) {\n      // Filter is required when operations are present (empty line contains operation is exception)\n      if (op.length === 1 && op[0].id === LokiOperationId.LineContains && op[0].params[0] === '') {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  }, [query]);\n\n  useEffect(() => {\n    const onGetSampleData = async () => {\n      const lokiQuery = { expr: lokiQueryModeller.renderQuery(query), refId: 'data-samples' };\n      const range = timeRange ?? getDefaultTimeRange();\n      const series = await datasource.getDataSamples(lokiQuery, range);\n      const sampleData = { series, state: LoadingState.Done, timeRange: range };\n      setSampleData(sampleData);\n    };\n\n    const updateBasedOnChangedTimeRange =\n      prevTimeRange &&\n      timeRange &&\n      (Math.abs(timeRange.to.valueOf() - prevTimeRange.to.valueOf()) > TIME_SPAN_TO_TRIGGER_SAMPLES ||\n        Math.abs(timeRange.from.valueOf() - prevTimeRange.from.valueOf()) > TIME_SPAN_TO_TRIGGER_SAMPLES);\n    const updateBasedOnChangedQuery = !isEqual(prevQuery, query);\n    if (updateBasedOnChangedTimeRange || updateBasedOnChangedQuery) {\n      onGetSampleData().catch(console.error);\n    }\n  }, [datasource, query, timeRange, prevQuery, prevTimeRange]);\n\n  const lang = { grammar: logqlGrammar, name: 'logql' };\n  return (\n    <div data-testid={testIds.editor}>\n      <EditorRow>\n        <LabelFilters\n          onGetLabelNames={(forLabel: Partial<QueryBuilderLabelFilter>) =>\n            withTemplateVariableOptions(onGetLabelNames(forLabel))\n          }\n          onGetLabelValues={(forLabel: Partial<QueryBuilderLabelFilter>) =>\n            withTemplateVariableOptions(onGetLabelValues(forLabel))\n          }\n          labelsFilters={query.labels}\n          onChange={onChangeLabels}\n          labelFilterRequired={labelFilterRequired}\n        />\n      </EditorRow>\n      {showExplain && (\n        <OperationExplainedBox\n          stepNumber={1}\n          title={<RawQuery query={`${lokiQueryModeller.renderLabels(query.labels)}`} language={lang} />}\n        >\n          {EXPLAIN_LABEL_FILTER_CONTENT}\n        </OperationExplainedBox>\n      )}\n      <OperationsEditorRow>\n        <OperationList\n          queryModeller={lokiQueryModeller}\n          query={query}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          datasource={datasource as DataSourceApi}\n          highlightedOp={highlightedOp}\n          isConflictingOperation={(operation: QueryBuilderOperation, otherOperations: QueryBuilderOperation[]) =>\n            operation.id === LokiOperationId.LabelFilter && isConflictingFilter(operation, otherOperations)\n          }\n        />\n        <QueryBuilderHints<LokiVisualQuery, LokiQuery>\n          datasource={datasource}\n          query={query}\n          onChange={onChange}\n          data={sampleData}\n          queryModeller={lokiQueryModeller}\n          buildVisualQueryFromString={buildVisualQueryFromString}\n          buildDataQueryFromQueryString={(queryString) => ({ expr: queryString, refId: 'hints' })}\n          buildQueryStringFromDataQuery={(query) => query.expr}\n        />\n      </OperationsEditorRow>\n      {showExplain && (\n        <OperationListExplained<LokiVisualQuery>\n          stepNumber={2}\n          queryModeller={lokiQueryModeller}\n          query={query}\n          language={lang}\n          onMouseEnter={(op) => {\n            setHighlightedOp(op);\n          }}\n          onMouseLeave={() => {\n            setHighlightedOp(undefined);\n          }}\n        />\n      )}\n      {query.binaryQueries && query.binaryQueries.length > 0 && (\n        <NestedQueryList\n          query={query}\n          datasource={datasource}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          showExplain={showExplain}\n        />\n      )}\n    </div>\n  );\n});\n\nLokiQueryBuilder.displayName = 'LokiQueryBuilder';\n","import { EditorRow, EditorFieldGroup, RawQuery } from '@grafana/plugin-ui';\n\nimport { lokiGrammar } from '../../syntax';\n\nexport interface Props {\n  query: string;\n}\n\nexport function QueryPreview({ query }: Props) {\n  return (\n    <EditorRow>\n      <EditorFieldGroup>\n        <RawQuery query={query} language={{ grammar: lokiGrammar, name: 'lokiql' }} />\n      </EditorFieldGroup>\n    </EditorRow>\n  );\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { useEffect, useReducer } from 'react';\n\nimport { TimeRange } from '@grafana/data';\n\nimport { testIds } from '../../components/LokiQueryEditor';\nimport { LokiDatasource } from '../../datasource';\nimport { LokiQuery } from '../../types';\nimport { lokiQueryModeller } from '../LokiQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { LokiVisualQuery } from '../types';\n\nimport { LokiQueryBuilder } from './LokiQueryBuilder';\nimport { QueryPreview } from './QueryPreview';\n\nexport interface Props {\n  query: LokiQuery;\n  datasource: LokiDatasource;\n  onChange: (update: LokiQuery) => void;\n  onRunQuery: () => void;\n  showExplain: boolean;\n  timeRange?: TimeRange;\n}\n\nexport interface State {\n  visQuery?: LokiVisualQuery;\n  expr: string;\n}\n\n/**\n * This component is here just to contain the translation logic between string query and the visual query builder model.\n */\nexport function LokiQueryBuilderContainer(props: Props) {\n  const { query, onChange, onRunQuery, datasource, showExplain, timeRange } = props;\n  const [state, dispatch] = useReducer(stateSlice.reducer, {\n    expr: query.expr,\n    // Use initial visual query only if query.expr is empty string\n    visQuery:\n      query.expr === ''\n        ? {\n            labels: [],\n            operations: [{ id: '__line_contains', params: [''] }],\n          }\n        : undefined,\n  });\n\n  // Only rebuild visual query if expr changes from outside\n  useEffect(() => {\n    dispatch(exprChanged(query.expr));\n  }, [query.expr]);\n\n  const onVisQueryChange = (visQuery: LokiVisualQuery) => {\n    const expr = lokiQueryModeller.renderQuery(visQuery);\n    dispatch(visualQueryChange({ visQuery, expr }));\n    onChange({ ...props.query, expr: expr });\n  };\n\n  if (!state.visQuery) {\n    return null;\n  }\n\n  return (\n    <>\n      <LokiQueryBuilder\n        query={state.visQuery}\n        datasource={datasource}\n        onChange={onVisQueryChange}\n        onRunQuery={onRunQuery}\n        showExplain={showExplain}\n        data-testid={testIds.editor}\n        timeRange={timeRange}\n      />\n      {query.expr !== '' && <QueryPreview query={query.expr} />}\n    </>\n  );\n}\n\nconst initialState: State = { expr: '' };\n\nconst stateSlice = createSlice({\n  name: 'loki-builder-container',\n  initialState,\n  reducers: {\n    visualQueryChange: (state, action: PayloadAction<{ visQuery: LokiVisualQuery; expr: string }>) => {\n      state.expr = action.payload.expr;\n      state.visQuery = action.payload.visQuery;\n    },\n    exprChanged: (state, action: PayloadAction<string>) => {\n      if (!state.visQuery || state.expr !== action.payload) {\n        state.expr = action.payload;\n        const parseResult = buildVisualQueryFromString(action.payload);\n        state.visQuery = parseResult.query;\n      }\n    },\n  },\n});\n\nconst { visualQueryChange, exprChanged } = stateSlice.actions;\n","import { useReducer } from 'react';\nvar toggleReducer = function (state, nextValue) {\n    return typeof nextValue === 'boolean' ? nextValue : !state;\n};\nvar useToggle = function (initialValue) {\n    return useReducer(toggleReducer, initialValue);\n};\nexport default useToggle;\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport { useToggle } from 'react-use';\nimport { getValueFormat } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { useStyles2, Collapse, Tooltip, Icon } from '@grafana/ui';\nimport '../../QueryEditor/types.js';\nimport 'lodash';\nimport '../../QueryEditor/EditorList.js';\nimport { EditorStack } from '../../QueryEditor/EditorStack.js';\nimport '../../QueryEditor/Space.js';\nimport '../../QueryEditor/QueryHeader.js';\nimport 'react-virtualized-auto-sizer';\nimport 'sql-formatter-plus';\nimport '../../SQLEditor/standardSql/language.js';\nimport 'uuid';\nimport '../../SQLEditor/utils/debugger.js';\nimport '../../SQLEditor/standardSql/macros.js';\nimport '../../QueryEditor/visual-query-builder/AwesomeQueryBuilder.js';\nimport '../../QueryEditor/visual-query-builder/WhereRow.js';\nimport '../../QueryEditor/visual-query-builder/EditorField.js';\nimport 'rxjs';\nimport 'rxjs/operators';\n\nfunction QueryOptionGroup({ title, children, collapsedInfo, queryStats }) {\n  const [isOpen, toggleOpen] = useToggle(false);\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.wrapper }, /* @__PURE__ */ React__default.createElement(\n    Collapse,\n    {\n      className: styles.collapse,\n      collapsible: true,\n      isOpen,\n      onToggle: toggleOpen,\n      label: /* @__PURE__ */ React__default.createElement(EditorStack, { gap: 0 }, /* @__PURE__ */ React__default.createElement(\"h6\", { className: styles.title }, title), !isOpen && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.description }, collapsedInfo.map((x, i) => /* @__PURE__ */ React__default.createElement(\"span\", { key: i }, x))))\n    },\n    /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.body }, children)\n  ), queryStats && config.featureToggles.lokiQuerySplitting && /* @__PURE__ */ React__default.createElement(Tooltip, { content: \"Note: the query will be split into multiple parts and executed in sequence. Query limits will only apply each individual part.\" }, /* @__PURE__ */ React__default.createElement(Icon, { tabIndex: 0, name: \"info-circle\", className: styles.tooltip, size: \"sm\" })), queryStats && /* @__PURE__ */ React__default.createElement(\"p\", { className: styles.stats }, generateQueryStats(queryStats)));\n}\nconst getStyles = (theme) => {\n  return {\n    collapse: css({\n      backgroundColor: \"unset\",\n      border: \"unset\",\n      marginBottom: 0,\n      [\"> button\"]: {\n        padding: theme.spacing(0, 1)\n      }\n    }),\n    wrapper: css({\n      width: \"100%\",\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"baseline\"\n    }),\n    title: css({\n      flexGrow: 1,\n      overflow: \"hidden\",\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      margin: 0\n    }),\n    description: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.bodySmall.fontWeight,\n      paddingLeft: theme.spacing(2),\n      gap: theme.spacing(2),\n      display: \"flex\"\n    }),\n    body: css({\n      display: \"flex\",\n      gap: theme.spacing(2),\n      flexWrap: \"wrap\"\n    }),\n    stats: css({\n      margin: \"0px\",\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize\n    }),\n    tooltip: css({\n      marginRight: theme.spacing(0.25)\n    })\n  };\n};\nconst generateQueryStats = (queryStats) => {\n  if (queryStats.message) {\n    return queryStats.message;\n  }\n  return `This query will process approximately ${convertUnits(queryStats)}.`;\n};\nconst convertUnits = (queryStats) => {\n  const { text, suffix } = getValueFormat(\"bytes\")(queryStats.bytes, 1);\n  return text + suffix;\n};\n\nexport { QueryOptionGroup };\n//# sourceMappingURL=QueryOptionGroup.js.map\n","import { trim } from 'lodash';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport * as React from 'react';\n\nimport { CoreApp, isValidGrafanaDuration, LogSortOrderChangeEvent, LogsSortOrder, store } from '@grafana/data';\nimport { EditorField, EditorRow, QueryOptionGroup } from '@grafana/plugin-ui';\nimport { getAppEvents } from '@grafana/runtime';\nimport { AutoSizeInput, RadioButtonGroup } from '@grafana/ui';\n\nimport {\n  getQueryDirectionLabel,\n  preprocessMaxLines,\n  queryDirections,\n  queryTypeOptions,\n} from '../../components/LokiOptionFields';\nimport { placeHolderScopedVars } from '../../components/monaco-query-field/monaco-completion-provider/validation';\nimport { LokiDatasource } from '../../datasource';\nimport { getLokiQueryType, isLogsQuery } from '../../queryUtils';\nimport { LokiQuery, LokiQueryDirection, LokiQueryType, QueryStats } from '../../types';\n\nexport interface Props {\n  query: LokiQuery;\n  onChange: (update: LokiQuery) => void;\n  onRunQuery: () => void;\n  app?: CoreApp;\n  queryStats: QueryStats | null;\n  datasource: LokiDatasource;\n}\n\nexport const LokiQueryBuilderOptions = React.memo<Props>(\n  ({ app, query, onChange, onRunQuery, queryStats, datasource }) => {\n    const maxLines = datasource.maxLines;\n\n    useEffect(() => {\n      if (app !== CoreApp.Explore && app !== CoreApp.Dashboard && app !== CoreApp.PanelEditor) {\n        return;\n      }\n      // Initialize the query direction according to the current environment.\n      if (!query.direction) {\n        onChange({ ...query, direction: getDefaultQueryDirection(app) });\n      }\n    }, [app, onChange, query]);\n\n    useEffect(() => {\n      if (query.step && !isValidGrafanaDuration(`${query.step}`) && parseInt(query.step, 10)) {\n        onChange({\n          ...query,\n          step: `${parseInt(query.step, 10)}s`,\n        });\n      }\n    }, [onChange, query]);\n\n    const onQueryTypeChange = (value: LokiQueryType) => {\n      onChange({ ...query, queryType: value });\n      onRunQuery();\n    };\n\n    const onQueryDirectionChange = useCallback(\n      (value: LokiQueryDirection) => {\n        onChange({ ...query, direction: value });\n        onRunQuery();\n      },\n      [onChange, onRunQuery, query]\n    );\n\n    const onLegendFormatChanged = (evt: React.FormEvent<HTMLInputElement>) => {\n      onChange({ ...query, legendFormat: evt.currentTarget.value });\n      onRunQuery();\n    };\n\n    function onMaxLinesChange(e: React.SyntheticEvent<HTMLInputElement>) {\n      const newMaxLines = preprocessMaxLines(e.currentTarget.value);\n      if (query.maxLines !== newMaxLines) {\n        onChange({ ...query, maxLines: newMaxLines });\n        onRunQuery();\n      }\n    }\n\n    function onStepChange(e: React.SyntheticEvent<HTMLInputElement>) {\n      onChange({ ...query, step: trim(e.currentTarget.value) });\n      onRunQuery();\n    }\n\n    useEffect(() => {\n      if (app !== CoreApp.Dashboard && app !== CoreApp.PanelEditor) {\n        return;\n      }\n      const subscription = getAppEvents().subscribe(LogSortOrderChangeEvent, (sortEvent: LogSortOrderChangeEvent) => {\n        if (query.direction === LokiQueryDirection.Scan) {\n          return;\n        }\n        const newDirection =\n          sortEvent.payload.order === LogsSortOrder.Ascending\n            ? LokiQueryDirection.Forward\n            : LokiQueryDirection.Backward;\n        if (newDirection !== query.direction) {\n          onQueryDirectionChange(newDirection);\n        }\n      });\n      return () => {\n        subscription.unsubscribe();\n      };\n    }, [app, onQueryDirectionChange, query.direction]);\n\n    let queryType = getLokiQueryType(query);\n    const interpolatedQueries = datasource.interpolateVariablesInQueries([query], placeHolderScopedVars);\n    const isLogQuery = isLogsQuery(interpolatedQueries[0]?.expr ?? '');\n    const filteredQueryTypeOptions = isLogQuery\n      ? queryTypeOptions.filter((o) => o.value !== LokiQueryType.Instant)\n      : queryTypeOptions;\n\n    // if the state's queryType is still Instant, trigger a change to range for log queries\n    if (isLogQuery && queryType === LokiQueryType.Instant) {\n      onChange({ ...query, queryType: LokiQueryType.Range });\n      queryType = LokiQueryType.Range;\n    }\n\n    const isValidStep = useMemo(() => {\n      if (!query.step) {\n        return true;\n      }\n\n      if (typeof query.step === 'string') {\n        // If we use a variable as step, we consider it valid\n        if (datasource.getVariables().includes(query.step)) {\n          return true;\n        }\n        // Check if the step is a valid Grafana duration\n        return isValidGrafanaDuration(query.step) && !isNaN(parseInt(query.step, 10));\n      }\n\n      return false;\n    }, [query.step, datasource]);\n\n    return (\n      <EditorRow>\n        <QueryOptionGroup\n          title=\"Options\"\n          collapsedInfo={getCollapsedInfo(query, queryType, maxLines, isLogQuery, isValidStep, query.direction)}\n          queryStats={queryStats}\n        >\n          <EditorField\n            label=\"Legend\"\n            tooltip=\"Series name override or template. Ex. {{hostname}} will be replaced with label value for hostname.\"\n          >\n            <AutoSizeInput\n              placeholder=\"{{label}}\"\n              type=\"string\"\n              minWidth={14}\n              defaultValue={query.legendFormat}\n              onCommitChange={onLegendFormatChanged}\n            />\n          </EditorField>\n          {filteredQueryTypeOptions.length > 1 && (\n            <EditorField label=\"Type\">\n              <RadioButtonGroup options={filteredQueryTypeOptions} value={queryType} onChange={onQueryTypeChange} />\n            </EditorField>\n          )}\n          {isLogQuery && (\n            <>\n              <EditorField label=\"Line limit\" tooltip=\"Upper limit for number of log lines returned by query.\">\n                <AutoSizeInput\n                  className=\"width-4\"\n                  placeholder={maxLines.toString()}\n                  type=\"number\"\n                  min={0}\n                  defaultValue={query.maxLines?.toString() ?? ''}\n                  onCommitChange={onMaxLinesChange}\n                />\n              </EditorField>\n              <EditorField label=\"Direction\" tooltip=\"Direction to search for logs.\">\n                <RadioButtonGroup\n                  options={queryDirections}\n                  value={query.direction ?? getDefaultQueryDirection(app)}\n                  onChange={onQueryDirectionChange}\n                />\n              </EditorField>\n            </>\n          )}\n          {!isLogQuery && (\n            <>\n              <EditorField\n                label=\"Step\"\n                tooltip=\"Use the step parameter when making metric queries to Loki. If not filled, Grafana's calculated interval will be used. Example valid values: 1s, 5m, 10h, 1d.\"\n                invalid={!isValidStep}\n                error={'Invalid step. Example valid values: 1s, 5m, 10h, 1d.'}\n              >\n                <AutoSizeInput\n                  className=\"width-6\"\n                  placeholder={'auto'}\n                  type=\"string\"\n                  value={query.step ?? ''}\n                  onCommitChange={onStepChange}\n                />\n              </EditorField>\n            </>\n          )}\n        </QueryOptionGroup>\n      </EditorRow>\n    );\n  }\n);\n\nfunction getCollapsedInfo(\n  query: LokiQuery,\n  queryType: LokiQueryType,\n  maxLines: number,\n  isLogQuery: boolean,\n  isValidStep: boolean,\n  direction: LokiQueryDirection | undefined\n): string[] {\n  const queryTypeLabel = queryTypeOptions.find((x) => x.value === queryType);\n\n  const items: string[] = [];\n\n  if (query.legendFormat) {\n    items.push(`Legend: ${query.legendFormat}`);\n  }\n\n  items.push(`Type: ${queryTypeLabel?.label}`);\n\n  if (isLogQuery && direction) {\n    items.push(`Line limit: ${query.maxLines ?? maxLines}`);\n    items.push(`Direction: ${getQueryDirectionLabel(direction)}`);\n  } else {\n    if (query.step) {\n      items.push(`Step: ${isValidStep ? query.step : 'Invalid value'}`);\n    }\n  }\n\n  return items;\n}\n\nfunction getDefaultQueryDirection(app?: CoreApp) {\n  if (app !== CoreApp.Explore) {\n    /**\n     * The default direction is backward because the default sort order is Descending.\n     * See:\n     * - public/app/features/explore/Logs/Logs.tsx\n     * - public/app/plugins/panel/logs/module.tsx\n     */\n    return LokiQueryDirection.Backward;\n  }\n  // See app/features/explore/Logs/utils/logs\n  const key = 'grafana.explore.logs.sortOrder';\n  const storedOrder = store.get(key) || LogsSortOrder.Descending;\n  return storedOrder === LogsSortOrder.Ascending ? LokiQueryDirection.Forward : LokiQueryDirection.Backward;\n}\n\nLokiQueryBuilderOptions.displayName = 'LokiQueryBuilderOptions';\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { testIds } from '../../components/LokiQueryEditor';\nimport { LokiQueryField } from '../../components/LokiQueryField';\nimport { LokiQueryEditorProps } from '../../components/types';\n\nimport { LokiQueryBuilderExplained } from './LokiQueryBuilderExplained';\n\ntype Props = LokiQueryEditorProps & {\n  showExplain: boolean;\n};\n\nexport function LokiQueryCodeEditor({\n  query,\n  datasource,\n  range,\n  onRunQuery,\n  onChange,\n  data,\n  app,\n  showExplain,\n  history,\n}: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.wrapper}>\n      <LokiQueryField\n        datasource={datasource}\n        query={query}\n        range={range}\n        onRunQuery={onRunQuery}\n        onChange={onChange}\n        history={history}\n        data={data}\n        app={app}\n        data-testid={testIds.editor}\n      />\n      {showExplain && <LokiQueryBuilderExplained query={query.expr} />}\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css({\n      maxWidth: '100%',\n      '.gf-form': {\n        marginBottom: 0.5,\n      },\n    }),\n    buttonGroup: css({\n      border: `1px solid ${theme.colors.border.medium}`,\n      borderTop: 'none',\n      padding: theme.spacing(0.5, 0.5, 0.5, 0.5),\n      marginBottom: theme.spacing(0.5),\n      display: 'flex',\n      flexGrow: 1,\n      justifyContent: 'end',\n      fontSize: theme.typography.bodySmall.fontSize,\n    }),\n    hint: css({\n      color: theme.colors.text.disabled,\n      whiteSpace: 'nowrap',\n      cursor: 'help',\n    }),\n  };\n};\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { RawQuery } from '@grafana/plugin-ui';\nimport { Button, Card, useStyles2 } from '@grafana/ui';\n\nimport logqlGrammar from '../../syntax';\nimport { lokiQueryModeller } from '../LokiQueryModeller';\nimport { LokiQueryPattern } from '../types';\n\ntype Props = {\n  pattern: LokiQueryPattern;\n  hasNewQueryOption: boolean;\n  hasPreviousQuery: boolean;\n  selectedPatternName: string | null;\n  setSelectedPatternName: (name: string | null) => void;\n  onPatternSelect: (pattern: LokiQueryPattern, selectAsNewQuery?: boolean) => void;\n};\n\nexport const QueryPattern = (props: Props) => {\n  const { pattern, onPatternSelect, hasNewQueryOption, hasPreviousQuery, selectedPatternName, setSelectedPatternName } =\n    props;\n\n  const styles = useStyles2(getStyles);\n  const lang = { grammar: logqlGrammar, name: 'logql' };\n\n  return (\n    <Card className={styles.card}>\n      <Card.Heading>{pattern.name}</Card.Heading>\n      <div className={styles.rawQueryContainer}>\n        <RawQuery\n          query={lokiQueryModeller.renderQuery({ labels: [], operations: pattern.operations })}\n          language={lang}\n          className={styles.rawQuery}\n        />\n      </div>\n      <Card.Actions>\n        {selectedPatternName !== pattern.name ? (\n          <Button\n            size=\"sm\"\n            onClick={() => {\n              if (hasPreviousQuery) {\n                // If user has previous query, we need to confirm that they want to replace it\n                setSelectedPatternName(pattern.name);\n              } else {\n                onPatternSelect(pattern);\n              }\n            }}\n          >\n            Use this query\n          </Button>\n        ) : (\n          <>\n            <div className={styles.spacing}>\n              {`If you would like to use this query, ${\n                hasNewQueryOption\n                  ? 'you can either replace your current query or create a new query'\n                  : 'your current query will be replaced'\n              }.`}\n            </div>\n            <Button size=\"sm\" fill=\"outline\" onClick={() => setSelectedPatternName(null)}>\n              Back\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={() => {\n                onPatternSelect(pattern);\n              }}\n            >\n              Apply to query\n            </Button>\n            {hasNewQueryOption && (\n              <Button\n                size=\"sm\"\n                onClick={() => {\n                  onPatternSelect(pattern, true);\n                }}\n              >\n                Create new query\n              </Button>\n            )}\n          </>\n        )}\n      </Card.Actions>\n    </Card>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    card: css({\n      width: '49.5%',\n      display: 'flex',\n      flexDirection: 'column',\n    }),\n    rawQueryContainer: css({\n      flexGrow: 1,\n    }),\n    rawQuery: css({\n      backgroundColor: theme.colors.background.primary,\n      padding: theme.spacing(1),\n      marginTop: theme.spacing(1),\n    }),\n    spacing: css({\n      marginBottom: theme.spacing(1),\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { capitalize } from 'lodash';\nimport { useMemo, useState } from 'react';\n\nimport { CoreApp, GrafanaTheme2, getNextRefId } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { DataQuery } from '@grafana/schema';\nimport { Button, Collapse, Modal, useStyles2 } from '@grafana/ui';\n\nimport { LokiQuery } from '../../types';\nimport { lokiQueryModeller } from '../LokiQueryModeller';\nimport { operationDefinitions } from '../operations';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { LokiOperationId, LokiQueryPattern, LokiQueryPatternType, LokiVisualQueryOperationCategory } from '../types';\n\nimport { QueryPattern } from './QueryPattern';\n\ntype Props = {\n  isOpen: boolean;\n  query: LokiQuery;\n  queries: DataQuery[] | undefined;\n  app?: CoreApp;\n  onClose: () => void;\n  onChange: (query: LokiQuery) => void;\n  onAddQuery?: (query: LokiQuery) => void;\n};\n\nconst keepOperationCategories: string[] = [\n  LokiVisualQueryOperationCategory.Formats,\n  LokiVisualQueryOperationCategory.LineFilters,\n  LokiVisualQueryOperationCategory.LabelFilters,\n];\nconst excludeOperationIds: string[] = [LokiOperationId.Unwrap];\nconst keepOperations = operationDefinitions\n  .filter(\n    (operation) =>\n      operation.category &&\n      keepOperationCategories.includes(operation.category) &&\n      !excludeOperationIds.includes(operation.id)\n  )\n  .map((operation) => operation.id);\n\nexport const QueryPatternsModal = (props: Props) => {\n  const { isOpen, onClose, onChange, onAddQuery, query, queries, app } = props;\n  const [openTabs, setOpenTabs] = useState<string[]>([]);\n  const [selectedPatternName, setSelectedPatternName] = useState<string | null>(null);\n\n  const styles = useStyles2(getStyles);\n  const hasNewQueryOption = !!onAddQuery;\n  const hasPreviousQuery = useMemo(\n    () => buildVisualQueryFromString(query.expr).query.operations.length > 0,\n    [query.expr]\n  );\n\n  const onPatternSelect = (pattern: LokiQueryPattern, selectAsNewQuery = false) => {\n    const visualQuery = buildVisualQueryFromString(selectAsNewQuery ? '' : query.expr);\n    reportInteraction('grafana_loki_query_patterns_selected', {\n      version: 'v2',\n      app: app ?? '',\n      editorMode: query.editorMode,\n      selectedPattern: pattern.name,\n      preSelectedOperationsCount: visualQuery.query.operations.length,\n      preSelectedLabelsCount: visualQuery.query.labels.length,\n      createNewQuery: hasNewQueryOption && selectAsNewQuery,\n    });\n\n    // Filter operations in the original query except those we configured to keep\n    visualQuery.query.operations = visualQuery.query.operations.filter((op) => keepOperations.includes(op.id));\n    // Filter operations in the pattern that are present in the original query\n    const patternOperations = pattern.operations.filter(\n      (patternOp) => visualQuery.query.operations.findIndex((op) => op.id === patternOp.id) < 0\n    );\n    visualQuery.query.operations = [...visualQuery.query.operations, ...patternOperations];\n\n    if (hasNewQueryOption && selectAsNewQuery) {\n      onAddQuery({\n        ...query,\n        refId: getNextRefId(queries ?? [query]),\n        expr: lokiQueryModeller.renderQuery(visualQuery.query),\n      });\n    } else {\n      onChange({\n        ...query,\n        expr: lokiQueryModeller.renderQuery(visualQuery.query),\n      });\n    }\n    setSelectedPatternName(null);\n    onClose();\n  };\n\n  return (\n    <Modal isOpen={isOpen} title=\"Kick start your query\" onDismiss={onClose} className={styles.modal}>\n      <div className={styles.spacing}>\n        Kick start your query by selecting one of these queries. You can then continue to complete your query.\n      </div>\n      {Object.values(LokiQueryPatternType).map((patternType) => {\n        return (\n          <Collapse\n            key={patternType}\n            label={`${capitalize(patternType)} query starters`}\n            isOpen={openTabs.includes(patternType)}\n            collapsible={true}\n            onToggle={() =>\n              setOpenTabs((tabs) =>\n                // close tab if it's already open, otherwise open it\n                tabs.includes(patternType) ? tabs.filter((t) => t !== patternType) : [...tabs, patternType]\n              )\n            }\n          >\n            <div className={styles.cardsContainer}>\n              {lokiQueryModeller\n                .getQueryPatterns()\n                .filter((pattern) => pattern.type === patternType)\n                .map((pattern) => (\n                  <QueryPattern\n                    key={pattern.name}\n                    pattern={pattern}\n                    hasNewQueryOption={hasNewQueryOption}\n                    hasPreviousQuery={hasPreviousQuery}\n                    onPatternSelect={onPatternSelect}\n                    selectedPatternName={selectedPatternName}\n                    setSelectedPatternName={setSelectedPatternName}\n                  />\n                ))}\n            </div>\n          </Collapse>\n        );\n      })}\n      <Button variant=\"secondary\" onClick={onClose}>\n        Close\n      </Button>\n    </Modal>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    cardsContainer: css({\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'space-between',\n    }),\n    spacing: css({\n      marginBottom: theme.spacing(1),\n    }),\n    modal: css({\n      width: '85vw',\n      [theme.breakpoints.down('md')]: {\n        width: '100%',\n      },\n    }),\n  };\n};\n","import { QueryEditorMode } from '@grafana/plugin-ui';\n\nimport { LokiQuery, LokiQueryType } from '../types';\n\nconst queryEditorModeDefaultLocalStorageKey = 'LokiQueryEditorModeDefault';\n\nexport function changeEditorMode(query: LokiQuery, editorMode: QueryEditorMode, onChange: (query: LokiQuery) => void) {\n  // If empty query store new mode as default\n  if (query.expr === '') {\n    window.localStorage.setItem(queryEditorModeDefaultLocalStorageKey, editorMode);\n  }\n\n  onChange({ ...query, editorMode });\n}\n\nexport function getDefaultEditorMode(expr: string) {\n  // If we already have an expression default to code view\n  if (expr != null && expr !== '') {\n    return QueryEditorMode.Code;\n  }\n\n  const value: string | null = window.localStorage.getItem(queryEditorModeDefaultLocalStorageKey);\n  switch (value) {\n    case 'code':\n      return QueryEditorMode.Code;\n\n    case 'builder':\n    default:\n      return QueryEditorMode.Builder;\n  }\n}\n\n/**\n * Returns query with defaults, and boolean true/false depending on change was required\n */\nexport function getQueryWithDefaults(query: LokiQuery): LokiQuery {\n  // If no expr (ie new query) then default to builder\n  let result = query;\n\n  if (!query.editorMode) {\n    result = { ...query, editorMode: getDefaultEditorMode(query.expr) };\n  }\n\n  if (query.expr == null) {\n    result = { ...result, expr: '' };\n  }\n\n  if (query.queryType == null) {\n    // Default to range query\n    result = { ...result, queryType: LokiQueryType.Range };\n  }\n\n  return result;\n}\n","import { DateTime, isDateTime, TimeRange } from '@grafana/data';\n\nimport { LokiQueryType } from '../types';\n\n/**\n * This function compares two time values. If the first is absolute, it compares them using `DateTime.isSame`.\n *\n * @param {(DateTime | string)} time1\n * @param {(DateTime | string | undefined)} time2\n */\nfunction compareTime(time1: DateTime | string | undefined, time2: DateTime | string | undefined) {\n  if (!time1 || !time2) {\n    return false;\n  }\n\n  const isAbsolute = isDateTime(time1);\n\n  if (isAbsolute) {\n    return time1.isSame(time2);\n  }\n\n  return time1 === time2;\n}\n\nexport function shouldUpdateStats(\n  query: string,\n  prevQuery: string | undefined,\n  timeRange: TimeRange | undefined,\n  prevTimeRange: TimeRange | undefined,\n  queryType: LokiQueryType | undefined,\n  prevQueryType: LokiQueryType | undefined\n): boolean {\n  if (prevQuery === undefined || query.trim() !== prevQuery.trim() || queryType !== prevQueryType) {\n    return true;\n  }\n\n  if (\n    compareTime(timeRange?.raw.from, prevTimeRange?.raw.from) &&\n    compareTime(timeRange?.raw.to, prevTimeRange?.raw.to)\n  ) {\n    return false;\n  }\n\n  return true;\n}\n","import { isEqual } from 'lodash';\nimport { memo, SyntheticEvent, useCallback, useEffect, useId, useState } from 'react';\nimport { usePrevious } from 'react-use';\n\nimport { CoreApp, LoadingState } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport {\n  EditorHeader,\n  EditorRows,\n  FlexItem,\n  QueryEditorModeToggle,\n  QueryHeaderSwitch,\n  QueryEditorMode,\n} from '@grafana/plugin-ui';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Button, ConfirmModal, Space, Stack } from '@grafana/ui';\n\nimport { LabelBrowserModal } from '../querybuilder/components/LabelBrowserModal';\nimport { LokiQueryBuilderContainer } from '../querybuilder/components/LokiQueryBuilderContainer';\nimport { LokiQueryBuilderOptions } from '../querybuilder/components/LokiQueryBuilderOptions';\nimport { LokiQueryCodeEditor } from '../querybuilder/components/LokiQueryCodeEditor';\nimport { QueryPatternsModal } from '../querybuilder/components/QueryPatternsModal';\nimport { buildVisualQueryFromString } from '../querybuilder/parsing';\nimport { changeEditorMode, getQueryWithDefaults } from '../querybuilder/state';\nimport { LokiQuery, QueryStats } from '../types';\n\nimport { shouldUpdateStats } from './stats';\nimport { LokiQueryEditorProps } from './types';\n\nexport const testIds = {\n  editor: 'loki-editor',\n};\n\nexport const lokiQueryEditorExplainKey = 'LokiQueryEditorExplainDefault';\n\nexport const LokiQueryEditor = memo<LokiQueryEditorProps>((props) => {\n  const id = useId();\n  const { onChange, onRunQuery, onAddQuery, data, app, queries, datasource, range: timeRange } = props;\n  const [parseModalOpen, setParseModalOpen] = useState(false);\n  const [queryPatternsModalOpen, setQueryPatternsModalOpen] = useState(false);\n  const [dataIsStale, setDataIsStale] = useState(false);\n  const [labelBrowserVisible, setLabelBrowserVisible] = useState(false);\n  const [queryStats, setQueryStats] = useState<QueryStats | null>(null);\n  const [explain, setExplain] = useState(window.localStorage.getItem(lokiQueryEditorExplainKey) === 'true');\n\n  const previousTimeRange = usePrevious(timeRange);\n\n  const query = getQueryWithDefaults(props.query);\n  const previousQueryExpr = usePrevious(query.expr);\n  const previousQueryType = usePrevious(query.queryType);\n\n  // This should be filled in from the defaults by now.\n  const editorMode = query.editorMode!;\n\n  const onExplainChange = (event: SyntheticEvent<HTMLInputElement>) => {\n    window.localStorage.setItem(lokiQueryEditorExplainKey, event.currentTarget.checked ? 'true' : 'false');\n    setExplain(event.currentTarget.checked);\n  };\n\n  const onEditorModeChange = useCallback(\n    (newEditorMode: QueryEditorMode) => {\n      reportInteraction('grafana_loki_editor_mode_clicked', {\n        newEditor: newEditorMode,\n        previousEditor: query.editorMode ?? '',\n        newQuery: !query.expr,\n        app: app ?? '',\n      });\n\n      if (newEditorMode === QueryEditorMode.Builder) {\n        const result = buildVisualQueryFromString(query.expr || '');\n        // If there are errors, give user a chance to decide if they want to go to builder as that can lose some data.\n        if (result.errors.length) {\n          setParseModalOpen(true);\n          return;\n        }\n      }\n      changeEditorMode(query, newEditorMode, onChange);\n    },\n    [onChange, query, app]\n  );\n\n  useEffect(() => {\n    setDataIsStale(false);\n  }, [data]);\n\n  const onChangeInternal = (query: LokiQuery) => {\n    if (!isEqual(query, props.query)) {\n      setDataIsStale(true);\n    }\n    onChange(query);\n  };\n\n  const onClickLabelBrowserButton = () => {\n    reportInteraction('grafana_loki_label_browser_opened', {\n      app: app,\n    });\n\n    setLabelBrowserVisible((visible) => !visible);\n  };\n\n  useEffect(() => {\n    const shouldUpdate = shouldUpdateStats(\n      query.expr,\n      previousQueryExpr,\n      timeRange,\n      previousTimeRange,\n      query.queryType,\n      previousQueryType\n    );\n    if (shouldUpdate && timeRange) {\n      const makeAsyncRequest = async () => {\n        // overwriting the refId that is later used to cancel inflight queries with the same ID.\n        const stats = await datasource.getStats({ ...query, refId: `${id}_${query.refId}` }, timeRange);\n        setQueryStats(stats);\n      };\n      makeAsyncRequest();\n    }\n  }, [datasource, timeRange, previousTimeRange, query, previousQueryExpr, previousQueryType, setQueryStats, id]);\n\n  return (\n    <>\n      <ConfirmModal\n        isOpen={parseModalOpen}\n        title=\"Query parsing\"\n        body=\"There were errors while trying to parse the query. Continuing to visual builder may lose some parts of the query.\"\n        confirmText=\"Continue\"\n        onConfirm={() => {\n          onChange({ ...query, editorMode: QueryEditorMode.Builder });\n          setParseModalOpen(false);\n        }}\n        onDismiss={() => setParseModalOpen(false)}\n      />\n      <QueryPatternsModal\n        isOpen={queryPatternsModalOpen}\n        onClose={() => setQueryPatternsModalOpen(false)}\n        query={query}\n        queries={queries}\n        app={app}\n        onChange={onChange}\n        onAddQuery={onAddQuery}\n      />\n      <LabelBrowserModal\n        isOpen={labelBrowserVisible}\n        datasource={datasource}\n        query={query}\n        app={app}\n        onClose={() => setLabelBrowserVisible(false)}\n        onChange={onChangeInternal}\n        onRunQuery={onRunQuery}\n        timeRange={timeRange}\n      />\n      <EditorHeader>\n        <Stack gap={1}>\n          <Button\n            data-testid={selectors.components.QueryBuilder.queryPatterns}\n            variant=\"secondary\"\n            size=\"sm\"\n            onClick={() => {\n              setQueryPatternsModalOpen((prevValue) => !prevValue);\n\n              const visualQuery = buildVisualQueryFromString(query.expr || '');\n              reportInteraction('grafana_loki_query_patterns_opened', {\n                version: 'v2',\n                app: app ?? '',\n                editorMode: query.editorMode,\n                preSelectedOperationsCount: visualQuery.query.operations.length,\n                preSelectedLabelsCount: visualQuery.query.labels.length,\n              });\n            }}\n          >\n            Kick start your query\n          </Button>\n          <Button variant=\"secondary\" size=\"sm\" onClick={onClickLabelBrowserButton} data-testid=\"label-browser-button\">\n            Label browser\n          </Button>\n        </Stack>\n        <QueryHeaderSwitch label=\"Explain query\" value={explain} onChange={onExplainChange} />\n        <FlexItem grow={1} />\n        {app !== CoreApp.Explore && app !== CoreApp.Correlations && (\n          <Button\n            variant={dataIsStale ? 'primary' : 'secondary'}\n            size=\"sm\"\n            onClick={onRunQuery}\n            icon={data?.state === LoadingState.Loading ? 'spinner' : undefined}\n            disabled={data?.state === LoadingState.Loading}\n          >\n            {queries && queries.length > 1 ? `Run queries` : `Run query`}\n          </Button>\n        )}\n        <QueryEditorModeToggle mode={editorMode!} onChange={onEditorModeChange} />\n      </EditorHeader>\n      <Space v={0.5} />\n      <EditorRows>\n        {editorMode === QueryEditorMode.Code && (\n          <LokiQueryCodeEditor {...props} query={query} onChange={onChangeInternal} showExplain={explain} />\n        )}\n        {editorMode === QueryEditorMode.Builder && (\n          <LokiQueryBuilderContainer\n            datasource={props.datasource}\n            query={query}\n            onChange={onChangeInternal}\n            onRunQuery={props.onRunQuery}\n            showExplain={explain}\n            timeRange={timeRange}\n          />\n        )}\n        <LokiQueryBuilderOptions\n          query={query}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          app={app}\n          queryStats={queryStats}\n          datasource={props.datasource}\n        />\n      </EditorRows>\n    </>\n  );\n});\n\nLokiQueryEditor.displayName = 'LokiQueryEditor';\n","import { LokiQueryField } from './LokiQueryField';\nimport { LokiQueryEditorProps } from './types';\n\nexport function LokiQueryEditorForAlerting(props: LokiQueryEditorProps) {\n  const { query, data, datasource, onChange, onRunQuery, history } = props;\n\n  return (\n    <LokiQueryField\n      datasource={datasource}\n      query={query}\n      onChange={onChange}\n      onRunQuery={onRunQuery}\n      history={history}\n      data={data}\n      placeholder=\"Enter a Loki query\"\n      data-testid={testIds.editor}\n    />\n  );\n}\n\nexport const testIds = {\n  editor: 'loki-editor-cloud-alerting',\n};\n","import { memo } from 'react';\n\nimport { CoreApp } from '@grafana/data';\n\nimport { LokiQueryEditor } from './LokiQueryEditor';\nimport { LokiQueryEditorForAlerting } from './LokiQueryEditorForAlerting';\nimport { LokiQueryEditorProps } from './types';\n\nexport function LokiQueryEditorByApp(props: LokiQueryEditorProps) {\n  const { app } = props;\n\n  switch (app) {\n    case CoreApp.CloudAlerting:\n      return <LokiQueryEditorForAlerting {...props} />;\n    default:\n      return <LokiQueryEditor {...props} />;\n  }\n}\n\nexport default memo(LokiQueryEditorByApp);\n\nexport const testIds = {\n  editor: 'loki-editor',\n};\n","import React__default from 'react';\nimport { css, cx } from '@emotion/css';\nimport { useTheme2 } from '@grafana/ui';\n\nconst DataSourceDescription = ({ dataSourceName, docsLink, hasRequiredFields = true, className }) => {\n  const theme = useTheme2();\n  const styles = {\n    container: css({\n      p: {\n        margin: 0\n      },\n      \"p + p\": {\n        marginTop: theme.spacing(2)\n      }\n    }),\n    text: css({\n      ...theme.typography.body,\n      color: theme.colors.text.secondary,\n      a: css({\n        color: theme.colors.text.link,\n        textDecoration: \"underline\",\n        \"&:hover\": {\n          textDecoration: \"none\"\n        }\n      })\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: cx(styles.container, className) }, /* @__PURE__ */ React__default.createElement(\"p\", { className: styles.text }, \"Before you can use the \", dataSourceName, \" data source, you must configure it below or in the config file. For detailed instructions,\", \" \", /* @__PURE__ */ React__default.createElement(\"a\", { href: docsLink, target: \"_blank\", rel: \"noreferrer\" }, \"view the documentation\"), \".\"), hasRequiredFields && /* @__PURE__ */ React__default.createElement(\"p\", { className: styles.text }, /* @__PURE__ */ React__default.createElement(\"i\", null, \"Fields marked with * are required\")));\n};\n\nexport { DataSourceDescription };\n//# sourceMappingURL=DataSourceDescription.js.map\n","import React__default, { useState } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, IconButton } from '@grafana/ui';\n\nconst GenericConfigSection = ({\n  children,\n  title,\n  description,\n  isCollapsible = false,\n  isInitiallyOpen = true,\n  kind = \"section\",\n  className\n}) => {\n  const { colors, typography, spacing } = useTheme2();\n  const [isOpen, setIsOpen] = useState(isCollapsible ? isInitiallyOpen : true);\n  const iconName = isOpen ? \"angle-up\" : \"angle-down\";\n  const isSubSection = kind === \"sub-section\";\n  const collapsibleButtonAriaLabel = `${isOpen ? \"Collapse\" : \"Expand\"} section ${title}`;\n  const styles = {\n    header: css({\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\"\n    }),\n    title: css({\n      margin: 0\n    }),\n    subtitle: css({\n      margin: 0,\n      fontWeight: typography.fontWeightRegular\n    }),\n    descriptionText: css({\n      marginTop: spacing(isSubSection ? 0.25 : 0.5),\n      marginBottom: 0,\n      ...typography.bodySmall,\n      color: colors.text.secondary\n    }),\n    content: css({\n      marginTop: spacing(2)\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className }, /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.header }, kind === \"section\" ? /* @__PURE__ */ React__default.createElement(\"h3\", { className: styles.title }, title) : /* @__PURE__ */ React__default.createElement(\"h6\", { className: styles.subtitle }, title), isCollapsible && /* @__PURE__ */ React__default.createElement(\n    IconButton,\n    {\n      name: iconName,\n      onClick: () => setIsOpen(!isOpen),\n      type: \"button\",\n      size: \"xl\",\n      \"aria-label\": collapsibleButtonAriaLabel\n    }\n  )), description && /* @__PURE__ */ React__default.createElement(\"p\", { className: styles.descriptionText }, description), isOpen && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.content }, children));\n};\n\nexport { GenericConfigSection };\n//# sourceMappingURL=GenericConfigSection.js.map\n","import React__default from 'react';\nimport { GenericConfigSection } from './GenericConfigSection.js';\n\nconst ConfigSection = ({ children, ...props }) => {\n  return /* @__PURE__ */ React__default.createElement(GenericConfigSection, { ...props, kind: \"section\" }, children);\n};\n\nexport { ConfigSection };\n//# sourceMappingURL=ConfigSection.js.map\n","import React__default from 'react';\nimport { css, cx } from '@emotion/css';\nimport { InlineField, Input } from '@grafana/ui';\nimport { ConfigSection } from '../ConfigSection/ConfigSection.js';\nimport '@grafana/data';\n\nconst ConnectionSettings = ({\n  config,\n  onChange,\n  description,\n  urlPlaceholder,\n  urlTooltip,\n  urlLabel,\n  className\n}) => {\n  const isValidUrl = config.url !== undefined && /^(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$/.test(config.url);\n  const styles = {\n    container: css({\n      maxWidth: 578\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(ConfigSection, { title: \"Connection\", description, className: cx(styles.container, className) }, /* @__PURE__ */ React__default.createElement(\n    InlineField,\n    {\n      htmlFor: \"connection-url\",\n      label: urlLabel || \"URL\",\n      labelWidth: 24,\n      tooltip: urlTooltip || /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, \"Specify a complete HTTP URL\", /* @__PURE__ */ React__default.createElement(\"br\", null), \"(for example https://example.com:8080)\"),\n      grow: true,\n      disabled: config.readOnly,\n      required: true,\n      invalid: !isValidUrl && !config.readOnly,\n      error: isValidUrl ? \"\" : \"Please enter a valid URL\",\n      interactive: true\n    },\n    /* @__PURE__ */ React__default.createElement(\n      Input,\n      {\n        id: \"connection-url\",\n        \"aria-label\": \"Data source connection URL\",\n        onChange: (event) => onChange({\n          ...config,\n          url: event.currentTarget.value\n        }),\n        value: config.url || \"\",\n        placeholder: urlPlaceholder || \"URL\"\n      }\n    )\n  )));\n};\n\nexport { ConnectionSettings };\n//# sourceMappingURL=ConnectionSettings.js.map\n","import { css } from '@emotion/css';\n\nconst useCommonStyles = () => {\n  return {\n    inlineFieldNoMarginRight: css({\n      marginRight: 0\n    }),\n    // This is dirty hack to make configured secret input grow\n    inlineFieldWithSecret: css({\n      '[class$=\"layoutChildrenWrapper\"]:first-child': {\n        flexGrow: 1\n      }\n    })\n  };\n};\n\nexport { useCommonStyles };\n//# sourceMappingURL=styles.js.map\n","import React__default from 'react';\nimport { css, cx } from '@emotion/css';\nimport { InlineField, Input, SecretInput } from '@grafana/ui';\nimport { useCommonStyles } from '../styles.js';\n\nconst BasicAuth = ({\n  user,\n  passwordConfigured,\n  userLabel = \"User\",\n  userTooltip = \"The username of the data source account\",\n  userPlaceholder = \"User\",\n  passwordLabel = \"Password\",\n  passwordTooltip = \"The password of the data source account\",\n  passwordPlaceholder = \"Password\",\n  onUserChange,\n  onPasswordChange,\n  onPasswordReset,\n  readOnly\n}) => {\n  const commonStyles = useCommonStyles();\n  const styles = {\n    lastInlineField: css({\n      marginBottom: 0\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(\n    InlineField,\n    {\n      className: commonStyles.inlineFieldNoMarginRight,\n      label: userLabel,\n      labelWidth: 24,\n      tooltip: userTooltip,\n      required: true,\n      htmlFor: \"basic-auth-user-input\",\n      interactive: true,\n      grow: true,\n      disabled: readOnly\n    },\n    /* @__PURE__ */ React__default.createElement(\n      Input,\n      {\n        id: \"basic-auth-user-input\",\n        placeholder: userPlaceholder,\n        value: user,\n        onChange: (e) => onUserChange(e.currentTarget.value),\n        required: true\n      }\n    )\n  ), /* @__PURE__ */ React__default.createElement(\n    InlineField,\n    {\n      className: cx(\n        commonStyles.inlineFieldNoMarginRight,\n        commonStyles.inlineFieldWithSecret,\n        styles.lastInlineField\n      ),\n      label: passwordLabel,\n      labelWidth: 24,\n      tooltip: passwordTooltip,\n      required: true,\n      htmlFor: \"basic-auth-password-input\",\n      interactive: true,\n      grow: true,\n      disabled: readOnly\n    },\n    /* @__PURE__ */ React__default.createElement(\n      SecretInput,\n      {\n        id: \"basic-auth-password-input\",\n        isConfigured: passwordConfigured,\n        onReset: readOnly ? () => {\n        } : onPasswordReset,\n        placeholder: passwordPlaceholder,\n        onChange: (e) => onPasswordChange(e.currentTarget.value),\n        required: true\n      }\n    )\n  ));\n};\n\nexport { BasicAuth };\n//# sourceMappingURL=BasicAuth.js.map\n","import React__default from 'react';\nimport { GenericConfigSection } from './GenericConfigSection.js';\n\nconst ConfigSubSection = ({ children, ...props }) => {\n  return /* @__PURE__ */ React__default.createElement(GenericConfigSection, { ...props, kind: \"sub-section\" }, children);\n};\n\nexport { ConfigSubSection };\n//# sourceMappingURL=ConfigSubSection.js.map\n","import 'react';\n\nvar AuthMethod = /* @__PURE__ */ ((AuthMethod2) => {\n  AuthMethod2[\"NoAuth\"] = \"NoAuth\";\n  AuthMethod2[\"BasicAuth\"] = \"BasicAuth\";\n  AuthMethod2[\"OAuthForward\"] = \"OAuthForward\";\n  AuthMethod2[\"CrossSiteCredentials\"] = \"CrossSiteCredentials\";\n  return AuthMethod2;\n})(AuthMethod || {});\n\nexport { AuthMethod };\n//# sourceMappingURL=types.js.map\n","import React__default, { useState, useMemo } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Field, Select } from '@grafana/ui';\nimport '@grafana/data';\nimport { BasicAuth } from './BasicAuth.js';\nimport { ConfigSubSection } from '../../ConfigSection/ConfigSubSection.js';\nimport { AuthMethod } from '../types.js';\n\nconst defaultOptions = {\n  [AuthMethod.BasicAuth]: {\n    label: \"Basic authentication\",\n    value: AuthMethod.BasicAuth,\n    description: \"Authenticate with your data source username and password\"\n  },\n  [AuthMethod.CrossSiteCredentials]: {\n    label: \"Enable cross-site access control requests\",\n    value: AuthMethod.CrossSiteCredentials,\n    description: \"Allow cross-site Access-Control requests with your existing credentials and cookies. This enables the server to authenticate the user and perform authorized requests on their behalf on other domains.\"\n  },\n  [AuthMethod.OAuthForward]: {\n    label: \"Forward OAuth Identity\",\n    value: AuthMethod.OAuthForward,\n    description: \"Forward the OAuth access token (and if available: the OIDC ID token) of the user querying to the data source\"\n  },\n  [AuthMethod.NoAuth]: {\n    label: \"No Authentication\",\n    value: AuthMethod.NoAuth,\n    description: \"Data source is available without authentication\"\n  }\n};\nconst AuthMethodSettings = ({\n  selectedMethod,\n  mostCommonMethod,\n  visibleMethods: visibleMethodsFromProps,\n  defaultOptionsOverrides,\n  customMethods,\n  onAuthMethodSelect,\n  basicAuth,\n  readOnly\n}) => {\n  var _a, _b, _c, _d;\n  const [authMethodChanged, setAuthMethodChanged] = useState(false);\n  const { colors, spacing } = useTheme2();\n  const visibleMethods = useMemo(\n    () => {\n      var _a2;\n      return visibleMethodsFromProps != null ? visibleMethodsFromProps : [\n        AuthMethod.BasicAuth,\n        AuthMethod.OAuthForward,\n        AuthMethod.NoAuth,\n        ...(_a2 = customMethods == null ? undefined : customMethods.map((m) => m.id)) != null ? _a2 : []\n      ];\n    },\n    [customMethods, visibleMethodsFromProps]\n  );\n  const hasSelect = visibleMethods.length > 1;\n  const preparedOptions = useMemo(() => {\n    var _a2;\n    const customOptions = (_a2 = customMethods == null ? undefined : customMethods.reduce((acc, method) => {\n      acc[method.id] = {\n        label: method.label,\n        value: method.id,\n        description: method.description\n      };\n      return acc;\n    }, {})) != null ? _a2 : {};\n    const preparedDefaultOptions = {};\n    let k;\n    for (k in defaultOptions) {\n      preparedDefaultOptions[k] = {\n        ...defaultOptions[k],\n        ...defaultOptionsOverrides == null ? undefined : defaultOptionsOverrides[k]\n      };\n    }\n    const allOptions = {\n      ...customOptions,\n      ...preparedDefaultOptions\n    };\n    return visibleMethods.filter((method) => Boolean(allOptions[method])).map((method) => {\n      const option = allOptions[method];\n      if (method === mostCommonMethod && hasSelect) {\n        return {\n          ...option,\n          label: `${option.label} (most common)`\n        };\n      }\n      return option;\n    });\n  }, [visibleMethods, customMethods, defaultOptionsOverrides, mostCommonMethod, hasSelect]);\n  let selected = selectedMethod;\n  if (!hasSelect) {\n    selected = visibleMethods[0];\n  } else if (selectedMethod === AuthMethod.NoAuth && mostCommonMethod && !authMethodChanged) {\n    selected = mostCommonMethod;\n  }\n  let AuthFieldsComponent = null;\n  if (selected === AuthMethod.BasicAuth && basicAuth) {\n    AuthFieldsComponent = /* @__PURE__ */ React__default.createElement(BasicAuth, { ...basicAuth, readOnly });\n  } else if (selected.startsWith(\"custom-\")) {\n    AuthFieldsComponent = (_b = (_a = customMethods == null ? undefined : customMethods.find((m) => m.id === selected)) == null ? undefined : _a.component) != null ? _b : null;\n  }\n  const title = hasSelect ? \"Authentication methods\" : (_c = preparedOptions[0].label) != null ? _c : \"\";\n  const description = hasSelect ? \"Choose an authentication method to access the data source\" : (_d = preparedOptions[0].description) != null ? _d : \"\";\n  const styles = {\n    authMethods: css({\n      marginTop: spacing(2.5),\n      ...hasSelect && {\n        padding: spacing(2),\n        border: `1px solid ${colors.border.weak}`\n      }\n    }),\n    selectedMethodFields: css({\n      marginTop: spacing(1.5)\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(ConfigSubSection, { title, description }, /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.authMethods }, hasSelect && /* @__PURE__ */ React__default.createElement(Field, { label: \"Authentication method\" }, /* @__PURE__ */ React__default.createElement(\n    Select,\n    {\n      inputId: \"auth-method-select\",\n      options: preparedOptions,\n      value: selected,\n      onChange: (option) => {\n        setAuthMethodChanged(true);\n        onAuthMethodSelect(option.value);\n      },\n      disabled: readOnly\n    }\n  )), AuthFieldsComponent && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.selectedMethodFields }, AuthFieldsComponent)));\n};\n\nexport { AuthMethodSettings };\n//# sourceMappingURL=AuthMethodSettings.js.map\n","import React__default from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Checkbox, Tooltip, Icon } from '@grafana/ui';\n\nconst TLSSettingsSection = ({\n  children,\n  enabled,\n  label,\n  tooltipText,\n  onToggle,\n  readOnly\n}) => {\n  const { colors, spacing } = useTheme2();\n  const styles = {\n    container: css({\n      marginTop: 3\n    }),\n    checkboxContainer: css({\n      display: \"flex\",\n      alignItems: \"center\"\n    }),\n    infoIcon: css({\n      marginTop: -2,\n      marginLeft: 5,\n      color: colors.text.secondary\n    }),\n    content: css({\n      margin: spacing(1, 0, 2, 3)\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.container }, /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.checkboxContainer }, /* @__PURE__ */ React__default.createElement(Checkbox, { value: enabled, label, onChange: () => onToggle(!enabled), disabled: readOnly }), /* @__PURE__ */ React__default.createElement(Tooltip, { placement: \"top\", content: tooltipText, interactive: true }, /* @__PURE__ */ React__default.createElement(Icon, { name: \"info-circle\", className: styles.infoIcon, size: \"sm\" }))), enabled && children && /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.content }, children));\n};\n\nexport { TLSSettingsSection };\n//# sourceMappingURL=TLSSettingsSection.js.map\n","import React__default from 'react';\nimport { cx } from '@emotion/css';\nimport { InlineField, SecretTextArea } from '@grafana/ui';\nimport { TLSSettingsSection } from './TLSSettingsSection.js';\nimport { useCommonStyles } from '../styles.js';\n\nconst SelfSignedCertificate = ({\n  enabled,\n  certificateConfigured,\n  onToggle,\n  onCertificateChange,\n  onCertificateReset,\n  tooltips,\n  readOnly\n}) => {\n  var _a;\n  const commonStyles = useCommonStyles();\n  return /* @__PURE__ */ React__default.createElement(\n    TLSSettingsSection,\n    {\n      enabled,\n      label: \"Add self-signed certificate\",\n      tooltipText: \"Add your own Certificate Authority (CA) certificate on top of one generated by the certificate authorities for additional security measures\",\n      onToggle: (newEnabled) => onToggle(newEnabled),\n      readOnly\n    },\n    /* @__PURE__ */ React__default.createElement(\n      InlineField,\n      {\n        label: \"CA Certificate\",\n        labelWidth: 24,\n        tooltip: (_a = tooltips == null ? undefined : tooltips.certificateLabel) != null ? _a : \"Your self-signed certificate\",\n        required: true,\n        htmlFor: \"self-signed-certificate-input\",\n        interactive: true,\n        grow: true,\n        className: cx(commonStyles.inlineFieldNoMarginRight, commonStyles.inlineFieldWithSecret),\n        disabled: readOnly\n      },\n      /* @__PURE__ */ React__default.createElement(\n        SecretTextArea,\n        {\n          id: \"self-signed-certificate-input\",\n          isConfigured: certificateConfigured,\n          onChange: (e) => onCertificateChange(e.currentTarget.value),\n          onReset: readOnly ? () => {\n          } : onCertificateReset,\n          placeholder: \"Begins with --- BEGIN CERTIFICATE ---\",\n          rows: 6,\n          required: true\n        }\n      )\n    )\n  );\n};\n\nexport { SelfSignedCertificate };\n//# sourceMappingURL=SelfSignedCertificate.js.map\n","import React__default from 'react';\nimport { cx } from '@emotion/css';\nimport { InlineField, Input, SecretTextArea } from '@grafana/ui';\nimport { TLSSettingsSection } from './TLSSettingsSection.js';\nimport { useCommonStyles } from '../styles.js';\n\nconst TLSClientAuth = ({\n  enabled,\n  serverName,\n  clientCertificateConfigured,\n  clientKeyConfigured,\n  onToggle,\n  onServerNameChange,\n  onClientCertificateChange,\n  onClientKeyChange,\n  onClientCertificateReset,\n  onClientKeyReset,\n  tooltips,\n  readOnly\n}) => {\n  var _a, _b, _c;\n  const commonStyles = useCommonStyles();\n  return /* @__PURE__ */ React__default.createElement(\n    TLSSettingsSection,\n    {\n      enabled,\n      label: \"TLS Client Authentication\",\n      tooltipText: \"Validate using TLS client authentication, in which the server authenticates the client\",\n      onToggle: (newEnabled) => onToggle(newEnabled),\n      readOnly\n    },\n    /* @__PURE__ */ React__default.createElement(\n      InlineField,\n      {\n        label: \"ServerName\",\n        labelWidth: 24,\n        tooltip: (_a = tooltips == null ? undefined : tooltips.serverNameLabel) != null ? _a : \"A Servername is used to verify the hostname on the returned certificate\",\n        required: true,\n        htmlFor: \"client-auth-servername-input\",\n        interactive: true,\n        grow: true,\n        className: commonStyles.inlineFieldNoMarginRight,\n        disabled: readOnly\n      },\n      /* @__PURE__ */ React__default.createElement(\n        Input,\n        {\n          id: \"client-auth-servername-input\",\n          placeholder: \"domain.example.com\",\n          value: serverName,\n          onChange: (e) => onServerNameChange(e.currentTarget.value),\n          required: true\n        }\n      )\n    ),\n    /* @__PURE__ */ React__default.createElement(\n      InlineField,\n      {\n        label: \"Client Certificate\",\n        labelWidth: 24,\n        tooltip: (_b = tooltips == null ? undefined : tooltips.certificateLabel) != null ? _b : \"The client certificate can be generated from a Certificate Authority or be self-signed\",\n        required: true,\n        htmlFor: \"client-auth-client-certificate-input\",\n        interactive: true,\n        grow: true,\n        className: cx(commonStyles.inlineFieldNoMarginRight, commonStyles.inlineFieldWithSecret),\n        disabled: readOnly\n      },\n      /* @__PURE__ */ React__default.createElement(\n        SecretTextArea,\n        {\n          id: \"client-auth-client-certificate-input\",\n          isConfigured: clientCertificateConfigured,\n          onChange: (e) => onClientCertificateChange(e.currentTarget.value),\n          onReset: readOnly ? () => {\n          } : onClientCertificateReset,\n          placeholder: \"Begins with --- BEGIN CERTIFICATE ---\",\n          rows: 6,\n          required: true\n        }\n      )\n    ),\n    /* @__PURE__ */ React__default.createElement(\n      InlineField,\n      {\n        label: \"Client Key\",\n        labelWidth: 24,\n        tooltip: (_c = tooltips == null ? undefined : tooltips.keyLabel) != null ? _c : \"The client key can be generated from a Certificate Authority or be self-signed\",\n        required: true,\n        htmlFor: \"client-auth-client-key-input\",\n        interactive: true,\n        grow: true,\n        className: cx(commonStyles.inlineFieldNoMarginRight, commonStyles.inlineFieldWithSecret),\n        disabled: readOnly\n      },\n      /* @__PURE__ */ React__default.createElement(\n        SecretTextArea,\n        {\n          id: \"client-auth-client-key-input\",\n          isConfigured: clientKeyConfigured,\n          onChange: (e) => onClientKeyChange(e.currentTarget.value),\n          onReset: readOnly ? () => {\n          } : onClientKeyReset,\n          placeholder: `Begins with --- RSA PRIVATE KEY CERTIFICATE ---`,\n          rows: 6,\n          required: true\n        }\n      )\n    )\n  );\n};\n\nexport { TLSClientAuth };\n//# sourceMappingURL=TLSClientAuth.js.map\n","import React__default from 'react';\nimport { TLSSettingsSection } from './TLSSettingsSection.js';\n\nconst SkipTLSVerification = ({ enabled, onToggle, readOnly }) => {\n  return /* @__PURE__ */ React__default.createElement(\n    TLSSettingsSection,\n    {\n      enabled,\n      label: \"Skip TLS certificate validation\",\n      tooltipText: \"Skipping TLS certificate validation is not recommended unless absolutely necessary or for testing\",\n      onToggle: (newEnabled) => onToggle(newEnabled),\n      readOnly\n    }\n  );\n};\n\nexport { SkipTLSVerification };\n//# sourceMappingURL=SkipTLSVerification.js.map\n","import React__default from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2 } from '@grafana/ui';\nimport { SelfSignedCertificate } from './SelfSignedCertificate.js';\nimport { TLSClientAuth } from './TLSClientAuth.js';\nimport { SkipTLSVerification } from './SkipTLSVerification.js';\nimport { ConfigSubSection } from '../../ConfigSection/ConfigSubSection.js';\nimport '@grafana/data';\n\nconst TLSSettings = ({ selfSignedCertificate, TLSClientAuth: TLSClientAuth$1, skipTLSVerification, readOnly }) => {\n  const { spacing } = useTheme2();\n  const styles = {\n    container: css({\n      marginTop: spacing(3)\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(\n    ConfigSubSection,\n    {\n      className: styles.container,\n      title: \"TLS settings\",\n      description: \"Additional security measures that can be applied on top of authentication\"\n    },\n    /* @__PURE__ */ React__default.createElement(SelfSignedCertificate, { ...selfSignedCertificate, readOnly }),\n    /* @__PURE__ */ React__default.createElement(TLSClientAuth, { ...TLSClientAuth$1, readOnly }),\n    /* @__PURE__ */ React__default.createElement(SkipTLSVerification, { ...skipTLSVerification, readOnly })\n  );\n};\n\nexport { TLSSettings };\n//# sourceMappingURL=TLSSettings.js.map\n","import React__default from 'react';\nimport { css, cx } from '@emotion/css';\nimport { useTheme2, InlineFieldRow, InlineField, Input, SecretInput, IconButton } from '@grafana/ui';\nimport { useCommonStyles } from '../styles.js';\n\nconst CustomHeader = ({ header, onChange, onBlur, onDelete, readOnly }) => {\n  const { spacing } = useTheme2();\n  const commonStyles = useCommonStyles();\n  const styles = {\n    container: css({\n      alignItems: \"center\"\n    }),\n    input: css({\n      minWidth: \"100%\"\n    }),\n    headerNameField: css({\n      width: \"40%\",\n      marginRight: 0,\n      paddingRight: spacing(1)\n    }),\n    headerValueField: css({\n      width: \"45%\",\n      marginRight: 0\n    }),\n    removeHeaderBtn: css({\n      margin: `0 0 3px 10px`\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(InlineFieldRow, { className: styles.container }, /* @__PURE__ */ React__default.createElement(\n    InlineField,\n    {\n      label: \"Header\",\n      labelWidth: 9,\n      grow: true,\n      className: styles.headerNameField,\n      htmlFor: `custom-header-${header.id}-name-input`,\n      disabled: readOnly\n    },\n    /* @__PURE__ */ React__default.createElement(\n      Input,\n      {\n        id: `custom-header-${header.id}-name-input`,\n        placeholder: \"X-Custom-Header\",\n        value: header.name,\n        width: 12,\n        onChange: (e) => onChange({ ...header, name: e.currentTarget.value }),\n        onBlur,\n        className: styles.input\n      }\n    )\n  ), /* @__PURE__ */ React__default.createElement(\n    InlineField,\n    {\n      label: \"Value\",\n      labelWidth: 9,\n      grow: true,\n      className: cx(commonStyles.inlineFieldWithSecret, styles.headerValueField),\n      htmlFor: `custom-header-${header.id}-value-input`,\n      disabled: readOnly\n    },\n    /* @__PURE__ */ React__default.createElement(\n      SecretInput,\n      {\n        id: `custom-header-${header.id}-value-input`,\n        isConfigured: header.configured,\n        placeholder: \"Header value\",\n        value: header.value,\n        width: 12,\n        onChange: (e) => onChange({ ...header, value: e.currentTarget.value }),\n        onReset: readOnly ? () => {\n        } : () => onChange({ ...header, configured: false, value: \"\" }),\n        onBlur,\n        className: styles.input\n      }\n    )\n  ), /* @__PURE__ */ React__default.createElement(\n    IconButton,\n    {\n      name: \"trash-alt\",\n      tooltip: \"Remove header\",\n      tooltipPlacement: \"top\",\n      className: styles.removeHeaderBtn,\n      onClick: onDelete,\n      type: \"button\",\n      disabled: readOnly\n    }\n  )));\n};\n\nexport { CustomHeader };\n//# sourceMappingURL=CustomHeader.js.map\n","import React__default, { useState, useEffect } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button } from '@grafana/ui';\nimport { CustomHeader } from './CustomHeader.js';\nimport { ConfigSubSection } from '../../ConfigSection/ConfigSubSection.js';\nimport '@grafana/data';\n\nconst CustomHeaders = ({ headers: headersFromProps, onChange, readOnly }) => {\n  const { spacing } = useTheme2();\n  const [headers, setHeaders] = useState(\n    headersFromProps.map((header) => ({\n      ...header,\n      id: uniqueId(),\n      value: \"\"\n    }))\n  );\n  useEffect(() => {\n    setHeaders((headers2) => {\n      let changed = false;\n      const newHeaders = headers2.map((header) => {\n        var _a;\n        const configured = (_a = headersFromProps.find((h) => h.name === header.name)) == null ? undefined : _a.configured;\n        if (typeof configured !== \"undefined\" && header.configured !== configured) {\n          changed = true;\n          return { ...header, configured };\n        }\n        return header;\n      });\n      if (changed) {\n        return newHeaders;\n      }\n      return headers2;\n    });\n  }, [headersFromProps]);\n  const onHeaderAdd = () => {\n    setHeaders([...headers, { id: uniqueId(), name: \"\", value: \"\", configured: false }]);\n  };\n  const onHeaderChange = (id, header) => {\n    setHeaders(headers.map((h) => h.id === id ? { ...header } : h));\n  };\n  const onHeaderDelete = (id) => {\n    const index = headers.findIndex((h) => h.id === id);\n    if (index === -1) {\n      return;\n    }\n    const newHeaders = [...headers];\n    newHeaders.splice(index, 1);\n    setHeaders(newHeaders);\n    onChange(\n      newHeaders.map(({ name, value, configured }) => ({\n        name,\n        value,\n        configured\n      }))\n    );\n  };\n  const onBlur = () => {\n    onChange(\n      headers.map(({ name, value, configured }) => ({\n        name,\n        value,\n        configured\n      }))\n    );\n  };\n  const styles = {\n    container: css({\n      marginTop: spacing(3)\n    }),\n    addHeaderButton: css({\n      marginTop: spacing(1.5)\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.container }, /* @__PURE__ */ React__default.createElement(\n    ConfigSubSection,\n    {\n      title: \"HTTP headers\",\n      description: \"Pass along additional context and metadata about the request/response\",\n      isCollapsible: true,\n      isInitiallyOpen: headers.length > 0\n    },\n    /* @__PURE__ */ React__default.createElement(\"div\", null, headers.map((header) => /* @__PURE__ */ React__default.createElement(\n      CustomHeader,\n      {\n        key: header.id,\n        header,\n        onChange: (header2) => onHeaderChange(header2.id, header2),\n        onDelete: () => onHeaderDelete(header.id),\n        onBlur,\n        readOnly\n      }\n    ))),\n    /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.addHeaderButton }, /* @__PURE__ */ React__default.createElement(Button, { icon: \"plus\", variant: \"secondary\", fill: \"outline\", onClick: onHeaderAdd, disabled: readOnly }, headers.length === 0 ? \"Add header\" : \"Add another header\"))\n  ));\n};\nfunction uniqueId() {\n  return Math.random().toString(16).slice(2);\n}\n\nexport { CustomHeaders };\n//# sourceMappingURL=CustomHeaders.js.map\n","import React__default from 'react';\nimport { css } from '@emotion/css';\nimport { AuthMethodSettings } from './auth-method/AuthMethodSettings.js';\nimport { TLSSettings } from './tls/TLSSettings.js';\nimport '@grafana/ui';\nimport { CustomHeaders } from './custom-headers/CustomHeaders.js';\nimport { ConfigSection } from '../ConfigSection/ConfigSection.js';\nimport '@grafana/data';\n\nconst Auth = ({\n  selectedMethod,\n  mostCommonMethod,\n  visibleMethods,\n  defaultOptionsOverrides,\n  customMethods,\n  onAuthMethodSelect,\n  basicAuth,\n  TLS,\n  customHeaders,\n  readOnly = false\n}) => {\n  const styles = {\n    container: css({\n      maxWidth: 578\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(\"div\", { className: styles.container }, /* @__PURE__ */ React__default.createElement(ConfigSection, { title: \"Authentication\" }, /* @__PURE__ */ React__default.createElement(\n    AuthMethodSettings,\n    {\n      selectedMethod,\n      mostCommonMethod,\n      customMethods,\n      visibleMethods,\n      defaultOptionsOverrides,\n      onAuthMethodSelect,\n      basicAuth,\n      readOnly\n    }\n  ), TLS && /* @__PURE__ */ React__default.createElement(TLSSettings, { ...TLS, readOnly }), customHeaders && /* @__PURE__ */ React__default.createElement(CustomHeaders, { ...customHeaders, readOnly })));\n};\n\nexport { Auth };\n//# sourceMappingURL=Auth.js.map\n","import 'react';\nimport '@emotion/css';\nimport { AuthMethod } from './types.js';\nimport './auth-method/AuthMethodSettings.js';\nimport '@grafana/ui';\nimport '@grafana/data';\n\nconst headerNamePrefix = \"httpHeaderName\";\nconst headerValuePrefix = \"httpHeaderValue\";\nfunction convertLegacyAuthProps({\n  config,\n  onChange\n}) {\n  const props = {\n    selectedMethod: getSelectedMethod(config),\n    onAuthMethodSelect: getOnAuthMethodSelectHandler(config, onChange),\n    basicAuth: getBasicAuthProps(config, onChange),\n    TLS: getTLSProps(config, onChange),\n    customHeaders: getCustomHeaders(config, onChange),\n    readOnly: config.readOnly\n  };\n  return props;\n}\nfunction getSelectedMethod(config) {\n  if (config.basicAuth) {\n    return AuthMethod.BasicAuth;\n  }\n  if (config.withCredentials) {\n    return AuthMethod.CrossSiteCredentials;\n  }\n  if (config.jsonData.oauthPassThru) {\n    return AuthMethod.OAuthForward;\n  }\n  return AuthMethod.NoAuth;\n}\nfunction getOnAuthMethodSelectHandler(config, onChange) {\n  return (method) => {\n    onChange({\n      ...config,\n      basicAuth: method === AuthMethod.BasicAuth,\n      withCredentials: method === AuthMethod.CrossSiteCredentials,\n      jsonData: {\n        ...config.jsonData,\n        oauthPassThru: method === AuthMethod.OAuthForward\n      }\n    });\n  };\n}\nfunction getBasicAuthProps(config, onChange) {\n  return {\n    user: config.basicAuthUser,\n    passwordConfigured: config.secureJsonFields.basicAuthPassword,\n    onUserChange: (user) => onChange({ ...config, basicAuthUser: user }),\n    onPasswordChange: (password) => onChange({\n      ...config,\n      secureJsonData: {\n        ...config.secureJsonData,\n        basicAuthPassword: password\n      }\n    }),\n    onPasswordReset: () => onChange({\n      ...config,\n      secureJsonData: { ...config.secureJsonData, basicAuthPassword: \"\" },\n      secureJsonFields: {\n        ...config.secureJsonFields,\n        basicAuthPassword: false\n      }\n    })\n  };\n}\nfunction getTLSProps(config, onChange) {\n  var _a, _b, _c;\n  return {\n    selfSignedCertificate: {\n      enabled: Boolean(config.jsonData.tlsAuthWithCACert),\n      certificateConfigured: !!((_a = config.secureJsonFields) == null ? undefined : _a.tlsCACert),\n      onToggle: (enabled) => enabled ? onChange({\n        ...config,\n        jsonData: { ...config.jsonData, tlsAuthWithCACert: enabled }\n      }) : onChange({\n        ...config,\n        jsonData: { ...config.jsonData, tlsAuthWithCACert: enabled },\n        secureJsonData: { ...config.secureJsonData, tlsCACert: \"\" },\n        secureJsonFields: { ...config.secureJsonFields, tlsCACert: false }\n      }),\n      onCertificateChange: (certificate) => onChange({\n        ...config,\n        secureJsonData: { ...config.secureJsonData, tlsCACert: certificate }\n      }),\n      onCertificateReset: () => onChange({\n        ...config,\n        secureJsonData: { ...config.secureJsonData, tlsCACert: \"\" },\n        secureJsonFields: { ...config.secureJsonFields, tlsCACert: false }\n      })\n    },\n    TLSClientAuth: {\n      enabled: config.jsonData.tlsAuth,\n      serverName: config.jsonData.serverName,\n      clientCertificateConfigured: !!((_b = config.secureJsonFields) == null ? undefined : _b.tlsClientCert),\n      clientKeyConfigured: !!((_c = config.secureJsonFields) == null ? undefined : _c.tlsClientKey),\n      onToggle: (enabled) => enabled ? onChange({\n        ...config,\n        jsonData: { ...config.jsonData, tlsAuth: enabled }\n      }) : onChange({\n        ...config,\n        jsonData: { ...config.jsonData, tlsAuth: enabled, serverName: \"\" },\n        secureJsonData: { ...config.secureJsonData, tlsClientCert: \"\", tlsClientKey: \"\" },\n        secureJsonFields: { ...config.secureJsonFields, tlsClientCert: false, tlsClientKey: false }\n      }),\n      onServerNameChange: (serverName) => onChange({\n        ...config,\n        jsonData: { ...config.jsonData, serverName }\n      }),\n      onClientCertificateChange: (clientCertificate) => onChange({\n        ...config,\n        secureJsonData: {\n          ...config.secureJsonData,\n          tlsClientCert: clientCertificate\n        }\n      }),\n      onClientCertificateReset: () => onChange({\n        ...config,\n        secureJsonData: {\n          ...config.secureJsonData,\n          tlsClientCert: \"\"\n        },\n        secureJsonFields: {\n          ...config.secureJsonFields,\n          tlsClientCert: false\n        }\n      }),\n      onClientKeyChange: (clientKey) => onChange({\n        ...config,\n        secureJsonData: {\n          ...config.secureJsonData,\n          tlsClientKey: clientKey\n        }\n      }),\n      onClientKeyReset: () => onChange({\n        ...config,\n        secureJsonData: {\n          ...config.secureJsonData,\n          tlsClientKey: \"\"\n        },\n        secureJsonFields: {\n          ...config.secureJsonFields,\n          tlsClientKey: false\n        }\n      })\n    },\n    skipTLSVerification: {\n      enabled: config.jsonData.tlsSkipVerify,\n      onToggle: (enabled) => onChange({\n        ...config,\n        jsonData: { ...config.jsonData, tlsSkipVerify: enabled }\n      })\n    }\n  };\n}\nfunction getCustomHeaders(config, onChange) {\n  const headers = Object.keys(config.jsonData).filter((key) => key.startsWith(headerNamePrefix)).sort().map((key) => {\n    var _a;\n    const index = key.slice(headerNamePrefix.length);\n    return {\n      name: config.jsonData[key],\n      configured: (_a = config.secureJsonFields[`${headerValuePrefix}${index}`]) != null ? _a : false\n    };\n  });\n  return {\n    headers,\n    onChange: (headers2) => {\n      const newJsonData = Object.fromEntries(\n        Object.entries(config.jsonData).filter(([key]) => !key.startsWith(headerNamePrefix))\n      );\n      const newSecureJsonData = Object.fromEntries(\n        Object.entries(config.secureJsonData || {}).filter(([key]) => !key.startsWith(headerValuePrefix))\n      );\n      const newSecureJsonFields = Object.fromEntries(\n        Object.entries(config.secureJsonFields).filter(([key]) => !key.startsWith(headerValuePrefix))\n      );\n      headers2.forEach((header, index) => {\n        newJsonData[`${headerNamePrefix}${index + 1}`] = header.name;\n        if (header.configured) {\n          newSecureJsonFields[`${headerValuePrefix}${index + 1}`] = true;\n        } else {\n          newSecureJsonData[`${headerValuePrefix}${index + 1}`] = header.value;\n        }\n      });\n      onChange({\n        ...config,\n        jsonData: newJsonData,\n        secureJsonData: newSecureJsonData,\n        secureJsonFields: newSecureJsonFields\n      });\n    }\n  };\n}\n\nexport { convertLegacyAuthProps, getBasicAuthProps, getCustomHeaders, getOnAuthMethodSelectHandler, getSelectedMethod, getTLSProps };\n//# sourceMappingURL=utils.js.map\n","import React__default from 'react';\nimport { css, cx } from '@emotion/css';\nimport { InlineField, TagsInput, Input } from '@grafana/ui';\nimport { ConfigSubSection } from '../ConfigSection/ConfigSubSection.js';\nimport '@grafana/data';\n\nconst AdvancedHttpSettings = ({\n  config,\n  onChange,\n  className\n}) => {\n  const onCookiesChange = (cookies) => {\n    onChange({\n      ...config,\n      jsonData: {\n        ...config.jsonData,\n        keepCookies: cookies\n      }\n    });\n  };\n  const onTimeoutChange = (event) => {\n    onChange({\n      ...config,\n      jsonData: {\n        ...config.jsonData,\n        timeout: parseInt(event.currentTarget.value, 10)\n      }\n    });\n  };\n  const styles = {\n    container: css({\n      maxWidth: 578\n    })\n  };\n  return /* @__PURE__ */ React__default.createElement(ConfigSubSection, { title: \"Advanced HTTP settings\", className: cx(styles.container, className) }, /* @__PURE__ */ React__default.createElement(\n    InlineField,\n    {\n      htmlFor: \"advanced-http-cookies\",\n      label: \"Allowed cookies\",\n      labelWidth: 24,\n      tooltip: \"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.\",\n      disabled: config.readOnly,\n      grow: true\n    },\n    /* @__PURE__ */ React__default.createElement(\n      TagsInput,\n      {\n        id: \"advanced-http-cookies\",\n        placeholder: \"New cookie (hit enter to add)\",\n        tags: config.jsonData.keepCookies,\n        onChange: onCookiesChange\n      }\n    )\n  ), /* @__PURE__ */ React__default.createElement(\n    InlineField,\n    {\n      htmlFor: \"advanced-http-timeout\",\n      label: \"Timeout\",\n      labelWidth: 24,\n      tooltip: \"HTTP request timeout in seconds\",\n      disabled: config.readOnly,\n      grow: true\n    },\n    /* @__PURE__ */ React__default.createElement(\n      Input,\n      {\n        id: \"advanced-http-timeout\",\n        type: \"number\",\n        min: 0,\n        placeholder: \"Timeout in seconds\",\n        \"aria-label\": \"Timeout in seconds\",\n        value: config.jsonData.timeout,\n        onChange: onTimeoutChange\n      }\n    )\n  ));\n};\n\nexport { AdvancedHttpSettings };\n//# sourceMappingURL=AdvancedHttpSettings.js.map\n","import { css } from '@emotion/css';\nimport React__default from 'react';\nimport '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nfunction ConfigDescriptionLink(props) {\n  const { description, suffix, feature } = props;\n  const text = `Learn more about ${feature}`;\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React__default.createElement(\"span\", { className: styles.container }, description, /* @__PURE__ */ React__default.createElement(\n    \"a\",\n    {\n      \"aria-label\": text,\n      href: `https://grafana.com/docs/grafana/next/datasources/${suffix}`,\n      rel: \"noreferrer\",\n      target: \"_blank\"\n    },\n    text\n  ));\n}\nconst getStyles = (theme) => {\n  return {\n    container: css({\n      color: theme.colors.text.secondary,\n      a: css({\n        color: theme.colors.text.link,\n        textDecoration: \"underline\",\n        marginLeft: \"5px\",\n        \"&:hover\": {\n          textDecoration: \"none\"\n        }\n      })\n    })\n  };\n};\n\nexport { ConfigDescriptionLink };\n//# sourceMappingURL=ConfigDescriptionLink.js.map\n","import { DataSourcePluginOptionsEditorProps } from '@grafana/data';\nimport { ConfigDescriptionLink, ConfigSubSection } from '@grafana/plugin-ui';\nimport { InlineField, InlineSwitch } from '@grafana/ui';\n\nexport function AlertingSettings({\n  options,\n  onOptionsChange,\n}: Pick<DataSourcePluginOptionsEditorProps, 'options' | 'onOptionsChange'>) {\n  return (\n    <ConfigSubSection\n      title=\"Alerting\"\n      description={\n        <ConfigDescriptionLink\n          description=\"Manage alert rules for the Loki data source.\"\n          suffix=\"loki/configure-loki-data-source/#alerting\"\n          feature=\"alerting\"\n        />\n      }\n    >\n      <InlineField\n        labelWidth={29}\n        label=\"Manage alert rules in Alerting UI\"\n        disabled={options.readOnly}\n        tooltip=\"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source.\"\n      >\n        <InlineSwitch\n          value={options.jsonData.manageAlerts !== false}\n          onChange={(event) =>\n            onOptionsChange({\n              ...options,\n              jsonData: { ...options.jsonData, manageAlerts: event!.currentTarget.checked },\n            })\n          }\n        />\n      </InlineField>\n    </ConfigSubSection>\n  );\n}\n","import { ReactNode, useState } from 'react';\n\nimport { getTemplateSrv } from '@grafana/runtime';\nimport { InlineField, TextArea } from '@grafana/ui';\n\nimport { DerivedFieldConfig } from '../types';\n\ntype Props = {\n  derivedFields?: DerivedFieldConfig[];\n  className?: string;\n};\nexport const DebugSection = (props: Props) => {\n  const { derivedFields, className } = props;\n  const [debugText, setDebugText] = useState('');\n\n  let debugFields: DebugField[] = [];\n  if (debugText && derivedFields) {\n    debugFields = makeDebugFields(derivedFields, debugText);\n  }\n\n  return (\n    <div className={className}>\n      <InlineField label=\"Debug log message\" labelWidth={24} grow>\n        <TextArea\n          type=\"text\"\n          aria-label=\"Loki query\"\n          placeholder=\"Paste an example log line here to test the regular expressions of your derived fields\"\n          value={debugText}\n          onChange={(event) => setDebugText(event.currentTarget.value)}\n        />\n      </InlineField>\n      {!!debugFields.length && <DebugFields fields={debugFields} />}\n    </div>\n  );\n};\n\ntype DebugFieldItemProps = {\n  fields: DebugField[];\n};\nconst DebugFields = ({ fields }: DebugFieldItemProps) => {\n  return (\n    <table className={'filter-table'}>\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Value</th>\n          <th>Url</th>\n        </tr>\n      </thead>\n      <tbody>\n        {fields.map((field) => {\n          let value: ReactNode = field.value;\n          if (field.error && field.error instanceof Error) {\n            value = field.error.message;\n          } else if (field.href) {\n            value = <a href={field.href}>{value}</a>;\n          }\n          return (\n            <tr key={`${field.name}=${field.value}`}>\n              <td>{field.name}</td>\n              <td>{value}</td>\n              <td>{field.href ? <a href={field.href}>{field.href}</a> : ''}</td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\ntype DebugField = {\n  name: string;\n  error?: unknown;\n  value?: string;\n  href?: string;\n};\n\nfunction makeDebugFields(derivedFields: DerivedFieldConfig[], debugText: string): DebugField[] {\n  return derivedFields\n    .filter((field) => field.name && field.matcherRegex)\n    .map((field) => {\n      try {\n        const testMatch = debugText.match(field.matcherRegex);\n        let href;\n        const value = testMatch && testMatch[1];\n\n        if (value) {\n          href = getTemplateSrv().replace(field.url, {\n            __value: {\n              value: {\n                raw: value,\n              },\n              text: 'Raw value',\n            },\n          });\n        }\n        const debugFiled: DebugField = {\n          name: field.name,\n          value: value || '<no match>',\n          href,\n        };\n        return debugFiled;\n      } catch (error) {\n        return {\n          name: field.name,\n          error,\n        };\n      }\n    });\n}\n","import { css } from '@emotion/css';\nimport { ChangeEvent, useEffect, useState } from 'react';\nimport * as React from 'react';\nimport { usePrevious } from 'react-use';\n\nimport { GrafanaTheme2, DataSourceInstanceSettings, VariableSuggestion } from '@grafana/data';\nimport { DataSourcePicker } from '@grafana/runtime';\nimport { Button, DataLinkInput, Field, Icon, Input, Label, Tooltip, useStyles2, Select, Switch } from '@grafana/ui';\n\nimport { DerivedFieldConfig } from '../types';\n\ntype MatcherType = 'label' | 'regex';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  row: css({\n    display: 'flex',\n    alignItems: 'baseline',\n  }),\n  nameField: css({\n    flex: 2,\n    marginRight: theme.spacing(0.5),\n  }),\n  regexField: css({\n    flex: 3,\n    marginRight: theme.spacing(0.5),\n  }),\n  urlField: css({\n    flex: 1,\n    marginRight: theme.spacing(0.5),\n  }),\n  urlDisplayLabelField: css({\n    flex: 1,\n  }),\n  internalLink: css({\n    marginRight: theme.spacing(1),\n  }),\n  openNewTab: css({\n    marginRight: theme.spacing(1),\n  }),\n  dataSource: css({}),\n  nameMatcherField: css({\n    width: theme.spacing(20),\n    marginRight: theme.spacing(0.5),\n  }),\n});\n\ntype Props = {\n  value: DerivedFieldConfig;\n  onChange: (value: DerivedFieldConfig) => void;\n  onDelete: () => void;\n  suggestions: VariableSuggestion[];\n  className?: string;\n  validateName: (name: string) => boolean;\n};\nexport const DerivedField = (props: Props) => {\n  const { value, onChange, onDelete, suggestions, className, validateName } = props;\n  const styles = useStyles2(getStyles);\n  const [showInternalLink, setShowInternalLink] = useState(!!value.datasourceUid);\n  const [openInNewTab, setOpenInNewTab] = useState(!!value.targetBlank);\n  const previousUid = usePrevious(value.datasourceUid);\n  const [fieldType, setFieldType] = useState<MatcherType>(value.matcherType ?? 'regex');\n\n  // Force internal link visibility change if uid changed outside of this component.\n  useEffect(() => {\n    if (!previousUid && value.datasourceUid && !showInternalLink) {\n      setShowInternalLink(true);\n    }\n    if (previousUid && !value.datasourceUid && showInternalLink) {\n      setShowInternalLink(false);\n    }\n  }, [previousUid, value.datasourceUid, showInternalLink]);\n\n  const handleChange = (field: keyof typeof value) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    onChange({\n      ...value,\n      [field]: event.currentTarget.value,\n    });\n  };\n\n  const invalidName = !validateName(value.name);\n\n  return (\n    <div className={className} data-testid=\"derived-field\">\n      <div className=\"gf-form\">\n        <Field className={styles.nameField} label=\"Name\" invalid={invalidName} error=\"The name is already in use\">\n          <Input value={value.name} onChange={handleChange('name')} placeholder=\"Field name\" invalid={invalidName} />\n        </Field>\n        <Field\n          className={styles.nameMatcherField}\n          label={\n            <TooltipLabel\n              label=\"Type\"\n              content=\"Derived fields can be created from labels or by applying a regular expression to the log message.\"\n            />\n          }\n        >\n          <Select\n            options={[\n              { label: 'Regex in log line', value: 'regex' },\n              { label: 'Label', value: 'label' },\n            ]}\n            value={fieldType}\n            onChange={(type) => {\n              // make sure this is a valid MatcherType\n              if (type.value === 'label' || type.value === 'regex') {\n                setFieldType(type.value);\n                onChange({\n                  ...value,\n                  matcherType: type.value,\n                });\n              }\n            }}\n          />\n        </Field>\n        <Field\n          className={styles.regexField}\n          label={\n            <>\n              {fieldType === 'regex' && (\n                <TooltipLabel\n                  label=\"Regex\"\n                  content=\"Use to parse and capture some part of the log message. You can use the captured groups in the template.\"\n                />\n              )}\n\n              {fieldType === 'label' && <TooltipLabel label=\"Label\" content=\"Use to derive the field from a label.\" />}\n            </>\n          }\n        >\n          <Input value={value.matcherRegex} onChange={handleChange('matcherRegex')} />\n        </Field>\n        <Field label=\"\">\n          <Button\n            variant=\"destructive\"\n            title=\"Remove field\"\n            icon=\"times\"\n            onClick={(event) => {\n              event.preventDefault();\n              onDelete();\n            }}\n          />\n        </Field>\n      </div>\n\n      <div className=\"gf-form\">\n        <Field label={showInternalLink ? 'Query' : 'URL'} className={styles.urlField}>\n          <DataLinkInput\n            placeholder={showInternalLink ? '${__value.raw}' : 'http://example.com/${__value.raw}'}\n            value={value.url || ''}\n            onChange={(newValue) =>\n              onChange({\n                ...value,\n                url: newValue,\n              })\n            }\n            suggestions={suggestions}\n          />\n        </Field>\n        <Field\n          className={styles.urlDisplayLabelField}\n          label={\n            <TooltipLabel\n              label=\"URL Label\"\n              content=\"Use to override the button label when this derived field is found in a log.\"\n            />\n          }\n        >\n          <Input value={value.urlDisplayLabel} onChange={handleChange('urlDisplayLabel')} />\n        </Field>\n      </div>\n\n      <div className=\"gf-form\">\n        <Field label=\"Internal link\" className={styles.internalLink}>\n          <Switch\n            value={showInternalLink}\n            onChange={(e: ChangeEvent<HTMLInputElement>) => {\n              const { checked } = e.currentTarget;\n              if (!checked) {\n                onChange({\n                  ...value,\n                  datasourceUid: undefined,\n                });\n              }\n              setShowInternalLink(checked);\n            }}\n          />\n        </Field>\n\n        {showInternalLink && (\n          <Field label=\"\" className={styles.dataSource}>\n            <DataSourcePicker\n              tracing={true}\n              onChange={(ds: DataSourceInstanceSettings) =>\n                onChange({\n                  ...value,\n                  datasourceUid: ds.uid,\n                })\n              }\n              current={value.datasourceUid}\n              noDefault\n            />\n          </Field>\n        )}\n      </div>\n\n      <div className=\"gf-form\">\n        <Field label=\"Open in new tab\" className={styles.openNewTab}>\n          <Switch\n            value={openInNewTab}\n            onChange={(e: ChangeEvent<HTMLInputElement>) => {\n              const { checked } = e.currentTarget;\n              onChange({\n                ...value,\n                targetBlank: checked,\n              });\n              setOpenInNewTab(checked);\n            }}\n          />\n        </Field>\n      </div>\n    </div>\n  );\n};\n\nconst TooltipLabel = ({ content, label }: { content: string; label: string }) => (\n  <Label>\n    {label}\n    <Tooltip placement=\"top\" content={content} theme=\"info\">\n      <Icon tabIndex={0} name=\"info-circle\" size=\"sm\" style={{ marginLeft: '10px' }} />\n    </Tooltip>\n  </Label>\n);\n","import { css } from '@emotion/css';\nimport { useCallback, useState } from 'react';\n\nimport { GrafanaTheme2, VariableOrigin, DataLinkBuiltInVars } from '@grafana/data';\nimport { ConfigDescriptionLink, ConfigSubSection } from '@grafana/plugin-ui';\nimport { Button, useTheme2 } from '@grafana/ui';\n\nimport { DerivedFieldConfig } from '../types';\n\nimport { DebugSection } from './DebugSection';\nimport { DerivedField } from './DerivedField';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  addButton: css({\n    marginRight: '10px',\n  }),\n  derivedField: css({\n    marginBottom: theme.spacing(1),\n  }),\n  container: css({\n    marginBottom: theme.spacing(4),\n  }),\n  debugSection: css({\n    marginTop: theme.spacing(4),\n  }),\n});\n\ntype Props = {\n  fields?: DerivedFieldConfig[];\n  onChange: (value: DerivedFieldConfig[]) => void;\n};\n\nexport const DerivedFields = ({ fields = [], onChange }: Props) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const [showDebug, setShowDebug] = useState(false);\n\n  const validateName = useCallback(\n    (name: string) => {\n      return fields.filter((field) => field.name && field.name === name).length <= 1;\n    },\n    [fields]\n  );\n\n  return (\n    <ConfigSubSection\n      title=\"Derived fields\"\n      description={\n        <ConfigDescriptionLink\n          description=\"Derived fields can be used to extract new fields from a log message and create a link from its value.\"\n          suffix=\"loki/configure-loki-data-source/#derived-fields\"\n          feature=\"derived fields\"\n        />\n      }\n    >\n      <div className={styles.container}>\n        {fields.map((field, index) => {\n          return (\n            <DerivedField\n              className={styles.derivedField}\n              key={index}\n              value={field}\n              onChange={(newField) => {\n                const newDerivedFields = [...fields];\n                newDerivedFields.splice(index, 1, newField);\n                onChange(newDerivedFields);\n              }}\n              onDelete={() => {\n                const newDerivedFields = [...fields];\n                newDerivedFields.splice(index, 1);\n                onChange(newDerivedFields);\n              }}\n              validateName={validateName}\n              suggestions={[\n                {\n                  value: DataLinkBuiltInVars.valueRaw,\n                  label: 'Raw value',\n                  documentation: 'Exact string captured by the regular expression',\n                  origin: VariableOrigin.Value,\n                },\n              ]}\n            />\n          );\n        })}\n        <div>\n          <Button\n            variant=\"secondary\"\n            className={styles.addButton}\n            icon=\"plus\"\n            onClick={(event) => {\n              event.preventDefault();\n              const emptyConfig: DerivedFieldConfig = {\n                name: '',\n                matcherRegex: '',\n                urlDisplayLabel: '',\n                url: '',\n                matcherType: 'regex',\n              };\n              const newDerivedFields = [...fields, emptyConfig];\n              onChange(newDerivedFields);\n            }}\n          >\n            Add\n          </Button>\n\n          {fields.length > 0 && (\n            <Button variant=\"secondary\" type=\"button\" onClick={() => setShowDebug(!showDebug)}>\n              {showDebug ? 'Hide example log message' : 'Show example log message'}\n            </Button>\n          )}\n        </div>\n\n        {showDebug && (\n          <div className={styles.debugSection}>\n            <DebugSection\n              className={css({\n                marginBottom: '10px',\n              })}\n              derivedFields={fields}\n            />\n          </div>\n        )}\n      </div>\n    </ConfigSubSection>\n  );\n};\n","import * as React from 'react';\n\nimport { ConfigDescriptionLink, ConfigSubSection } from '@grafana/plugin-ui';\nimport { InlineField, Input } from '@grafana/ui';\n\ntype Props = {\n  maxLines: string;\n  onMaxLinedChange: (value: string) => void;\n};\n\nexport const QuerySettings = (props: Props) => {\n  const { maxLines, onMaxLinedChange } = props;\n  return (\n    <ConfigSubSection\n      title=\"Queries\"\n      description={\n        <ConfigDescriptionLink\n          description=\"Additional options to customize your querying experience.\"\n          suffix=\"loki/configure-loki-data-source/#queries\"\n          feature=\"query settings\"\n        />\n      }\n    >\n      <InlineField\n        label=\"Maximum lines\"\n        htmlFor=\"loki_config_maxLines\"\n        labelWidth={22}\n        tooltip={\n          <>\n            Loki queries must contain a limit of the maximum number of lines returned (default: 1000). Increase this\n            limit to have a bigger result set for ad-hoc analysis. Decrease this limit if your browser becomes sluggish\n            when displaying the log results.\n          </>\n        }\n      >\n        <Input\n          type=\"number\"\n          id=\"loki_config_maxLines\"\n          value={maxLines}\n          onChange={(event: React.FormEvent<HTMLInputElement>) => onMaxLinedChange(event.currentTarget.value)}\n          width={16}\n          placeholder=\"1000\"\n          spellCheck={false}\n        />\n      </InlineField>\n    </ConfigSubSection>\n  );\n};\n","import { DataSourcePluginOptionsEditorProps, DataSourceSettings } from '@grafana/data';\nimport {\n  ConfigSection,\n  DataSourceDescription,\n  ConnectionSettings,\n  Auth,\n  convertLegacyAuthProps,\n  AdvancedHttpSettings,\n} from '@grafana/plugin-ui';\nimport { config } from '@grafana/runtime';\nimport { Divider, SecureSocksProxySettings, Stack } from '@grafana/ui';\n\nimport { LokiOptions } from '../types';\n\nimport { AlertingSettings } from './AlertingSettings';\nimport { DerivedFields } from './DerivedFields';\nimport { QuerySettings } from './QuerySettings';\n\nexport type Props = DataSourcePluginOptionsEditorProps<LokiOptions>;\n\nconst makeJsonUpdater =\n  <T extends any>(field: keyof LokiOptions) =>\n  (options: DataSourceSettings<LokiOptions>, value: T): DataSourceSettings<LokiOptions> => {\n    return {\n      ...options,\n      jsonData: {\n        ...options.jsonData,\n        [field]: value,\n      },\n    };\n  };\n\nconst setMaxLines = makeJsonUpdater('maxLines');\nconst setDerivedFields = makeJsonUpdater('derivedFields');\n\nexport const ConfigEditor = (props: Props) => {\n  const { options, onOptionsChange } = props;\n  return (\n    <>\n      <DataSourceDescription\n        dataSourceName=\"Loki\"\n        docsLink=\"https://grafana.com/docs/grafana/latest/datasources/loki/configure-loki-data-source/\"\n        hasRequiredFields={false}\n      />\n      <Divider spacing={4} />\n      <ConnectionSettings config={options} onChange={onOptionsChange} urlPlaceholder=\"http://localhost:3100\" />\n      <Divider spacing={4} />\n      <Auth\n        {...convertLegacyAuthProps({\n          config: options,\n          onChange: onOptionsChange,\n        })}\n      />\n      <Divider spacing={4} />\n      <ConfigSection\n        title=\"Additional settings\"\n        description=\"Additional settings are optional settings that can be configured for more control over your data source.\"\n        isCollapsible={true}\n        isInitiallyOpen\n      >\n        <Stack gap={5} direction=\"column\">\n          <AdvancedHttpSettings config={options} onChange={onOptionsChange} />\n          {config.secureSocksDSProxyEnabled && (\n            <SecureSocksProxySettings options={options} onOptionsChange={onOptionsChange} />\n          )}\n          <AlertingSettings options={options} onOptionsChange={onOptionsChange} />\n          <QuerySettings\n            maxLines={options.jsonData.maxLines || ''}\n            onMaxLinedChange={(value) => onOptionsChange(setMaxLines(options, value))}\n          />\n          <DerivedFields\n            fields={options.jsonData.derivedFields}\n            onChange={(value) => onOptionsChange(setDerivedFields(options, value))}\n          />\n        </Stack>\n      </ConfigSection>\n    </>\n  );\n};\n","import { DashboardLoadedEvent, DataSourcePlugin } from '@grafana/data';\nimport { getAppEvents } from '@grafana/runtime';\n\nimport LokiCheatSheet from './components/LokiCheatSheet';\nimport LokiQueryEditorByApp from './components/LokiQueryEditorByApp';\nimport { ConfigEditor } from './configuration/ConfigEditor';\nimport { LokiDatasource } from './datasource';\nimport { onDashboardLoadedHandler } from './tracking';\nimport { LokiQuery } from './types';\n\nexport const plugin = new DataSourcePlugin(LokiDatasource)\n  .setQueryEditor(LokiQueryEditorByApp)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditorHelp(LokiCheatSheet);\n\n// Subscribe to on dashboard loaded event so that we can track plugin adoption\ngetAppEvents().subscribe<DashboardLoadedEvent<LokiQuery>>(DashboardLoadedEvent, onDashboardLoadedHandler);\n"],"names":["inProgress","dataWebpackPrefix","DataView","getNative","module","exports","Map","Promise","Set","Symbol","WeakMap","baseTimes","isArguments","isArray","isBuffer","isIndex","isTypedArray","hasOwnProperty","Object","prototype","value","inherited","isArr","isArg","isBuff","isType","skipIndexes","result","length","String","key","call","push","array","iteratee","index","Array","predicate","fromIndex","fromRight","getRawTag","objectToString","symToStringTag","toStringTag","undefined","baseFindIndex","baseIsNaN","strictIndexOf","baseGetTag","isObjectLike","isFunction","isMasked","isObject","toSource","reIsHostCtor","funcProto","Function","objectProto","funcToString","toString","reIsNative","RegExp","replace","test","isLength","typedArrayTags","isPrototype","nativeKeys","object","nativeFloor","Math","floor","string","n","arrayMap","isSymbol","symbolProto","symbolToString","baseToString","trimmedEndIndex","reTrimStart","slice","func","props","coreJsData","freeGlobal","g","baseIsNative","getValue","nativeObjectToString","isOwn","tag","unmasked","e","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","resolve","Ctor","constructor","ctorString","reIsUint","type","eq","isArrayLike","uid","maskSrcKey","exec","keys","IE_PROTO","overArg","freeExports","nodeType","freeModule","freeProcess","process","nodeUtil","types","require","binding","transform","arg","freeSelf","self","root","reWhitespace","charAt","other","reRegExpChar","reHasRegExpChar","source","baseIndexOf","isString","toInteger","values","nativeMax","max","collection","guard","indexOf","baseIsArguments","propertyIsEnumerable","arguments","stubFalse","Buffer","baseKeys","splice","size","baseIsTypedArray","baseUnary","nodeIsTypedArray","arrayLikeKeys","baseRepeat","isIterateeCall","toNumber","INFINITY","toFinite","remainder","baseTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","valueOf","isBinary","baseValues","pluralRules","singularRules","uncountables","irregularPlurals","irregularSingles","sanitizeRule","rule","restoreCase","word","token","toLowerCase","toUpperCase","substr","interpolate","str","args","match","sanitizeWord","rules","len","replaceWord","replaceMap","keepMap","checkWord","bool","pluralize","count","inclusive","singular","plural","isPlural","isSingular","addPluralRule","replacement","addSingularRule","addUncountableRule","addIrregularRule","single","forEach","hasElementType","Element","hasMap","hasSet","hasArrayBuffer","isView","equal","a","b","i","it","entries","next","done","has","get","flags","$$typeof","error","message","console","warn","useMountedState","mountedRef","useRef","useCallback","current","useEffect","usePrevious","state","ref","f","k","for","l","m","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","__self","__source","q","c","d","h","defaultProps","_owner","Fragment","jsx","jsxs","ANY","Comparator","comp","options","parseOptions","loose","trim","split","join","debug","this","parse","semver","operator","version","r","re","t","COMPARATORLOOSE","COMPARATOR","TypeError","SemVer","er","cmp","intersects","Range","includePrerelease","startsWith","includes","safeRe","SPACE_CHARACTERS","range","raw","set","formatted","map","parseRange","filter","first","isNullSet","isAny","comps","format","memoKey","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","cached","cache","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","rangeList","parseComparator","replaceGTE0","rangeMap","comparators","delete","some","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","remainingComparators","testComparator","pop","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","id","replaceTilde","TILDELOOSE","TILDE","_","M","pr","ret","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","from","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","prerelease","allowed","major","minor","patch","MAX_LENGTH","MAX_SAFE_INTEGER","compareIdentifiers","LOOSE","FULL","num","build","compare","compareMain","comparePre","compareBuild","inc","release","identifier","identifierBase","Error","PRERELEASELOOSE","PRERELEASE","base","Number","isNaN","s","neq","gt","gte","lt","lte","op","rtl","coerceRtlRegex","COERCERTLFULL","COERCERTL","lastIndex","COERCEFULL","COERCE","versionA","versionB","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","prefix","throwErrors","parsed","list","sort","v","internalRe","constants","identifiers","valid","clean","diff","rcompare","compareLoose","rsort","coerce","satisfies","toComparators","maxSatisfying","minSatisfying","minVersion","validRange","outside","gtr","ltr","simplifyRange","subset","src","tokens","SEMVER_SPEC_VERSION","RELEASE_TYPES","rcompareIdentifiers","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","env","NODE_DEBUG","numeric","anum","bnum","firstKey","looseOption","freeze","emptyOpts","safeSrc","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","name","isGlobal","safe","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","BUILD","FULLPLAIN","MAINVERSIONLOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","LONETILDE","LONECARET","r1","r2","versions","maxSV","rangeObj","min","minSV","minver","setMin","comparator","compver","hilo","gtfn","ltefn","ltfn","ecomp","high","low","prev","ranges","simplified","original","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","add","needDomLTPre","needDomGTPre","sawNonNull","OUTER","simpleSub","simpleDom","isSub","defineProperty","_includes","_interopRequireDefault","_tokenTypes","_Indentation","_InlineBlock","_Params","obj","__esModule","_defineProperties","target","descriptor","enumerable","configurable","writable","trimSpacesEnd","Formatter","cfg","tokenizer","tokenOverride","instance","Constructor","_classCallCheck","indentation","indent","inlineBlock","params","previousReservedWord","protoProps","staticProps","query","tokenize","getFormattedQueryFromTokens","_this","formattedQuery","WHITESPACE","LINE_COMMENT","formatLineComment","BLOCK_COMMENT","formatBlockComment","RESERVED_TOP_LEVEL","formatTopLevelReservedWord","RESERVED_TOP_LEVEL_NO_INDENT","formatTopLevelReservedWordNoIndent","RESERVED_NEWLINE","formatNewlineReservedWord","RESERVED","formatWithSpaces","OPEN_PAREN","formatOpeningParentheses","CLOSE_PAREN","formatClosingParentheses","PLACEHOLDER","formatPlaceholder","formatComma","formatWithSpaceAfter","formatWithoutSpaces","formatQuerySeparator","addNewline","indentComment","comment","getIndent","decreaseTopLevel","equalizeWhitespace","formatReservedWord","increaseTopLevel","preserveWhitespaceFor","previousToken","uppercase","beginIfPossible","isActive","increaseBlockLevel","end","decreaseBlockLevel","resetIndentation","repeat","linesBetweenQueries","endsWith","offset","default","_repeat","_last","INDENT_TYPE_TOP_LEVEL","Indentation","indentTypes","InlineBlock","level","isInlineBlock","isForbiddenToken","_ref","COMMENT","Params","_isEmpty","_escapeRegExp","Tokenizer","WHITESPACE_REGEX","NUMBER_REGEX","OPERATOR_REGEX","BLOCK_COMMENT_REGEX","LINE_COMMENT_REGEX","createLineCommentRegex","lineCommentTypes","RESERVED_TOP_LEVEL_REGEX","createReservedWordRegex","reservedTopLevelWords","RESERVED_TOP_LEVEL_NO_INDENT_REGEX","reservedTopLevelWordsNoIndent","RESERVED_NEWLINE_REGEX","reservedNewlineWords","RESERVED_PLAIN_REGEX","reservedWords","WORD_REGEX","createWordRegex","specialWordChars","STRING_REGEX","createStringRegex","stringTypes","OPEN_PAREN_REGEX","createParenRegex","openParens","CLOSE_PAREN_REGEX","closeParens","INDEXED_PLACEHOLDER_REGEX","createPlaceholderRegex","indexedPlaceholderTypes","IDENT_NAMED_PLACEHOLDER_REGEX","namedPlaceholderTypes","STRING_NAMED_PLACEHOLDER_REGEX","createStringPattern","concat","reservedWordsPattern","patterns","parens","escapeParen","paren","pattern","typesRegex","input","getNextToken","substring","getWhitespaceToken","getCommentToken","getStringToken","getOpenParenToken","getCloseParenToken","getPlaceholderToken","getNumberToken","getReservedWordToken","getWordToken","getOperatorToken","getTokenOnFirstMatch","regex","getLineCommentToken","getBlockCommentToken","STRING","getIdentNamedPlaceholderToken","getStringNamedPlaceholderToken","getIndexedPlaceholderToken","getPlaceholderTokenWithKey","parseKey","_this2","getEscapedPlaceholderKey","quoteChar","_ref2","NUMBER","OPERATOR","getTopLevelReservedToken","getNewlineReservedToken","getTopLevelReservedTokenNoIndent","getPlainReservedToken","WORD","_ref3","matches","_Formatter","_Tokenizer","Db2Formatter","N1qlFormatter","previousReservedToken","PlSqlFormatter","StandardSqlFormatter","_Db2Formatter","_N1qlFormatter","_PlSqlFormatter","_StandardSqlFormatter","language","resolveSelectors","versionedSelectors","grafanaVersion","resolveSelectorGroup","group","isVersionedSelectorGroup","assertIsSemverValid","resolveSelector","versionedSelector","versionToUse","selectorName","MIN_GRAFANA_VERSION","versionedComponents","RadioButton","container","Breadcrumbs","breadcrumb","title","CanvasGridAddActions","addPanel","groupPanels","ungroup","addRow","pasteRow","addTab","pasteTab","DashboardEditPaneSplitter","primaryBody","EditPaneHeader","deleteButton","copyDropdown","copy","duplicate","backButton","TimePicker","openButton","overlayContent","fromField","toField","applyTimeRange","copyTimeRange","pasteTimeRange","calendar","label","closeButton","absoluteTimeRangeTitle","DataSourcePermissions","form","roleType","rolePicker","permissionLevel","DateTimePicker","DataSource","TestData","QueryTab","scenarioSelectContainer","scenarioSelect","noise","seriesCount","spread","startValue","drop","DataSourceHttpSettings","urlInput","Jaeger","traceIDInput","Prometheus","configPage","connectionSettings","manageAlerts","allowAsRecordingRulesTarget","scrapeInterval","queryTimeout","defaultEditor","disableMetricLookup","prometheusType","prometheusVersion","cacheLevel","incrementalQuerying","queryOverlapWindow","disableRecordingRules","customQueryParameters","httpMethod","exemplarsAddButton","internalLinkSwitch","codeModeMetricNamesSuggestionLimit","seriesLimit","queryEditor","explain","editorToggle","legend","step","exemplars","builder","metricSelect","hints","metricsExplorer","queryAdvisor","code","queryField","metricsCountInfo","metricsBrowser","selectMetric","metricList","labelNamesFilter","labelValuesFilter","useQuery","useAsRateQuery","validateSelector","clear","exemplarMarker","variableQueryEditor","queryType","labelnames","metricRegex","labelValues","labelSelect","metricNames","varQueryResult","seriesQuery","classicQuery","annotations","minStep","tags","text","seriesValueAsTimestamp","Menu","MenuComponent","MenuGroup","MenuItem","SubMenu","icon","Panels","Panel","content","headerContainer","headerItems","item","menuItems","menu","containerByTitle","headerCornerInfo","mode","status","loadingBar","HoverWidget","dragIcon","PanelDataErrorMessage","Visualization","Graph","VisualizationTab","legendSection","Legend","legendItemAlias","showLegendSwitch","xAxis","labels","BarGauge","valueV2","PieChart","svgSlice","Text","Table","header","footer","body","VizLegend","seriesName","Drawer","General","expand","contract","close","rcContentWrapper","subtitle","DashboardSaveDrawer","saveButton","saveAsButton","saveAsTitleInput","PanelEditor","OptionsPane","select","fieldLabel","fieldInput","DataPane","applyButton","toggleVizPicker","toggleVizOptions","toggleTableView","showZoomField","showAttributionField","showScaleField","showMeasureField","showDebugField","measureButton","Outline","section","node","ElementEditPane","variableType","addVariableButton","variableNameInput","variableLabelInput","AutoGridLayout","minColumnWidth","customMinColumnWidth","clearCustomMinColumnWidth","maxColumns","rowHeight","customRowHeight","clearCustomRowHeight","fillScreen","PanelInspector","Data","Stats","Json","Query","refreshButton","jsonObjectKeys","Tab","active","RefreshPicker","runButtonV2","intervalButtonV2","queryInspectorButton","queryHistoryButton","addQuery","addQueryFromLibrary","queryGroupTopSection","addExpression","QueryHistory","queryText","QueryEditorRows","rows","QueryEditorRow","actionButton","refId","AlertTab","AlertRules","groupToggle","toggle","expandedContent","previewButton","ruleNameField","newFolderButton","newFolderNameField","newFolderNameCreateButton","newEvaluationGroupButton","newEvaluationGroupName","newEvaluationGroupInterval","newEvaluationGroupCreate","stepNo","stepAdvancedModeSwitch","Alert","alertV2","severity","TransformTab","newTransform","transformationEditor","transformationEditorDebugger","Transforms","card","disableTransformationButton","Reduce","modeLabel","calculationsLabel","SpatialOperations","actionLabel","locationLabel","location","autoOption","coords","option","latitudeFieldLabel","longitudeFieldLabel","geohash","geohashFieldLabel","lookup","lookupFieldLabel","gazetteerFieldLabel","searchInput","noTransformationsMessage","addTransformationButton","removeAllTransformationsButton","NavBar","Configuration","button","Toggle","Reporting","NavMenu","NavToolbar","commandPaletteTrigger","shareDashboard","markAsFavorite","editDashboard","editButton","exitButton","settingsButton","addRowButton","addLibraryPanelButton","addVisualizationButton","pastePanelButton","discardChangesButton","discardLibraryPanelButton","unlinkLibraryPanelButton","saveLibraryPanelButton","backToDashboardButton","PageToolbar","tooltip","itemButton","QueryEditorToolbarItem","BackButton","backArrow","OptionsGroup","PluginVisualization","Select","toggleAllOptions","singleValue","FieldConfigEditor","OverridesConfigEditor","FolderPicker","containerV2","ReadonlyFolderPicker","DataSourcePicker","inputV2","dataSourceList","advancedModal","builtInDataSourceList","TimeZonePicker","changeTimeSettingsButton","WeekStartPicker","placeholder","TraceViewer","spanBar","QueryField","QueryBuilder","queryPatterns","inputSelect","valueSelect","matchOperatorSelect","ValuePicker","Search","sectionV2","itemsV2","cards","collapseFolder","sectionId","expandFolder","dashboardItem","dashboardCard","folderHeader","folderName","folderContent","dashboardItems","DashboardLinks","dropDown","link","LoadingIndicator","CallToActionCard","buttonV2","DataLinksContextMenu","singleLink","DataLinksActionsTooltip","tooltipWrapper","CodeEditor","ReactMonacoEditor","editorLazy","DashboardImportPage","textarea","submit","ImportDashboardForm","PanelAlertTabContent","VisualizationPreview","ColorSwatch","DashboardRow","UserProfile","profileSaveButton","preferencesSaveButton","orgsTable","sessionsTable","extensionPointTabs","extensionPointTab","tabId","FileUpload","inputField","fileNameSpan","DebugOverlay","wrapper","OrgRolePicker","AnalyticsToolbarButton","Variables","variableOption","variableLinkWrapper","Annotations","annotationsTypeInput","annotationsChoosePanelInput","editor","testButton","resultContainer","Tooltip","ReturnToPrevious","buttonGroup","dismissButton","SQLQueryEditor","selectColumn","selectColumnInput","selectFunctionParameter","selectAggregation","selectAggregationInput","selectAlias","selectAliasInput","selectInputParameter","filterConjunction","filterField","filterOperator","headerTableSelector","headerFilterSwitch","headerGroupSwitch","headerOrderSwitch","headerPreviewSwitch","EntityNotFound","Portal","selectors","pages","Alerting","AddAlertRule","url","EditAlertRule","alertRuleUid","Login","username","password","skip","PasswordlessLogin","email","Home","readOnly","saveAndTest","alert","DataSources","dataSources","dataSourceName","EditDataSource","dataSourceUid","settings","AddDataSource","dataSourcePluginsV2","pluginName","ConfirmModal","AddDashboard","addNewPanel","itemButtonAddViz","addNewRow","addNewPanelLibrary","Settings","List","Edit","annotationIndex","editIndex","ImportDashboard","Dashboard","DashNav","nav","navV2","publicDashboardTag","shareButton","scrollContainer","newShareButton","shareLink","arrowMenu","shareInternally","shareExternally","shareSnapshot","NewExportButton","exportAsJson","playlistControls","stop","Controls","submenu","submenuItem","submenuItemLabels","submenuItemValueDropDownValueLinkTexts","submenuItemValueDropDownDropDown","submenuItemValueDropDownOptionTexts","annotationsWrapper","annotationLabel","annotationToggle","Actions","deleteDashBoard","sectionItems","saveDashBoard","saveAsDashBoard","urlParams","dashboardUid","addAnnotationCTAV2","NewAnnotation","panelFilterSelect","showInLabel","previewInDashboard","apply","enable","hide","addVariableCTAV2","newButton","table","tableRowNameFields","variableName","tableRowDefinitionFields","tableRowArrowUpButtons","tableRowArrowDownButtons","tableRowDuplicateButtons","tableRowRemoveButtons","headerLink","modeLabelNew","modeLabelEdit","generalNameInput","generalNameInputV2","generalTypeSelect","generalTypeSelectV2","generalLabelInput","generalLabelInputV2","generalHideSelect","generalHideSelectV2","selectionOptionsAllowCustomValueSwitch","selectionOptionsMultiSwitch","selectionOptionsIncludeAllSwitch","selectionOptionsCustomAllInput","previewOfValuesOption","submitButton","QueryVariable","queryOptionsDataSourceSelect","queryOptionsOpenButton","queryOptionsRefreshSelect","queryOptionsRefreshSelectV2","queryOptionsRegExInput","queryOptionsRegExInputV2","queryOptionsSortSelect","queryOptionsSortSelectV2","queryOptionsQueryInput","valueGroupsTagsEnabledSwitch","valueGroupsTagsTagsQueryInput","valueGroupsTagsTagsValuesQueryInput","ConstantVariable","constantOptionsQueryInput","constantOptionsQueryInputV2","DatasourceVariable","datasourceSelect","nameFilter","TextBoxVariable","textBoxOptionsQueryInput","textBoxOptionsQueryInputV2","CustomVariable","customValueInput","IntervalVariable","intervalsValueInput","autoEnabledCheckbox","stepCountIntervalSelect","minIntervalInput","GroupByVariable","dataSourceSelect","infoText","modeToggle","AdHocFiltersVariable","marker","Rows","Repeated","ConfigSection","warningMessage","Dashboards","dashboards","toggleView","SaveDashboardAsModal","newName","save","SaveDashboardModal","saveVariables","saveTimerange","saveRefresh","SharePanelModal","linkToRenderedImage","ShareDashboardModal","PublicDashboard","WillBePublicCheckbox","LimitedDSCheckbox","CostIncreaseCheckbox","PauseSwitch","EnableAnnotationsSwitch","CreateButton","DeleteButton","CopyUrlInput","CopyUrlButton","SettingsDropdown","TemplateVariablesWarningAlert","UnsupportedDataSourcesWarningAlert","NoUpsertPermissionsWarningAlert","EnableTimeRangeSwitch","EmailSharingConfiguration","Container","ShareType","EmailSharingInput","EmailSharingInviteButton","EmailSharingList","DeleteEmail","ReshareLink","SnapshotScene","PublishSnapshot","ShareDashboardDrawer","ShareInternally","lockTimeRangeSwitch","shortenUrlSwitch","copyUrlButton","SharePanel","preview","widthInput","heightInput","scaleFactorInput","generateImageButton","downloadImageButton","ShareExternally","publicAlert","emailSharingAlert","shareTypeSelect","Creation","PublicShare","createButton","cancelButton","EmailShare","willBePublicCheckbox","enableTimeRangeSwitch","enableAnnotationsSwitch","revokeAccessButton","toggleAccessButton","ShareSnapshot","publishSnapshot","ExportDashboardDrawer","ExportAsJson","codeEditor","exportExternallyToggle","saveToFileButton","copyToClipboardButton","page","NotAvailable","pausedDescription","PublicDashboardScene","loadingPage","controls","RequestViewAccess","recipientInput","PublicDashboardConfirmAccess","Explore","graph","scrollView","addFromQueryLibrary","SoloPanel","PluginsList","listItem","signatureErrorNotice","PluginPage","signatureInfo","disabledInfo","PlaylistForm","interval","itemDelete","BrowseDashboards","row","checkbox","NewFolderForm","nameInput","SearchDashboards","FolderView","PublicDashboards","ListItem","linkButton","configButton","trashcanButton","pauseSwitch","UserListPage","tabs","allUsers","orgUsers","anonUserDevices","publicDashboardsUsers","users","org","admin","publicDashboards","UserListAdminPage","UsersListPage","UserAnonListPage","UsersListPublicDashboardsPage","DashboardsListModal","ProfilePage","Plugin","pluginId","MigrateToCloud","components","queryTypeOptions","LokiQueryType","description","Instant","queryDirections","LokiQueryDirection","Backward","Forward","getQueryDirectionLabel","direction","find","queryDirection","LokiOptionFields","lineLimitValue","onRunQuery","runOnBlur","onChange","onChangeQueryLimit","nextQuery","maxLines","preprocessMaxLines","Stack","alignItems","gap","aria-label","wrap","data-testid","InlineField","Input","className","currentTarget","onKeyDown","onBlur","config","featureToggles","lokiShardSplitting","Scan","lokiExperimentalStreaming","Stream","Field","lazy","MonacoQueryFieldLazy","Suspense","fallback","MonacoQueryFieldWrapper","lastRunValueRef","rest","LokiQueryField","PureComponent","componentDidMount","_isMounted","datasource","languageProvider","start","setState","labelsLoaded","componentWillUnmount","componentDidUpdate","prevProps","shouldRefreshLabels","fetchLabels","timeRange","render","ExtraFieldElement","history","div","onChangeQuery","initialValue","expr","super","override","validateQuery","interpolatedQuery","queryLines","parser","interpolatedErrors","parseQuery","parseErrors","queryErrors","flatMap","interpolatedError","queryError","parseError","isEmptyString","errorNode","parent","startLineNumber","startColumn","endLineNumber","endColumn","startPos","endPos","line","findErrorBoundary","isErrorBoundary","iterate","enter","nodeRef","ErrorId","boundary","placeHolderScopedVars","__interval","__rate_interval","__auto","__interval_ms","__range_ms","__range_s","__range","perf","performance","now","Date","warned","PROCESS","emitWarning","msg","fn","AC","globalThis","AbortController","AS","AbortSignal","onabort","_onabort","reason","aborted","addEventListener","warnACPolyfill","signal","abort","printACPolyfillWarning","LRU_CACHE_IGNORE_AC_WARNING","isPosInt","isFinite","getUintArray","pow","Uint8Array","Uint16Array","Uint32Array","ZeroArray","fill","heap","static","create","HeapCls","LRUCache","ttl","ttlResolution","ttlAutopurge","updateAgeOnGet","updateAgeOnHas","allowStale","noDisposeOnSet","noUpdateTTL","maxEntrySize","sizeCalculation","noDeleteOnFetchRejection","noDeleteOnStaleGet","allowStaleOnFetchAbort","allowStaleOnFetchRejection","ignoreFetchAbort","unsafeExposeInternals","starts","ttls","sizes","keyMap","keyList","valList","head","tail","free","isBackgroundFetch","backgroundFetch","context","moveToTail","indexes","rindexes","isStale","maxSize","calculatedSize","fetchMethod","memoMethod","dispose","onInsert","disposeAfter","UintArray","shouldWarn","getRemainingTTL","Infinity","setTimeout","unref","cachedNow","getNow","age","remainingTTL","entrySize","totalCalculatedSize","_i","_s","_st","_k","_v","rentries","rkeys","rvalues","iterator","getOptions","__staleWhileFetching","thisp","rforEach","purgeStale","deleted","info","entry","remain","dump","arr","unshift","load","setOptions","maxEntrySizeExceeded","oldVal","__abortController","oldValue","dt","task","shift","val","hasOptions","peek","peekOptions","ac","fetchOpts","cb","updateCache","ignoreAbort","fetchAborted","fetchError","fetchAbortIgnored","fetchResolved","fetchFail","bf","fetchUpdated","allowStaleAborted","noDelete","returnedStale","__returned","fetchDispatched","res","rej","fmp","then","fetchRejected","assign","fetch","fetchOptions","forceRefresh","stale","staleVal","forceFetch","memo","memoOptions","vv","fetching","pi","ni","EMPTY_SELECTOR","HIDDEN_LABELS","LokiLanguageProvider","LanguageProvider","getLabelKeys","labelKeys","importFromAbstractQuery","labelBasedQuery","abstractQueryToExpr","exportToAbstractQuery","labelMatchers","getStreamSelectorsFromQuery","streamSelector","buildVisualQueryFromString","mapAbstractOperatorsToOp","flatten","lokiLabelNamesQueryApi","fetchLabelsByLabelsEndpoint","data","fetchSeriesLabels","getDefaultTimeRange","getTimeRangeParams","request","generateCacheKey","param","roundTime","nanoseconds","fetchDetectedFields","queryOptions","requestOptions","interpolatedExpr","interpolateString","scopedVars","rangeParams","limit","reject","fetchDetectedFieldValues","labelName","fetchDetectedLabelValues","encodeURIComponent","paramCacheKey","cacheKey","detectedFieldValuesCache","labelValuesPromise","detectedLabelValuesPromisesCache","throwError","streamParam","labelsCache","labelsPromisesCache","empty","extractedLabelKeys","structuredMetadataKeys","unwrapLabelKeys","hasJSON","hasLogfmt","hasPack","series","getDataSamples","DEFAULT_MAX_LINES_SAMPLE","extractLogParserFromDataFrame","extractLabelKeysFromDataFrame","LabelType","Indexed","Parsed","StructuredMetadata","extractUnwrapLabelKeysFromDataFrame","initialValues","started","startedTimeRange","seriesCache","metadataRequest","newRangeParams","prevRangeParams","startTask","interpolatedMatch","processLabels","fetchSeries","extendStatics","setPrototypeOf","__proto__","__extends","__","__assign","__values","o","__read","ar","__spreadArray","pack","SuppressedError","createErrorClass","createImpl","ctorFunc","stack","UnsubscriptionError","_super","errors","err","arrRemove","Subscription","initialTeardown","closed","_parentage","_finalizers","unsubscribe","e_1","_a","e_2","_b","_parentage_1","_parentage_1_1","remove","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","_removeParent","EMPTY","EMPTY_SUBSCRIPTION","isSubscription","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","handler","timeout","delegate","clearTimeout","handle","noop","COMPLETE_NOTIFICATION","createNotification","kind","errorContext","isRoot","errorThrown","Subscriber","destination","isStopped","EMPTY_OBSERVER","complete","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","bind","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","reportUnhandledError","notification","subscriber","observable","identity","x","pipeFromArray","fns","reduce","Observable","subscribe","_subscribe","lift","isObserver","_trySubscribe","sink","promiseCtor","getPromiseCtor","pipe","operations","toPromise","ObjectUnsubscribedError","Subject","currentObservers","observers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","_c","_checkFinalizedStatuses","_innerSubscribe","asObservable","dateTimestampProvider","ReplaySubject","_bufferSize","_windowTime","_timestampProvider","_buffer","_infiniteTimeWindow","_trimBuffer","subscription","adjustedBufferSize","last","DEFAULT_WEBSOCKET_CONFIG","deserializer","JSON","serializer","stringify","WebSocketSubject","urlConfigOrSource","_socket","_config","_output","WebSocketCtor","WebSocket","sock","_resetState","multiplex","subMsg","unsubMsg","messageFilter","observer","_connectSocket","protocol","binaryType","socket","readyState","onopen","evt","openObserver","queue","send","closingObserver","onerror","onclose","closeObserver","wasClean","onmessage","y","ROTL","bytes","K","H","newBytes","N","ceil","j","W","T","of","uuid","v35","hash","namespace","buf","valueBytes","unescape","charCodeAt","stringToBytes","namespaceBytes","v5","DNS","URL","createUid","ts","labelsString","usedUids","uuidv5","newCount","LiveStreams","getStream","retryInterval","stream","streams","CircularDataFrame","capacity","addField","FieldType","time","meta","preferredVisualisationType","response","tsField","fields","lineField","idField","allLabelsString","toISOString","appendResponseToBufferedData","retryWhen","attempts","mergeMap","retryAttempt","timer","finalize","useAsync","deps","initialState","loading","lastCallId","isMounted","useState","callback","callId","prevState","useAsyncFn","getStyles","theme","css","display","spacing","flexDirection","flex","position","textWrapper","hidden","visibility","maxWidth","marginBottom","margin","rawQueryContainer","textAlign","lineBreak","marginTop","marginRight","minHeight","ui","backgroundColor","colors","background","secondary","padding","zIndex","portal","top","right","rawQuery","queryDescription","marginLeft","iconButton","navbarFixed","operationsToggle","IS_LOKI_LOG_CONTEXT_UI_OPEN","LokiContextUi","logContextProvider","updateFilter","onClose","origQuery","runContextQuery","styles","useStyles2","contextFilters","setContextFilters","showPreservedFiltersAppliedNotification","setShowPreservedFiltersAppliedNotification","initialized","setInitialized","setLoading","isOpen","setIsOpen","window","localStorage","getItem","includePipelineOperations","setIncludePipelineOperations","SHOULD_INCLUDE_PIPELINE_OPERATIONS","timerHandle","previousInitialized","previousContextFilters","isInitialState","useMemo","nonIndexed","enabled","queryContainsValidPipelineStages","structuredClone","preservedLabels","removedLabels","selectedExtractedLabels","setItem","LOKI_LOG_CONTEXT_PRESERVED_LABELS","initContextFilters","getInitContextFilters","dateTime","timeEpochMs","preservedFiltersApplied","reportInteraction","logRowUid","realLabels","realLabelsEnabled","parsedLabels","parsedLabelsEnabled","contextFilterToSelectFilter","contextFilter","escapeLabelValueInSelector","showNonIndexedLabels","queryExpr","prepareExpression","elevated","Button","variant","disabled","onClick","removeItem","Collapse","collapsible","onToggle","action","RawQuery","grammar","lokiGrammar","Icon","Spinner","Label","MultiSelect","isLoading","closeMenuOnSelect","maxMenuHeight","noOptionsMessage","actionMeta","isClearable","InlineFieldRow","RenderUserContentAsHTML","renderMarkdown","InlineSwitch","showLabel","transparent","checked","SortDirection","sortDataFrameByTime","frame","dir","timeField","field","fieldValues","nanos","isAsc","valA","valB","nanoA","nanoB","makeIndex","sorted","vals","idx","LogContextProvider","getQueryAndRange","cacheFilters","LogRowContextQueryDirection","cachedContextFilters","filters","prepareLogRowContextQueryTarget","contextTimeBuffer","REF_ID_STARTER_LOG_ROW_CONTEXT","random","FieldCache","dataFrame","getFirstFieldOfType","tsValue","rowIndex","timestamp","toUtc","getLogRowContextUi","applyTemplateVariables","onContextClose","preparedExpression","processContextFiltersToExpr","processPipelineStagesToExpr","getLogRowContextQuery","getLogRowContext","app","CoreApp","lastValueFrom","makeRequest","catchError","statusText","switchMap","processedFrames","Descending","processResults","escapeLabelValueInExactSelector","hasParser","isQueryWithParser","parserCount","getParserFromQuery","addParserToQuery","nonIndexedLabels","parsedLabel","addLabelToQuery","currentExpr","newExpr","origExpr","allNodePositions","getNodePositionsFromQuery","PipelineStage","LabelParser","Logfmt","LineFilters","LabelFilter","pipelineStagePositions","otherNodePositions","pipelineStagePosition","contains","getExpression","isEmpty","rowLabels","allLabels","queryWithParser","labelType","getLabelTypeFromFrame","preservedLabelsString","arePreservedLabelsUsed","newContextFilters","labelNamesRegex","labelValuesRegex","variableOptions","QueryType","LabelNames","LabelValues","LokiVariableQueryEditor","setType","setLabel","labelOptions","setLabelOptions","setStream","previousType","variableQuery","queryBase","LokiVariableQueryType","migrateVariableQuery","labelNames","handleBlur","labelWidth","newType","width","newLabel","allowCustomValue","grow","LokiVariableSupport","CustomVariableSupport","execute","metricFindQuery","targets","fieldFromDerivedFieldConfig","derivedFieldConfigs","dataSourceSrv","getDataSourceSrv","dataLinks","acc","derivedFieldConfig","datasourceUid","dsSettings","getInstanceSettings","urlDisplayLabel","internal","datasourceName","targetBlank","links","makeTableFrames","instantMetricFrames","framesWithRefId","framesByRefId","groupBy","frames","tableTimeField","tableValueField","number","allLabelNames","flat","labelFields","filterable","valueField","timeArray","valueArray","makeTableFrame","setFrameMeta","oldMeta","newMeta","processStreamFrame","custom","lokiQueryStatKey","dataFrameHasLokiError","newFrame","searchWords","getHighlighterExpressionsFromQuery","derivedFields","derivedFieldsGrouped","newFields","matcherType","intersectingKey","matcherRegex","logMatch","getDerivedFields","processStreamsFrames","queryMap","processMetricRangeFrames","groupFrames","streamsFrames","metricInstantFrames","metricRangeFrames","isMetricFrame","improveError","LokiAnnotationsQueryEditor","queryWithRefId","annotation","onAnnotationChange","instant","EditorRow","EditorField","titleFormat","event","tagKeys","textFormat","combineResponses","currentResponse","newResponse","cloneQueryResponse","currentFrame","shouldCombine","dest","destTimeField","destIdField","sourceTimeField","sourceIdField","sourceTimeValues","totalFields","destIdx","resolveIdx","entryExistsInDest","compareEntries","sourceField","findSourceField","stats","getCombinedMetadataStats","mergeFrames","cloneDataFrame","mergedErrors","mergedError","mergedTraceIds","traceIds","destField","closestIdx","destIndex","sourceIndex","sameTimestamp","compareNsTimestamps","referenceField","sourceFields","candidates","candidate","shallowCompare","TOTAL_BYTES_STAT","EXEC_TIME_STAT","destStats","sourceStats","stat","destStat","displayName","sourceStat","unit","eitherStat","frame1","frame2","frameType1","DataFrameType","TimeSeriesMulti","field1","field2","customType1","frameType","customType2","partitionTimeRange","isLogsQuery","originalTimeRange","stepMs","duration","toDate","getTime","startTime","endTime","idealRangeDuration","chunkEndTime","chunkStartTime","reverse","splitLogsTimeRange","alignedDuration","trunc","splitMetricTimeRange","adjustTargetsFromResponseState","targetFrame","updatedMaxLines","runSplitGroupedQueries","requests","responseKey","queryGroupId","uuidv4","mergedResponse","LoadingState","Streaming","totalRequests","partition","longestPartition","shouldStop","subquerySubscription","retriesMap","retryTimer","runNextRequest","requestN","requestGroup","retrying","nextRequest","nextRequestN","nextRequestGroup","findIndex","getNextRequestPointers","Done","retry","errorResponse","disableRetry","isRetriableError","retries","subRequest","requestId","runQuery","partialResponse","skipPartialUpdates","LOADING_FRAME_NAME","loadingFrame","arrayToDataFrame","timeEnd","isRegion","color","dataTopic","DataTopic","updateLoadingFrame","runSplitQuery","queries","nonSplittingQueries","normalQueries","isQueryWithRangeVariable","querySupportsSplitting","logQueries","metricQueries","oneDayMs","directionPartitionedLogQueries","resolutionPartition","resolution","groupedRequest","intervalMs","stepMsPartition","interval_regex","rangeUtil","intervalToMs","newStep","safeStep","round","calculateStep","tap","trackGroupedQueries","runShardSplitQuery","splittingTargets","groups","nextGroupSize","groupSize","shards","cycle","nextGroup","groupHasPendingRequests","shardGroup","sqrt","shardsToQuery","groupShardRequests","interpolateShardingSelector","maxFactor","constrainGroupSize","currentSize","metaExecutionTime","executionTime","updateGroupSizeFromResponse","currentFrameIndex","replaceResponses","groupTargetsByQueryType","groupedRequests","splitQueriesByStreamShard","shardedQueries","otherQueries","requestSupportsSharding","selectorPartition","getSelectorForShardValues","selector","fetchLabelValues","getInitialGroupSize","nextCycle","Boolean","getLiveStreamKey","msgUint8","TextEncoder","encode","hashBuffer","crypto","subtle","digest","hashArray","padStart","bootData","user","orgId","doLokiChannelStream","ds","maxDelta","maxLength","maxDataPoints","updateFrame","StreamingDataFrame","fromDataFrameJSON","displayNameFormat","legendFormat","defer","getGrafanaLiveSrv","scope","LiveChannelScope","path","convertToWebSocketUrl","backend","host","appSubUrl","REF_ID_DATA_SAMPLES","REF_ID_STARTER_ANNOTATION","REF_ID_STARTER_LOG_VOLUME","REF_ID_STARTER_LOG_SAMPLE","NS_IN_MS","hideFromInspector","intervalInfo","calculateInterval","timezone","LokiDatasource","DataSourceWithBackend","getSupplementaryRequest","SupplementaryQueryType","LogsVolume","logsVolumeOption","getLogsVolumeDataProvider","LogsSample","logsSampleOption","getLogsSampleDataProvider","getSupportedSupplementaryQueryTypes","getSupplementaryQuery","normalizedQuery","getNormalizedLokiQuery","removeCommentsFromQuery","isQuerySuitable","dropErrorExpression","isQueryWithError","supportingQueryType","SupportingQueryType","getLogQueryFromMetricsQuery","logsVolumeRequest","cloneDeep","logsSampleRequest","fixedRequest","scopes","scopeFilters","logQLScope","spec","streamQueries","rangeRaw","streamRequest","merge","liveStreaming","runLiveQueryThroughBackend","lokiQuerySplitting","requestSupportsSplitting","trackQuery","dataFrames","isDataFrame","executedExpr","executedQueryString","executedQuery","getExpressionFromExecutedQuery","transformBackendResult","instanceSettings","jsonData","logsQueries","subQueries","runLiveQuery","baseUrl","urlUtil","serializeParams","interpolateVariablesInQueries","adhocFilters","expandedQueries","getRef","addAdHocFilters","templateSrv","interpolateQueryExpr","getQueryDisplayText","abstractQueries","existingKeys","abstractQuery","labelMatcher","getResource","statsForAll","chunks","getStatsTimeRange","statsMetadataRequest","showErrorAlert","durations","getNodesFromQuery","Duration","getQueryStats","interpolatedVariableQuery","parseStringToVariableQuery","processMetricFindQuery","DataSample","Unknown","variable","multi","includeAll","lokiSpecialRegexEscape","lodashMap","toggleQueryFilter","expression","queryHasFilter","removeLabelFromQuery","modifyQuery","addNoPipelineErrorToQuery","originalLabel","renameTo","addLabelFormatToQuery","parserPositions","getParserPositions","labelFilterPositions","getLabelFilterPositions","lastPosition","findLastPosition","toLabelFilter","addFilterAsLabelFilter","addLineFilter","getSupportedQueryModifications","getLokiQueryFromDataQuery","splitKeys","isDataplaneLog","lokiLogsDataplane","DataFrameView","maybeDuplicatedTags","logLine","Line","Time","renderLegendFormat","replaceVariables","isRegexSelector","returnVariables","filterQuery","variables","exprWithAdHoc","getVariables","getQueryHints","fix","hasPipelineErrorFiltering","isQueryPipelineErrorFiltering","extractHasErrorLabelFromDataFrame","isQueryWithLabelFilter","isQueryWithLabelFormat","hasLevel","dataFrameHasLevelLabel","levelLikeLabel","extractLevelLikeLabelFromDataFrame","isQueryWithLineFilter","getDefaultQuery","defaults","UnifiedAlerting","getTemplateSrv","liveTarget","createLiveTarget","settingsData","QueryEditor","roundMsToMin","milliseconds","seconds","prevRange","sameMinuteFrom","sameMinuteTo","RE2_METACHARACTERS","labelValue","unescapeLabelValue","escapeLabelValueInRegexSelector","isBytesString","labelKey","typeField","mapOpToAbstractOp","AbstractLabelOperator","Equal","NotEqual","EqualRegEx","NotEqualRegEx","invert","valueSet","limitSuggestions","SUGGESTIONS_LIMIT","items","NodePosition","fromNode","getMatchersWithFilter","matchers","matcher","removeLabelFilter","removeSelector","pipelineStage","Selector","getChild","Identifier","suffix","matchVisQuery","modeller","renderQuery","tree","Matcher","labelNode","opNode","nextSibling","valueNode","handleQuotes","streamSelectorPositions","getStreamSelectorPositions","hasStreamSelectorMatchers","positions","getAllPositionsInNodeByType","getMatcherInStreamPositions","labelFormatPositions","LabelFormatExpr","identifierSelectorMatchers","getIdentifierInStreamPositions","everyStreamSelectorHasMatcher","streamSelectorPosition","matcherPosition","lastPositionsPerExpression","getLastPositionPerExpression","addFilterToStreamSelector","subExpressions","nodes","Expr","subPositions","subExpression","lineFilterPositions","getLineFiltersPositions","appendToLogsQuery","addDropToQuery","labelsToDrop","queryPartPositions","statement","newQuery","isLast","labelFormat","logQueryPositions","LogExpr","LogRangeExpr","logPartsPositions","pipeline","PipelineExpr","unwrap","UnwrapExpr","sortBy","getLogQueryPositions","addLabelFormat","lineCommentPositions","LineComment","getLineCommentPositions","lineCommentPosition","parserNodeTypes","JsonExpressionParser","LogfmtParser","LogfmtExpressionParser","vectorSelectorPositions","labelExists","positionsToAddAfter","labelFilter","streamSelectorEnd","pos","child","childAfter","results","LineFilter","pipeExact","Filter","PipeExact","pipeMatch","PipeMatch","strings","getStringsFromLineFilter","filterTerm","backtickedTerm","unwrappedFilterTerm","resultTerm","escapeRegExp","FilterOp","OrFilter","getLokiQueryType","tagsToObscure","partsToKeep","obfuscate","obfuscatedQuery","queryPart","isQueryWithNode","nodeTypes","getNodeFromQuery","MetricExpr","parsers","selectorNode","pipelineExprNode","getLogQueryFromMetricsQueryAtPosition","metricQuery","rangeNodes","allQueries","disallowed","BinOpExpr","vectorOps","VectorOp","supportedVectorOps","getNodeString","unsupportedVectorOps","supportedWrappingVectorOpps","supportedOp","unsupportedOp","rangeOps","RangeOp","supportedRangeOps","metricSupportsSharding","isLokiQuery","shardValue","addStreamShardLabelsToQuery","shardedQuery","__defProp","__publicField","__defNormalProp","QueryModellerBase","operationDefinitions","innerQueryPlaceholder","operationsRegistry","Registry","setOperationCategories","categories","getOperationsForCategory","category","hideFromList","getAlternativeOperations","alternativesKey","getCategories","getOperationDefinition","getIfExists","hasBinaryOp","def","lokiQueryModeller","renderOperations","queryString","operation","renderer","renderBinaryQueries","binaryQueries","binQuery","renderBinaryQuery","leftOperand","binaryQuery","vectorMatches","vectorMatchesType","renderLabels","nested","getQueryPatterns","LokiQueryPatternType","Log","LokiOperationId","LabelFilterNoErrors","LineContains","LineFormat","LabelFormat","Metric","Unwrap","SumOverTime","Sum","CountOverTime","BytesOverTime","TopK","QuantileOverTime","LokiVisualQueryOperationCategory","Aggregations","RangeFunctions","Formats","BinaryOps","LabelFilters","binaryScalarDefs","Addition","sign","Subtraction","MultiplyBy","DivideBy","Modulo","Exponent","EqualTo","NotEqualTo","GreaterThan","LessThan","GreaterOrEqual","LessOrEqual","binaryScalarOperations","opDef","defaultParams","toggleable","model","innerExpr","addOperationHandler","defaultAddOperationHandler","LabelParamEditor","operationId","queryModeller","inputId","getOperationParamId","autoFocus","openMenuOnFocus","onOpenMenu","loadGroupByLabels","loadingMessage","toOption","createRangeOperation","isRangeOperationWithGrouping","paramChangedHandler","restParam","optional","getOnLabelAddedHandler","getLokiOperationDisplayName","orderRank","LokiOperationOrder","RangeVectorFunction","operationWithRangeVectorRenderer","addLokiOperation","explainHandler","FUNCTIONS","opDocs","insertText","documentation","createRangeOperationWithGrouping","rangeOperation","getRangeAggregationWithGroupingRenderer","getLastLabelRemovedHandler","getAggregationExplainer","aggregation","grouping","restParamIndex","restParams","rangeVector","quantile","labelFilterRenderer","isConflictingFilter","queryOperations","operationIsNegative","queryOperation","pipelineRenderer","strict","keepEmpty","Drop","Keep","getIndexOfOrLast","condition","newOperation","existingRangeVectorFunction","isRangeVectorFunction","Functions","placeToInsert","Rate","addNestedQueryHandler","getLineFilterRenderer","caseInsensitive","hasBackticks","delimiter","paramIndex","changeToOperationId","aggregationName","labelWord","funcName","capitalize","createAggregationOperation","overrides","functionRendererLeft","getAggregationWithoutRenderer","renderParams","createAggregationOperationWithParam","paramsDef","getAggregationByRendererWithParameter","UnwrapParamEditor","loadUnwrapOptions","logExpr","samples","Min","Max","Avg","Stddev","Stdvar","Count","opId","Last","BottomK","RateCounter","BytesRate","AbsentOverTime","AvgOverTime","MaxOverTime","MinOverTime","FirstOverTime","LastOverTime","StdvarOverTime","StddevOverTime","minWidth","Parsers","Regexp","hideName","Pattern","Unpack","PipeOperations","runQueryOnEnter","LineContainsNot","LineContainsCaseInsensitive","LineContainsNotCaseInsensitive","LineMatchesRegex","LineMatchesRegexNot","LineFilterIpMatches","lokiOperators","doesNotContain","equals","doesNotEqual","matchesRegex","doesNotMatchRegex","greaterThan","lessThan","greaterThanOrEqual","lessThanOrEqual","LabelFilterIpMatches","NoErrors","Decolorize","NestedQuery","explainOperator","definition","getDefinitionById","checkParamsAreValid","replacedExpr","topNode","handleExpression","isEmptyQuery","visQuery","getString","getLabel","makeError","filterExpr","ipLineFilter","Ip","orFilter","getLineFilter","createNotSupportedError","parserNode","firstChild","getLabelParser","Or","And","IpLabelFilter","ipLabelFilter","valueString","UnitFilter","getLabelFilter","getAllByType","LabelExtractionExpression","getJsonExpressionParser","toTree","subNode","ParserFlag","getLogfmtParser","LineFormatExpr","getLineFormat","LabelFormatMatcher","getLabelFormat","unwrapExprChild","labelFilterChild","unwrapChild","ConvOp","convOp","handleUnwrapExpr","RangeAggregationExpr","nameNode","NumberLezer","rangeValue","Grouping","handleRangeAggregation","VectorAggregationExpr","numberNode","By","Without","metricExpr","handleVectorAggregation","left","binModifier","OnOrIgnoringModifier","boolMatcher","Bool","isBool","isMatcher","GroupingLabels","GroupingLabelList","matchType","On","getBinaryModifier","BinOpModifier","lastChild","operatorToOpName","leftNumber","getLastChildWithSelector","rightNumber","rightBinary","makeBinOp","leftMostChild","getLeftMostChild","handleBinary","isIntervalVariableError","DropLabelsExpr","exploringNode","DropLabels","DropLabel","handleDropFilter","KeepLabelsExpr","KeepLabels","KeepLabel","handleKeepFilter","children","cur","parentType","variableRegex","var1","var2","fmt2","var3","fieldPath","fmt3","fmt","varType","varTypeFunc","hasBool","parseFloat","BINARY_OPERATIONS_KEY","isMultiValue","LOGFMT_REGEXP","__error__","logLines","isLogLineJSON","isLogLinePacked","isLogLineLogfmt","labelsArray","labelTypeArray","labelsSet","labelsType","allLabelKeys","isValidGoDuration","labelField","AGGREGATION_OPERATORS","RANGE_VEC_FUNCTIONS","detail","BUILT_IN_FUNCTIONS","lookbehind","inside","alias","punctuation","greedy","move","function","quote","backticks","onDashboardLoadedHandler","payload","dashboardId","lokiQueries","pluginJson","instantQueries","rangeQueries","builderModeQueries","editorMode","QueryEditorMode","Builder","codeModeQueries","Code","queriesWithTemplateVariables","isQueryWithTemplateVariables","queriesWithChangedResolution","isQueryWithChangedResolution","queriesWithChangedLineLimit","isQueryWithChangedLineLimit","queriesWithChangedLegend","isQueryWithChangedLegend","grafana_version","dashboard_id","org_id","queries_count","logs_queries_count","metric_queries_count","instant_queries_count","range_queries_count","builder_mode_queries_count","code_mode_queries_count","queries_with_template_variables_count","queries_with_changed_resolution_count","queries_with_changed_line_limit_count","queries_with_changed_legend_count","shouldNotReportBasedOnRefId","starter","calculateTotalBytes","totalBytes","byteKey","extraPayload","buildInfo","editor_mode","has_data","has_error","line_limit","obfuscated_query","query_type","query_vector_type","simultaneously_executed_query_count","simultaneously_hidden_query_count","time_range_from","time_range_to","time_taken","bytes_processed","is_split","originalRequest","splittingPayload","split_query_group_count","split_query_largest_partition_size","split_query_total_request_count","total","split_query_partition_size","__WEBPACK_EXTERNAL_MODULE__6089__","__WEBPACK_EXTERNAL_MODULE__7781__","__WEBPACK_EXTERNAL_MODULE__8531__","__WEBPACK_EXTERNAL_MODULE__2007__","__WEBPACK_EXTERNAL_MODULE__3241__","__WEBPACK_EXTERNAL_MODULE__1308__","__WEBPACK_EXTERNAL_MODULE__8146__","__WEBPACK_EXTERNAL_MODULE__5959__","__WEBPACK_EXTERNAL_MODULE__8398__","__WEBPACK_EXTERNAL_MODULE__200__","__WEBPACK_EXTERNAL_MODULE__7694__","__WEBPACK_EXTERNAL_MODULE__1269__","__WEBPACK_EXTERNAL_MODULE__3059__","DefaultBufferLength","nextPropID","NodeProp","perNode","deserialize","RangeError","NodeType","closedBy","openedBy","isolate","contextHash","lookAhead","mounted","MountedTree","overlay","noProps","define","skipped","prop","isTop","isSkipped","isError","isAnonymous","is","direct","found","none","NodeSet","extend","newTypes","newProps","CachedNode","CachedInnerNode","IterMode","Tree","ch","cursor","TreeCursor","cursorAt","side","moveTo","_tree","TreeNode","resolveNode","resolveInner","resolveStack","inner","layers","scan","mount","iterStack","stackIterator","leave","anon","IncludeAnonymous","entered","propValues","balance","balanceRange","makeTree","buffer","nodeSet","maxBufferLength","reused","minRepeatType","FlatBufferCursor","takeNode","parentStart","minPos","inRepeat","depth","lookAheadAtStart","contextAtStart","findBufferSize","copyToBuffer","TreeBuffer","localChildren","localPositions","localInRepeat","lastGroup","lastEnd","makeRepeatLeaf","takeFlatNode","make","makeBalanced","nodeCount","stopAt","lookAheadProp","lastI","pair","fork","minStart","nodeSize","localSkipped","nodeStart","bufferStart","startIndex","topID","buildTree","childString","endIndex","findChild","pick","checkSide","startI","endI","overlays","IgnoreOverlays","BaseNode","before","after","getChildren","matchContext","matchNodeContext","enterUnfinishedNodesBefore","childBefore","prevSibling","_parent","nextChild","ExcludeBuffers","BufferNode","BufferContext","hasChild","IgnoreMounts","rPos","nextSignificantParent","externalSibling","heads","picked","newHeads","StackIterator","bufferNode","yieldNode","yieldBuf","yield","enterChild","sibling","atLastNode","mustLeave","nodeSizeCache","balanceType","mkTop","mkTree","maxChild","divide","groupFrom","groupStart","nextSize","only","Parser","startParse","fragments","StringInput","createParse","advance","chunk","lineChunks","read","reducePos","score","bufferBase","curContext","cx","StackContext","pushState","lookaheadRecord","setLookAhead","dPrec","dynamicPrecedence","getGoto","minRepeatTerm","storeNode","reduceContext","lastBigReductionStart","bigReductionCount","lastBigReductionSize","stateFlag","baseStateID","term","mustSink","mustMove","shiftContext","maxNode","nextState","nextStart","nextEnd","useNode","updateContext","tracker","reuse","reset","off","recoverByDelete","isNode","canShift","sim","SimulatedStack","stateSlot","hasAction","recoverByInsert","nextStates","best","forceReduce","validAction","backup","findForcedReduction","seen","explore","allActions","rDepth","forceAll","deadEnd","restart","sameState","dialectEnabled","dialectID","dialect","emitContext","emitLookAhead","newCx","goto","StackBufferCursor","maybeNext","decodeArray","Type","out","digit","CachedToken","extended","mask","nullToken","InputStream","chunkOff","chunk2","chunk2Pos","rangeIndex","chunkPos","readNext","resolveOffset","assoc","clipPos","resolved","acceptToken","endOffset","acceptTokenTo","getChunk","nextChunk","setDone","TokenGroup","readToken","tokenPrecTable","contextual","precTable","precOffset","groupMask","accEnd","allows","mid","findOffset","tableData","tableOffset","iPrev","verbose","LOG","stackIDs","cutAt","fragment","safeFrom","safeTo","trees","nextFragment","fr","openStart","openEnd","nodeAt","TokenCache","mainToken","actions","tokenizers","getActions","actionIndex","main","updateCachedToken","addActions","eofTerm","getMainToken","specialized","specializers","putAction","Parse","recovering","nextStackID","minStackPos","stoppedAt","topTerm","stacks","bufferLength","parsedPos","stopped","stoppedTokens","newStacks","advanceStack","tok","finished","findFinished","stackToTree","SyntaxError","runRecovery","maxRemaining","outer","stackID","strictCx","cxHash","defaultReduce","localStack","advanceFully","pushStackDedup","restarted","tokenEnd","force","forceBase","insert","fromCodePoint","Dialect","LRParser","wrappers","nodeNames","repeatNodeCount","topTerms","topRules","nodeProps","setProp","nodeID","propSpec","skippedNodes","propSources","tokenArray","tokenData","specializerSpecs","getSpecializer","states","stateData","maxTerm","dialects","dynamicPrecedences","tokenPrec","termNames","parseDialect","w","groupTag","terminal","slot","flag","deflt","configure","external","contextTracker","hasWrappers","getName","prec","part","keywordTokens","json","logfmt","unpack","regexp","label_format","line_format","label_replace","vector","on","ignoring","group_left","group_right","decolorize","keep","contextualKeywordTokens","by","without","and","or","unless","sum","avg","stddev","stdvar","bottomk","topk","sort_desc","spec_Identifier","ip","count_over_time","rate","rate_counter","bytes_over_time","bytes_rate","avg_over_time","sum_over_time","min_over_time","max_over_time","stddev_over_time","stdvar_over_time","quantile_over_time","first_over_time","last_over_time","absent_over_time","duration_seconds","specializeIdentifier","extendIdentifier","LogQL","Matchers","LabelExtractionExpressionList","LiteralExpr","tooltipInteractive","fieldProps","childInputId","htmlFor","ReactUtils","getChildId","labelEl","placement","interactive","tabIndex","Space","fontSize","fontWeight","typography","fontWeightMedium","fontStyle","primary","borderRadius","shape","radius","EditorStack","wrapItems","useTheme2","highlighted","editorField","dangerouslySetInnerHTML","__html","textUtil","sanitize","fontFamily","fontFamilyMonospace","bodySmall","QueryEditorMode2","byteToHex","unsafeStringify","randomUUID","getRandomValues","rnds8","rnds","rng","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","getter","chunkId","all","promises","u","script","needAttach","scripts","document","getElementsByTagName","getAttribute","createElement","charset","nc","setAttribute","onScriptComplete","onload","doneFns","parentNode","removeChild","appendChild","nmd","paths","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","lastIndexOf","DEFAULT_EXAMPLES","PREFERRED_LABELS","LOGQL_EXAMPLES","UnthemedLokiCheatSheet","scheduleUserLabelChecking","userLabelTimer","checkUserLabels","renderExpression","onClickExample","cheatSheetExample","userExamples","hasUserExamples","h2","cheatSheetItem","cheatSheetItemTitle","example","href","provider","preferredLabel","shuffle","withTheme2","h3","border","EditorHeader","flexWrap","windowObject","cancelFrame","requestFrame","clearTimeoutFn","setTimeoutFn","cancelAnimationFrameFn","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","requestAnimationFrameFn","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","animationFrameID","timeoutID","Component","QueryHeaderSwitch","inputProps","dashedLabel","switchIdRef","uniqueId","switchLabel","Switch","FlexItem","shrink","style","flexGrow","flexShrink","editorModes","QueryEditorModeToggle","RadioButtonGroup","EditorRows","_extends","_assertThisInitialized","ReferenceError","_setPrototypeOf","_inheritsLoose","safeIsNaN","areInputsEqual","newInputs","lastInputs","second","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","newArgs","cancelTimeout","requestTimeout","delay","tick","getScrollbarSize","recalculate","height","overflow","offsetWidth","clientWidth","cachedRTLResult","getRTLOffsetType","outerDiv","outerStyle","innerDiv","innerStyle","scrollLeft","defaultItemKey$1","createListComponent","_class","getItemOffset","getEstimatedTotalSize","getItemSize","getOffsetForIndexAndAlignment","getStartIndexForOffset","getStopIndexForStartIndex","initInstanceProps","shouldResetStyleCacheOnItemSizeChange","validateProps","_PureComponent","_instanceProps","_outerRef","_resetIsScrollingTimeoutId","isScrolling","scrollDirection","scrollOffset","initialScrollOffset","scrollUpdateWasRequested","_callOnItemsRendered","overscanStartIndex","overscanStopIndex","visibleStartIndex","visibleStopIndex","onItemsRendered","_callOnScroll","onScroll","_getItemStyle","_this$props","itemSize","layout","itemStyleCache","_getItemStyleCache","_offset","isHorizontal","isRtl","offsetHorizontal","___","_onScrollHorizontal","_event$currentTarget","scrollWidth","_resetIsScrollingDebounced","_onScrollVertical","_event$currentTarget2","clientHeight","scrollHeight","scrollTop","_outerRefSetter","outerRef","_resetIsScrolling","getDerivedStateFromProps","nextProps","validateSharedProps$1","_proto","scrollTo","scrollToItem","align","_this$props2","itemCount","scrollbarSize","_this$props3","_callPropsCallbacks","_this$props4","_this$state","_this$props5","innerRef","innerElementType","innerTagName","itemData","_this$props5$itemKey","itemKey","outerElementType","outerTagName","useIsScrolling","_this$_getRangeToRend","_getRangeToRender","stopIndex","_index","estimatedTotalSize","WebkitOverflowScrolling","willChange","pointerEvents","_this$_getRangeToRend2","_overscanStartIndex","_overscanStopIndex","_visibleStartIndex","_visibleStopIndex","_this$state2","_scrollDirection","_scrollOffset","_scrollUpdateWasRequested","_this$props6","overscanCount","_this$state3","overscanBackward","overscanForward","FixedSizeList","_ref4","instanceProps","lastItemOffset","maxOffset","minOffset","middleOffset","_ref5","_ref6","numVisibleItems","_ref7","MAX_LABEL_COUNT","MAX_VALUE_COUNT","MAX_AUTO_SELECT","collator","Intl","Collator","sensitivity","buildSelector","selectedLabels","selected","selectedValues","UnthemedLokiLabelBrowser","React","updateLabelState","updatedFields","validationStatus","autoSelect","lastUsedLabels","rawLabels","fetchValues","doFacettingForLabel","storeLastUsedLabels","doFacetting","rawValues","lastFacetted","possibleLabels","possibleValues","existingValues","facets","facetLabels","searchTerm","LoadingPlaceholder","wrapperPadding","maxHeight","footerSectionStyles","bottom","whiteSpace","textOverflow","transitions","handleMotion","transition","opacity","statusShowing","valueList","resize","valueListWrapper","borderLeft","medium","valueListArea","valueTitle","maxContrast","searchResults","highlightParts","fuzzyMatchResult","fuzzyMatch","order","distance","LokiLabel","onClickLabel","onChangeSearch","role","onClickValue","pre","span","onClickRunLogsQuery","onClickRunMetricsQuery","onClickValidate","onClickClear","closeType","deleteLastUsedLabels","nextValue","LokiLabelBrowser","LabelBrowserModal","setLabelsLoaded","hasLogLabels","setHasLogLabels","changeQuery","Modal","onDismiss","modal","LocalStorageValueProvider","storageKey","defaultValue","onLastUsedLabelsSave","onLastUsedLabelsDelete","breakpoints","down","NOTHING","DRAFTABLE","DRAFT_STATE","die","getPrototypeOf","isDraftable","isMap","isSet","objectCtorString","proto","each","iter","getArchtype","Reflect","ownKeys","thing","type_","propOrOldValue","latest","copy_","base_","shallowCopy","isPlain","descriptors","getOwnPropertyDescriptors","desc","deep","isFrozen","dontMutateFrozenCollections","currentScope","plugins","getPlugin","pluginKey","plugin","getCurrentScope","usePatchesInScope","patchListener","patches_","inversePatches_","patchListener_","revokeScope","leaveScope","drafts_","revokeDraft","parent_","enterScope","immer2","immer_","canAutoFreeze_","unfinalizedDrafts_","draft","revoke_","revoked_","processResult","baseDraft","modified_","maybeFreeze","generateReplacementPatches_","rootScope","childValue","finalizeProperty","scope_","finalized_","resultEach","isSet2","generatePatches_","parentState","targetObject","rootPath","targetIsSet","assigned_","autoFreeze_","objectTraps","getDescriptorFromProto","draft_","readPropFromProto","prepareCopy","createProxy","current2","currentState","markChanged","deleteProperty","getOwnPropertyDescriptor","owner","arrayTraps","useStrictShallowCopy_","proxyMap_","proxySet_","isManual_","traps","revoke","proxy","Proxy","revocable","createProxyProxy","currentImpl","immer","produce","recipe","defaultBase","base2","produceWithPatches","patches","inversePatches","autoFreeze","setAutoFreeze","useStrictShallowCopy","setUseStrictShallowCopy","createDraft","finishDraft","applyPatches","applyPatchesImpl","applyPatches_","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","__REDUX_DEVTOOLS_EXTENSION__","createAction","prepareAction","actionCreator","prepared","formatProdErrorMessage","isAction","species","freezeDraftable","getOrInsertComputed","compute","executeReducerBuilderCallback","builderCallback","actionsMap","actionMatchers","defaultCaseReducer","addCase","typeOrActionCreator","reducer","addMatcher","addDefaultCase","asyncThunkSymbol","getType","actionKey","buildCreateSlice","creators","cAT","asyncThunk","reducerPath","reducers","payloadCreator","_reducerDefinitionType","withTypes","caseReducer","preparedReducer","prepare","buildReducerCreators","reducerNames","sliceCaseReducersByName","sliceCaseReducersByType","actionCreators","sliceMatchers","contextMethods","reducer2","exposeAction","name2","exposeCaseReducer","buildReducer","extraReducers","finalCaseReducers","mapOrBuilderCallback","getInitialState","finalActionMatchers","finalDefaultCaseReducer","frozenInitialState","caseReducers","cr","previousState","createReducer","sM","reducerName","reducerDefinition","reducerDetails","createNotation","isAsyncThunkSliceReducerDefinition","maybeReducerWithPrepare","prepareCallback","isCaseReducerWithPrepareDefinition","handleNormalReducerDefinition","fulfilled","pending","rejected","settled","thunk","handleThunkCaseReducerDefinition","selectSelf","injectedSelectorCache","_reducer","makeSelectorProps","reducerPath2","injected","selectSlice","sliceState","getSelectors","selectState","selectorCache","wrapSelector","injectInto","injectable","pathOpt","newReducerPath","inject","rootState","unwrapped","createSlice","EditorFieldGroup","EditorList","renderItem","newItem","itemIndex","newItems","onChangeItem","onDeleteItem","InputGroup","modifiedChildren","Children","isValidElement","invalid","cloneElement","invalidChild","borderPriority","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","AccessoryButton","getButtonStyles","paddingLeft","paddingRight","LabelFilterItem","defaultOp","onDelete","onGetLabelNames","onGetLabelValues","invalidLabel","invalidValue","multiValueSeparator","labelNamesMenuOpen","setLabelNamesMenuOpen","labelValuesMenuOpen","setLabelValuesMenuOpen","isMultiSelect","_a2","operators","getSelectOptionsFromString","item2","isConflicting","conflict","isConflictingLabelFilter","v4","async","isLoadingLabelNames","onCloseMenu","change","isLoadingLabelValues","isMulti","selectedOptions","uniqBy","changes","change2","labelsFilters","labelFilterRequired","setItems","hasLabelFilter","newLabels","OperationExplainedBox","stepNumber","markdown","box","boxInner","circle","justifyContent","paddingBottom","textDecoration","OperationsEditorRow","useMemoOne","getResult","inputs","initial","isFirstRun","committed","getRect","center","expandBy","shrinkBy","noSpacing","createBox","borderBox","_ref2$margin","_ref2$border","_ref2$padding","marginBox","paddingBox","contentBox","invariant","shiftBy","shifted","withScroll","scroll","pageXOffset","pageYOffset","calculateBox","paddingTop","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getBox","el","getBoundingClientRect","getComputedStyle","memoized","frameId","wrapperFn","_len","_key","cancel","log","noop$2","bindEvents","bindings","sharedOptions","unbindings","shared","fromBinding","eventName","removeEventListener","unbind","prefix$1","RbdInvariant","ErrorBoundary","callbacks","onWindowError","getCallbacks","isDragging","tryAbort","preventDefault","setCallbacks","componentDidCatch","withLocation","isInHomeList","droppableId","startPosition","endPosition","withCombine","combine","draggableId","returnedToStart","preset","dragHandleUsageInstructions","onDragStart","onDragUpdate","update","onDragEnd","origin","point1","point2","subtract","isEqual$1","negate","point","otherValue","closest$1","points","offsetByPosition","getCorners","clip","shouldClipSubject","executeClip","pageMarginBox","getSubject","withPlaceholder","axis","scrolled","displacement","scroll$1","increased","increasedBy","increase","scrollDroppable","droppable","newScroll","scrollable","scrollDiff","scrollDisplacement","toDroppableMap","droppables","previous","toDraggableMap","draggables","toDroppableList","toDraggableList","getDraggablesInsideDroppable","draggable","tryGetDestination","impact","at","tryGetCombine","removeDraggableFromList","isHomeOf","noDisplacedBy","emptyGroups","invisible","visible","noImpact","displaced","displacedBy","isWithin","lowerBound","upperBound","isPartiallyVisibleThroughFrame","isWithinVertical","isWithinHorizontal","isPartiallyVisibleVertically","isPartiallyVisibleHorizontally","isBiggerVertically","isBiggerHorizontally","isTotallyVisibleThroughFrame","vertical","crossAxisLine","crossAxisStart","crossAxisEnd","crossAxisSize","horizontal","isVisible$1","toBeDisplaced","viewport","withDroppableDisplacement","isVisibleThroughFrameFn","displacedTarget","getDroppableDisplaced","isVisibleInDroppable","isVisibleInViewport","isTotallyVisible","getDisplacementGroups","afterDragging","forceShouldAnimate","getTarget","shouldAnimate","getShouldAnimate","goAtEnd","insideDestination","inHomeList","newIndex","indexOfLastItem","getIndexOfLastItem","calculateReorderImpact","withoutDragging","sliceFrom","didStartAfterCritical","afterCritical","effected","moveToNextIndex","isMovingForward","previousImpact","wasAt","currentIndex","proposedIndex","firstIndex","fromReorder","isCombineEnabled","combineId","combineWithIndex","fromCombine","whenCombining","combineWith","displaceBy","isDisplaced","getCombinedItemDisplacement","distanceFromStartToBorderBoxCenter","getCrossAxisBorderBoxCenter","isMoving","goAfter","moveRelativeTo","goBefore","distanceFromEndToBorderBoxCenter","whenReordering","draggablePage","moveInto","goIntoStart","closestAfter","closest","withDisplacement","getPageBorderBoxCenterFromImpact","withoutDisplacement","getResultWithoutDroppableDisplacement","scrollViewport","getDraggables$1","ids","getClientFromPageBorderBoxCenter","pageBorderBoxCenter","withoutPageScrollChange","withViewportDisplacement","client","isTotallyVisibleInNewLocation","newPageBorderBoxCenter","onlyOnMainAxis","changeNeeded","isTotallyVisibleOnAxis","moveToNextPlace","previousPageBorderBoxCenter","previousClientSelection","isEnabled","getImpact","closestId","withoutDraggable","indexOfClosest","moveToNextCombine","clientSelection","scrollJumpRequest","cautious","maxScrollChange","scrolledViewport","scrolledDroppable","withViewportScroll","withDroppableScroll","tryGetVisible","speculativelyIncrease","getKnownActive","rect","getCurrentPageBorderBoxCenter","getCurrentPageBorderBox","getDisplacedBy","withMaxScroll","addPlaceholder","placeholderSize","requiredGrowth","availableSpace","needsToGrowBy","dimension","getRequiredGrowthForPlaceholder","added","oldFrameMaxScroll","maxScroll","moveCrossAxis","isOver","isBetweenSourceClipped","activeOfTarget","isBetweenDestinationClipped","isWithinDroppable","getBestCrossAxisDroppable","distanceToA","distanceToB","getClosestDraggable","proposed","proposedPageBorderBoxCenter","isGoingBeforeTarget","relativeTo","moveToNewDroppable","whatIsDraggedOver","moveInDirection","isActuallyOver","getDroppableOver$1","dimensions","isMainAxisMovementAllowed","home","critical","isMovingOnMainAxis","borderBoxCenter","selection","isMovementAllowed","phase","isPositionInFrame","getDroppableOver","pageBorderBox","childCenter","isContained","isStartContained","isEndContained","startCenter","getFurthestAway","offsetRectByPosition","getIsDisplaced","getDragImpact","pageOffset","destinationId","pageBorderBoxWithDroppableScroll","area","targetRect","targetStart","targetEnd","childRect","threshold","didStartAfterCritical$1","getCombineImpact","atIndex","getReorderImpact","patchDroppableMap","updated","clearUnusedPlaceholder","lastDroppable","oldMaxScroll","removePlaceholder","forcedClientSelection","forcedDimensions","forcedViewport","forcedImpact","newImpact","withUpdatedPlaceholders","cleaned","patched","recomputePlaceholders","recompute","getDraggables","getClientBorderBoxCenter","refreshSnap","movementMode","needsVisibilityCheck","getLiftEffect","insideHome","rawIndex","inVirtualList","finish","adjustAdditionsForScrollChanges","additions","updatedDroppables","windowScrollChange","getFrame","droppableScrollChange","moved","offset$1","initialWindowScroll","offsetDraggable","isSnapping","postDroppableChange","isEnabledChanging","patchDimensionMap","removeScrollJumpRequest","idle$2","completed","shouldFlush","isWindowScrollAllowed","isFixedOnPage","onLiftImpact","published","withScrollChange","modified","existing","updatedAdditions","removals","wasOverId","wasOver","draggingState","isWaiting","publishWhileDraggingInVirtual","dropDuration","newHomeClientOffset","publishWhileDragging","collectionStarting","updateDroppableScroll","updateDroppableIsEnabled","updateDroppableIsCombineEnabled","moveUp","moveDown","moveRight","moveLeft","completeDrop","dropAnimationFinished","curves","combining","timings","outOfTheWay","minDropTime","maxDropTime","outOfTheWayTiming","fluid","snap","timing","transforms","isCombining","translate","dropTimeRange","dropMiddleware","getState","dispatch","dropPending","didDropInsideDroppable","lastImpact","getDropImpact","newClientCenter","getNewHomeClientOffset","distance$1","toFixed","getDropDuration","animateDrop","getScrollListener","onWindowScroll","scheduled","passive","capture","getWindowScrollBinding","scrollListener","store","listener","shouldStop$1","getAsyncMarshal","timerId","flush","shallow","withTimings","getDragStart","responder","announce","getDefaultMessage","willExpire","wasCalled","isExpired","timeoutId","getExpiringAnnounce","responders","getResponders","publisher","asyncMarshal","dragging","beforeCapture","onBeforeCapture","beforeStart","onBeforeDragStart","lastCritical","lastLocation","lastCombine","hasCriticalChanged","isDraggableEqual","isDroppableEqual","isCriticalEqual","hasLocationChanged","hasGroupingChanged","isCombineEqual","getPublisher","dropAnimationFinishMiddleware","dropAnimationFlushOnScrollMiddleware","once","autoScroll","autoScroller","pendingDrop","postActionState","composeEnhancers","compose","dimensionMarshal","focusMarshal","styleMarshal","createStore","applyMiddleware","marshal","dropping","resting","stopPublishing","dimensionMarshalStopper","scrollOptions","shouldPublishImmediately","startPublishing","isWatching","tryRecordFocus","tryRestoreFocusRecorded","tryShiftRecord","getMaxScroll","getDocumentElement","doc","documentElement","getMaxWindowScroll","getInitialPublish","registry","getViewport","windowScroll","getDimensionAndWatchScroll","getDimension","shouldPublishUpdate","getById","createDimensionMarshal","staging","collect","getScrollWhileDragging","publish","createPublisher","exists","dragStopped","canStartDrag","scrollWindow","scrollBy","getScrollableDroppables","getBestScrollableDroppable","maybe","getScrollableDroppableOver","defaultAutoScrollerOptions","startFromPercentage","maxScrollAtPercentage","maxPixelScroll","ease","percentage","durationDampening","stopDampeningAt","accelerateAt","getPercentage","startOfRange","endOfRange","distanceToEdge","thresholds","dragStartTime","shouldUseTimeDampening","getAutoScrollerOptions","autoScrollerOptions","startScrollingFrom","maxScrollValueAt","percentageFromStartScrollingFrom","getValueFromDistance","proposedScroll","runTime","betweenAccelerateAtAndStopAtPercentage","dampenValueByTime","getScrollOnAxis","distanceToEdges","getDistanceThresholds","getScroll$1","required","limited","isTooBigVertically","isTooBigHorizontally","adjustForSizeLimits","smallestSigned","getOverlap","getRemainder","targetScroll","overlap","canPartiallyScroll","rawMax","smallestChange","canScrollWindow","canScrollDroppable","getWindowScrollChange","getDroppableScrollChange","createJumpScroller","scrollDroppableAsMuchAsItCan","getDroppableOverlap","whatTheDroppableCanScroll","scrollWindowAsMuchAsItCan","getWindowOverlap","whatTheWindowCanScroll","droppableRemainder","windowRemainder","moveByOffset","createAutoScroller","fluidScroller","scheduleWindowScroll","scheduleDroppableScroll","tryScroll","wasScrollNeeded","fakeScrollCallback","createFluidScroller","jumpScroll","dragHandle","contextId","property","useIsomorphicLayoutEffect","useLayoutEffect","getHead","querySelector","createStyleEl","nonce","useStyleMarshal","getSelector","attribute","dragHandle$1","grabCursor","always","dropAnimating","userCancel","getStyles$1","alwaysRef","dynamicRef","setDynamicStyle","textContent","setAlwaysStyle","dynamic","querySelectorAll","getWindowFromEl","ownerDocument","defaultView","isHtmlElement","HTMLElement","findDragHandle","possible","createRegistry","subscribers","notify","findDraggableById","findDroppableById","register","unregister","findById","StoreContext","getBodyElement","visuallyHidden","separator","useUniqueId","AppContext","useDev","useHook","useDevSetupWarning","useStartupValidation","tab","pageUp","pageDown","preventedKeys","preventStandardKeyEvents","keyCode","supportedEventName","idle$1","getCaptureBindings","getPhase","setPhase","clientX","clientY","abs","isSloppyClickThresholdExceeded","fluidLift","shouldBlockNextClick","shouldRespectForcePress","noop$1","scrollJumpKeys","getDraggingBindings","idle","interactiveTagNames","isAnInteractiveElement","tagName","parentElement","isEventInInteractiveElement","getBorderBoxCenterPosition","supportedMatchesName","closestPonyfill","findClosestDragHandleFromEvent","expected","isLockActive","canStart","lockAPI","isClaimed","tryStart","forceSensorStop","sourceEvent","draggable$1","findDraggable","canDragInteractiveElements","lock","claim","getShouldRespectForcePress","tryDispatchWhenDragging","getAction","cleanup","lift$1","liftActionArgs","move$1","snapLift","defaultSensors","api","phaseRef","unbindEventsRef","startCaptureBinding","defaultPrevented","ctrlKey","metaKey","shiftKey","altKey","findClosestDraggableId","tryGetLock","startPendingDrag","preventForcePressBinding","findOptionsForDraggable","canGetLock","listenForCapture","bindCapturingEvents","preDrag","isCapturing","touch","touches","longPressTimerId","unbindTarget","hasMoved","shouldRespect","getHandleBindings","unbindWindow","getWindowBindings","startDragging","useSensorMarshal","customSensors","enableDefaultSensors","useSensors","abandon","newLock","tryAbandon","tryAbandonLock","forceStop","tryGetClosestDraggableIdFromEvent","tryReleaseLock","isLockClaimed","getStore","lazyRef","App","sensors","lazyStoreRef","lastPropsRef","flushSync","createResponders","createAutoScrollerOptions","getId","useAnnouncer","dragHandleUsageInstructionsId","getElementId","useHiddenTextElement","lazyDispatch","marshalCallbacks","bindActionCreators","useRegistry","entriesRef","recordRef","restoreFocusFrameRef","isMountedRef","focus","tryGiveFocus","tryGiveFocusTo","activeElement","redirectTo","record","focused","useFocusMarshal","tryResetStore","getCanLift","getIsMovementAllowed","appContext","canLift","Provider","DragDropContext","zIndexOptions","getDraggingTransition","shouldAnimateDragMovement","getDraggingOpacity","isDropAnimating","getStyle$1","mapped","getShouldDraggingAnimate","boxSizing","getDraggingStyle","shouldAnimateDisplacement","useDraggablePublisher","getDraggableRef","computedStyles","getDimension$1","publishedRef","isFirstPublishRef","DroppableContext","useRequiredContext","Context","useContext","preventHtml5Dnd","isStrictEqual","whatIsDraggedOverFromResult","getSecondarySnapshot","combineTargetFor","isClone","dropAnimation","draggingOver","atRest","snapshot","mapDispatchToProps$1","ConnectedDraggable","connect","draggingSelector","memoizedOffset","getMemoizedSnapshot","getMemoizedProps","ownProps","getCombineWithFromResult","curve","scale","getDraggableSelector","secondarySelector","getFallback","getProps","ownId","draggingId","visualDisplacement","isAfterCriticalInVirtualList","getSecondarySelector","areStatePropsEqual","setRef","dropAnimationFinishedAction","dragHandleProps","onMoveEnd","propertyName","provided","onTransitionEnd","draggableProps","rubric","PrivateDraggable","isUsingCloneFor","PublicDraggable","isDragDisabled","disableInteractiveElementBlocking","isScroll","isAuto","isEither","overflowX","overflowY","isElementScrollable","getClosestScrollable","getScroll","getIsFixed","isDropDisabled","closestScrollable","targetRef","getClient","frameClient","scrollSize","getDroppableDimension","immediate","delayed","getListenerOptions","getClosestScrollableFromDrag","useDroppablePublisher","whileDraggingRef","previousRef","publishedDescriptorRef","memoizedUpdateScroll","getClosestScroll","updateScroll","scheduleScrollUpdate","onClosestScroll","getDroppableRef","getEnv","ignoreContainerClipping","removeAttribute","getStyle","isAnimatingOpenOnMount","animate","getSize","Placeholder$1","animateOpenTimerRef","tryClearAnimateOpenTimer","setIsAnimatingOpenOnMount","onSizeChangeEnd","AnimateInOut","isVisible","renderClone","getContainerForClone","attachDefaultPropsToOwnProps","defaultPropKey","mergedProps","isMatchingType","getDraggable","mapDispatchToProps","updateViewportMaxScroll","ConnectedDroppable","idleWithAnimation","shouldAnimatePlaceholder","isDraggingOver","draggingOverWith","draggingFromThisWith","isUsingPlaceholder","useClone","idleWithoutAnimation","getDraggableRubric","getMapProps","isDraggingOverForConsumer","isDraggingOverForImpact","ownPropsWithDefaultProps","wasCombining","isHome","stateProps","dispatchProps","droppableRef","placeholderRef","setDroppableRef","setPlaceholderRef","onPlaceholderTransitionEnd","droppableProps","droppableContext","draggableProvided","draggableSnapshot","getClone","ConnectedDroppable$1","getWindow","isHTMLElement","isShadowRoot","ShadowRoot","getUAString","uaData","navigator","userAgentData","brands","brand","userAgent","isLayoutViewport","element","includeScale","isFixedStrategy","clientRect","scaleX","scaleY","offsetHeight","visualViewport","addVisualOffsets","offsetLeft","offsetTop","win","getNodeName","nodeName","getWindowScrollBarX","isScrollParent","_getComputedStyle","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","isOffsetParentAnElement","offsetParentIsScaled","isElementScaled","offsets","clientLeft","clientTop","getLayoutRect","getParentNode","assignedSlot","getScrollParent","listScrollParents","_element$ownerDocumen","scrollParent","isBody","updatedList","isTableElement","getTrueOffsetParent","getOffsetParent","isFirefox","currentNode","perspective","contain","getContainingBlock","auto","basePlacements","popper","variationPlacements","modifierPhases","modifiers","visited","modifier","requires","requiresIfExists","dep","depModifier","DEFAULT_OPTIONS","strategy","areValidElements","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","reference","orderedModifiers","modifiersData","elements","attributes","effectCleanupFns","isDestroyed","setOptionsAction","cleanupModifierEffects","scrollParents","contextElement","merged","orderModifiers","_ref$options","effect","cleanupFn","noopFn","forceUpdate","_state$elements","rects","_state$orderedModifie","_state$orderedModifie2","_options","destroy","onFirstUpdate","getBasePlacement","getVariation","getMainAxisFromPlacement","computeOffsets","basePlacement","variation","commonX","commonY","mainAxis","unsetSides","mapToStyles","_Object$assign2","popperRect","gpuAcceleration","adaptive","roundOffsets","_offsets$x","_offsets$y","hasX","hasY","sideX","sideY","heightProp","widthProp","_Object$assign","commonStyles","dpr","devicePixelRatio","roundOffsetsByDPR","initialStyles","arrow","_options$offset","invertDistance","skidding","distanceAndSkiddingToXY","_data$state$placement","popperOffsets","getOppositePlacement","matched","getOppositeVariationPlacement","rootNode","getRootNode","isSameNode","rectToClientRect","getClientRectFromMixedType","clippingParent","html","layoutViewport","getViewportRect","getInnerBoundingClientRect","winScroll","getDocumentRect","getClippingRect","rootBoundary","mainClippingParents","clippingParents","clipperElement","getClippingParents","firstClippingParent","clippingRect","accRect","mergePaddingObject","paddingObject","expandToHashMap","hashMap","detectOverflow","_options$placement","_options$strategy","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","within","_options$mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","_options$tether","tether","_options$tetherOffset","tetherOffset","isBasePlacement","referenceRect","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowElement","arrowRect","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","arrowOffsetParent","clientOffset","offsetModifierValue","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","withinMaxClamp","_state$modifiersData$","toPaddingObject","minProp","maxProp","endDiff","startDiff","clientSize","centerToReference","axisProp","centerOffset","_options$element","getSideOffsets","preventedOffsets","isAnySideFullyClipped","_options$scroll","_options$resize","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","_skip","specifiedFallbackPlacements","fallbackPlacements","_options$flipVariatio","flipVariations","allowedAutoPlacements","preferredPlacement","oppositePlacement","getExpandedFallbackPlacements","placements","_options$allowedAutoP","allowedPlacements","overflows","computeAutoPlacement","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","isVertical","mainVariationSide","altVariationSide","checks","check","_loop","fittingPlacement","preventOverflow","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","fromEntries","EMPTY_MODIFIERS","useGetLatest","generateBoundingClientRect","toJSON","virtualElement","defaultConfig","closeOnOutsideClick","closeOnTriggerHidden","defaultVisible","delayHide","delayShow","followCursor","mutationObserverOptions","childList","subtree","trigger","usePopperTooltip","popperOptions","_popperProps$state","_popperProps$state$mo","_popperProps$state$mo2","finalConfig","_extends2","finalPopperOptions","_React$useState","triggerRef","setTriggerRef","_React$useState2","tooltipRef","setTooltipRef","_useControlledState","_ref$onChange","getLatest","updater","updatedState","persist","isControlled","useControlledState","onVisibleChange","setVisible","_usePopper","referenceElement","popperElement","prevOptions","optionsWithDefaults","updateStateModifier","newOptions","popperInstanceRef","popperInstance","createPopper","usePopper","popperProps","isTriggeredBy","hideTooltip","showTooltip","toggleTooltip","handleClickOutside","_event$composedPath","_getLatest","composedPath","Node","preventDefaultAndToggle","setMousePosition","MutationObserver","observe","disconnect","getArrowProps","getTooltipProps","OperationInfoButton","show","setShow","docBox","docBoxHeader","docBoxBody","strong","boxShadow","shadows","z3","h5","signature","dropdown","OperationHeader","onRemove","onToggleSwitcher","alternatives","alt","operationHeaderButtons","selectWrapper","newDef","newParams","changedOp","changeTypeHandler","borderBottom","SimpleInputParamEditor","AutoSizeInput","paramDef","onCommitChange","BoolInputParamEditor","Checkbox","SelectInputParamEditor","selectOptions","valueOption","optionalParam","value2","OperationEditorBody","flash","highlight","shouldFlash","keepFlash","setKeepFlash","useFlash","onParamValueChanged","paramIdx","callParamChangedThenOnChange","onAddRestParam","lastParamDef","operationIndex","trimEnd","renderAddRestParamButton","cardHighlight","cardError","Editor","getOperationParamEditor","paramRow","paramName","infoIcon","paramValue","onRemoveRestParam","arrowLine","arrowArrow","cardWrapper","warning","verticalAlign","borderTop","OperationEditor","isConflictingOperation","isInvalid","OperationList","highlightedOp","opsToHighlight","prevOperations","newOps","newOp","op1","op2","useOperationsHighlight","cascaderOpen","setCascaderOpen","onOperationChange","addOptions","isLeaf","operationList","addButton","Cascader","onSelect","operationDef","alwaysOpen","hideActiveLevelLabel","heading","QueryBuilderHints","visualQuery","buildDataQueryFromQueryString","buildQueryStringFromDataQuery","setHints","dataQuery","hints2","hint","_d","_b2","_c2","datasourceType","newVisualQuery","OperationListExplained","onMouseEnter","onMouseLeave","EXPLAIN_LABEL_FILTER_CONTENT","LokiQueryBuilderExplained","lang","nestedQuery","showExplain","vectorMatchWrapper","vectorMatchInput","IconButton","LokiQueryBuilder","NestedQueryList","nestedQueries","onNestedQueryUpdate","TIME_SPAN_TO_TRIGGER_SAMPLES","sampleData","setSampleData","setHighlightedOp","prevQuery","prevTimeRange","withTemplateVariableOptions","optionsPromise","forLabel","labelsToConsider","hasEqualityOperation","possibleLabelNames","labelsNamesToConsider","onGetSampleData","lokiQuery","updateBasedOnChangedTimeRange","updateBasedOnChangedQuery","catch","logqlGrammar","testIds","otherOperations","QueryPreview","LokiQueryBuilderContainer","useReducer","stateSlice","exprChanged","visualQueryChange","parseResult","toggleReducer","QueryOptionGroup","collapsedInfo","queryStats","toggleOpen","collapse","generateQueryStats","convertUnits","getValueFormat","LokiQueryBuilderOptions","interpolatedQueries","getDefaultQueryDirection","isValidGrafanaDuration","onQueryDirectionChange","getAppEvents","LogSortOrderChangeEvent","sortEvent","newDirection","LogsSortOrder","Ascending","isLogQuery","filteredQueryTypeOptions","isValidStep","getCollapsedInfo","newMaxLines","queryTypeLabel","LokiQueryCodeEditor","QueryPattern","onPatternSelect","hasNewQueryOption","hasPreviousQuery","selectedPatternName","setSelectedPatternName","Card","Heading","keepOperationCategories","excludeOperationIds","keepOperations","QueryPatternsModal","onAddQuery","openTabs","setOpenTabs","selectAsNewQuery","selectedPattern","preSelectedOperationsCount","preSelectedLabelsCount","createNewQuery","patternOperations","patternOp","getNextRefId","patternType","cardsContainer","queryEditorModeDefaultLocalStorageKey","getDefaultEditorMode","compareTime","time1","time2","isDateTime","isSame","lokiQueryEditorExplainKey","LokiQueryEditor","useId","parseModalOpen","setParseModalOpen","queryPatternsModalOpen","setQueryPatternsModalOpen","dataIsStale","setDataIsStale","labelBrowserVisible","setLabelBrowserVisible","setQueryStats","setExplain","previousTimeRange","getQueryWithDefaults","previousQueryExpr","previousQueryType","onEditorModeChange","newEditorMode","newEditor","previousEditor","changeEditorMode","onChangeInternal","shouldUpdate","prevQueryType","shouldUpdateStats","makeAsyncRequest","getStats","confirmText","onConfirm","prevValue","Correlations","Loading","LokiQueryEditorForAlerting","LokiQueryEditorByApp","CloudAlerting","DataSourceDescription","docsLink","hasRequiredFields","rel","GenericConfigSection","isCollapsible","isInitiallyOpen","iconName","isSubSection","collapsibleButtonAriaLabel","fontWeightRegular","descriptionText","ConnectionSettings","urlPlaceholder","urlTooltip","urlLabel","isValidUrl","useCommonStyles","inlineFieldNoMarginRight","inlineFieldWithSecret","BasicAuth","passwordConfigured","userLabel","userTooltip","userPlaceholder","passwordLabel","passwordTooltip","passwordPlaceholder","onUserChange","onPasswordChange","onPasswordReset","lastInlineField","SecretInput","isConfigured","onReset","ConfigSubSection","AuthMethod","AuthMethod2","CrossSiteCredentials","OAuthForward","NoAuth","AuthMethodSettings","selectedMethod","mostCommonMethod","visibleMethods","visibleMethodsFromProps","defaultOptionsOverrides","customMethods","onAuthMethodSelect","basicAuth","authMethodChanged","setAuthMethodChanged","hasSelect","preparedOptions","customOptions","method","preparedDefaultOptions","allOptions","AuthFieldsComponent","component","authMethods","weak","selectedMethodFields","TLSSettingsSection","tooltipText","checkboxContainer","SelfSignedCertificate","certificateConfigured","onCertificateChange","onCertificateReset","tooltips","newEnabled","certificateLabel","SecretTextArea","TLSClientAuth","serverName","clientCertificateConfigured","clientKeyConfigured","onServerNameChange","onClientCertificateChange","onClientKeyChange","onClientCertificateReset","onClientKeyReset","serverNameLabel","keyLabel","SkipTLSVerification","TLSSettings","selfSignedCertificate","TLSClientAuth$1","skipTLSVerification","CustomHeader","headerNameField","headerValueField","removeHeaderBtn","configured","tooltipPlacement","CustomHeaders","headers","headersFromProps","setHeaders","headers2","changed","newHeaders","addHeaderButton","header2","onHeaderChange","onHeaderDelete","Auth","TLS","customHeaders","headerNamePrefix","headerValuePrefix","convertLegacyAuthProps","getSelectedMethod","getOnAuthMethodSelectHandler","getBasicAuthProps","getTLSProps","getCustomHeaders","withCredentials","oauthPassThru","basicAuthUser","secureJsonFields","basicAuthPassword","secureJsonData","tlsAuthWithCACert","tlsCACert","certificate","tlsAuth","tlsClientCert","tlsClientKey","clientCertificate","clientKey","tlsSkipVerify","newJsonData","newSecureJsonData","newSecureJsonFields","AdvancedHttpSettings","TagsInput","keepCookies","cookies","ConfigDescriptionLink","feature","AlertingSettings","onOptionsChange","DebugSection","debugText","setDebugText","debugFields","testMatch","__value","makeDebugFields","TextArea","DebugFields","thead","tr","th","tbody","td","nameField","regexField","urlField","urlDisplayLabelField","internalLink","openNewTab","dataSource","nameMatcherField","DerivedField","suggestions","validateName","showInternalLink","setShowInternalLink","openInNewTab","setOpenInNewTab","previousUid","fieldType","setFieldType","handleChange","invalidName","TooltipLabel","DataLinkInput","newValue","tracing","noDefault","DerivedFields","derivedField","debugSection","showDebug","setShowDebug","newField","newDerivedFields","DataLinkBuiltInVars","valueRaw","VariableOrigin","Value","QuerySettings","onMaxLinedChange","spellCheck","makeJsonUpdater","setMaxLines","setDerivedFields","DataSourcePlugin","setQueryEditor","setConfigEditor","Divider","secureSocksDSProxyEnabled","SecureSocksProxySettings","setQueryEditorHelp","LokiCheatSheet","DashboardLoadedEvent"],"sourceRoot":""}