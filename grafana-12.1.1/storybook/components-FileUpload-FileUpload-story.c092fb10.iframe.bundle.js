"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[2275],{"../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{R:function(){return useMDXComponents},x:function(){return MDXProvider}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");const emptyComponents={},MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(emptyComponents);function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((function(){return"function"==typeof components?components(contextComponents):{...contextComponents,...components}}),[contextComponents,components])}function MDXProvider(properties){let allComponents;return allComponents=properties.disableParentContext?"function"==typeof properties.components?properties.components(emptyComponents):properties.components||emptyComponents:useMDXComponents(properties.components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},properties.children)}},"../grafana-i18n/src/i18n.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{x6:function(){return Trans},t:function(){return t}});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),i18next=__webpack_require__("../../node_modules/i18next/dist/esm/i18next.js"),es=(__webpack_require__("../../node_modules/i18next-browser-languagedetector/dist/esm/i18nextBrowserLanguageDetector.js"),__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"));const constants_DEFAULT_LANGUAGE="en-US";let tFunc,transComponent;const VALID_LANGUAGES=[...[{code:"en-US",name:"English"},{code:"fr-FR",name:"Français"},{code:"es-ES",name:"Español"},{code:"de-DE",name:"Deutsch"},{code:"zh-Hans",name:"中文（简体）"},{code:"pt-BR",name:"Português Brasileiro"},{code:"zh-Hant",name:"中文（繁體）"},{code:"it-IT",name:"Italiano"},{code:"ja-JP",name:"日本語"},{code:"id-ID",name:"Bahasa Indonesia"},{code:"ko-KR",name:"한국어"},{code:"ru-RU",name:"Русский"},{code:"cs-CZ",name:"Čeština"},{code:"nl-NL",name:"Nederlands"},{code:"hu-HU",name:"Magyar"},{code:"pt-PT",name:"Português"},{code:"pl-PL",name:"Polski"},{code:"sv-SE",name:"Svenska"},{code:"tr-TR",name:"Türkçe"}],{name:"Pseudo",code:"pseudo"}];function initTFuncAndTransComponent({id:id,ns:ns}={}){if(id)return tFunc=getI18nInstance().getFixedT(null,id),void(transComponent=props=>(0,jsx_runtime.jsx)(es.x6,{shouldUnescape:!0,ns:id,...props}));tFunc=getI18nInstance().t,transComponent=props=>(0,jsx_runtime.jsx)(es.x6,{shouldUnescape:!0,ns:ns,...props})}function initDefaultI18nInstance(){if(getI18nInstance().options?.resources&&"object"==typeof getI18nInstance().options.resources)return;const initPromise=getI18nInstance().use(es.r9).init({resources:{},returnEmptyString:!1,lng:constants_DEFAULT_LANGUAGE});return initTFuncAndTransComponent(),initPromise}function getI18nInstance(){return i18next.Ay}async function changeLanguage(language){const validLanguage=VALID_LANGUAGES.find((lang=>lang.code===language))?.code??DEFAULT_LANGUAGE;await getI18nInstance().changeLanguage(validLanguage)}const t=(id,defaultMessage,values)=>(initDefaultI18nInstance(),tFunc||(console.warn("t() was called before i18n was initialized. This is probably caused by calling t() in the root module scope, instead of lazily on render"),tFunc=getI18nInstance().t),tFunc(id,defaultMessage,values));function Trans(props){initDefaultI18nInstance();const Component=transComponent??es.x6;return(0,jsx_runtime.jsx)(Component,{shouldUnescape:!0,...props})}try{changeLanguage.displayName="changeLanguage",changeLanguage.__docgenInfo={description:"",displayName:"changeLanguage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../grafana-i18n/src/i18n.tsx#changeLanguage"]={docgenInfo:changeLanguage.__docgenInfo,name:"changeLanguage",path:"../grafana-i18n/src/i18n.tsx#changeLanguage"})}catch(__react_docgen_typescript_loader_error){}try{Trans.displayName="Trans",Trans.__docgenInfo={description:"",displayName:"Trans",props:{i18nKey:{defaultValue:null,description:"The translation key to look up",name:"i18nKey",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"Child elements or values to interpolate",name:"children",required:!1,type:{name:"TransChild | readonly TransChild[]"}},components:{defaultValue:null,description:"React elements to use for interpolation",name:"components",required:!1,type:{name:"readonly ReactElement<any, string | JSXElementConstructor<any>>[] | { readonly [tagName: string]: ReactElement<any, string | JSXElementConstructor<any>>; }"}},count:{defaultValue:null,description:"Count value for pluralization",name:"count",required:!1,type:{name:"number"}},defaults:{defaultValue:null,description:"Default text if translation is not found",name:"defaults",required:!1,type:{name:"string"}},ns:{defaultValue:null,description:"Namespace for the translation key",name:"ns",required:!1,type:{name:"string"}},shouldUnescape:{defaultValue:null,description:"Whether to unescape HTML entities",name:"shouldUnescape",required:!1,type:{name:"boolean"}},values:{defaultValue:null,description:"Values to interpolate into the translation",name:"values",required:!1,type:{name:"Record<string, unknown>"}},className:{defaultValue:null,description:"Class name for the Trans component",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../grafana-i18n/src/i18n.tsx#Trans"]={docgenInfo:Trans.__docgenInfo,name:"Trans",path:"../grafana-i18n/src/i18n.tsx#Trans"})}catch(__react_docgen_typescript_loader_error){}},"./src/utils/file.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function trimFileName(fileName){const delimiter=fileName.lastIndexOf("."),extension=fileName.substring(delimiter),file=fileName.substring(0,delimiter);return file.length<16?fileName:`${file.substring(0,16)}...${extension}`}__webpack_require__.d(__webpack_exports__,{i:function(){return trimFileName}})},"./src/components/FileUpload/FileUpload.story.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:function(){return Basic},default:function(){return FileUpload_story}});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),emotion_css_esm=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),react=__webpack_require__("../../node_modules/react/index.js"),v4=__webpack_require__("../../node_modules/uuid/dist/esm-browser/v4.js"),selectors=__webpack_require__("../grafana-e2e-selectors/src/selectors/index.ts"),i18n=__webpack_require__("../grafana-i18n/src/i18n.tsx"),ThemeContext=__webpack_require__("./src/themes/ThemeContext.tsx"),mixins=__webpack_require__("./src/themes/mixins.ts"),file=__webpack_require__("./src/utils/file.ts"),Button=__webpack_require__("./src/components/Button/Button.tsx"),Icon=__webpack_require__("./src/components/Icon/Icon.tsx");const FileUpload=({onFileUpload:onFileUpload,className:className,children:children="Upload file",accept:accept="*",size:size="md",showFileName:showFileName})=>{const style=(0,ThemeContext.of)(getStyles(size)),[fileName,setFileName]=(0,react.useState)(""),id=(0,v4.A)(),onChange=(0,react.useCallback)((event=>{const file=event.currentTarget?.files?.[0];file&&setFileName(file.name??""),onFileUpload(event)}),[onFileUpload]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("input",{type:"file",id:id,className:style.fileUpload,onChange:onChange,multiple:!1,accept:accept,"data-testid":selectors.Tp.components.FileUpload.inputField}),(0,jsx_runtime.jsxs)("label",{htmlFor:id,className:(0,emotion_css_esm.cx)(style.labelWrapper,className),children:[(0,jsx_runtime.jsx)(Icon.I,{name:"upload",className:style.icon}),children]}),showFileName&&fileName&&(0,jsx_runtime.jsx)("span",{"aria-label":(0,i18n.t)("grafana-ui.file-upload.file-name","File name"),className:style.fileName,"data-testid":selectors.Tp.components.FileUpload.fileNameSpan,children:(0,file.i)(fileName)})]})},getStyles=size=>theme=>{const buttonStyles=(0,Button.hs)({theme:theme,variant:"primary",size:size,iconOnly:!1}),focusStyle=(0,mixins.Hi)(theme);return{fileUpload:(0,emotion_css_esm.AH)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":focusStyle,"&:focus-visible + label":focusStyle}),labelWrapper:buttonStyles.button,icon:buttonStyles.icon,fileName:(0,emotion_css_esm.AH)({marginLeft:theme.spacing(.5)})}};try{FileUpload.displayName="FileUpload",FileUpload.__docgenInfo={description:"",displayName:"FileUpload",props:{onFileUpload:{defaultValue:null,description:"Callback function to handle uploaded file",name:"onFileUpload",required:!0,type:{name:"(event: FormEvent<HTMLInputElement>) => void"}},accept:{defaultValue:{value:"*"},description:"Accepted file extensions",name:"accept",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Overwrite or add to style",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:{value:"md"},description:"Button size",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},showFileName:{defaultValue:null,description:"Show the file name",name:"showFileName",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FileUpload/FileUpload.tsx#FileUpload"]={docgenInfo:FileUpload.__docgenInfo,name:"FileUpload",path:"src/components/FileUpload/FileUpload.tsx#FileUpload"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),dist=__webpack_require__("../../node_modules/@storybook/addon-docs/node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components={code:"code",h1:"h1",h3:"h3",p:"p",pre:"pre",...(0,lib.R)(),...props.components};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(_components.h1,{id:"fileupload",children:"FileUpload"}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["A button-styled input that triggers file upload popup. Button text and accepted file extensions can be customized via ",(0,jsx_runtime.jsx)(_components.code,{children:"label"})," and ",(0,jsx_runtime.jsx)(_components.code,{children:"accepted"})," props respectively."]}),"\n",(0,jsx_runtime.jsx)(_components.h3,{id:"usage",children:"Usage"}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-jsx",children:"import { FileUpload } from '@grafana/ui';\n\n<FileUpload\n  onFileUpload={({ currentTarget }) => console.log('file', currentTarget?.files && currentTarget.files[0])}\n/>;\n"})}),"\n",(0,jsx_runtime.jsx)(_components.h3,{id:"props",children:"Props"}),"\n",(0,jsx_runtime.jsx)(dist.ov,{of:FileUpload})]})}const meta={title:"Inputs/FileUpload",component:FileUpload,parameters:{docs:{page:function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,lib.R)(),...props.components};return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,{...props,children:(0,jsx_runtime.jsx)(_createMdxContent,{...props})}):_createMdxContent(props)}},controls:{exclude:["className","onFileUpload"]}},argTypes:{size:{control:{type:"select"},options:["xs","sm","md","lg"]}}},Basic=args=>(0,jsx_runtime.jsx)(FileUpload,{size:args.size,onFileUpload:({currentTarget:currentTarget})=>console.log("file",currentTarget?.files&&currentTarget.files[0])});Basic.args={size:"md"};var FileUpload_story=meta;Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"args => {\n  return <FileUpload size={args.size} onFileUpload={({\n    currentTarget\n  }) => console.log('file', currentTarget?.files && currentTarget.files[0])} />;\n}",...Basic.parameters?.docs?.source}}}},"../../node_modules/uuid/dist/esm-browser/v4.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:function(){return esm_browser_v4}});var esm_browser_native={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let getRandomValues;const rnds8=new Uint8Array(16);const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase()}var esm_browser_v4=function v4(options,buf,offset){if(esm_browser_native.randomUUID&&!buf&&!options)return esm_browser_native.randomUUID();const rnds=(options=options||{}).random??options.rng?.()??function rng(){if(!getRandomValues){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}();if(rnds.length<16)throw new Error("Random bytes length must be >= 16");if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){if((offset=offset||0)<0||offset+16>buf.length)throw new RangeError(`UUID byte range ${offset}:${offset+15} is out of buffer bounds`);for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return unsafeStringify(rnds)}}}]);