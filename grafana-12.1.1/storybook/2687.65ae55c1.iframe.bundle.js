"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[2687],{"../grafana-data/src/datetime/datemath.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A_:function(){return isMathString},fn:function(){return isValid},qg:function(){return parse}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/lodash/lodash.js"),_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../grafana-data/src/datetime/moment_wrapper.ts");const units=["y","M","w","d","h","m","s","Q"],isDurationUnit=value=>units.includes(value);function isMathString(text){return!!text&&!("string"!=typeof text||"now"!==text.substring(0,3)&&!text.includes("||"))}function parse(text,roundUp,timezone,fiscalYearStartMonth){if(text)return function toDateTime(dateTimeRep,options){if("string"!=typeof dateTimeRep)return(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.Ar)(dateTimeRep)?dateTimeRep:(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isDate)(dateTimeRep)?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.KQ)(dateTimeRep):void 0;{let time,mathString="",index=-1,parseString="";return"now"===dateTimeRep.substring(0,3)?(time=(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.oZ)(options.timezone,options.now),mathString=dateTimeRep.substring(3)):(index=dateTimeRep.indexOf("||"),-1===index?(parseString=dateTimeRep,mathString=""):(parseString=dateTimeRep.substring(0,index),mathString=dateTimeRep.substring(index+2)),time=(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.KQ)(parseString,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.mt)),mathString.length?function parseDateMath(mathString,time,roundUp,fiscalYearStartMonth=0){const strippedMathString=mathString.replace(/\s/g,""),result=(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.KQ)(time);let i=0;const len=strippedMathString.length;for(;i<len;){const c=strippedMathString.charAt(i++);let type,num,unitString,isFiscal=!1;if("/"===c)type=0;else if("+"===c)type=1;else{if("-"!==c)return;type=2}if(isNaN(parseInt(strippedMathString.charAt(i),10)))num=1;else if(2===strippedMathString.length)num=parseInt(strippedMathString.charAt(i),10);else{const numFrom=i;for(;!isNaN(parseInt(strippedMathString.charAt(i),10));)if(i++,i>10)return;num=parseInt(strippedMathString.substring(numFrom,i),10)}if(0===type&&1!==num)return;unitString=strippedMathString.charAt(i++),"f"===unitString&&(unitString=strippedMathString.charAt(i++),isFiscal=!0);const unit=unitString;if(!isDurationUnit(unit))return;0===type?isFiscal?roundToFiscal(fiscalYearStartMonth,result,unit,roundUp):roundUp?result.endOf(unit):result.startOf(unit):1===type?result.add(num,unit):2===type&&result.subtract(num,unit)}return result}(mathString,time,options.roundUp,options.fiscalYearStartMonth):time}}(text,{roundUp:roundUp,timezone:timezone,fiscalYearStartMonth:fiscalYearStartMonth})}function isValid(text){const date=parse(text);return!!date&&(!!(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.Ar)(date)&&date.isValid())}function roundToFiscal(fyStartMonth,dateTime,unit,roundUp){switch(unit){case"y":return roundUp?roundToFiscal(fyStartMonth,dateTime,unit,!1)?.add(11,"M").endOf("M"):dateTime.subtract(((0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.AN)(dateTime).month()-fyStartMonth+12)%12,"M").startOf("M"),dateTime;case"Q":return roundUp?roundToFiscal(fyStartMonth,dateTime,unit,!1)?.add(2,"M").endOf("M"):dateTime.subtract(((0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_1__.AN)(dateTime).month()-fyStartMonth+12)%3,"M").startOf("M"),dateTime;default:return}}},"../grafana-data/src/datetime/parser.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{b:function(){return dateTimeParse}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/lodash/lodash.js"),moment_timezone__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/moment-timezone/index.js"),moment_timezone__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_1__),_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../grafana-data/src/datetime/common.ts"),_datemath__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../grafana-data/src/datetime/datemath.ts"),_formats__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../grafana-data/src/datetime/formats.ts"),_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../grafana-data/src/datetime/moment_wrapper.ts");const dateTimeParse=(value,options)=>(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.Ar)(value)?value:"string"==typeof value?parseString(value,options):parseOthers(value,options),parseString=(value,options)=>{if(-1!==value.indexOf("now")){if(!(0,_datemath__WEBPACK_IMPORTED_MODULE_3__.fn)(value))return(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.KQ)();return(0,_datemath__WEBPACK_IMPORTED_MODULE_3__.qg)(value,options?.roundUp,options?.timeZone,options?.fiscalYearStartMonth)||(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.KQ)()}let timeZone=(0,_common__WEBPACK_IMPORTED_MODULE_4__.O)(options),format=options?.format??_formats__WEBPACK_IMPORTED_MODULE_5__.WC.fullDate;value.endsWith("Z")&&(format="YYYY-MM-DDTHH:mm:ss.SSSZ",timeZone="utc");const zone=moment_timezone__WEBPACK_IMPORTED_MODULE_1___default().tz.zone(timeZone);return zone&&zone.name?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.oZ)(zone.name,value,format):"utc"===(0,lodash__WEBPACK_IMPORTED_MODULE_0__.lowerCase)(timeZone)?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.yT)(value,format):(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.KQ)(value,format)},parseOthers=(value,options)=>{const date=value,timeZone=(0,_common__WEBPACK_IMPORTED_MODULE_4__.O)(options),zone=moment_timezone__WEBPACK_IMPORTED_MODULE_1___default().tz.zone(timeZone);return zone&&zone.name?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.oZ)(zone.name,date):"utc"===(0,lodash__WEBPACK_IMPORTED_MODULE_0__.lowerCase)(timeZone)?(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.yT)(date):(0,_moment_wrapper__WEBPACK_IMPORTED_MODULE_2__.KQ)(date)}},"./src/components/Combobox/Combobox.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{G:function(){return Combobox}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_emotion_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),_tanstack_react_virtual__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@tanstack/react-virtual/dist/esm/index.js"),downshift__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/downshift/dist/downshift.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_grafana_i18n__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../grafana-i18n/src/i18n.tsx"),_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/themes/ThemeContext.tsx"),_Icon_Icon__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/Icon/Icon.tsx"),_Input_AutoSizeInput__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/components/Input/AutoSizeInput.tsx"),_Input_Input__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/components/Input/Input.tsx"),_Portal_Portal__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/components/Portal/Portal.tsx"),_ComboboxList__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/components/Combobox/ComboboxList.tsx"),_SuffixIcon__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/components/Combobox/SuffixIcon.tsx"),_filter__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Combobox/filter.ts"),_getComboboxStyles__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Combobox/getComboboxStyles.ts"),_useComboboxFloat__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/Combobox/useComboboxFloat.ts"),_useOptions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Combobox/useOptions.ts"),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Combobox/utils.ts");const noop=()=>{},Combobox=props=>{const{options:allOptions,onChange:onChange,value:valueProp,placeholder:placeholderProp,isClearable:isClearable,createCustomValue:createCustomValue=!1,id:id,width:width,minWidth:minWidth,maxWidth:maxWidth,"aria-labelledby":ariaLabelledBy,"data-testid":dataTestId,autoFocus:autoFocus,onBlur:onBlur,disabled:disabled,invalid:invalid}=props,value="object"==typeof valueProp?valueProp?.value:valueProp,baseId=(0,react__WEBPACK_IMPORTED_MODULE_2__.useId)().replace(/:/g,"--"),{options:filteredOptions,groupStartIndices:groupStartIndices,updateOptions:updateOptions,asyncLoading:asyncLoading,asyncError:asyncError}=(0,_useOptions__WEBPACK_IMPORTED_MODULE_3__.I)(props.options,createCustomValue),isAsync="function"==typeof allOptions,selectedItemIndex=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>{if(isAsync)return null;if(null==valueProp)return null;const index=allOptions.findIndex((option=>option.value===value));return-1===index?null:index}),[valueProp,allOptions,value,isAsync]),selectedItem=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>null==valueProp?null:null===selectedItemIndex||isAsync?"object"==typeof valueProp?valueProp:{value:valueProp,label:valueProp.toString()}:allOptions[selectedItemIndex]),[selectedItemIndex,isAsync,valueProp,allOptions]),menuId=`${baseId}-downshift-menu`,labelId=`${baseId}-downshift-label`,styles=(0,_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_4__.of)(_getComboboxStyles__WEBPACK_IMPORTED_MODULE_5__.C3),rangeExtractor=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((range=>{const startIndex=Math.max(0,range.startIndex-range.overscan),endIndex=Math.min(filteredOptions.length-1,range.endIndex+range.overscan),rangeToReturn=Array.from({length:endIndex-startIndex+1},((_,i)=>startIndex+i)),firstDisplayedOption=filteredOptions[rangeToReturn[0]];if(firstDisplayedOption?.group){const groupStartIndex=groupStartIndices.get(firstDisplayedOption.group);void 0!==groupStartIndex&&groupStartIndex<rangeToReturn[0]&&rangeToReturn.unshift(groupStartIndex)}return rangeToReturn}),[filteredOptions,groupStartIndices]),rowVirtualizer=(0,_tanstack_react_virtual__WEBPACK_IMPORTED_MODULE_6__.Te)({count:filteredOptions.length,getScrollElement:()=>scrollRef.current,estimateSize:index=>{const firstGroupItem=(0,_utils__WEBPACK_IMPORTED_MODULE_7__.S)(filteredOptions[index],index>0?filteredOptions[index-1]:void 0),hasDescription="description"in filteredOptions[index],hasGroup="group"in filteredOptions[index];let itemHeight=_getComboboxStyles__WEBPACK_IMPORTED_MODULE_5__.Aj;return hasDescription&&(itemHeight=_getComboboxStyles__WEBPACK_IMPORTED_MODULE_5__.pg),firstGroupItem&&hasGroup&&(itemHeight+=_getComboboxStyles__WEBPACK_IMPORTED_MODULE_5__.Aj),itemHeight},overscan:4,rangeExtractor:rangeExtractor}),{isOpen:isOpen,highlightedIndex:highlightedIndex,getInputProps:getInputProps,getMenuProps:getMenuProps,getItemProps:getItemProps,selectItem:selectItem}=(0,downshift__WEBPACK_IMPORTED_MODULE_8__.Bp)({menuId:menuId,labelId:labelId,inputId:id,items:filteredOptions,itemToString:_filter__WEBPACK_IMPORTED_MODULE_9__.y,selectedItem:selectedItem,onSelectedItemChange:({selectedItem:selectedItem})=>{(isClearable||null!==selectedItem)&&onChange(selectedItem)},defaultHighlightedIndex:selectedItemIndex??0,scrollIntoView:()=>{},onIsOpenChange:({isOpen:isOpen,inputValue:inputValue})=>{isOpen&&""===inputValue&&updateOptions(inputValue)},onHighlightedIndexChange:({highlightedIndex:highlightedIndex,type:type})=>{type!==downshift__WEBPACK_IMPORTED_MODULE_8__.Bp.stateChangeTypes.MenuMouseLeave&&rowVirtualizer.scrollToIndex(highlightedIndex)},onStateChange:({inputValue:newInputValue,type:type,selectedItem:newSelectedItem})=>{if(type===downshift__WEBPACK_IMPORTED_MODULE_8__.Bp.stateChangeTypes.InputChange)updateOptions(newInputValue??"")},stateReducer(state,actionAndChanges){let{changes:changes}=actionAndChanges;const menuBeingOpened=!1===state.isOpen&&!0===changes.isOpen,menuBeingClosed=!0===state.isOpen&&!1===changes.isOpen;return menuBeingOpened&&changes.inputValue===state.inputValue&&(changes={...changes,inputValue:""}),menuBeingClosed&&(changes.selectedItem?changes={...changes,inputValue:(0,_filter__WEBPACK_IMPORTED_MODULE_9__.y)(changes.selectedItem)}:""!==changes.inputValue&&(changes={...changes,inputValue:""})),changes}}),{inputRef:inputRef,floatingRef:floatingRef,floatStyles:floatStyles,scrollRef:scrollRef}=(0,_useComboboxFloat__WEBPACK_IMPORTED_MODULE_10__.l)(filteredOptions,isOpen),isAutoSize="auto"===width,InputComponent=isAutoSize?_Input_AutoSizeInput__WEBPACK_IMPORTED_MODULE_11__.D:_Input_Input__WEBPACK_IMPORTED_MODULE_12__.p,placeholder=(isOpen?(0,_filter__WEBPACK_IMPORTED_MODULE_9__.y)(selectedItem):null)||placeholderProp,loading=props.loading||asyncLoading,inputSuffix=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[void 0!==value&&value===selectedItem?.value&&isClearable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Icon_Icon__WEBPACK_IMPORTED_MODULE_13__.I,{name:"times",className:styles.clear,title:(0,_grafana_i18n__WEBPACK_IMPORTED_MODULE_14__.t)("combobox.clear.title","Clear value"),tabIndex:0,role:"button",onClick:()=>{selectItem(null)},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||selectItem(null)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_SuffixIcon__WEBPACK_IMPORTED_MODULE_15__.f,{isLoading:loading||!1,isOpen:isOpen})]}),{Wrapper:Wrapper,wrapperProps:wrapperProps}=isAutoSize?{Wrapper:"div",wrapperProps:{className:styles.adaptToParent}}:{Wrapper:react__WEBPACK_IMPORTED_MODULE_2__.Fragment};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Wrapper,{...wrapperProps,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InputComponent,{width:isAutoSize?void 0:width,...isAutoSize?{minWidth:minWidth,maxWidth:maxWidth}:{},autoFocus:autoFocus,onBlur:onBlur,disabled:disabled,invalid:invalid,className:styles.input,suffix:inputSuffix,...getInputProps({ref:inputRef,onChange:noop,"aria-labelledby":ariaLabelledBy,placeholder:placeholder,"data-testid":dataTestId})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Portal_Portal__WEBPACK_IMPORTED_MODULE_16__.ZL,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)(styles.menu,!isOpen&&styles.menuClosed),style:floatStyles,...getMenuProps({ref:floatingRef,"aria-labelledby":ariaLabelledBy}),children:isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ComboboxList__WEBPACK_IMPORTED_MODULE_17__.e,{options:filteredOptions,highlightedIndex:highlightedIndex,selectedItems:selectedItem?[selectedItem]:[],scrollRef:scrollRef,getItemProps:getItemProps,error:asyncError})})})]})};try{Combobox.displayName="Combobox",Combobox.__docgenInfo={description:"A performant Select replacement.",displayName:"Combobox",props:{isClearable:{defaultValue:null,description:"An `X` appears in the UI, which clears the input and sets the value to `null`. Do not use if you have no `null` case.",name:"isClearable",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"onChange handler is called with the newly selected option.",name:"onChange",required:!0,type:{name:"((option: ComboboxOption<T> | null) => void) | ((option: ComboboxOption<T>) => void)"}},createCustomValue:{defaultValue:null,description:"Allows the user to set a value which is not in the list of options.",name:"createCustomValue",required:!1,type:{name:"boolean"}},options:{defaultValue:null,description:"An array of options, or a function that returns a promise resolving to an array of options.\nIf a function, it will be called when the menu is opened and on keypress with the current search query.",name:"options",required:!0,type:{name:"ComboboxOption<T>[] | ((inputValue: string) => Promise<ComboboxOption<T>[]>)"}},value:{defaultValue:null,description:"Current selected value. Most consumers should pass a scalar value (string | number). However, sometimes with Async\nit may be better to pass in an Option with a label to display.",name:"value",required:!1,type:{name:"string | number | ComboboxOption<T> | null"}},width:{defaultValue:null,description:"Defaults to full width of container. Number is a multiple of the spacing unit. 'auto' will size the input to the content.",name:"width",required:!1,type:{name:'number | "auto"'}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"Called when the input loses focus.",name:"onBlur",required:!1,type:{name:"(() => void)"}},invalid:{defaultValue:null,description:"Show an invalid state around the input",name:"invalid",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"Show a loading indicator as a suffix in the input",name:"loading",required:!1,type:{name:"boolean"}},minWidth:{defaultValue:null,description:"Needs to be set when width is 'auto' to prevent the input from shrinking too much",name:"minWidth",required:!1,type:{name:"number"}},maxWidth:{defaultValue:null,description:"Recommended to set when width is 'auto' to prevent the input from growing too much.",name:"maxWidth",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Combobox/Combobox.tsx#Combobox"]={docgenInfo:Combobox.__docgenInfo,name:"Combobox",path:"src/components/Combobox/Combobox.tsx#Combobox"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/DateTimePickers/TimeRangePicker/CalendarBody.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{h2:function(){return getBodyStyles},nB:function(){return Body}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_emotion_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),react_calendar__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react-calendar/dist/index.js"),_grafana_data__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../grafana-data/src/datetime/parser.ts"),_grafana_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../grafana-i18n/src/i18n.tsx"),_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/themes/ThemeContext.tsx"),_Icon_Icon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Icon/Icon.tsx"),_WeekStartPicker__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/DateTimePickers/WeekStartPicker.tsx"),_utils_adjustDateForReactCalendar__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/DateTimePickers/utils/adjustDateForReactCalendar.ts");const weekStartMap={saturday:"islamic",sunday:"gregory",monday:"iso8601"};function Body({onChange:onChange,from:from,to:to,timeZone:timeZone,weekStart:weekStart}){const value=function inputToValue(from,to,invalidDateDefault=new Date,timezone){let fromAsDate=from.isValid()?from.toDate():invalidDateDefault,toAsDate=to.isValid()?to.toDate():invalidDateDefault;timezone&&(fromAsDate=(0,_utils_adjustDateForReactCalendar__WEBPACK_IMPORTED_MODULE_8__.Q)(fromAsDate,timezone),toAsDate=(0,_utils_adjustDateForReactCalendar__WEBPACK_IMPORTED_MODULE_8__.Q)(toAsDate,timezone));if(fromAsDate>toAsDate)return[toAsDate,fromAsDate];return[fromAsDate,toAsDate]}(from,to,new Date,timeZone),onCalendarChange=function useOnCalendarChange(onChange,timeZone){return(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((value=>{if(!Array.isArray(value))return console.error("onCalendarChange: should be run in selectRange={true}");if(value[0]&&value[1]){const from=(0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.b)(dateInfo(value[0]),{timeZone:timeZone}),to=(0,_grafana_data__WEBPACK_IMPORTED_MODULE_9__.b)(dateInfo(value[1]),{timeZone:timeZone});onChange(from,to)}}),[onChange,timeZone])}(onChange,timeZone),styles=(0,_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__.of)(getBodyStyles),weekStartValue=(0,_WeekStartPicker__WEBPACK_IMPORTED_MODULE_4__.rL)(weekStart);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_calendar__WEBPACK_IMPORTED_MODULE_5__.Ay,{selectRange:!0,next2Label:null,prev2Label:null,className:styles.body,tileClassName:styles.title,value:value,nextLabel:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Icon_Icon__WEBPACK_IMPORTED_MODULE_6__.I,{name:"angle-right"}),nextAriaLabel:(0,_grafana_i18n__WEBPACK_IMPORTED_MODULE_7__.t)("time-picker.calendar.next-month","Next month"),prevLabel:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Icon_Icon__WEBPACK_IMPORTED_MODULE_6__.I,{name:"angle-left"}),prevAriaLabel:(0,_grafana_i18n__WEBPACK_IMPORTED_MODULE_7__.t)("time-picker.calendar.previous-month","Previous month"),onChange:onCalendarChange,locale:"en",calendarType:weekStartMap[weekStartValue]})}function dateInfo(date){return[date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds()]}Body.displayName="Body";const getBodyStyles=theme=>{const hasActiveSelector=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({color:theme.colors.text.primary,backgroundColor:theme.colors.background.primary,fontSize:theme.typography.size.md,border:"1px solid transparent","&:hover, &:focus":{position:"relative"},"&:disabled":{color:theme.colors.action.disabledText,cursor:"not-allowed"}}),body:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({zIndex:theme.zIndex.modal,backgroundColor:theme.colors.background.elevated,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:theme.colors.text.primary,border:0,fontWeight:theme.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:theme.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},".react-calendar__tile--hover":{backgroundColor:theme.colors.action.hover,borderRadius:0},".react-calendar__tile--hoverStart":{borderTopLeftRadius:theme.shape.radius.pill,borderBottomLeftRadius:theme.shape.radius.pill},".react-calendar__tile--hoverEnd":{borderTopRightRadius:theme.shape.radius.pill,borderBottomRightRadius:theme.shape.radius.pill},".react-calendar__tile:hover:not(.react-calendar__tile--hover):not(.react-calendar__tile--active):not(.react-calendar__tile--hasActive)":{backgroundColor:theme.colors.action.hover,borderRadius:theme.shape.radius.pill},[`${hasActiveSelector}, .react-calendar__tile--rangeStart:not(.react-calendar__tile--hover)`]:{borderTopLeftRadius:theme.shape.radius.pill,borderBottomLeftRadius:theme.shape.radius.pill},[`${hasActiveSelector}, .react-calendar__tile--rangeEnd:not(.react-calendar__tile--hover)`]:{borderTopRightRadius:theme.shape.radius.pill,borderBottomRightRadius:theme.shape.radius.pill},[`${hasActiveSelector}, .react-calendar__tile--active, .react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart`]:{color:theme.colors.primary.contrastText,fontWeight:theme.typography.fontWeightMedium,background:theme.colors.primary.main,border:"0px"}})}};try{Body.displayName="Body",Body.__docgenInfo={description:"",displayName:"Body",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},from:{defaultValue:null,description:"",name:"from",required:!0,type:{name:"DateTime"}},to:{defaultValue:null,description:"",name:"to",required:!0,type:{name:"DateTime"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onApply:{defaultValue:null,description:"",name:"onApply",required:!0,type:{name:"(e: FormEvent<HTMLButtonElement>) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(from: DateTime, to: DateTime) => void"}},weekStart:{defaultValue:null,description:"",name:"weekStart",required:!1,type:{name:"enum",value:[{value:'"saturday"'},{value:'"sunday"'},{value:'"monday"'}]}},isFullscreen:{defaultValue:null,description:'When true, the calendar is rendered as a floating "tooltip" next to the input.\nWhen false, the calendar is rendered "fullscreen" in a modal. Yes. Don\'t ask.',name:"isFullscreen",required:!0,type:{name:"boolean"}},timeZone:{defaultValue:null,description:"",name:"timeZone",required:!1,type:{name:"string"}},isReversed:{defaultValue:null,description:"",name:"isReversed",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateTimePickers/TimeRangePicker/CalendarBody.tsx#Body"]={docgenInfo:Body.__docgenInfo,name:"Body",path:"src/components/DateTimePickers/TimeRangePicker/CalendarBody.tsx#Body"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/DateTimePickers/WeekStartPicker.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{l6:function(){return WeekStartPicker},rL:function(){return getWeekStart}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../grafana-e2e-selectors/src/selectors/index.ts"),_grafana_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../grafana-i18n/src/i18n.tsx"),_Combobox_Combobox__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Combobox/Combobox.tsx");function isWeekStart(value){return["saturday","sunday","monday"].includes(value)}function getWeekStart(override){if(override&&isWeekStart(override))return override;const preference=window?.grafanaBootData?.user?.weekStart;return preference&&isWeekStart(preference)?preference:"monday"}const WeekStartPicker=props=>{const{onChange:onChange,width:width,autoFocus:autoFocus=!1,onBlur:onBlur,value:value,disabled:disabled=!1,inputId:inputId}=props,weekStarts=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>[{value:"",label:(0,_grafana_i18n__WEBPACK_IMPORTED_MODULE_2__.t)("grafana-ui.week-start-picker.weekStarts-label-default","Default")},{value:"saturday",label:(0,_grafana_i18n__WEBPACK_IMPORTED_MODULE_2__.t)("grafana-ui.week-start-picker.weekStarts-label-saturday","Saturday")},{value:"sunday",label:(0,_grafana_i18n__WEBPACK_IMPORTED_MODULE_2__.t)("grafana-ui.week-start-picker.weekStarts-label-sunday","Sunday")},{value:"monday",label:(0,_grafana_i18n__WEBPACK_IMPORTED_MODULE_2__.t)("grafana-ui.week-start-picker.weekStarts-label-monday","Monday")}]),[]),onChangeWeekStart=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((selectable=>{selectable&&void 0!==selectable.value&&onChange(isWeekStart(selectable.value)?selectable.value:void 0)}),[onChange]),selected=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>weekStarts.find((item=>item.value===value))?.value??""),[value,weekStarts]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Combobox_Combobox__WEBPACK_IMPORTED_MODULE_3__.G,{id:inputId,value:selected,placeholder:_grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_4__.Tp.components.WeekStartPicker.placeholder,autoFocus:autoFocus,width:width,options:weekStarts,onChange:onChangeWeekStart,onBlur:onBlur,disabled:disabled})};try{isWeekStart.displayName="isWeekStart",isWeekStart.__docgenInfo={description:"",displayName:"isWeekStart",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateTimePickers/WeekStartPicker.tsx#isWeekStart"]={docgenInfo:isWeekStart.__docgenInfo,name:"isWeekStart",path:"src/components/DateTimePickers/WeekStartPicker.tsx#isWeekStart"})}catch(__react_docgen_typescript_loader_error){}try{getWeekStart.displayName="getWeekStart",getWeekStart.__docgenInfo={description:"Returns the system or user defined week start (as defined in bootData)\nOr you can pass in an override weekStart string and have it be validated and returned as WeekStart type if valid",displayName:"getWeekStart",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateTimePickers/WeekStartPicker.tsx#getWeekStart"]={docgenInfo:getWeekStart.__docgenInfo,name:"getWeekStart",path:"src/components/DateTimePickers/WeekStartPicker.tsx#getWeekStart"})}catch(__react_docgen_typescript_loader_error){}try{WeekStartPicker.displayName="WeekStartPicker",WeekStartPicker.__docgenInfo={description:"",displayName:"WeekStartPicker",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(weekStart?: WeekStart | undefined) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"enum",value:[{value:'"saturday"'},{value:'"sunday"'},{value:'"monday"'}]}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"(() => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DateTimePickers/WeekStartPicker.tsx#WeekStartPicker"]={docgenInfo:WeekStartPicker.__docgenInfo,name:"WeekStartPicker",path:"src/components/DateTimePickers/WeekStartPicker.tsx#WeekStartPicker"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/DateTimePickers/utils/adjustDateForReactCalendar.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Q:function(){return adjustDateForReactCalendar}});var _grafana_data__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../grafana-data/src/datetime/timezones.ts");function adjustDateForReactCalendar(date,timeZone){const zone=(0,_grafana_data__WEBPACK_IMPORTED_MODULE_0__.HD)(timeZone);if(!zone)return date;const diff=zone.utcOffset(date.getTime())-date.getTimezoneOffset();return new Date(date.getTime()-1e3*diff*60)}},"./src/components/Input/AutoSizeInput.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{D:function(){return AutoSizeInput}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_utils_measureText__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/measureText.ts"),_AutoSizeInputContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Input/AutoSizeInputContext.ts"),_Input__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Input/Input.tsx");const AutoSizeInput=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(((props,ref)=>{const{defaultValue:defaultValue="",minWidth:minWidth=10,maxWidth:maxWidth,onCommitChange:onCommitChange,onChange:onChange,onKeyDown:onKeyDown,onBlur:onBlur,value:controlledValue,placeholder:placeholder,...restProps}=props,[inputState,setInputValue]=function useControlledState(controlledValue,onChange){const isControlledNow=void 0!==controlledValue&&void 0!==onChange,isControlledRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(isControlledNow),hasLoggedControlledWarning=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1);isControlledNow===isControlledRef.current||hasLoggedControlledWarning.current||(console.warn("An AutoSizeInput is changing from an uncontrolled to a controlled input. If you want to control the input, the empty value should be an empty string."),hasLoggedControlledWarning.current=!0);const[internalValue,setInternalValue]=react__WEBPACK_IMPORTED_MODULE_1__.useState(controlledValue);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{isControlledRef.current||setInternalValue(controlledValue)}),[controlledValue]);const handleChange=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newValue=>{isControlledRef.current||setInternalValue(newValue)}),[]),value=isControlledRef.current?controlledValue:internalValue;return[value,handleChange]}(controlledValue,onChange),inputValue=inputState??defaultValue,inputWidth=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>{const displayValue=inputValue||placeholder||"";return function getWidthFor(value,minWidth,maxWidth){if(!value)return minWidth;const extraSpace=3,realWidth=(0,_utils_measureText__WEBPACK_IMPORTED_MODULE_4__.kD)(value.toString(),14).width/8+extraSpace;if(minWidth&&realWidth<minWidth)return minWidth;if(maxWidth&&realWidth>maxWidth)return maxWidth;return realWidth}("string"==typeof displayValue?displayValue:displayValue.toString(),minWidth,maxWidth)}),[placeholder,inputValue,minWidth,maxWidth]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_AutoSizeInputContext__WEBPACK_IMPORTED_MODULE_2__.W.Provider,{value:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Input__WEBPACK_IMPORTED_MODULE_3__.p,{"data-testid":"autosize-input",...restProps,placeholder:placeholder,ref:ref,value:inputValue.toString(),onChange:event=>{onChange&&onChange(event),setInputValue(event.currentTarget.value)},width:inputWidth,onBlur:event=>{onBlur?onBlur(event):onCommitChange&&onCommitChange(event)},onKeyDown:event=>{onKeyDown?onKeyDown(event):"Enter"===event.key&&onCommitChange&&onCommitChange(event)}})})}));AutoSizeInput.displayName="AutoSizeInput";try{AutoSizeInput.displayName="AutoSizeInput",AutoSizeInput.__docgenInfo={description:"",displayName:"AutoSizeInput",props:{minWidth:{defaultValue:null,description:"Sets the min-width to a multiple of 8px. Default value is 10",name:"minWidth",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"Sets the width to a multiple of 8px. Should only be used with inline forms. Setting width of the container is preferred in other cases.",name:"width",required:!1,type:{name:"number"}},defaultValue:{defaultValue:null,description:"@deprecated Use `value` and `onChange` instead to manage the value in the parent as a controlled input",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},prefix:{defaultValue:null,description:"Show an icon as a prefix in the input",name:"prefix",required:!1,type:{name:"ReactNode"}},invalid:{defaultValue:null,description:"Show an invalid state around the input",name:"invalid",required:!1,type:{name:"boolean"}},suffix:{defaultValue:null,description:"Show an icon as a suffix in the input",name:"suffix",required:!1,type:{name:"ReactNode"}},loading:{defaultValue:null,description:"Show a loading indicator as a suffix in the input",name:"loading",required:!1,type:{name:"boolean"}},addonBefore:{defaultValue:null,description:"Add a component as an addon before the input",name:"addonBefore",required:!1,type:{name:"ReactNode"}},addonAfter:{defaultValue:null,description:"Add a component as an addon after the input",name:"addonAfter",required:!1,type:{name:"ReactNode"}},maxWidth:{defaultValue:null,description:"Sets the max-width to a multiple of 8px.",name:"maxWidth",required:!1,type:{name:"number"}},onCommitChange:{defaultValue:null,description:"onChange function that will be run on onBlur and onKeyPress with enter\n@deprecated Use `onChange` instead and manage the value in the parent as a controlled input",name:"onCommitChange",required:!1,type:{name:"((event: FormEvent<HTMLInputElement>) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Input/AutoSizeInput.tsx#AutoSizeInput"]={docgenInfo:AutoSizeInput.__docgenInfo,name:"AutoSizeInput",path:"src/components/Input/AutoSizeInput.tsx#AutoSizeInput"})}catch(__react_docgen_typescript_loader_error){}}}]);