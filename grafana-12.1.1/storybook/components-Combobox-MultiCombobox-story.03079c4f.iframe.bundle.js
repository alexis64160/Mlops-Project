"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[9668],{"../grafana-data/src/utils/deprecationWarning.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{l:function(){return deprecationWarning}});const history={},deprecationWarning=(file,oldName,newName)=>{let message=`[Deprecation warning] ${file}: ${oldName} is deprecated`;newName&&(message+=`. Use ${newName} instead`);const now=Date.now(),last=history[message];(!last||now-last>1e4)&&(console.warn(message),history[message]=now)}},"./src/components/IconButton/IconButton.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{K:function(){return IconButton}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_emotion_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_grafana_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../grafana-data/src/utils/deprecationWarning.ts"),_grafana_data__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../grafana-data/src/themes/colorManipulator.ts"),_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/themes/ThemeContext.tsx"),_themes_mixins__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/themes/mixins.ts"),_Button_Button__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Button/Button.tsx"),_Icon_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Icon/utils.ts"),_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Tooltip/Tooltip.tsx");const IconButton=react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(((props,ref)=>{const{size:size="md",variant:variant="secondary"}=props;let limitedIconSize;"xxl"===size||"xxxl"===size?((0,_grafana_data__WEBPACK_IMPORTED_MODULE_3__.l)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),limitedIconSize="xl"):limitedIconSize=size;const styles=(0,_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_4__.of)(getStyles,limitedIconSize,variant);let ariaLabel,buttonRef;if("tooltip"in props){const{tooltip:tooltip}=props;ariaLabel="string"==typeof tooltip?tooltip:void 0}else if("ariaLabel"in props||"aria-label"in props){const{ariaLabel:deprecatedAriaLabel,"aria-label":ariaLabelProp}=props;ariaLabel=ariaLabelProp||deprecatedAriaLabel,buttonRef=ref}if("tooltip"in props){const{name:name,iconType:iconType,className:className,tooltip:tooltip,tooltipPlacement:tooltipPlacement,...restProps}=props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_5__.m,{ref:ref,content:tooltip,placement:tooltipPlacement,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{...restProps,ref:buttonRef,"aria-label":ariaLabel,className:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)(styles.button,className),type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Button_Button__WEBPACK_IMPORTED_MODULE_6__.Jt,{icon:name,size:limitedIconSize,className:styles.icon,iconType:iconType})})})}{const{name:name,iconType:iconType,className:className,...restProps}=props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{...restProps,ref:buttonRef,"aria-label":ariaLabel,className:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)(styles.button,className),type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Button_Button__WEBPACK_IMPORTED_MODULE_6__.Jt,{icon:name,size:limitedIconSize,className:styles.icon,iconType:iconType})})}}));IconButton.displayName="IconButton";const getStyles=(theme,size,variant)=>{const hoverSize=(0,_Icon_utils__WEBPACK_IMPORTED_MODULE_7__.cs)(size)+theme.spacing.gridSize;let iconColor=theme.colors.text.primary;return"primary"===variant?iconColor=theme.colors.primary.text:"destructive"===variant&&(iconColor=theme.colors.error.text),{button:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({zIndex:0,position:"relative",margin:`0 ${theme.spacing.x0_5} 0 0`,boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:iconColor,"&[disabled], &:disabled":{cursor:"not-allowed",color:theme.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${hoverSize}px`,height:`${hoverSize}px`,borderRadius:theme.shape.radius.default,content:'""',[theme.transitions.handleMotion("no-preference","reduce")]:{transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"}},"&:focus, &:focus-visible":(0,_themes_mixins__WEBPACK_IMPORTED_MODULE_8__.Hi)(theme),"&:focus:not(:focus-visible)":(0,_themes_mixins__WEBPACK_IMPORTED_MODULE_8__.cr)(theme),"&:hover":{"&:before":{backgroundColor:"secondary"===variant?theme.colors.action.hover:_grafana_data__WEBPACK_IMPORTED_MODULE_9__.MV.alpha(iconColor,.12),opacity:1}}}),icon:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({verticalAlign:"baseline"})}};try{IconButton.displayName="IconButton",IconButton.__docgenInfo={description:"",displayName:"IconButton",props:{tooltip:{defaultValue:null,description:"Tooltip content to display on hover and as the aria-label",name:"tooltip",required:!0,type:{name:"PopoverContent"}},tooltipPlacement:{defaultValue:null,description:"Position of the tooltip",name:"tooltipPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"bottom"'},{value:'"top"'},{value:'"right"'},{value:'"left"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"auto-start"'},{value:'"auto-end"'}]}},name:{defaultValue:null,description:"Name of the icon *",name:"name",required:!0,type:{name:"enum",value:[{value:'"play"'},{value:'"google"'},{value:'"microsoft"'},{value:'"github"'},{value:'"gitlab"'},{value:'"okta"'},{value:'"discord"'},{value:'"hipchat"'},{value:'"amazon"'},{value:'"google-hangouts-alt"'},{value:'"pagerduty"'},{value:'"line"'},{value:'"anchor"'},{value:'"adjust-circle"'},{value:'"angle-double-down"'},{value:'"angle-double-right"'},{value:'"angle-double-left"'},{value:'"angle-double-up"'},{value:'"angle-down"'},{value:'"angle-left"'},{value:'"angle-right"'},{value:'"angle-up"'},{value:'"align-left"'},{value:'"align-right"'},{value:'"api-endpoint"'},{value:'"application-observability"'},{value:'"apps"'},{value:'"archive-alt"'},{value:'"arrow"'},{value:'"arrow-down"'},{value:'"arrow-from-right"'},{value:'"arrow-left"'},{value:'"arrow-random"'},{value:'"arrow-right"'},{value:'"arrow-to-right"'},{value:'"arrow-up"'},{value:'"arrows-h"'},{value:'"arrows-v"'},{value:'"asserts"'},{value:'"expand-arrows"'},{value:'"expand-arrows-alt"'},{value:'"at"'},{value:'"ai"'},{value:'"backward"'},{value:'"bars"'},{value:'"bell"'},{value:'"bell-slash"'},{value:'"bolt"'},{value:'"book"'},{value:'"bookmark"'},{value:'"book-open"'},{value:'"brackets-curly"'},{value:'"browser-alt"'},{value:'"bug"'},{value:'"building"'},{value:'"calculator-alt"'},{value:'"calendar-alt"'},{value:'"calendar-slash"'},{value:'"camera"'},{value:'"capture"'},{value:'"channel-add"'},{value:'"chart-line"'},{value:'"check"'},{value:'"check-circle"'},{value:'"check-square"'},{value:'"circle"'},{value:'"circle-mono"'},{value:'"clipboard-alt"'},{value:'"clock-nine"'},{value:'"cloud"'},{value:'"cloud-download"'},{value:'"cloud-provider"'},{value:'"cloud-upload"'},{value:'"code-branch"'},{value:'"cog"'},{value:'"columns"'},{value:'"comment-alt"'},{value:'"comment-alt-message"'},{value:'"comment-alt-share"'},{value:'"comments-alt"'},{value:'"compass"'},{value:'"compress-arrows"'},{value:'"copy"'},{value:'"corner-up-left"'},{value:'"corner-up-right"'},{value:'"corner-down-right-alt"'},{value:'"create-dashboard"'},{value:'"credit-card"'},{value:'"crosshair"'},{value:'"cube"'},{value:'"dashboard"'},{value:'"database"'},{value:'"dice-three"'},{value:'"docker"'},{value:'"document-info"'},{value:'"document-layout-left"'},{value:'"download-alt"'},{value:'"draggabledots"'},{value:'"drilldown"'},{value:'"edit"'},{value:'"ellipsis-v"'},{value:'"enter"'},{value:'"envelope"'},{value:'"exchange-alt"'},{value:'"exclamation-triangle"'},{value:'"exclamation-circle"'},{value:'"exclamation"'},{value:'"external-link-alt"'},{value:'"eye"'},{value:'"eye-slash"'},{value:'"ellipsis-h"'},{value:'"fa fa-spinner"'},{value:'"favorite"'},{value:'"file-alt"'},{value:'"file-blank"'},{value:'"file-copy-alt"'},{value:'"file-download"'},{value:'"file-edit-alt"'},{value:'"file-export"'},{value:'"file-landscape-alt"'},{value:'"filter"'},{value:'"flip"'},{value:'"folder"'},{value:'"font"'},{value:'"fire"'},{value:'"folder-open"'},{value:'"folder-plus"'},{value:'"folder-upload"'},{value:'"forward"'},{value:'"frontend-observability"'},{value:'"gf-bar-alignment-after"'},{value:'"gf-bar-alignment-before"'},{value:'"gf-bar-alignment-center"'},{value:'"gf-glue"'},{value:'"gf-grid"'},{value:'"gf-interpolation-linear"'},{value:'"gf-interpolation-smooth"'},{value:'"gf-interpolation-step-after"'},{value:'"gf-interpolation-step-before"'},{value:'"gf-landscape"'},{value:'"gf-layout-simple"'},{value:'"gf-logs"'},{value:'"gf-ml"'},{value:'"gf-ml-alt"'},{value:'"gf-movepane-left"'},{value:'"gf-movepane-right"'},{value:'"gf-portrait"'},{value:'"gf-service-account"'},{value:'"gf-show-context"'},{value:'"gf-pin"'},{value:'"gf-prometheus"'},{value:'"gf-traces"'},{value:'"globe"'},{value:'"grafana"'},{value:'"graph-bar"'},{value:'"heart"'},{value:'"heart-rate"'},{value:'"heart-break"'},{value:'"history"'},{value:'"history-alt"'},{value:'"home"'},{value:'"home-alt"'},{value:'"horizontal-align-center"'},{value:'"horizontal-align-left"'},{value:'"horizontal-align-right"'},{value:'"hourglass"'},{value:'"import"'},{value:'"info"'},{value:'"info-circle"'},{value:'"k6"'},{value:'"k6-rounded"'},{value:'"key-skeleton-alt"'},{value:'"keyboard"'},{value:'"kubernetes"'},{value:'"layer-group"'},{value:'"layers-alt"'},{value:'"layers"'},{value:'"layers-slash"'},{value:'"legend-hide"'},{value:'"legend-show"'},{value:'"library-panel"'},{value:'"line-alt"'},{value:'"link"'},{value:'"link-broken"'},{value:'"list-ui-alt"'},{value:'"list-ul"'},{value:'"list-ol"'},{value:'"lock"'},{value:'"map-marker"'},{value:'"map-marker-plus"'},{value:'"map-marker-minus"'},{value:'"message"'},{value:'"minus"'},{value:'"minus-circle"'},{value:'"mobile-android"'},{value:'"monitor"'},{value:'"multi-step"'},{value:'"palette"'},{value:'"panel-add"'},{value:'"paragraph"'},{value:'"pathfinder-unite"'},{value:'"pause"'},{value:'"pause-circle"'},{value:'"pen"'},{value:'"percentage"'},{value:'"plug"'},{value:'"plus"'},{value:'"plus-circle"'},{value:'"plus-square"'},{value:'"power"'},{value:'"presentation-play"'},{value:'"process"'},{value:'"question-circle"'},{value:'"record-audio"'},{value:'"repeat"'},{value:'"rocket"'},{value:'"ruler-combined"'},{value:'"save"'},{value:'"search"'},{value:'"search-minus"'},{value:'"search-plus"'},{value:'"share-alt"'},{value:'"shield"'},{value:'"shield-exclamation"'},{value:'"signal"'},{value:'"signin"'},{value:'"signout"'},{value:'"sitemap"'},{value:'"slack"'},{value:'"sliders-v-alt"'},{value:'"spinner"'},{value:'"sort-amount-down"'},{value:'"sort-amount-up"'},{value:'"square-shape"'},{value:'"star"'},{value:'"step-backward"'},{value:'"stopwatch"'},{value:'"stopwatch-slash"'},{value:'"sync"'},{value:'"sync-slash"'},{value:'"table"'},{value:'"table-collapse-all"'},{value:'"table-expand-all"'},{value:'"tag-alt"'},{value:'"telegram-alt"'},{value:'"text-fields"'},{value:'"thumbs-up"'},{value:'"times"'},{value:'"times-circle"'},{value:'"toggle-on"'},{value:'"toggle-off"'},{value:'"trash-alt"'},{value:'"unarchive"'},{value:'"unlock"'},{value:'"upload"'},{value:'"user"'},{value:'"ban"'},{value:'"window"'},{value:'"window-grid"'},{value:'"users-alt"'},{value:'"user-arrows"'},{value:'"vertical-align-bottom"'},{value:'"vertical-align-center"'},{value:'"vertical-align-top"'},{value:'"web-section"'},{value:'"web-section-alt"'},{value:'"wrap-text"'},{value:'"wrench"'},{value:'"rss"'},{value:'"x"'},{value:'"add-user"'},{value:'"attach"'},{value:'"dollar-alt"'},{value:'"ai-sparkle"'}]}},size:{defaultValue:null,description:"Icon size - sizes xxl and xxxl are deprecated and when used being decreased to xl",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"xxl"'},{value:'"xxxl"'}]}},iconType:{defaultValue:null,description:"Type of the icon - mono or default",name:"iconType",required:!1,type:{name:"enum",value:[{value:'"solid"'},{value:'"default"'},{value:'"mono"'}]}},variant:{defaultValue:null,description:"Variant to change the color of the Icon",name:"variant",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"destructive"'}]}},ariaLabel:{defaultValue:null,description:"@deprecated use aria-label instead",name:"ariaLabel",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"Text available only for screen readers. No tooltip will be set in this case.",name:"aria-label",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/IconButton/IconButton.tsx#IconButton"]={docgenInfo:IconButton.__docgenInfo,name:"IconButton",path:"src/components/IconButton/IconButton.tsx#IconButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Combobox/MultiCombobox.story.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AsyncOptionsWithLabels:function(){return AsyncOptionsWithLabels},AsyncOptionsWithOnlyValues:function(){return AsyncOptionsWithOnlyValues},AutoSize:function(){return AutoSize},Basic:function(){return Basic},ManyOptions:function(){return ManyOptions},ManyOptionsGrouped:function(){return ManyOptionsGrouped},default:function(){return MultiCombobox_story}});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),dist=__webpack_require__("../../node_modules/@storybook/addon-actions/dist/index.mjs"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),Field=__webpack_require__("./src/components/Forms/Field.tsx"),emotion_css_esm=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),downshift_esm=__webpack_require__("../../node_modules/downshift/dist/downshift.esm.js"),react=__webpack_require__("../../node_modules/react/index.js"),i18n=__webpack_require__("../grafana-i18n/src/i18n.tsx"),ThemeContext=__webpack_require__("./src/themes/ThemeContext.tsx"),Icon=__webpack_require__("./src/components/Icon/Icon.tsx"),Box=__webpack_require__("./src/components/Layout/Box/Box.tsx"),Portal=__webpack_require__("./src/components/Portal/Portal.tsx"),Text=__webpack_require__("./src/components/Text/Text.tsx"),Tooltip=__webpack_require__("./src/components/Tooltip/Tooltip.tsx"),ComboboxList=__webpack_require__("./src/components/Combobox/ComboboxList.tsx"),SuffixIcon=__webpack_require__("./src/components/Combobox/SuffixIcon.tsx"),IconButton=__webpack_require__("./src/components/IconButton/IconButton.tsx");const ValuePill=(0,react.forwardRef)((({children:children,onRemove:onRemove,disabled:disabled,...rest},ref)=>{const styles=(0,ThemeContext.of)(getValuePillStyles,disabled),removeButtonLabel=(0,i18n.t)("grafana-ui.value-pill.remove-button","Remove {{children}}",{children:children});return(0,jsx_runtime.jsxs)("span",{className:styles.wrapper,...rest,ref:ref,children:[(0,jsx_runtime.jsx)("span",{className:styles.text,children:children}),!disabled&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:styles.separator}),(0,jsx_runtime.jsx)(IconButton.K,{name:"times",size:"md","aria-label":removeButtonLabel,onClick:e=>{e.stopPropagation(),onRemove()}})]})]})})),getValuePillStyles=(theme,disabled)=>({wrapper:(0,emotion_css_esm.AH)({display:"inline-flex",borderRadius:theme.shape.radius.default,color:theme.colors.text.primary,background:theme.colors.background.secondary,padding:theme.spacing(.25),border:disabled?`1px solid ${theme.colors.border.weak}`:"none",fontSize:theme.typography.bodySmall.fontSize,flexShrink:0,minWidth:"50px",alignItems:"center","&:first-child:has(+ div)":{flexShrink:1}}),text:(0,emotion_css_esm.AH)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:theme.spacing(0,1,0,.75)}),separator:(0,emotion_css_esm.AH)({background:theme.colors.border.weak,width:"2px",height:"100%",marginRight:theme.spacing(.5)})});try{ValuePill.displayName="ValuePill",ValuePill.__docgenInfo={description:"",displayName:"ValuePill",props:{onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"() => void"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Combobox/ValuePill.tsx#ValuePill"]={docgenInfo:ValuePill.__docgenInfo,name:"ValuePill",path:"src/components/Combobox/ValuePill.tsx#ValuePill"})}catch(__react_docgen_typescript_loader_error){}var filter=__webpack_require__("./src/components/Combobox/filter.ts"),getComboboxStyles=__webpack_require__("./src/components/Combobox/getComboboxStyles.ts"),mixins=__webpack_require__("./src/themes/mixins.ts"),Input=__webpack_require__("./src/components/Input/Input.tsx");const getMultiComboboxStyles=(theme,isOpen,invalid,disabled,width,minWidth,maxWidth,isClearable)=>{const inputStyles=(0,Input.n)({theme:theme,invalid:invalid}),focusStyles=(0,mixins.Hi)(theme),wrapperWidth=width&&"auto"!==width?theme.spacing(width):"100%",wrapperMinWidth=minWidth?theme.spacing(minWidth):"",wrapperMaxWidth=maxWidth?theme.spacing(maxWidth):"";return{container:(0,emotion_css_esm.AH)({width:"auto"===width?"auto":wrapperWidth,minWidth:wrapperMinWidth,maxWidth:wrapperMaxWidth,display:"auto"===width?"inline-block":"block"}),wrapper:(0,emotion_css_esm.cx)(inputStyles.input,(0,emotion_css_esm.AH)({display:"flex",width:"100%",gap:theme.spacing(.5),padding:theme.spacing(.5),paddingRight:isClearable?theme.spacing(5):28,"&:focus-within":{...focusStyles}})),input:(0,emotion_css_esm.AH)({border:"none",outline:"none",background:"transparent",flexGrow:1,maxWidth:"100%",minWidth:40,"&::placeholder":{color:theme.colors.text.disabled},"&:focus":{outline:"none",cursor:"text"},cursor:"pointer"}),pillWrapper:(0,emotion_css_esm.AH)({display:"inline-flex",flexWrap:isOpen?"wrap":"nowrap",flexGrow:1,minWidth:"50px",gap:theme.spacing(.5)}),restNumber:(0,emotion_css_esm.AH)({display:"inline-flex",alignItems:"center",justifyContent:"center",padding:theme.spacing(0,1),border:disabled?`1px solid ${theme.colors.border.weak}`:"none",borderRadius:theme.shape.radius.default,backgroundColor:theme.colors.background.secondary,cursor:"pointer","&:hover":{backgroundColor:theme.colors.action.hover}}),suffix:inputStyles.suffix,disabled:inputStyles.inputDisabled}};var types=__webpack_require__("./src/components/Combobox/types.ts"),useComboboxFloat=__webpack_require__("./src/components/Combobox/useComboboxFloat.ts"),useMeasure=__webpack_require__("../../node_modules/react-use/esm/useMeasure.js"),measureText=__webpack_require__("./src/utils/measureText.ts");function useMultiInputAutoSize(inputValue){const inputRef=(0,react.useRef)(null),initialInputWidth=(0,react.useRef)(0),[inputWidth,setInputWidth]=(0,react.useState)("");return(0,react.useLayoutEffect)((()=>{if(inputRef.current&&null==inputValue&&0===initialInputWidth.current&&(initialInputWidth.current=inputRef?.current.getBoundingClientRect().width),!inputRef.current||null==inputValue)return void setInputWidth("");const fontSize=window.getComputedStyle(inputRef.current).fontSize,textWidth=(0,measureText.kD)(inputRef.current.value||"",parseInt(fontSize,10)).width;textWidth<initialInputWidth.current?setInputWidth(""):setInputWidth(`${textWidth+5}px`)}),[inputValue]),{inputRef:inputRef,inputWidth:inputWidth}}try{useMultiInputAutoSize.displayName="useMultiInputAutoSize",useMultiInputAutoSize.__docgenInfo={description:"",displayName:"useMultiInputAutoSize",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Combobox/useMultiInputAutoSize.tsx#useMultiInputAutoSize"]={docgenInfo:useMultiInputAutoSize.__docgenInfo,name:"useMultiInputAutoSize",path:"src/components/Combobox/useMultiInputAutoSize.tsx#useMultiInputAutoSize"})}catch(__react_docgen_typescript_loader_error){}var useOptions=__webpack_require__("./src/components/Combobox/useOptions.ts");const MultiCombobox=props=>{const{placeholder:placeholder,onChange:onChange,value:value,width:width,enableAllOption:enableAllOption,invalid:invalid,disabled:disabled,minWidth:minWidth,maxWidth:maxWidth,isClearable:isClearable,createCustomValue:createCustomValue=!1}=props,styles=(0,ThemeContext.of)(getComboboxStyles.C3),[inputValue,setInputValue]=(0,react.useState)(""),allOptionItem=(0,react.useMemo)((()=>({label:""===inputValue?(0,i18n.t)("multicombobox.all.title","All"):(0,i18n.t)("multicombobox.all.title-filtered","All (filtered)"),value:types.A})),[inputValue]),{options:baseOptions,updateOptions:updateOptions,asyncLoading:asyncLoading,asyncError:asyncError}=(0,useOptions.I)(props.options,createCustomValue),options=(0,react.useMemo)((()=>enableAllOption&&baseOptions.length>1?[allOptionItem,...baseOptions]:baseOptions),[baseOptions,enableAllOption,allOptionItem]),loading=props.loading||asyncLoading,selectedItems=(0,react.useMemo)((()=>value?function getSelectedItemsFromValue(value,options){if(function isComboboxOptions(value){return"object"==typeof value[0]}(value))return value;const valueMap=new Map(value.map(((val,index)=>[val,index]))),resultingItems=[];for(const option of options){const index=valueMap.get(option.value);if(void 0!==index&&(resultingItems[index]=option,valueMap.delete(option.value)),0===valueMap.size)break}for(const[val,index]of valueMap)resultingItems[index]={value:val};return resultingItems}(value,"function"!=typeof props.options?props.options:baseOptions):[]),[value,props.options,baseOptions]),{measureRef:measureRef,counterMeasureRef:counterMeasureRef,suffixMeasureRef:suffixMeasureRef,shownItems:shownItems}=function useMeasureMulti(selectedItems,width,disabled){const[shownItems,setShownItems]=(0,react.useState)(selectedItems.length),[measureRef,{width:containerWidth}]=(0,useMeasure.A)(),[counterMeasureRef,{width:counterWidth}]=(0,useMeasure.A)(),[suffixMeasureRef,{width:suffixWidth}]=(0,useMeasure.A)(),finalWidth=width&&"auto"!==width?width:containerWidth;return(0,react.useEffect)((()=>{const maxWidth=finalWidth-counterWidth-suffixWidth;let currWidth=0;for(let i=0;i<selectedItems.length;i++){if(currWidth+=(0,measureText.kD)(selectedItems[i].label||"",12).width+(disabled?10:50),currWidth>maxWidth){setShownItems(Math.min(i,15)||1);break}i===selectedItems.length-1&&setShownItems(selectedItems.length)}}),[finalWidth,counterWidth,suffixWidth,selectedItems,setShownItems,disabled]),{measureRef:measureRef,counterMeasureRef:counterMeasureRef,suffixMeasureRef:suffixMeasureRef,shownItems:shownItems}}(selectedItems,width,disabled),isOptionSelected=(0,react.useCallback)((item=>selectedItems.some((opt=>opt.value===item.value))),[selectedItems]),{getSelectedItemProps:getSelectedItemProps,getDropdownProps:getDropdownProps,setSelectedItems:setSelectedItems,addSelectedItem:addSelectedItem,removeSelectedItem:removeSelectedItem,reset:reset}=(0,downshift_esm.mH)({selectedItems:selectedItems,onStateChange:({type:type,selectedItems:newSelectedItems})=>{switch(type){case downshift_esm.mH.stateChangeTypes.SelectedItemKeyDownBackspace:case downshift_esm.mH.stateChangeTypes.SelectedItemKeyDownDelete:case downshift_esm.mH.stateChangeTypes.DropdownKeyDownBackspace:case downshift_esm.mH.stateChangeTypes.FunctionRemoveSelectedItem:case downshift_esm.mH.stateChangeTypes.FunctionAddSelectedItem:case downshift_esm.mH.stateChangeTypes.FunctionSetSelectedItems:case downshift_esm.mH.stateChangeTypes.FunctionReset:onChange(newSelectedItems??[])}},stateReducer:(state,actionAndChanges)=>{const{changes:changes}=actionAndChanges;return{...changes,activeIndex:-999}}}),{getToggleButtonProps:getToggleButtonProps,isOpen:isOpen,highlightedIndex:highlightedIndex,getMenuProps:getMenuProps,getInputProps:getInputProps,getItemProps:getItemProps}=(0,downshift_esm.Bp)({items:options,itemToString:filter.y,inputValue:inputValue,selectedItem:null,stateReducer:(state,actionAndChanges)=>{const{type:type}=actionAndChanges;let{changes:changes}=actionAndChanges;switch(!1===state.isOpen&&!0===changes.isOpen&&changes.inputValue===state.inputValue&&(changes={...changes,inputValue:""}),type){case downshift_esm.Bp.stateChangeTypes.InputKeyDownEnter:case downshift_esm.Bp.stateChangeTypes.ItemClick:return{...changes,isOpen:!0,highlightedIndex:state.highlightedIndex};case downshift_esm.Bp.stateChangeTypes.InputBlur:setInputValue("");default:return changes}},onIsOpenChange:({isOpen:isOpen,inputValue:inputValue})=>{isOpen&&""===inputValue&&updateOptions(inputValue)},onStateChange:({inputValue:newInputValue,type:type,selectedItem:newSelectedItem})=>{switch(type){case downshift_esm.Bp.stateChangeTypes.InputKeyDownEnter:case downshift_esm.Bp.stateChangeTypes.ItemClick:if(newSelectedItem?.value===types.A){const isAllFilteredSelected=selectedItems.length===options.length-1,realOptions=options.slice(1);let newSelectedItems=isAllFilteredSelected&&""===inputValue?[]:realOptions;if(isAllFilteredSelected||""===inputValue||(newSelectedItems=[...new Set([...selectedItems,...realOptions])]),isAllFilteredSelected&&""!==inputValue){const filteredSet=new Set(realOptions.map((item=>item.value)));newSelectedItems=selectedItems.filter((item=>!filteredSet.has(item.value)))}setSelectedItems(newSelectedItems)}else newSelectedItem&&isOptionSelected(newSelectedItem)?removeSelectedItem(newSelectedItem):newSelectedItem&&addSelectedItem(newSelectedItem);break;case downshift_esm.Bp.stateChangeTypes.InputChange:setInputValue(newInputValue??""),updateOptions(newInputValue??"")}}}),{inputRef:containerRef,floatingRef:floatingRef,floatStyles:floatStyles,scrollRef:scrollRef}=(0,useComboboxFloat.l)(options,isOpen),multiStyles=(0,ThemeContext.of)(getMultiComboboxStyles,isOpen,invalid,disabled,width,minWidth,maxWidth,isClearable),visibleItems=isOpen?selectedItems.slice(0,15):selectedItems.slice(0,shownItems),{inputRef:inputRef,inputWidth:inputWidth}=useMultiInputAutoSize(inputValue);return(0,jsx_runtime.jsxs)("div",{className:multiStyles.container,ref:containerRef,children:[(0,jsx_runtime.jsx)("div",{className:(0,emotion_css_esm.cx)(multiStyles.wrapper,{[multiStyles.disabled]:disabled}),ref:measureRef,children:(0,jsx_runtime.jsxs)("span",{className:multiStyles.pillWrapper,children:[visibleItems.map(((item,index)=>(0,jsx_runtime.jsx)(ValuePill,{disabled:disabled,onRemove:()=>{removeSelectedItem(item)},...getSelectedItemProps({selectedItem:item,index:index}),children:(0,filter.y)(item)},`${item.value}${index}`))),selectedItems.length>visibleItems.length&&(0,jsx_runtime.jsxs)(Box.a,{display:"flex",direction:"row",marginLeft:.5,gap:1,ref:counterMeasureRef,children:[(0,jsx_runtime.jsx)(Text.E,{children:"..."}),(0,jsx_runtime.jsx)(Tooltip.m,{interactive:!0,content:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:selectedItems.slice(visibleItems.length).map((item=>(0,jsx_runtime.jsx)("div",{children:(0,filter.y)(item)},item.value)))}),children:(0,jsx_runtime.jsx)("div",{className:multiStyles.restNumber,children:selectedItems.length-shownItems})})]}),(0,jsx_runtime.jsx)("input",{className:multiStyles.input,...getInputProps(getDropdownProps({disabled:disabled,preventKeyAction:isOpen,placeholder:0===visibleItems.length?placeholder:"",ref:inputRef,style:{width:inputWidth}}))}),(0,jsx_runtime.jsxs)("div",{className:multiStyles.suffix,ref:suffixMeasureRef,...getToggleButtonProps(),children:[isClearable&&selectedItems.length>0&&(0,jsx_runtime.jsx)(Icon.I,{name:"times",className:styles.clear,title:(0,i18n.t)("multicombobox.clear.title","Clear all"),tabIndex:0,role:"button",onClick:e=>{e.stopPropagation(),reset()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||reset()}}),(0,jsx_runtime.jsx)(SuffixIcon.f,{isLoading:loading||!1,isOpen:isOpen})]})]})}),(0,jsx_runtime.jsx)(Portal.ZL,{children:(0,jsx_runtime.jsx)("div",{className:(0,emotion_css_esm.cx)(styles.menu,!isOpen&&styles.menuClosed),style:{...floatStyles,width:floatStyles.width+24},...getMenuProps({ref:floatingRef}),children:isOpen&&(0,jsx_runtime.jsx)(ComboboxList.e,{options:options,highlightedIndex:highlightedIndex,selectedItems:selectedItems,scrollRef:scrollRef,getItemProps:getItemProps,enableAllOption:enableAllOption,isMultiSelect:!0,error:asyncError})})})]})};try{MultiCombobox.displayName="MultiCombobox",MultiCombobox.__docgenInfo={description:"",displayName:"MultiCombobox",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"ComboboxOption<T>[] | T[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(option: ComboboxOption<T>[]) => void"}},isClearable:{defaultValue:null,description:"",name:"isClearable",required:!1,type:{name:"boolean"}},enableAllOption:{defaultValue:null,description:"",name:"enableAllOption",required:!1,type:{name:"boolean"}},options:{defaultValue:null,description:"An array of options, or a function that returns a promise resolving to an array of options.\nIf a function, it will be called when the menu is opened and on keypress with the current search query.",name:"options",required:!0,type:{name:"ComboboxOption<T>[] | ((inputValue: string) => Promise<ComboboxOption<T>[]>)"}},width:{defaultValue:null,description:"Defaults to full width of container. Number is a multiple of the spacing unit. 'auto' will size the input to the content.",name:"width",required:!1,type:{name:'number | "auto"'}},onBlur:{defaultValue:null,description:"Called when the input loses focus.",name:"onBlur",required:!1,type:{name:"(() => void)"}},invalid:{defaultValue:null,description:"Show an invalid state around the input",name:"invalid",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"Show a loading indicator as a suffix in the input",name:"loading",required:!1,type:{name:"boolean"}},createCustomValue:{defaultValue:null,description:"Allows the user to set a value which is not in the list of options.",name:"createCustomValue",required:!1,type:{name:"boolean"}},minWidth:{defaultValue:null,description:"Needs to be set when width is 'auto' to prevent the input from shrinking too much",name:"minWidth",required:!1,type:{name:"number"}},maxWidth:{defaultValue:null,description:"Recommended to set when width is 'auto' to prevent the input from growing too much.",name:"maxWidth",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Combobox/MultiCombobox.tsx#MultiCombobox"]={docgenInfo:MultiCombobox.__docgenInfo,name:"MultiCombobox",path:"src/components/Combobox/MultiCombobox.tsx#MultiCombobox"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),blocks_dist=__webpack_require__("../../node_modules/@storybook/addon-docs/node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,lib.R)(),...props.components};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(blocks_dist.W8,{title:"MDX|MultiCombobox",component:MultiCombobox}),"\n",(0,jsx_runtime.jsx)(_components.h1,{id:"multicombobox",children:"MultiCombobox"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"The behavior of the MultiCombobox is similar to that of the Combobox, but it allows you to select multiple options. For all non-multi behaviors, see the Combobox documentation."}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"all-functionality",children:'"All" functionality'}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["Use the prop ",(0,jsx_runtime.jsx)(_components.code,{children:"enableAllOption"}),' to show the "All" option.']}),"\n",(0,jsx_runtime.jsxs)(_components.ul,{children:["\n",(0,jsx_runtime.jsxs)(_components.li,{children:['If no filtering is applied, selecting "All" will select all options, returning the same array as the ',(0,jsx_runtime.jsx)(_components.code,{children:"options"})," prop."]}),"\n",(0,jsx_runtime.jsx)(_components.li,{children:'With filtering, selecting "All" will choose the filtered subset of options.'}),"\n"]}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"props",children:"Props"}),"\n",(0,jsx_runtime.jsx)(blocks_dist.ov,{of:MultiCombobox})]})}var storyUtils=__webpack_require__("./src/components/Combobox/storyUtils.ts");const meta={title:"Inputs/MultiCombobox",component:MultiCombobox,parameters:{docs:{page:function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,lib.R)(),...props.components};return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,{...props,children:(0,jsx_runtime.jsx)(_createMdxContent,{...props})}):_createMdxContent(props)}}}},loadOptionsAction=(0,dist.XI)("options called"),onChangeAction=(0,dist.XI)("onChange called"),commonArgs={options:[{label:"Australia",value:"option1"},{label:"Austria",value:"option2"},{label:"Fiji",value:"option3"},{label:"Iceland",value:"option4"},{label:"Ireland",value:"option5"},{label:"Finland",value:"option6"},{label:"The Netherlands",value:"option7"},{label:"Switzerland",value:"option8"},{label:"United Kingdom of Great Britain and Northern Ireland ",value:"option9"}],value:["option2"],placeholder:"Select multiple options..."};var MultiCombobox_story=meta;const Basic={args:commonArgs,render:args=>{const[{value:value},setArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)();return(0,jsx_runtime.jsx)(MultiCombobox,{...args,value:value,onChange:val=>{onChangeAction(val),setArgs({value:val})}})}},AutoSize={args:{...commonArgs,width:"auto",minWidth:20},render:args=>{const[{value:value},setArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)();return(0,jsx_runtime.jsx)(MultiCombobox,{...args,value:value,onChange:val=>{(0,dist.XI)("onChange")(val),setArgs({value:val})}})}},ManyOptions={args:{numberOfOptions:1e4,options:void 0,value:void 0},render:({numberOfOptions:numberOfOptions=1e4,...args})=>{const[dynamicArgs,setArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)(),[options,setOptions]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useState)([]);(0,external_STORYBOOK_MODULE_PREVIEW_API_.useEffect)((()=>{setTimeout((async()=>{const options=await(0,storyUtils.QN)(numberOfOptions);setOptions(options)}),1e3)}),[numberOfOptions]);const{onChange:onChange,...rest}=args;return(0,jsx_runtime.jsx)(MultiCombobox,{...rest,...dynamicArgs,options:options,onChange:opts=>{setArgs({value:opts}),onChangeAction(opts)}})}},ManyOptionsGrouped={args:{numberOfOptions:1e4,options:void 0,value:void 0},render:({numberOfOptions:numberOfOptions=1e5,...args})=>{const[dynamicArgs,setArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)(),[options,setOptions]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useState)([]);(0,external_STORYBOOK_MODULE_PREVIEW_API_.useEffect)((()=>{setTimeout((async()=>{const options=await(0,storyUtils.fK)(numberOfOptions);setOptions(options)}),1e3)}),[numberOfOptions]);const{onChange:onChange,...rest}=args;return(0,jsx_runtime.jsx)(MultiCombobox,{...rest,...dynamicArgs,options:options,onChange:opts=>{setArgs({value:opts}),onChangeAction(opts)}})}};const AsyncOptionsWithLabels={name:"Async - options returns labels",args:{options:function loadOptionsWithLabels(inputValue){return loadOptionsAction(inputValue),(0,storyUtils.kL)(`http://example.com/search?errorOnQuery=break&query=${inputValue}`)},value:[{label:"Option 69",value:"69"}],placeholder:"Select an option"},render:args=>{const[dynamicArgs,setArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)();return(0,jsx_runtime.jsx)(Field.D,{label:'Async options fn returns objects like { label: "Option 69", value: "69" }',description:"Search for 'break' to see an error",children:(0,jsx_runtime.jsx)(MultiCombobox,{...args,...dynamicArgs,onChange:val=>{onChangeAction(val),setArgs({value:val})}})})}};const AsyncOptionsWithOnlyValues={name:"Async - options returns only values",args:{options:function loadOptionsOnlyValues(inputValue){return loadOptionsAction(inputValue),(0,storyUtils.kL)(`http://example.com/search?errorOnQuery=break&query=${inputValue}`).then((options=>options.map((opt=>({value:opt.label})))))},value:[{value:"Option 69"}],placeholder:"Select an option"},render:args=>{const[dynamicArgs,setArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)();return(0,jsx_runtime.jsx)(Field.D,{label:'Async options fn returns objects like { value: "69" }',description:"Search for 'break' to see an error",children:(0,jsx_runtime.jsx)(MultiCombobox,{...args,...dynamicArgs,onChange:val=>{onChangeAction(val),setArgs({value:val})}})})}};Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"{\n  args: commonArgs,\n  render: args => {\n    const [{\n      value\n    }, setArgs] = useArgs();\n    return <MultiCombobox {...args} value={value} onChange={val => {\n      onChangeAction(val);\n      setArgs({\n        value: val\n      });\n    }} />;\n  }\n}",...Basic.parameters?.docs?.source}}},AutoSize.parameters={...AutoSize.parameters,docs:{...AutoSize.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...commonArgs,\n    width: 'auto',\n    minWidth: 20\n  },\n  render: args => {\n    const [{\n      value\n    }, setArgs] = useArgs();\n    return <MultiCombobox {...args} value={value} onChange={val => {\n      action('onChange')(val);\n      setArgs({\n        value: val\n      });\n    }} />;\n  }\n}",...AutoSize.parameters?.docs?.source}}},ManyOptions.parameters={...ManyOptions.parameters,docs:{...ManyOptions.parameters?.docs,source:{originalSource:"{\n  args: {\n    numberOfOptions: 1e4,\n    options: undefined,\n    value: undefined\n  },\n  render: ManyOptionsStory\n}",...ManyOptions.parameters?.docs?.source}}},ManyOptionsGrouped.parameters={...ManyOptionsGrouped.parameters,docs:{...ManyOptionsGrouped.parameters?.docs,source:{originalSource:"{\n  args: {\n    numberOfOptions: 1e4,\n    options: undefined,\n    value: undefined\n  },\n  render: ManyOptionsGroupedStory\n}",...ManyOptionsGrouped.parameters?.docs?.source}}},AsyncOptionsWithLabels.parameters={...AsyncOptionsWithLabels.parameters,docs:{...AsyncOptionsWithLabels.parameters?.docs,source:{originalSource:"{\n  name: 'Async - options returns labels',\n  args: {\n    options: loadOptionsWithLabels,\n    value: [{\n      label: 'Option 69',\n      value: '69'\n    }],\n    placeholder: 'Select an option'\n  },\n  render: args => {\n    const [dynamicArgs, setArgs] = useArgs();\n    return <Field label='Async options fn returns objects like { label: \"Option 69\", value: \"69\" }' description=\"Search for 'break' to see an error\">\n        <MultiCombobox {...args} {...dynamicArgs} onChange={val => {\n        onChangeAction(val);\n        setArgs({\n          value: val\n        });\n      }} />\n      </Field>;\n  }\n}",...AsyncOptionsWithLabels.parameters?.docs?.source}}},AsyncOptionsWithOnlyValues.parameters={...AsyncOptionsWithOnlyValues.parameters,docs:{...AsyncOptionsWithOnlyValues.parameters?.docs,source:{originalSource:"{\n  name: 'Async - options returns only values',\n  args: {\n    options: loadOptionsOnlyValues,\n    value: [{\n      value: 'Option 69'\n    }],\n    placeholder: 'Select an option'\n  },\n  render: args => {\n    const [dynamicArgs, setArgs] = useArgs();\n    return <Field label='Async options fn returns objects like { value: \"69\" }' description=\"Search for 'break' to see an error\">\n        <MultiCombobox {...args} {...dynamicArgs} onChange={val => {\n        onChangeAction(val);\n        setArgs({\n          value: val\n        });\n      }} />\n      </Field>;\n  }\n}",...AsyncOptionsWithOnlyValues.parameters?.docs?.source}}}}}]);