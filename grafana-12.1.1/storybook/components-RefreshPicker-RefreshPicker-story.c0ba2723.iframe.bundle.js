"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[6875],{"../grafana-i18n/src/i18n.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{x6:function(){return Trans},t:function(){return t}});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),i18next=__webpack_require__("../../node_modules/i18next/dist/esm/i18next.js"),es=(__webpack_require__("../../node_modules/i18next-browser-languagedetector/dist/esm/i18nextBrowserLanguageDetector.js"),__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"));const constants_DEFAULT_LANGUAGE="en-US";let tFunc,transComponent;const VALID_LANGUAGES=[...[{code:"en-US",name:"English"},{code:"fr-FR",name:"Français"},{code:"es-ES",name:"Español"},{code:"de-DE",name:"Deutsch"},{code:"zh-Hans",name:"中文（简体）"},{code:"pt-BR",name:"Português Brasileiro"},{code:"zh-Hant",name:"中文（繁體）"},{code:"it-IT",name:"Italiano"},{code:"ja-JP",name:"日本語"},{code:"id-ID",name:"Bahasa Indonesia"},{code:"ko-KR",name:"한국어"},{code:"ru-RU",name:"Русский"},{code:"cs-CZ",name:"Čeština"},{code:"nl-NL",name:"Nederlands"},{code:"hu-HU",name:"Magyar"},{code:"pt-PT",name:"Português"},{code:"pl-PL",name:"Polski"},{code:"sv-SE",name:"Svenska"},{code:"tr-TR",name:"Türkçe"}],{name:"Pseudo",code:"pseudo"}];function initTFuncAndTransComponent({id:id,ns:ns}={}){if(id)return tFunc=getI18nInstance().getFixedT(null,id),void(transComponent=props=>(0,jsx_runtime.jsx)(es.x6,{shouldUnescape:!0,ns:id,...props}));tFunc=getI18nInstance().t,transComponent=props=>(0,jsx_runtime.jsx)(es.x6,{shouldUnescape:!0,ns:ns,...props})}function initDefaultI18nInstance(){if(getI18nInstance().options?.resources&&"object"==typeof getI18nInstance().options.resources)return;const initPromise=getI18nInstance().use(es.r9).init({resources:{},returnEmptyString:!1,lng:constants_DEFAULT_LANGUAGE});return initTFuncAndTransComponent(),initPromise}function getI18nInstance(){return i18next.Ay}async function changeLanguage(language){const validLanguage=VALID_LANGUAGES.find((lang=>lang.code===language))?.code??DEFAULT_LANGUAGE;await getI18nInstance().changeLanguage(validLanguage)}const t=(id,defaultMessage,values)=>(initDefaultI18nInstance(),tFunc||(console.warn("t() was called before i18n was initialized. This is probably caused by calling t() in the root module scope, instead of lazily on render"),tFunc=getI18nInstance().t),tFunc(id,defaultMessage,values));function Trans(props){initDefaultI18nInstance();const Component=transComponent??es.x6;return(0,jsx_runtime.jsx)(Component,{shouldUnescape:!0,...props})}try{changeLanguage.displayName="changeLanguage",changeLanguage.__docgenInfo={description:"",displayName:"changeLanguage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../grafana-i18n/src/i18n.tsx#changeLanguage"]={docgenInfo:changeLanguage.__docgenInfo,name:"changeLanguage",path:"../grafana-i18n/src/i18n.tsx#changeLanguage"})}catch(__react_docgen_typescript_loader_error){}try{Trans.displayName="Trans",Trans.__docgenInfo={description:"",displayName:"Trans",props:{i18nKey:{defaultValue:null,description:"The translation key to look up",name:"i18nKey",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"Child elements or values to interpolate",name:"children",required:!1,type:{name:"TransChild | readonly TransChild[]"}},components:{defaultValue:null,description:"React elements to use for interpolation",name:"components",required:!1,type:{name:"readonly ReactElement<any, string | JSXElementConstructor<any>>[] | { readonly [tagName: string]: ReactElement<any, string | JSXElementConstructor<any>>; }"}},count:{defaultValue:null,description:"Count value for pluralization",name:"count",required:!1,type:{name:"number"}},defaults:{defaultValue:null,description:"Default text if translation is not found",name:"defaults",required:!1,type:{name:"string"}},ns:{defaultValue:null,description:"Namespace for the translation key",name:"ns",required:!1,type:{name:"string"}},shouldUnescape:{defaultValue:null,description:"Whether to unescape HTML entities",name:"shouldUnescape",required:!1,type:{name:"boolean"}},values:{defaultValue:null,description:"Values to interpolate into the translation",name:"values",required:!1,type:{name:"Record<string, unknown>"}},className:{defaultValue:null,description:"Class name for the Trans component",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../grafana-i18n/src/i18n.tsx#Trans"]={docgenInfo:Trans.__docgenInfo,name:"Trans",path:"../grafana-i18n/src/i18n.tsx#Trans"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Button/ButtonGroup.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{e:function(){return ButtonGroup}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_emotion_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/themes/ThemeContext.tsx");const ButtonGroup=(0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((({className:className,children:children,...rest},ref)=>{const styles=(0,_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__.of)(getStyles);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:ref,className:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)("button-group",styles.wrapper,className),...rest,children:children})}));ButtonGroup.displayName="ButtonGroup";const getStyles=theme=>({wrapper:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({display:"flex",borderRadius:theme.shape.radius.default,"> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset",borderLeft:"1px solid rgba(255, 255, 255, 0.12)"},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:"unset",borderBottomRightRadius:"unset",borderRight:"1px solid rgba(0, 0, 0, 0.12)"}})});try{ButtonGroup.displayName="ButtonGroup",ButtonGroup.__docgenInfo={description:"",displayName:"ButtonGroup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Button/ButtonGroup.tsx#ButtonGroup"]={docgenInfo:ButtonGroup.__docgenInfo,name:"ButtonGroup",path:"src/components/Button/ButtonGroup.tsx#ButtonGroup"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Dropdown/ButtonSelect.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{f:function(){return ButtonSelect}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_emotion_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),_floating_ui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs"),_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@floating-ui/react/dist/floating-ui.react.mjs"),_floating_ui_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs"),_react_aria_focus__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/@react-aria/focus/dist/FocusScope.mjs"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/themes/ThemeContext.tsx"),_Menu_Menu__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Menu/Menu.tsx"),_Menu_MenuItem__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/Menu/MenuItem.tsx"),_ToolbarButton_ToolbarButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/ToolbarButton/ToolbarButton.tsx");const ButtonSelectComponent=props=>{const{className:className,options:options,value:value,onChange:onChange,narrow:narrow,variant:variant,...restProps}=props,styles=(0,_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__.of)(getStyles),[isOpen,setIsOpen]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),middleware=[(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_4__.cY)(0),(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_4__.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_4__.BN)()],{context:context,refs:refs,floatingStyles:floatingStyles}=(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.we)({open:isOpen,placement:"bottom-end",onOpenChange:setIsOpen,middleware:middleware,whileElementsMounted:_floating_ui_react__WEBPACK_IMPORTED_MODULE_6__.ll}),click=(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.kp)(context),dismiss=(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.s9)(context),{getReferenceProps:getReferenceProps,getFloatingProps:getFloatingProps}=(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.bv)([dismiss,click]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:styles.wrapper,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolbarButton_ToolbarButton__WEBPACK_IMPORTED_MODULE_7__.I,{className:className,isOpen:isOpen,narrow:narrow,variant:variant,ref:refs.setReference,...getReferenceProps(),...restProps,children:value?.label||(null!=value?.value?String(value?.value):null)}),isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:styles.menuWrapper,ref:refs.setFloating,...getFloatingProps(),style:floatingStyles,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_aria_focus__WEBPACK_IMPORTED_MODULE_8__.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Menu_Menu__WEBPACK_IMPORTED_MODULE_9__.W,{tabIndex:-1,onClose:()=>setIsOpen(!1),children:options.map((item=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Menu_MenuItem__WEBPACK_IMPORTED_MODULE_10__.D,{label:item.label??String(item.value),onClick:()=>(item=>{onChange(item),setIsOpen(!1)})(item),active:item.value===value?.value,ariaChecked:item.value===value?.value,ariaLabel:item.ariaLabel||item.label,disabled:item.isDisabled,component:item.component,role:"menuitemradio"},`${item.value}`)))})})})]})};ButtonSelectComponent.displayName="ButtonSelect";const ButtonSelect=(0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(ButtonSelectComponent),getStyles=theme=>({wrapper:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({position:"relative",display:"inline-flex"}),menuWrapper:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({zIndex:theme.zIndex.dropdown})});try{ButtonSelect.displayName="ButtonSelect",ButtonSelect.__docgenInfo={description:"",displayName:"ButtonSelect",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectableValue<T>[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"SelectableValue<T>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(item: SelectableValue<T>) => void"}},tooltipContent:{defaultValue:null,description:"@deprecated use tooltip instead, tooltipContent is not being processed in ToolbarButton",name:"tooltipContent",required:!1,type:{name:"PopoverContent"}},narrow:{defaultValue:null,description:"",name:"narrow",required:!1,type:{name:"boolean"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"destructive"'},{value:'"canvas"'},{value:'"default"'},{value:'"active"'}]}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Dropdown/ButtonSelect.tsx#ButtonSelect"]={docgenInfo:ButtonSelect.__docgenInfo,name:"ButtonSelect",path:"src/components/Dropdown/ButtonSelect.tsx#ButtonSelect"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ToolbarButton/ToolbarButton.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{I:function(){return ToolbarButton}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_emotion_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_grafana_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../grafana-data/src/types/icon.ts"),_grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../grafana-e2e-selectors/src/selectors/index.ts"),_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/themes/ThemeContext.tsx"),_themes_mixins__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/themes/mixins.ts"),_Button_Button__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/Button/Button.tsx"),_Icon_Icon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Icon/Icon.tsx"),_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Tooltip/Tooltip.tsx");const ToolbarButton=(0,react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((({tooltip:tooltip,icon:icon,iconSize:iconSize,className:className,children:children,imgSrc:imgSrc,imgAlt:imgAlt,fullWidth:fullWidth,isOpen:isOpen,narrow:narrow,variant:variant="default",iconOnly:iconOnly,"aria-label":ariaLabel,isHighlighted:isHighlighted,...rest},ref)=>{const styles=(0,_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__.of)(getStyles),buttonStyles=(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)({[styles.button]:!0,[styles.buttonFullWidth]:fullWidth,[styles.narrow]:narrow},styles[variant],className),contentStyles=(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)({[styles.content]:!0,[styles.contentWithIcon]:!!icon,[styles.contentWithRightIcon]:void 0!==isOpen}),body=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{ref:ref,className:buttonStyles,"aria-label":getButtonAriaLabel(ariaLabel,tooltip),"aria-expanded":isOpen,type:"button",...rest,children:[renderIcon(icon,iconSize),imgSrc&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{className:styles.img,src:imgSrc,alt:imgAlt??""}),children&&!iconOnly&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:contentStyles,children:children}),!1===isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Icon_Icon__WEBPACK_IMPORTED_MODULE_4__.I,{name:"angle-down"}),!0===isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Icon_Icon__WEBPACK_IMPORTED_MODULE_4__.I,{name:"angle-up"}),isHighlighted&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:styles.highlight})]});return tooltip?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_5__.m,{ref:ref,content:tooltip,placement:"bottom",children:body}):body}));function getButtonAriaLabel(ariaLabel,tooltip){return ariaLabel||(tooltip?_grafana_e2e_selectors__WEBPACK_IMPORTED_MODULE_6__.Tp.components.PageToolbar.item(tooltip):void 0)}function renderIcon(icon,iconSize){return icon?(0,_grafana_data__WEBPACK_IMPORTED_MODULE_7__.n6)(icon)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Icon_Icon__WEBPACK_IMPORTED_MODULE_4__.I,{name:icon,size:`${iconSize||"lg"}`}):icon:null}ToolbarButton.displayName="ToolbarButton";const getStyles=theme=>{const primaryVariant=(0,_Button_Button__WEBPACK_IMPORTED_MODULE_8__.U_)(theme,"primary","solid"),destructiveVariant=(0,_Button_Button__WEBPACK_IMPORTED_MODULE_8__.U_)(theme,"destructive","solid"),defaultOld=(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({color:theme.colors.text.primary,background:theme.colors.secondary.main,"&:hover":{color:theme.colors.text.primary,background:theme.colors.secondary.shade,border:`1px solid ${theme.colors.border.medium}`}});return{button:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:theme.spacing(theme.components.height.md),padding:theme.spacing(0,1),borderRadius:theme.shape.radius.default,lineHeight:theme.components.height.md*theme.spacing.gridSize-2+"px",fontWeight:theme.typography.fontWeightMedium,border:`1px solid ${theme.colors.secondary.border}`,whiteSpace:"nowrap",[theme.transitions.handleMotion("no-preference","reduce")]:{transition:theme.transitions.create(["background","box-shadow","border-color","color"],{duration:theme.transitions.duration.short})},[theme.breakpoints.down("md")]:{width:"auto !important"},"&:focus, &:focus-visible":{...(0,_themes_mixins__WEBPACK_IMPORTED_MODULE_9__.Hi)(theme),zIndex:1},"&:focus:not(:focus-visible)":(0,_themes_mixins__WEBPACK_IMPORTED_MODULE_9__.cr)(theme),"&[disabled], &:disabled":{cursor:"not-allowed",opacity:theme.colors.action.disabledOpacity,background:theme.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:theme.colors.text.disabled,background:theme.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({color:theme.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:theme.colors.text.primary,background:theme.colors.action.hover}}),canvas:defaultOld,active:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)(defaultOld,(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:theme.shape.radius.default,backgroundImage:theme.colors.gradients.brandHorizontal}})),primary:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)(primaryVariant),destructive:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)(destructiveVariant),narrow:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({padding:theme.spacing(0,.5)}),img:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({width:"16px",height:"16px",marginRight:theme.spacing(1)}),buttonFullWidth:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({flexGrow:1}),content:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({display:"flex",flexGrow:1}),contentWithIcon:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({display:"none",paddingLeft:theme.spacing(1),[`@media ${(0,_themes_mixins__WEBPACK_IMPORTED_MODULE_9__.uT)(theme.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({paddingRight:theme.spacing(.5)}),highlight:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({backgroundColor:theme.colors.success.main,borderRadius:theme.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}};try{ToolbarButton.displayName="ToolbarButton",ToolbarButton.__docgenInfo={description:"",displayName:"ToolbarButton",props:{icon:{defaultValue:null,description:"Icon name",name:"icon",required:!1,type:{name:"ReactNode"}},iconSize:{defaultValue:null,description:"Icon size",name:"iconSize",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"xxl"'},{value:'"xxxl"'}]}},tooltip:{defaultValue:null,description:"Tooltip",name:"tooltip",required:!1,type:{name:"string"}},imgSrc:{defaultValue:null,description:"For image icons",name:"imgSrc",required:!1,type:{name:"string"}},imgAlt:{defaultValue:null,description:"Alt text for imgSrc",name:"imgAlt",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"if true or false will show angle-down/up",name:"isOpen",required:!1,type:{name:"boolean"}},fullWidth:{defaultValue:null,description:"Controls flex-grow: 1",name:"fullWidth",required:!1,type:{name:"boolean"}},narrow:{defaultValue:null,description:"reduces padding to xs",name:"narrow",required:!1,type:{name:"boolean"}},variant:{defaultValue:{value:"default"},description:"variant",name:"variant",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"destructive"'},{value:'"canvas"'},{value:'"default"'},{value:'"active"'}]}},iconOnly:{defaultValue:null,description:"Hide any children and only show icon",name:"iconOnly",required:!1,type:{name:"boolean"}},isHighlighted:{defaultValue:null,description:"Show highlight dot",name:"isHighlighted",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ToolbarButton/ToolbarButton.tsx#ToolbarButton"]={docgenInfo:ToolbarButton.__docgenInfo,name:"ToolbarButton",path:"src/components/ToolbarButton/ToolbarButton.tsx#ToolbarButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/RefreshPicker/RefreshPicker.story.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Examples:function(){return Examples},default:function(){return RefreshPicker_story}});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),dist=__webpack_require__("../../node_modules/@storybook/addon-actions/dist/index.mjs"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),emotion_css_esm=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),formatDuration=__webpack_require__("../../node_modules/date-fns/formatDuration.js"),react=__webpack_require__("../../node_modules/react/index.js");const durationMap={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};var selectors=__webpack_require__("../grafana-e2e-selectors/src/selectors/index.ts"),i18n=__webpack_require__("../grafana-i18n/src/i18n.tsx"),ButtonGroup=__webpack_require__("./src/components/Button/ButtonGroup.tsx"),ButtonSelect=__webpack_require__("./src/components/Dropdown/ButtonSelect.tsx"),ToolbarButton=__webpack_require__("./src/components/ToolbarButton/ToolbarButton.tsx");const defaultIntervals=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class RefreshPicker extends react.PureComponent{static offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"};static liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"};static autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"};static isLive=refreshInterval=>refreshInterval===RefreshPicker.liveOption.value;constructor(props){super(props)}onChangeSelect=item=>{const{onIntervalChanged:onIntervalChanged}=this.props;onIntervalChanged&&null!=item.value&&onIntervalChanged(item.value)};getVariant(){return this.props.isLive||this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:onRefresh,intervals:intervals,tooltip:tooltip,value:value,text:text,isLoading:isLoading,noIntervalPicker:noIntervalPicker,width:width,showAutoInterval:showAutoInterval}=this.props,currentValue=value||"",variant=this.getVariant(),options=intervalsToOptions({intervals:intervals,showAutoInterval:showAutoInterval}),option=options.find((({value:value})=>value===currentValue)),translatedOffOption=translateOption(RefreshPicker.offOption.value);let selectedValue=option||translatedOffOption;selectedValue.label===translatedOffOption.label&&(selectedValue={value:""});const durationAriaLabel=selectedValue.ariaLabel,ariaLabelDurationSelectedMessage=(0,i18n.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:durationAriaLabel}),ariaLabelChooseIntervalMessage=(0,i18n.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),ariaLabel=""===selectedValue.value?ariaLabelChooseIntervalMessage:ariaLabelDurationSelectedMessage,tooltipIntervalSelected=(0,i18n.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),tooltipAutoRefreshOff=(0,i18n.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),tooltipAutoRefresh=""===selectedValue.value?tooltipAutoRefreshOff:tooltipIntervalSelected;return(0,jsx_runtime.jsxs)(ButtonGroup.e,{className:"refresh-picker",children:[(0,jsx_runtime.jsx)(ToolbarButton.I,{"aria-label":text,tooltip:tooltip,onClick:onRefresh,variant:variant,icon:isLoading?"spinner":"sync",style:width?{width:width}:void 0,"data-testid":selectors.Tp.components.RefreshPicker.runButtonV2,children:text}),!noIntervalPicker&&(0,jsx_runtime.jsx)(ButtonSelect.f,{className:(0,emotion_css_esm.AH)({borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset"}),value:selectedValue,options:options,onChange:this.onChangeSelect,variant:variant,"data-testid":selectors.Tp.components.RefreshPicker.intervalButtonV2,"aria-label":ariaLabel,tooltip:tooltipAutoRefresh})]})}}function translateOption(option){switch(option){case RefreshPicker.liveOption.value:return{label:(0,i18n.t)("refresh-picker.live-option.label","Live"),value:option,ariaLabel:(0,i18n.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case RefreshPicker.offOption.value:return{label:(0,i18n.t)("refresh-picker.off-option.label","Off"),value:option,ariaLabel:(0,i18n.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case RefreshPicker.autoOption.value:return{label:(0,i18n.t)("refresh-picker.auto-option.label",RefreshPicker.autoOption.label),value:option,ariaLabel:(0,i18n.t)("refresh-picker.auto-option.aria-label",RefreshPicker.autoOption.ariaLabel)}}return{label:option,value:option}}function intervalsToOptions({intervals:intervals=defaultIntervals,showAutoInterval:showAutoInterval=!1}={}){const options=intervals.map((interval=>{const duration=function parseDuration(durationString){return durationString.split(" ").reduce(((acc,value)=>{const match=value.match(/(\d+)(.+)/),rawLength=match?.[1],unit=match?.[2];if(!rawLength||!unit)return acc;const mapping=Object.entries(durationMap).find((([_,abbreviations])=>abbreviations?.includes(match[2]))),length=parseInt(rawLength,10);return mapping?{...acc,[mapping[0]]:length}:acc}),{})}(interval);return{label:interval,value:interval,ariaLabel:(0,formatDuration.a)(duration)}}));return showAutoInterval&&options.unshift(translateOption(RefreshPicker.autoOption.value)),options.unshift(translateOption(RefreshPicker.offOption.value)),options}try{translateOption.displayName="translateOption",translateOption.__docgenInfo={description:"",displayName:"translateOption",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RefreshPicker/RefreshPicker.tsx#translateOption"]={docgenInfo:translateOption.__docgenInfo,name:"translateOption",path:"src/components/RefreshPicker/RefreshPicker.tsx#translateOption"})}catch(__react_docgen_typescript_loader_error){}try{intervalsToOptions.displayName="intervalsToOptions",intervalsToOptions.__docgenInfo={description:"",displayName:"intervalsToOptions",props:{intervals:{defaultValue:{value:"['5s', '10s', '30s', '1m', '5m', '15m', '30m', '1h', '2h', '1d']"},description:"",name:"intervals",required:!1,type:{name:"string[]"}},showAutoInterval:{defaultValue:{value:"false"},description:"",name:"showAutoInterval",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RefreshPicker/RefreshPicker.tsx#intervalsToOptions"]={docgenInfo:intervalsToOptions.__docgenInfo,name:"intervalsToOptions",path:"src/components/RefreshPicker/RefreshPicker.tsx#intervalsToOptions"})}catch(__react_docgen_typescript_loader_error){}try{RefreshPicker.displayName="RefreshPicker",RefreshPicker.__docgenInfo={description:"",displayName:"RefreshPicker",props:{intervals:{defaultValue:null,description:"",name:"intervals",required:!1,type:{name:"string[]"}},onRefresh:{defaultValue:null,description:"",name:"onRefresh",required:!1,type:{name:"(() => void)"}},onIntervalChanged:{defaultValue:null,description:"",name:"onIntervalChanged",required:!0,type:{name:"(interval: string) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},isLive:{defaultValue:null,description:"",name:"isLive",required:!1,type:{name:"boolean"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},noIntervalPicker:{defaultValue:null,description:"",name:"noIntervalPicker",required:!1,type:{name:"boolean"}},showAutoInterval:{defaultValue:null,description:"",name:"showAutoInterval",required:!1,type:{name:"boolean"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},primary:{defaultValue:null,description:"",name:"primary",required:!1,type:{name:"boolean"}},isOnCanvas:{defaultValue:null,description:"",name:"isOnCanvas",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RefreshPicker/RefreshPicker.tsx#RefreshPicker"]={docgenInfo:RefreshPicker.__docgenInfo,name:"RefreshPicker",path:"src/components/RefreshPicker/RefreshPicker.tsx#RefreshPicker"})}catch(__react_docgen_typescript_loader_error){}try{isLive.displayName="RefreshPicker.isLive",isLive.__docgenInfo={description:"",displayName:"RefreshPicker.isLive",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RefreshPicker/RefreshPicker.tsx#RefreshPicker.isLive"]={docgenInfo:RefreshPicker.isLive.__docgenInfo,name:"RefreshPicker.isLive",path:"src/components/RefreshPicker/RefreshPicker.tsx#RefreshPicker.isLive"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__("../../node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),blocks_dist=__webpack_require__("../../node_modules/@storybook/addon-docs/node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components={h1:"h1",p:"p",strong:"strong",...(0,lib.R)(),...props.components};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(blocks_dist.W8,{title:"MDX|RefreshPicker",component:RefreshPicker}),"\n",(0,jsx_runtime.jsx)(_components.h1,{id:"refresh-picker",children:"Refresh Picker"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"This component is used on dashboards to refresh visualizations. Grafana does not do this automatically, queries run on their own schedule according to the panel settings. Grafana cancels any pending requests when a new refresh is triggered."}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)(_components.strong,{children:"The refresh icon:"})," will immediately run the query and refresh the visualizations."]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)(_components.strong,{children:"The down arrow:"})," will display a list of refresh intervals. If one of them is selected the dashboard will regularly refresh according to that schedule."]}),"\n",(0,jsx_runtime.jsx)(blocks_dist.Hl,{of:Examples}),"\n",(0,jsx_runtime.jsx)(blocks_dist.ov,{of:RefreshPicker})]})}const Examples=args=>{const[,updateArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)();return(0,jsx_runtime.jsx)(RefreshPicker,{tooltip:args.tooltip,value:args.value,text:args.text,isLoading:args.isLoading,intervals:args.intervals,width:args.width,onIntervalChanged:interval=>{(0,dist.XI)("onIntervalChanged fired")(interval),updateArgs({value:interval})},onRefresh:()=>{(0,dist.XI)("onRefresh fired")()},noIntervalPicker:args.noIntervalPicker,primary:args.primary})};var RefreshPicker_story={title:"Pickers/RefreshPicker",component:RefreshPicker,parameters:{docs:{page:function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,lib.R)(),...props.components};return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,{...props,children:(0,jsx_runtime.jsx)(_createMdxContent,{...props})}):_createMdxContent(props)}},controls:{sort:"alpha"}},args:{isLoading:!1,isLive:!1,width:"auto",text:"Run query",tooltip:"My tooltip text goes here",value:"1h",primary:!1,noIntervalPicker:!1,intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]}};Examples.parameters={...Examples.parameters,docs:{...Examples.parameters?.docs,source:{originalSource:"args => {\n  const [, updateArgs] = useArgs();\n  const onIntervalChanged = (interval: string) => {\n    action('onIntervalChanged fired')(interval);\n    updateArgs({\n      value: interval\n    });\n  };\n  const onRefresh = () => {\n    action('onRefresh fired')();\n  };\n  return <RefreshPicker tooltip={args.tooltip} value={args.value} text={args.text} isLoading={args.isLoading} intervals={args.intervals} width={args.width} onIntervalChanged={onIntervalChanged} onRefresh={onRefresh} noIntervalPicker={args.noIntervalPicker} primary={args.primary} />;\n}",...Examples.parameters?.docs?.source}}}}}]);