"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[251],{"../grafana-data/src/events/common.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{ql:function(){return DataHoverClearEvent},b_:function(){return DataHoverEvent}});class types_BusEventBase{type;payload;origin;tags;constructor(){this.type=this.__proto__.constructor.type}setTags(tags){return this.tags=new Set(tags),this}}class types_BusEventWithPayload extends types_BusEventBase{payload;constructor(payload){super(),this.payload=payload}}class DataHoverEvent extends types_BusEventWithPayload{static type="data-hover"}class DataHoverClearEvent extends types_BusEventBase{static type="data-hover-clear"}},"../grafana-data/src/field/fieldColor.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Hs:function(){return getFieldColorMode},Qi:function(){return getFieldColorModeForField},uf:function(){return fieldColorModeRegistry}});var d3_interpolate__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/d3-interpolate/src/rgb.js"),string_hash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/string-hash/index.js"),string_hash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(string_hash__WEBPACK_IMPORTED_MODULE_0__),tinycolor2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/tinycolor2/esm/tinycolor.js"),_themes_colorManipulator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../grafana-data/src/themes/colorManipulator.ts"),_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../grafana-data/src/types/fieldColor.ts"),_utils_Registry__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../grafana-data/src/utils/Registry.ts"),_thresholds__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../grafana-data/src/field/thresholds.ts");const fieldColorModeRegistry=new _utils_Registry__WEBPACK_IMPORTED_MODULE_2__.O((()=>[{id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.Fixed,name:"Single color",description:"Set a specific color",getCalculator:getFixedColor},{id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:getShadedColor},{id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(_field,theme)=>(_value,_percent,threshold)=>{const thresholdSafe=threshold??_thresholds__WEBPACK_IMPORTED_MODULE_4__.QS;return theme.visualization.getColorByName(thresholdSafe.color)}},new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:theme=>theme.visualization.palette}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:theme=>theme.visualization.palette.filter((color=>(0,_themes_colorManipulator__WEBPACK_IMPORTED_MODULE_5__.eM)(theme.visualization.getColorByName(color),theme.colors.background.primary)>=theme.colors.contrastThreshold))}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:theme=>["green","yellow","red"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:theme=>["red","yellow","green"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:theme=>["dark-blue","super-light-yellow","dark-red"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:theme=>["super-light-yellow","dark-red"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:theme=>["blue","purple"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:theme=>["super-light-yellow","dark-blue"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:theme=>["panel-bg","dark-blue"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:theme=>["panel-bg","dark-red"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:theme=>["panel-bg","dark-green"]}),new FieldColorSchemeMode({id:_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:theme=>["panel-bg","dark-purple"]})]));class FieldColorSchemeMode{id;name;description;isContinuous;isByValue;useSeriesName;colorCache;colorCacheTheme;interpolator;getNamedColors;constructor(options){this.id=options.id,this.name=options.name,this.description=options.description,this.getNamedColors=options.getColors,this.isContinuous=options.isContinuous,this.isByValue=options.isByValue,this.useSeriesName=options.useSeriesName}getColors(theme){return this.getNamedColors?(this.colorCache&&this.colorCacheTheme===theme||(this.colorCache=this.getNamedColors(theme).map(theme.visualization.getColorByName),this.colorCacheTheme=theme),this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,d3_interpolate__WEBPACK_IMPORTED_MODULE_6__.Ik)(this.colorCache)),this.interpolator}getCalculator(field,theme){const colors=this.getColors(theme);return this.isByValue?this.isContinuous?(_,percent,_threshold)=>this.getInterpolator()(percent):(_,percent,_threshold)=>colors[percent*(colors.length-1)]:this.useSeriesName?(_,_percent,_threshold)=>colors[Math.abs(string_hash__WEBPACK_IMPORTED_MODULE_0___default()(field.state?.displayName??field.name))%colors.length]:(_,_percent,_threshold)=>{const seriesIndex=field.state?.seriesIndex??0;return colors[seriesIndex%colors.length]}}}function getFieldColorModeForField(field){return fieldColorModeRegistry.get(field.config.color?.mode??_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.Thresholds)}function getFieldColorMode(mode){return fieldColorModeRegistry.get(mode??_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.Y.Thresholds)}function getFixedColor(field,theme){return()=>theme.visualization.getColorByName(field.config.color?.fixedColor??_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.F)}function getShadedColor(field,theme){return()=>{const baseColorString=theme.visualization.getColorByName(field.config.color?.fixedColor??_types_fieldColor__WEBPACK_IMPORTED_MODULE_3__.F),colors=[baseColorString];for(let i=1;i<6;i++)colors.push((0,tinycolor2__WEBPACK_IMPORTED_MODULE_1__.A)(baseColorString).spin(i/6*10).brighten(i/6*35).toHexString()),colors.push((0,tinycolor2__WEBPACK_IMPORTED_MODULE_1__.A)(baseColorString).spin(-i/6*10).darken(i/6*35).toHexString());return colors[(field.state?.seriesIndex??0)%colors.length]}}},"../grafana-data/src/field/thresholds.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{QS:function(){return fallBackThreshold},k5:function(){return getActiveThresholdForValue}});var _types_fieldColor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../grafana-data/src/types/fieldColor.ts"),_types_thresholds__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../grafana-data/src/types/thresholds.ts");const fallBackThreshold={value:0,color:_types_fieldColor__WEBPACK_IMPORTED_MODULE_0__.F};function getActiveThreshold(value,thresholds){if(!thresholds||0===thresholds.length)return fallBackThreshold;let active=thresholds[0];for(const threshold of thresholds){if(!(value>=threshold.value))break;active=threshold}return active}function getActiveThresholdForValue(field,value,percent){const{thresholds:thresholds}=field.config;return thresholds?.mode===_types_thresholds__WEBPACK_IMPORTED_MODULE_1__.O.Percentage?getActiveThreshold(100*percent,thresholds?.steps):getActiveThreshold(value,thresholds?.steps)}},"../grafana-data/src/types/thresholds.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{O:function(){return ThresholdsMode}});var ThresholdsMode=function(ThresholdsMode){return ThresholdsMode.Absolute="absolute",ThresholdsMode.Percentage="percentage",ThresholdsMode}({})},"./src/components/List/AbstractList.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{p:function(){return AbstractList}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_emotion_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js");const getStyles=(0,__webpack_require__("./src/themes/stylesFactory.ts").N)(((inlineList=!1)=>({list:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({listStyleType:"none",margin:0,padding:0}),item:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({display:inlineList?"inline-block":"block"})})));class AbstractList extends react__WEBPACK_IMPORTED_MODULE_2__.PureComponent{constructor(props){super(props)}render(){const{items:items,renderItem:renderItem,getItemKey:getItemKey,className:className,inline:inline}=this.props,styles=getStyles(inline);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{className:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)(styles.list,className),children:items.map(((item,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{className:styles.item,children:renderItem(item,i)},getItemKey?getItemKey(item):i)))})}}try{AbstractList.displayName="AbstractList",AbstractList.__docgenInfo={description:"",displayName:"AbstractList",props:{inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},renderItem:{defaultValue:null,description:"",name:"renderItem",required:!0,type:{name:"(item: T, index: number) => Element"}},getItemKey:{defaultValue:null,description:"",name:"getItemKey",required:!1,type:{name:"((item: T) => string)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/List/AbstractList.tsx#AbstractList"]={docgenInfo:AbstractList.__docgenInfo,name:"AbstractList",path:"src/components/List/AbstractList.tsx#AbstractList"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/List/InlineList.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{c:function(){return InlineList}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_AbstractList__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/List/AbstractList.tsx");class InlineList extends react__WEBPACK_IMPORTED_MODULE_1__.PureComponent{render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_AbstractList__WEBPACK_IMPORTED_MODULE_2__.p,{inline:!0,...this.props})}}try{InlineList.displayName="InlineList",InlineList.__docgenInfo={description:"",displayName:"InlineList",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},renderItem:{defaultValue:null,description:"",name:"renderItem",required:!0,type:{name:"(item: T, index: number) => Element"}},getItemKey:{defaultValue:null,description:"",name:"getItemKey",required:!1,type:{name:"((item: T) => string)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/List/InlineList.tsx#InlineList"]={docgenInfo:InlineList.__docgenInfo,name:"InlineList",path:"src/components/List/InlineList.tsx#InlineList"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/List/List.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{B:function(){return List}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_AbstractList__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/List/AbstractList.tsx");class List extends react__WEBPACK_IMPORTED_MODULE_1__.PureComponent{render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_AbstractList__WEBPACK_IMPORTED_MODULE_2__.p,{...this.props})}}try{List.displayName="List",List.__docgenInfo={description:"",displayName:"List",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},renderItem:{defaultValue:null,description:"",name:"renderItem",required:!0,type:{name:"(item: T, index: number) => Element"}},getItemKey:{defaultValue:null,description:"",name:"getItemKey",required:!1,type:{name:"((item: T) => string)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/List/List.tsx#List"]={docgenInfo:List.__docgenInfo,name:"List",path:"src/components/List/List.tsx#List"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/PanelChrome/PanelContext.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{d2:function(){return usePanelContext}});var react=__webpack_require__("../../node_modules/react/index.js"),eventemitter3=__webpack_require__("../../node_modules/eventemitter3/index.mjs"),Observable=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/Observable.js"),filter=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");class ScopedEventBus{path;eventBus;filterConfig;constructor(path,eventBus,filter){this.path=path,this.eventBus=eventBus,this.filterConfig=filter??{onlyLocal:!1}}publish(event){event.origin||(event.origin=this),this.eventBus.publish(event)}filter(event){return!this.filterConfig.onlyLocal||event.origin===this}getStream(eventType){return this.eventBus.getStream(eventType).pipe((0,filter.p)(this.filter.bind(this)))}subscribe(typeFilter,handler){return this.getStream(typeFilter).subscribe({next:handler})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(key,filter){return new ScopedEventBus([...this.path,key],this,filter)}}const PanelContextRoot=(0,react.createContext)({eventsScope:"global",eventBus:new class EventBusSrv{emitter;subscribers=new Map;constructor(){this.emitter=new eventemitter3.A}publish(event){this.emitter.emit(event.type,event)}subscribe(typeFilter,handler){return this.getStream(typeFilter).subscribe({next:handler})}getStream(eventType){return new Observable.c((observer=>{const handler=event=>{observer.next(event)};return this.emitter.on(eventType.type,handler),this.subscribers.set(handler,observer),()=>{this.emitter.off(eventType.type,handler),this.subscribers.delete(handler)}}))}newScopedBus(key,filter){return new ScopedEventBus([key],this,filter)}emit(event,payload){"string"==typeof event?this.emitter.emit(event,{type:event,payload:payload}):this.emitter.emit(event.name,{type:event.name,payload:payload})}on(event,handler){handler.wrapper=emittedEvent=>{handler(emittedEvent.payload)},"string"==typeof event?this.emitter.on(event,handler.wrapper):this.emitter.on(event.name,handler.wrapper)}off(event,handler){"string"!=typeof event?this.emitter.off(event.name,handler.wrapper):this.emitter.off(event,handler.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[key,sub]of this.subscribers)sub.complete(),this.subscribers.delete(key)}}}),usePanelContext=(PanelContextRoot.Provider,()=>(0,react.useContext)(PanelContextRoot))},"./src/components/VizLegend/SeriesIcon.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{p:function(){return SeriesIcon}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_emotion_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_grafana_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../grafana-data/src/field/fieldColor.ts"),_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/themes/ThemeContext.tsx");const SeriesIcon=react__WEBPACK_IMPORTED_MODULE_2__.memo(react__WEBPACK_IMPORTED_MODULE_2__.forwardRef((({color:color,className:className,gradient:gradient,lineStyle:lineStyle,...restProps},ref)=>{const theme=(0,_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__.$j)(),styles=(0,_themes_ThemeContext__WEBPACK_IMPORTED_MODULE_3__.of)(getStyles);let cssColor,customStyle;if(gradient){const colors=_grafana_data__WEBPACK_IMPORTED_MODULE_4__.uf.get(gradient).getColors?.(theme);cssColor=colors?.length?`linear-gradient(90deg, ${colors.join(", ")})`:theme.visualization.getColorByName("")}else cssColor=color;return customStyle="dot"!==lineStyle?.fill||gradient?"dash"!==lineStyle?.fill||gradient?{background:cssColor,borderRadius:theme.shape.radius.pill}:{backgroundImage:`linear-gradient(to right, ${color} 100%, transparent 0%)`,backgroundSize:"6px 4px",backgroundRepeat:"space"}:{backgroundImage:`radial-gradient(circle at 2px 2px, ${color} 2px, transparent 0)`,backgroundSize:"4px 4px",backgroundRepeat:"space"},(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{"data-testid":"series-icon",ref:ref,className:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.cx)(className,styles.forcedColors,styles.container),style:customStyle,...restProps})}))),getStyles=theme=>({container:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({marginRight:"8px",display:"inline-block",width:"14px",height:"4px"}),forcedColors:(0,_emotion_css__WEBPACK_IMPORTED_MODULE_1__.AH)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});SeriesIcon.displayName="SeriesIcon";try{SeriesIcon.displayName="SeriesIcon",SeriesIcon.__docgenInfo={description:"",displayName:"SeriesIcon",props:{color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},gradient:{defaultValue:null,description:"",name:"gradient",required:!1,type:{name:"string"}},lineStyle:{defaultValue:null,description:"",name:"lineStyle",required:!1,type:{name:"LineStyle"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VizLegend/SeriesIcon.tsx#SeriesIcon"]={docgenInfo:SeriesIcon.__docgenInfo,name:"SeriesIcon",path:"src/components/VizLegend/SeriesIcon.tsx#SeriesIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/VizLegend/VizLegend.story.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WithNoValues:function(){return WithNoValues},WithValues:function(){return WithValues},default:function(){return VizLegend_story}});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/react/index.js"),common_gen=__webpack_require__("../grafana-schema/src/common/common.gen.ts"),ThemeContext=__webpack_require__("./src/themes/ThemeContext.tsx"),common=__webpack_require__("../grafana-data/src/events/common.ts"),PanelContext=__webpack_require__("./src/components/PanelChrome/PanelContext.ts"),SeriesVisibilityChangeMode=function(SeriesVisibilityChangeMode){return SeriesVisibilityChangeMode.ToggleSelection="select",SeriesVisibilityChangeMode.AppendToSelection="append",SeriesVisibilityChangeMode}({}),emotion_css_esm=__webpack_require__("../../node_modules/@emotion/css/dist/emotion-css.esm.js"),InlineList=__webpack_require__("./src/components/List/InlineList.tsx"),List=__webpack_require__("./src/components/List/List.tsx"),selectors=__webpack_require__("../grafana-e2e-selectors/src/selectors/index.ts"),ColorPicker=__webpack_require__("./src/components/ColorPicker/ColorPicker.tsx"),SeriesIcon=__webpack_require__("./src/components/VizLegend/SeriesIcon.tsx");const VizLegendSeriesIcon=(0,react.memo)((({seriesName:seriesName,color:color,gradient:gradient,readonly:readonly,lineStyle:lineStyle})=>{const{onSeriesColorChange:onSeriesColorChange}=(0,PanelContext.d2)(),onChange=(0,react.useCallback)((color=>onSeriesColorChange(seriesName,color)),[seriesName,onSeriesColorChange]);return seriesName&&onSeriesColorChange&&color&&!readonly?(0,jsx_runtime.jsx)(ColorPicker.Dp,{color:color,onChange:onChange,enableNamedColors:!0,children:({ref:ref,showColorPicker:showColorPicker,hideColorPicker:hideColorPicker})=>(0,jsx_runtime.jsx)(SeriesIcon.p,{color:color,className:"pointer",ref:ref,onClick:showColorPicker,onMouseLeave:hideColorPicker,lineStyle:lineStyle})}):(0,jsx_runtime.jsx)(SeriesIcon.p,{color:color,gradient:gradient,lineStyle:lineStyle})}));VizLegendSeriesIcon.displayName="VizLegendSeriesIcon";try{VizLegendSeriesIcon.displayName="VizLegendSeriesIcon",VizLegendSeriesIcon.__docgenInfo={description:"",displayName:"VizLegendSeriesIcon",props:{seriesName:{defaultValue:null,description:"",name:"seriesName",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},gradient:{defaultValue:null,description:"",name:"gradient",required:!1,type:{name:"string"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},lineStyle:{defaultValue:null,description:"",name:"lineStyle",required:!1,type:{name:"LineStyle"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VizLegend/VizLegendSeriesIcon.tsx#VizLegendSeriesIcon"]={docgenInfo:VizLegendSeriesIcon.__docgenInfo,name:"VizLegendSeriesIcon",path:"src/components/VizLegend/VizLegendSeriesIcon.tsx#VizLegendSeriesIcon"})}catch(__react_docgen_typescript_loader_error){}var lodash=__webpack_require__("../../node_modules/lodash/lodash.js"),valueFormats=__webpack_require__("../grafana-data/src/valueFormats/valueFormats.ts");const VizLegendStatsList=({stats:stats})=>{const styles=(0,ThemeContext.of)(getStyles);return 0===stats.length?null:(0,jsx_runtime.jsx)(InlineList.c,{className:styles.list,items:stats,renderItem:stat=>(0,jsx_runtime.jsxs)("div",{className:styles.item,title:stat.description,children:[stat.title&&`${(0,lodash.capitalize)(stat.title)}:`," ",(0,valueFormats.cN)(stat)]})})},getStyles=()=>({list:(0,emotion_css_esm.AH)({flexGrow:1,textAlign:"right"}),item:(0,emotion_css_esm.AH)({marginLeft:"8px"})});VizLegendStatsList.displayName="VizLegendStatsList";try{VizLegendStatsList.displayName="VizLegendStatsList",VizLegendStatsList.__docgenInfo={description:"",displayName:"VizLegendStatsList",props:{stats:{defaultValue:null,description:"",name:"stats",required:!0,type:{name:"DisplayValue[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VizLegend/VizLegendStatsList.tsx#VizLegendStatsList"]={docgenInfo:VizLegendStatsList.__docgenInfo,name:"VizLegendStatsList",path:"src/components/VizLegend/VizLegendStatsList.tsx#VizLegendStatsList"})}catch(__react_docgen_typescript_loader_error){}const VizLegendListItem=({item:item,onLabelClick:onLabelClick,onLabelMouseOver:onLabelMouseOver,onLabelMouseOut:onLabelMouseOut,className:className,readonly:readonly})=>{const styles=(0,ThemeContext.of)(VizLegendListItem_getStyles),onMouseOver=(0,react.useCallback)((event=>{onLabelMouseOver&&onLabelMouseOver(item,event)}),[item,onLabelMouseOver]),onMouseOut=(0,react.useCallback)((event=>{onLabelMouseOut&&onLabelMouseOut(item,event)}),[item,onLabelMouseOut]),onClick=(0,react.useCallback)((event=>{onLabelClick&&onLabelClick(item,event)}),[item,onLabelClick]);return(0,jsx_runtime.jsxs)("div",{className:(0,emotion_css_esm.cx)(styles.itemWrapper,item.disabled&&styles.itemDisabled,className),"data-testid":selectors.Tp.components.VizLegend.seriesName(item.label),children:[(0,jsx_runtime.jsx)(VizLegendSeriesIcon,{seriesName:item.fieldName??item.label,color:item.color,gradient:item.gradient,readonly:readonly,lineStyle:item.lineStyle}),(0,jsx_runtime.jsx)("button",{disabled:readonly,type:"button",onBlur:onMouseOut,onFocus:onMouseOver,onMouseOver:onMouseOver,onMouseOut:onMouseOut,onClick:onClick,className:styles.label,children:item.label}),item.getDisplayValues&&(0,jsx_runtime.jsx)(VizLegendStatsList,{stats:item.getDisplayValues()})]})};VizLegendListItem.displayName="VizLegendListItem";const VizLegendListItem_getStyles=theme=>({label:(0,emotion_css_esm.AH)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,emotion_css_esm.AH)({label:"LegendLabelDisabled",color:theme.colors.text.disabled}),itemWrapper:(0,emotion_css_esm.AH)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,emotion_css_esm.AH)({textAlign:"right"}),yAxisLabel:(0,emotion_css_esm.AH)({color:theme.v1.palette.gray2})});try{VizLegendListItem.displayName="VizLegendListItem",VizLegendListItem.__docgenInfo={description:"",displayName:"VizLegendListItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"VizLegendItem<T>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onLabelClick:{defaultValue:null,description:"",name:"onLabelClick",required:!1,type:{name:"((item: VizLegendItem<T>, event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onLabelMouseOver:{defaultValue:null,description:"",name:"onLabelMouseOver",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},onLabelMouseOut:{defaultValue:null,description:"",name:"onLabelMouseOut",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VizLegend/VizLegendListItem.tsx#VizLegendListItem"]={docgenInfo:VizLegendListItem.__docgenInfo,name:"VizLegendListItem",path:"src/components/VizLegend/VizLegendListItem.tsx#VizLegendListItem"})}catch(__react_docgen_typescript_loader_error){}const VizLegendList=({items:items,itemRenderer:itemRenderer,onLabelMouseOver:onLabelMouseOver,onLabelMouseOut:onLabelMouseOut,onLabelClick:onLabelClick,placement:placement,className:className,readonly:readonly})=>{const styles=(0,ThemeContext.of)(VizLegendList_getStyles);itemRenderer||(itemRenderer=item=>(0,jsx_runtime.jsx)(VizLegendListItem,{item:item,onLabelClick:onLabelClick,onLabelMouseOver:onLabelMouseOver,onLabelMouseOut:onLabelMouseOut,readonly:readonly}));const getItemKey=item=>`${item.getItemKey?item.getItemKey():item.label}`;if("right"===placement){const renderItem=(item,index)=>(0,jsx_runtime.jsx)("span",{className:styles.itemRight,children:itemRenderer(item,index)});return(0,jsx_runtime.jsx)("div",{className:(0,emotion_css_esm.cx)(styles.rightWrapper,className),children:(0,jsx_runtime.jsx)(List.B,{items:items,renderItem:renderItem,getItemKey:getItemKey})})}{const leftItems=items.filter((item=>1===item.yAxis)),rightItems=items.filter((item=>1!==item.yAxis)),renderItem=(item,index)=>(0,jsx_runtime.jsx)("span",{className:styles.itemBottom,children:itemRenderer(item,index)});return(0,jsx_runtime.jsxs)("div",{className:(0,emotion_css_esm.cx)(styles.bottomWrapper,className),children:[leftItems.length>0&&(0,jsx_runtime.jsx)("div",{className:styles.section,children:(0,jsx_runtime.jsx)(InlineList.c,{items:leftItems,renderItem:renderItem,getItemKey:getItemKey})}),rightItems.length>0&&(0,jsx_runtime.jsx)("div",{className:(0,emotion_css_esm.cx)(styles.section,styles.sectionRight),children:(0,jsx_runtime.jsx)(InlineList.c,{items:rightItems,renderItem:renderItem,getItemKey:getItemKey})})]})}};VizLegendList.displayName="VizLegendList";const VizLegendList_getStyles=theme=>{const itemStyles=(0,emotion_css_esm.AH)({paddingRight:"10px",display:"flex",fontSize:theme.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:itemStyles,itemRight:(0,emotion_css_esm.cx)(itemStyles,(0,emotion_css_esm.AH)({marginBottom:theme.spacing(.5)})),rightWrapper:(0,emotion_css_esm.AH)({padding:theme.spacing(.5)}),bottomWrapper:(0,emotion_css_esm.AH)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",padding:theme.spacing(.5),gap:"15px 25px"}),section:(0,emotion_css_esm.AH)({display:"flex"}),sectionRight:(0,emotion_css_esm.AH)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};try{VizLegendList.displayName="VizLegendList",VizLegendList.__docgenInfo={description:"",displayName:"VizLegendList",props:{placement:{defaultValue:null,description:"",name:"placement",required:!0,type:{name:"enum",value:[{value:'"bottom"'},{value:'"right"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"VizLegendItem<T>[]"}},thresholdItems:{defaultValue:null,description:"",name:"thresholdItems",required:!1,type:{name:"VizLegendItem<T>[]"}},mappingItems:{defaultValue:null,description:"",name:"mappingItems",required:!1,type:{name:"VizLegendItem<T>[]"}},seriesVisibilityChangeBehavior:{defaultValue:null,description:"",name:"seriesVisibilityChangeBehavior",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},onLabelClick:{defaultValue:null,description:"",name:"onLabelClick",required:!1,type:{name:"((item: VizLegendItem<T>, event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},itemRenderer:{defaultValue:null,description:"",name:"itemRenderer",required:!1,type:{name:"((item: VizLegendItem<T>, index: number) => Element)"}},onLabelMouseOver:{defaultValue:null,description:"",name:"onLabelMouseOver",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},onLabelMouseOut:{defaultValue:null,description:"",name:"onLabelMouseOut",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VizLegend/VizLegendList.tsx#VizLegendList"]={docgenInfo:VizLegendList.__docgenInfo,name:"VizLegendList",path:"src/components/VizLegend/VizLegendList.tsx#VizLegendList"})}catch(__react_docgen_typescript_loader_error){}var Icon=__webpack_require__("./src/components/Icon/Icon.tsx"),i18n=__webpack_require__("../grafana-i18n/src/i18n.tsx"),mixins=__webpack_require__("./src/themes/mixins.ts");const LegendTableItem=({item:item,onLabelClick:onLabelClick,onLabelMouseOver:onLabelMouseOver,onLabelMouseOut:onLabelMouseOut,className:className,readonly:readonly})=>{const styles=(0,ThemeContext.of)(VizLegendTableItem_getStyles),onMouseOver=(0,react.useCallback)((event=>{onLabelMouseOver&&onLabelMouseOver(item,event)}),[item,onLabelMouseOver]),onMouseOut=(0,react.useCallback)((event=>{onLabelMouseOut&&onLabelMouseOut(item,event)}),[item,onLabelMouseOut]),onClick=(0,react.useCallback)((event=>{onLabelClick&&onLabelClick(item,event)}),[item,onLabelClick]);return(0,jsx_runtime.jsxs)("tr",{className:(0,emotion_css_esm.cx)(styles.row,className),children:[(0,jsx_runtime.jsx)("td",{children:(0,jsx_runtime.jsxs)("span",{className:styles.itemWrapper,children:[(0,jsx_runtime.jsx)(VizLegendSeriesIcon,{color:item.color,seriesName:item.fieldName??item.label,readonly:readonly,lineStyle:item.lineStyle}),(0,jsx_runtime.jsxs)("button",{disabled:readonly,type:"button",title:item.label,onBlur:onMouseOut,onFocus:onMouseOver,onMouseOver:onMouseOver,onMouseOut:onMouseOut,onClick:readonly?void 0:onClick,className:(0,emotion_css_esm.cx)(styles.label,item.disabled&&styles.labelDisabled),children:[item.label," ",2===item.yAxis&&(0,jsx_runtime.jsx)("span",{className:styles.yAxisLabel,children:(0,jsx_runtime.jsx)(i18n.x6,{i18nKey:"grafana-ui.viz-legend.right-axis-indicator",children:"(right y-axis)"})})]})]})}),item.getDisplayValues&&item.getDisplayValues().map(((stat,index)=>(0,jsx_runtime.jsx)("td",{className:styles.value,children:(0,valueFormats.cN)(stat)},`${stat.title}-${index}`)))]})};LegendTableItem.displayName="LegendTableItem";const VizLegendTableItem_getStyles=theme=>{const rowHoverBg=(0,mixins.YT)(theme.colors.background.primary,theme);return{row:(0,emotion_css_esm.AH)({label:"LegendRow",fontSize:theme.v1.typography.size.sm,borderBottom:`1px solid ${theme.colors.border.weak}`,td:{padding:theme.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:rowHoverBg}}),label:(0,emotion_css_esm.AH)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden",userSelect:"text"}),labelDisabled:(0,emotion_css_esm.AH)({label:"LegendLabelDisabled",color:theme.colors.text.disabled}),itemWrapper:(0,emotion_css_esm.AH)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,emotion_css_esm.AH)({textAlign:"right"}),yAxisLabel:(0,emotion_css_esm.AH)({color:theme.colors.text.secondary})}};try{LegendTableItem.displayName="LegendTableItem",LegendTableItem.__docgenInfo={description:"",displayName:"LegendTableItem",props:{key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"Key"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"VizLegendItem<any>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onLabelClick:{defaultValue:null,description:"",name:"onLabelClick",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onLabelMouseOver:{defaultValue:null,description:"",name:"onLabelMouseOver",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},onLabelMouseOut:{defaultValue:null,description:"",name:"onLabelMouseOut",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VizLegend/VizLegendTableItem.tsx#LegendTableItem"]={docgenInfo:LegendTableItem.__docgenInfo,name:"LegendTableItem",path:"src/components/VizLegend/VizLegendTableItem.tsx#LegendTableItem"})}catch(__react_docgen_typescript_loader_error){}const naturalCompare=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare,VizLegendTable=({items:items,sortBy:sortKey,sortDesc:sortDesc,itemRenderer:itemRenderer,className:className,onToggleSort:onToggleSort,onLabelClick:onLabelClick,onLabelMouseOver:onLabelMouseOver,onLabelMouseOut:onLabelMouseOut,readonly:readonly,isSortable:isSortable})=>{const styles=(0,ThemeContext.of)(VizLegendTable_getStyles),header={};isSortable&&(header.Name="");for(const item of items)if(item.getDisplayValues)for(const displayValue of item.getDisplayValues())header[displayValue.title??"?"]=displayValue.description??"";if(null!=sortKey){let itemVals=new Map;items.forEach((item=>{if("Name"!==sortKey&&item.getDisplayValues){const stat=item.getDisplayValues().find((stat=>stat.title===sortKey)),val=null==stat||Number.isNaN(stat.numeric)?-1/0:stat.numeric;itemVals.set(item,val)}}));let sortMult=sortDesc?-1:1;"Name"===sortKey?items.sort(((a,b)=>sortMult*naturalCompare(a.label,b.label))):items.sort(((a,b)=>{const aVal=itemVals.get(a)??0,bVal=itemVals.get(b)??0;return sortMult*(aVal-bVal)}))}return itemRenderer||(itemRenderer=(item,index)=>(0,jsx_runtime.jsx)(LegendTableItem,{item:item,onLabelClick:onLabelClick,onLabelMouseOver:onLabelMouseOver,onLabelMouseOut:onLabelMouseOut,readonly:readonly},`${item.label}-${index}`)),(0,jsx_runtime.jsxs)("table",{className:(0,emotion_css_esm.cx)(styles.table,className),children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[!isSortable&&(0,jsx_runtime.jsx)("th",{}),Object.keys(header).map((columnTitle=>(0,jsx_runtime.jsxs)("th",{title:header[columnTitle],className:(0,emotion_css_esm.cx)(styles.header,onToggleSort&&styles.headerSortable,isSortable&&styles.nameHeader,{[styles.withIcon]:sortKey===columnTitle}),onClick:()=>{onToggleSort&&onToggleSort(columnTitle)},children:[columnTitle,sortKey===columnTitle&&(0,jsx_runtime.jsx)(Icon.I,{size:"xs",name:sortDesc?"angle-down":"angle-up"})]},columnTitle)))]})}),(0,jsx_runtime.jsx)("tbody",{children:items.map(itemRenderer)})]})},VizLegendTable_getStyles=theme=>({table:(0,emotion_css_esm.AH)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${theme.colors.border.weak}`}}),header:(0,emotion_css_esm.AH)({color:theme.colors.primary.text,fontWeight:theme.typography.fontWeightMedium,borderBottom:`1px solid ${theme.colors.border.weak}`,padding:theme.spacing(.25,1,.25,1),fontSize:theme.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,emotion_css_esm.AH)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,emotion_css_esm.AH)({paddingRight:"4px"}),headerSortable:(0,emotion_css_esm.AH)({cursor:"pointer"})});try{VizLegendTable.displayName="VizLegendTable",VizLegendTable.__docgenInfo={description:"",displayName:"VizLegendTable",props:{sortBy:{defaultValue:null,description:"",name:"sortBy",required:!1,type:{name:"string"}},sortDesc:{defaultValue:null,description:"",name:"sortDesc",required:!1,type:{name:"boolean"}},onToggleSort:{defaultValue:null,description:"",name:"onToggleSort",required:!1,type:{name:"((sortBy: string) => void)"}},isSortable:{defaultValue:null,description:"",name:"isSortable",required:!1,type:{name:"boolean"}},placement:{defaultValue:null,description:"",name:"placement",required:!0,type:{name:"enum",value:[{value:'"bottom"'},{value:'"right"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"VizLegendItem<T>[]"}},thresholdItems:{defaultValue:null,description:"",name:"thresholdItems",required:!1,type:{name:"VizLegendItem<T>[]"}},mappingItems:{defaultValue:null,description:"",name:"mappingItems",required:!1,type:{name:"VizLegendItem<T>[]"}},seriesVisibilityChangeBehavior:{defaultValue:null,description:"",name:"seriesVisibilityChangeBehavior",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},onLabelClick:{defaultValue:null,description:"",name:"onLabelClick",required:!1,type:{name:"((item: VizLegendItem<T>, event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},itemRenderer:{defaultValue:null,description:"",name:"itemRenderer",required:!1,type:{name:"((item: VizLegendItem<T>, index: number) => Element)"}},onLabelMouseOver:{defaultValue:null,description:"",name:"onLabelMouseOver",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},onLabelMouseOut:{defaultValue:null,description:"",name:"onLabelMouseOut",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VizLegend/VizLegendTable.tsx#VizLegendTable"]={docgenInfo:VizLegendTable.__docgenInfo,name:"VizLegendTable",path:"src/components/VizLegend/VizLegendTable.tsx#VizLegendTable"})}catch(__react_docgen_typescript_loader_error){}var SeriesVisibilityChangeBehavior=function(SeriesVisibilityChangeBehavior){return SeriesVisibilityChangeBehavior[SeriesVisibilityChangeBehavior.Isolate=0]="Isolate",SeriesVisibilityChangeBehavior[SeriesVisibilityChangeBehavior.Hide=1]="Hide",SeriesVisibilityChangeBehavior}({});function VizLegend({items:items,thresholdItems:thresholdItems,mappingItems:mappingItems,displayMode:displayMode,sortBy:sortKey,seriesVisibilityChangeBehavior:seriesVisibilityChangeBehavior=SeriesVisibilityChangeBehavior.Isolate,sortDesc:sortDesc,onLabelClick:onLabelClick,onToggleSort:onToggleSort,placement:placement,className:className,itemRenderer:itemRenderer,readonly:readonly,isSortable:isSortable}){const{eventBus:eventBus,onToggleSeriesVisibility:onToggleSeriesVisibility,onToggleLegendSort:onToggleLegendSort}=(0,PanelContext.d2)(),onMouseOver=(0,react.useCallback)(((item,event)=>{eventBus?.publish({type:common.b_.type,payload:{raw:event,x:0,y:0,dataId:item.label}})}),[eventBus]),onMouseOut=(0,react.useCallback)(((item,event)=>{eventBus?.publish({type:common.ql.type,payload:{raw:event,x:0,y:0,dataId:item.label}})}),[eventBus]),onLegendLabelClick=(0,react.useCallback)(((item,event)=>{onLabelClick&&onLabelClick(item,event),onToggleSeriesVisibility&&onToggleSeriesVisibility(item.fieldName??item.label,seriesVisibilityChangeBehavior===SeriesVisibilityChangeBehavior.Hide?SeriesVisibilityChangeMode.AppendToSelection:function mapMouseEventToMode(event){return event.ctrlKey||event.metaKey||event.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}(event))}),[onToggleSeriesVisibility,onLabelClick,seriesVisibilityChangeBehavior]),makeVizLegendList=(0,react.useCallback)((items=>(0,jsx_runtime.jsx)(VizLegendList,{className:className,placement:placement,onLabelMouseOver:onMouseOver,onLabelMouseOut:onMouseOut,onLabelClick:onLegendLabelClick,itemRenderer:itemRenderer,readonly:readonly,items:items})),[className,placement,onMouseOver,onMouseOut,onLegendLabelClick,itemRenderer,readonly]);switch(displayMode){case common_gen.lm.Table:return(0,jsx_runtime.jsx)(VizLegendTable,{className:className,items:items,placement:placement,sortBy:sortKey,sortDesc:sortDesc,onLabelClick:onLegendLabelClick,onToggleSort:onToggleSort||onToggleLegendSort,onLabelMouseOver:onMouseOver,onLabelMouseOut:onMouseOut,itemRenderer:itemRenderer,readonly:readonly,isSortable:isSortable});case common_gen.lm.List:const isThresholdsEnabled=thresholdItems&&thresholdItems.length>1,isValueMappingEnabled=mappingItems&&mappingItems.length>0;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isThresholdsEnabled&&(!isValueMappingEnabled||items.length>1)&&makeVizLegendList(items),isThresholdsEnabled&&makeVizLegendList(thresholdItems),isValueMappingEnabled&&makeVizLegendList(mappingItems)]});default:return null}}VizLegend.displayName="VizLegend";try{VizLegend.displayName="VizLegend",VizLegend.__docgenInfo={description:"",displayName:"VizLegend",props:{displayMode:{defaultValue:null,description:"",name:"displayMode",required:!0,type:{name:"enum",value:[{value:'"hidden"'},{value:'"list"'},{value:'"table"'}]}},placement:{defaultValue:null,description:"",name:"placement",required:!0,type:{name:"enum",value:[{value:'"bottom"'},{value:'"right"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"VizLegendItem<T>[]"}},thresholdItems:{defaultValue:null,description:"",name:"thresholdItems",required:!1,type:{name:"VizLegendItem<T>[]"}},mappingItems:{defaultValue:null,description:"",name:"mappingItems",required:!1,type:{name:"VizLegendItem<T>[]"}},seriesVisibilityChangeBehavior:{defaultValue:{value:"SeriesVisibilityChangeBehavior.Isolate"},description:"",name:"seriesVisibilityChangeBehavior",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},onLabelClick:{defaultValue:null,description:"",name:"onLabelClick",required:!1,type:{name:"((item: VizLegendItem<T>, event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},itemRenderer:{defaultValue:null,description:"",name:"itemRenderer",required:!1,type:{name:"((item: VizLegendItem<T>, index: number) => Element)"}},onLabelMouseOver:{defaultValue:null,description:"",name:"onLabelMouseOver",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},onLabelMouseOut:{defaultValue:null,description:"",name:"onLabelMouseOut",required:!1,type:{name:"((item: VizLegendItem<any>, event: MouseEvent<HTMLButtonElement, MouseEvent> | FocusEvent<HTMLButtonElement, Element>) => void)"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},sortBy:{defaultValue:null,description:"",name:"sortBy",required:!1,type:{name:"string"}},sortDesc:{defaultValue:null,description:"",name:"sortDesc",required:!1,type:{name:"boolean"}},onToggleSort:{defaultValue:null,description:"",name:"onToggleSort",required:!1,type:{name:"((sortBy: string) => void)"}},isSortable:{defaultValue:null,description:"",name:"isSortable",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VizLegend/VizLegend.tsx#VizLegend"]={docgenInfo:VizLegend.__docgenInfo,name:"VizLegend",path:"src/components/VizLegend/VizLegend.tsx#VizLegend"})}catch(__react_docgen_typescript_loader_error){}const LegendStoryDemo=({displayMode:displayMode,seriesCount:seriesCount,name:name,placement:placement,stats:stats})=>{const theme=(0,ThemeContext.$j)(),[items,setItems]=(0,react.useState)(generateLegendItems(seriesCount,theme,stats));(0,react.useEffect)((()=>{setItems(generateLegendItems(seriesCount,theme,stats))}),[seriesCount,theme,stats]);return(0,jsx_runtime.jsxs)("p",{style:{marginBottom:"32px"},children:[(0,jsx_runtime.jsx)("h3",{style:{marginBottom:"32px"},children:name}),(0,jsx_runtime.jsx)(VizLegend,{displayMode:displayMode,items:items,placement:placement,onLabelClick:clickItem=>{setItems(items.map((item=>item!==clickItem?{...item,disabled:!0}:{...item,disabled:!1})))}})]})},WithNoValues=({containerWidth:containerWidth,seriesCount:seriesCount})=>(0,jsx_runtime.jsxs)("div",{style:{width:containerWidth},children:[(0,jsx_runtime.jsx)(LegendStoryDemo,{name:"List mode, placement bottom",displayMode:common_gen.lm.List,seriesCount:seriesCount,placement:"bottom"}),(0,jsx_runtime.jsx)(LegendStoryDemo,{name:"List mode, placement right",displayMode:common_gen.lm.List,seriesCount:seriesCount,placement:"right"}),(0,jsx_runtime.jsx)(LegendStoryDemo,{name:"Table mode",displayMode:common_gen.lm.Table,seriesCount:seriesCount,placement:"bottom"})]}),WithValues=({containerWidth:containerWidth,seriesCount:seriesCount})=>{const stats=[{title:"Min",text:"5.00",numeric:5},{title:"Max",text:"10.00",numeric:10},{title:"Last",text:"2.00",numeric:2}];return(0,jsx_runtime.jsxs)("div",{style:{width:containerWidth},children:[(0,jsx_runtime.jsx)(LegendStoryDemo,{name:"List mode, placement bottom",displayMode:common_gen.lm.List,seriesCount:seriesCount,placement:"bottom",stats:stats}),(0,jsx_runtime.jsx)(LegendStoryDemo,{name:"List mode, placement right",displayMode:common_gen.lm.List,seriesCount:seriesCount,placement:"right",stats:stats}),(0,jsx_runtime.jsx)(LegendStoryDemo,{name:"Table mode",displayMode:common_gen.lm.Table,seriesCount:seriesCount,placement:"bottom",stats:stats})]})};function generateLegendItems(numberOfSeries,theme,statsToDisplay){const alphabet="abcdefghijklmnopqrstuvwxyz".split(""),colors=["green","blue","red","purple","orange","dark-green","yellow","light-blue"].map((c=>theme.visualization.getColorByName(c)));return[...new Array(numberOfSeries)].map(((item,i)=>({label:`${alphabet[i].toUpperCase()}-series`,color:colors[i],yAxis:1,displayValues:statsToDisplay||[]})))}var VizLegend_story={title:"Plugins/VizLegend",component:VizLegend,args:{containerWidth:"100%",seriesCount:5},argTypes:{containerWidth:{control:{type:"select",options:["200px","500px","100%"]}},seriesCount:{control:{type:"number",min:1,max:8}}}};WithNoValues.parameters={...WithNoValues.parameters,docs:{...WithNoValues.parameters?.docs,source:{originalSource:'({\n  containerWidth,\n  seriesCount\n}) => {\n  return <div style={{\n    width: containerWidth\n  }}>\n      <LegendStoryDemo name="List mode, placement bottom" displayMode={LegendDisplayMode.List} seriesCount={seriesCount} placement="bottom" />\n      <LegendStoryDemo name="List mode, placement right" displayMode={LegendDisplayMode.List} seriesCount={seriesCount} placement="right" />\n      <LegendStoryDemo name="Table mode" displayMode={LegendDisplayMode.Table} seriesCount={seriesCount} placement="bottom" />\n    </div>;\n}',...WithNoValues.parameters?.docs?.source}}},WithValues.parameters={...WithValues.parameters,docs:{...WithValues.parameters?.docs,source:{originalSource:"({\n  containerWidth,\n  seriesCount\n}) => {\n  const stats: DisplayValue[] = [{\n    title: 'Min',\n    text: '5.00',\n    numeric: 5\n  }, {\n    title: 'Max',\n    text: '10.00',\n    numeric: 10\n  }, {\n    title: 'Last',\n    text: '2.00',\n    numeric: 2\n  }];\n  return <div style={{\n    width: containerWidth\n  }}>\n      <LegendStoryDemo name=\"List mode, placement bottom\" displayMode={LegendDisplayMode.List} seriesCount={seriesCount} placement=\"bottom\" stats={stats} />\n      <LegendStoryDemo name=\"List mode, placement right\" displayMode={LegendDisplayMode.List} seriesCount={seriesCount} placement=\"right\" stats={stats} />\n      <LegendStoryDemo name=\"Table mode\" displayMode={LegendDisplayMode.Table} seriesCount={seriesCount} placement=\"bottom\" stats={stats} />\n    </div>;\n}",...WithValues.parameters?.docs?.source}}}},"../../node_modules/eventemitter3/index.js":function(module){var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},"../../node_modules/eventemitter3/index.mjs":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/eventemitter3/index.js"),_index_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_index_js__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__.A=_index_js__WEBPACK_IMPORTED_MODULE_0___default()},"../../node_modules/rxjs/dist/esm5/internal/Observable.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{c:function(){return Observable}});var Subscriber=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/Subscriber.js"),Subscription=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/Subscription.js"),observable="function"==typeof Symbol&&Symbol.observable||"@@observable";function identity(x){return x}function pipeFromArray(fns){return 0===fns.length?identity:1===fns.length?fns[0]:function piped(input){return fns.reduce((function(prev,fn){return fn(prev)}),input)}}var config=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/config.js"),isFunction=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js"),errorContext=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js"),Observable=function(){function Observable(subscribe){subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var _this=this,subscriber=function isSubscriber(value){return value&&value instanceof Subscriber.vU||function isObserver(value){return value&&(0,isFunction.T)(value.next)&&(0,isFunction.T)(value.error)&&(0,isFunction.T)(value.complete)}(value)&&(0,Subscription.Uv)(value)}(observerOrNext)?observerOrNext:new Subscriber.Ms(observerOrNext,error,complete);return(0,errorContext.Y)((function(){var _a=_this,operator=_a.operator,source=_a.source;subscriber.add(operator?operator.call(subscriber,source):source?_this._subscribe(subscriber):_this._trySubscribe(subscriber))})),subscriber},Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){sink.error(err)}},Observable.prototype.forEach=function(next,promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))((function(resolve,reject){var subscriber=new Subscriber.Ms({next:function(value){try{next(value)}catch(err){reject(err),subscriber.unsubscribe()}},error:reject,complete:resolve});_this.subscribe(subscriber)}))},Observable.prototype._subscribe=function(subscriber){var _a;return null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber)},Observable.prototype[observable]=function(){return this},Observable.prototype.pipe=function(){for(var operations=[],_i=0;_i<arguments.length;_i++)operations[_i]=arguments[_i];return pipeFromArray(operations)(this)},Observable.prototype.toPromise=function(promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))((function(resolve,reject){var value;_this.subscribe((function(x){return value=x}),(function(err){return reject(err)}),(function(){return resolve(value)}))}))},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();function getPromiseCtor(promiseCtor){var _a;return null!==(_a=null!=promiseCtor?promiseCtor:config.$.Promise)&&void 0!==_a?_a:Promise}},"../../node_modules/rxjs/dist/esm5/internal/operators/filter.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{p:function(){return filter}});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");function filter(predicate,thisArg){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.N)((function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__._)(subscriber,(function(value){return predicate.call(thisArg,value,index++)&&subscriber.next(value)})))}))}}}]);